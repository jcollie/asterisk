2012-03-29  Asterisk Development Team <asteriskteam@digium.com>

	* Asterisk 10.3.0 Released.

2012-03-26  Asterisk Development Team <asteriskteam@digium.com>

	* Asterisk 10.3.0-rc3 Released.

	* AST-2012-003

	* AST-2012-002

	* /main/manager.c, include/asterisk/manager.h: Fix AMI deadlock
	  regression by allowing AMI action callback to be reentrant

	  Fix AMI module reload deadlock from ASTERISK-18479 when it tired to
	  fix the race between calling an AMI action callback and
	  unregistering that action.  Refixes ASTERISK-13874 broken by
	  ASTERISK-17785 change.

	  Locking the ao2 object guaranteed that there were no active
	  callbacks that mattered when ast_manager_unregister() was called.
	  Unfortunately, this causes the deadlock situation.  The path stops
	  locking the ao2 object to allow multiple threads to invoke the
	  callback re-entrantly.  There is no way to guarantee a module unload
	  will not crash because of an active callback.  The code attempts to
	  minimize the chance with the registered flag and the maximum 5
	  second delay before ast_manager_unregister() returns.

	  The trunk version of the patch changes the API to fix the race
	  condition correctly to prevent the module code from unloading from
	  memory while an action callback is active.

	  * Don't hold the lock while calling the AMI action callback.

	  (closes issue ASTERISK-19487)
	  Reported by: Philippe Lindheimer

	  Review: https://reviewboard.asterisk.org/r/1818/

2012-03-06  Asterisk Development Team <asteriskteam@digium.com>

	* Asterisk 10.3.0-rc2 Released.

	* main/acl.c: Prevent outbound SIP NOTIFY packets from displaying
	  a port of 0.

	  In the change from 1.6.2 to 1.8, ast_sockaddr was introduced which
	  changed the behavior of ast_find_ourip such that port number was
	  wiped out.  This caused the port in internip (which is used for
	  Contact and Call-ID on NOTIFYs) to be 0.  This change causes
	  ast_find_ourip to be port-preserving again.

2012-01-30 22:16 +0000 [r353369-353321]  Alec L Davis <sivad.a@paradise.net.nz>

	* channels/sip/include/dialog.h, /, channels/chan_sip.c,
	  channels/sip/include/sip.h: Merged revisions 353320 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r353320 | alecdavis | 2012-01-31 10:57:49 +1300 (Tue, 31
	  Jan 2012) | 18 lines RFC3261 Section 8.1.1.5. The sequence number
	  value MUST be expressible as a 32-bit unsigned integer * fix: use
	  %u instead of %d when dealing with CSeq numbers - to remove
	  possibility of -ve numbers. * fix: change all uses of seqno and
	  friends (ocseq icseq) from 'int' or 'unsigned int' to uint32_t.
	  Summary of CSeq numbers. An initial CSeq number must be less than
	  2^31 A CSeq number can increase in value up to 2^32-1 An
	  incrementing CSeq number must not wrap around to 0. Tested with
	  Asterisk 1.8.8.2 with Grandstream phones. alecdavis (license 585)
	  Tested by: alecdavis Review:
	  https://reviewboard.asterisk.org/r/1699/ ........

	* /, channels/chan_sip.c: Merged revisions 353368 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r353368 | alecdavis | 2012-01-31 11:40:40 +1300 (Tue, 31 Jan
	  2012) | 2 lines prevent debug messsges displaying -ve Cseq
	  numbers. Missed in R353320 ........

2012-01-30 23:28 +0000 [r353397]  Terry Wilson <twilson@digium.com>

	* main/dnsmgr.c, /, channels/chan_sip.c, include/asterisk/dnsmgr.h:
	  Re-link peers by IP when dnsmgr changes the IP Asterisk's dnsmgr
	  currently takes a pointer to an ast_sockaddr and updates it
	  anytime an address resolves to something different. There are a
	  couple of issues with this. First, the ast_sockaddr is usually
	  the address of an ast_sockaddr inside a refcounted struct and we
	  never bump the refcount of those structs when using dnsmgr. This
	  makes it possible that a refresh could happen after the
	  destructor for that object is called (despite ast_dnsmgr_release
	  being called in that destructor). Second, the module using dnsmgr
	  cannot be aware of an address changing without polling for it in
	  the code. If an action needs to be taken on address update (like
	  re-linking a SIP peer in the peers_by_ip table), then polling for
	  this change negates many of the benefits of having dnsmgr in the
	  first place. This patch adds a function to the dnsmgr API that
	  calls an update callback instead of blindly updating the address
	  itself. It also moves calls to ast_dnsmgr_release outside of the
	  destructor functions and into cleanup functions that are called
	  when we no longer need the objects and increments the refcount of
	  the objects using dnsmgr since those objects are stored on the
	  ast_dnsmgr_entry struct. A helper function for returning the
	  proper default SIP port (non-tls vs tls) is also added and used.
	  This patch also incorporates changes from a patch posted by Timo
	  Ter√§s to ASTERISK-19106 for related dnsmgr issues. (closes issue
	  ASTERISK-19106) Review: https://reviewboard.asterisk.org/r/1691/
	  ........ Merged revisions 353371 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-31 17:21 +0000 [r353463]  Richard Mudgett <rmudgett@digium.com>

	* main/manager.c, /, include/asterisk/channel.h: Fix memory leak in
	  error paths for action_originate(). * Fix memory leak of vars in
	  error paths for action_originate(). * Moved struct
	  fast_originate_helper tech and data members to stringfields. *
	  Simplified ActionID header handling for fast_originate(). * Added
	  doxygen note to ast_request() and ast_call() and the associated
	  channel callbacks that the data/addr parameters should be treated
	  as const char *. Review: https://reviewboard.asterisk.org/r/1690/
	  ........ Merged revisions 353454 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-01 00:00 +0000 [r353503]  Terry Wilson <twilson@digium.com>

	* res/res_calendar.c, /: Allow res_calendar to be unloaded The
	  calendaring tech modules depend on res_calendar and initially
	  res_calendar just bumped the use count so that it couldn't be
	  unloaded. res_calendar can potentially create many threads and
	  I've seen issues where the Asterisk shutdown has failed where it
	  looked like these threads could be the culprit. This patch adds
	  unload support for res_calendar. Unloading res_calendar will also
	  unload the dependant tech modules as well. (closes issue
	  ASTERISK-16744) Review: https://reviewboard.asterisk.org/r/1657/
	  ........ Merged revisions 353502 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-01 15:05 +0000 [r353551]  Matthew Jordan <mjordan@digium.com>

	* /, contrib/init.d/etc_default_asterisk: Added clarification for
	  the VERBOSITY setting to etc_default_asterisk Clarified that
	  using the VERBOSITY setting in etc_default_asterisk is the same
	  as using the -v command line switch, which causes Asterisk to
	  launch in console mode. (closes issue ASTERISK-17030) Reported
	  by: Jonas ........ Merged revisions 353550 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-01 15:51 +0000 [r353599]  Sean Bright <sean@malleable.com>

	* /, include/asterisk/audiohook.h: Resolve an overlap in the
	  ast_audiohook_flags values. AST_AUDIOHOOK_TRIGGER_WRITE and
	  AST_AUDIOHOOK_WANTS_DTMF were overlapping which may have caused
	  unintended side effects. This patch moves
	  AST_AUDIOHOOK_TRIGGER_WRITE, and updates
	  AST_AUDIOHOOK_TRIGGER_MODE to reflect the original intention.
	  This will affect existing modules that use these flags, so be
	  sure to recompile as necessary. (closes issue ASTERISK-19246)
	  Reported by: feyfre ........ Merged revisions 353598 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-01 21:16 +0000 [r353771-353721]  Jonathan Rose <jrose@digium.com>

	* /, channels/chan_sip.c: Use ast_sockaddr_stringify_fmt wrappers
	  for various functions in chan_sip There are a number of cleaner
	  looking wrappers for ast_sockaddr_stringify_fmt available which
	  are slightly more readable than using a direct call to
	  ast_sockaddr_stringify_fmt. This patch switches a number of those
	  calls in chan_sip to use those wrappers and is generally
	  harmless. (Closes issue ASTERISK-16930) Reported by: Michael L.
	  Young Patches: chan_sip-broken-registration-1.8.diff uploaded by
	  Michael L. Young (license 5026) ........ Merged revisions 353720
	  from http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, channels/chan_sip.c: Fix sip show peers port output, align
	  columns, and fix ami port output. A previous patch I committed
	  from ASTERISK-16930 unexpectedly changed some output for the AMI
	  action "sippeers" which this patch changes back. Also, this
	  aligns the output for the cli command "sip show peers" and fixes
	  another issue that patch introduced by using
	  ast_sockaddr_stringify calls multiple times without immediately
	  using the pointer. I also went ahead and did a little janitorial
	  work to clean up whitespace in _sip_show_peers. (issue
	  ASTERISK-16930) (closes issue ASTERISK-19281) Reported by:
	  Patrick El Youssef Patches: ASTERISK-19281.diff uploaded by
	  Walter Doekes (license 5674) ........ Merged revisions 353769
	  from http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-02 18:48 +0000 [r353820]  Mark Michelson <mmichelson@digium.com>

	* configs/http.conf.sample, main/manager.c, /, main/http.c,
	  configs/manager.conf.sample, include/asterisk/manager.h: Fix TLS
	  port binding behavior as well as reload behavior: * Removes
	  references to tlsbindport from http.conf.sample and
	  manager.conf.sample * Properly bind to port specified in
	  tlsbindaddr, using the default port if specified. * On a reload,
	  properly close socket if the service has been disabled. A note
	  has been added to UPGRADE.txt to indicate how ports must be set
	  for TLS. (closes issue ASTERISK-16959) reported by Olaf
	  Holthausen (closes issue ASTERISK-19201) reported by Chris
	  Mylonas (closes issue ASTERISK-19204) reported by Chris Mylonas
	  Review: https://reviewboard.asterisk.org/r/1709 ........ Merged
	  revisions 353770 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-02 20:11 +0000 [r353868]  Richard Mudgett <rmudgett@digium.com>

	* channels/sig_pri.h, channels/chan_dahdi.c, /, channels/sig_pri.c:
	  Restore the 'w' modifier support for ISDN spans.
	  Dial(DAHDI/g0/1234w888) This feature also causes the sending
	  complete ie to be sent for switch types that do not automatically
	  send the ie. (EuroISDN/ETSI) The main difference between dialing
	  Dial(DAHDI/g0/1234w888) and Dial(DAHDI/g0/1234,,D(888)) is the
	  sending of the sending complete ie. (closes issue ASTERISK-19176)
	  Reported by: rmudgett Tested by: rmudgett ........ Merged
	  revisions 353867 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-02 22:27 +0000 [r353916]  Kinsey Moore <kmoore@digium.com>

	* /, channels/chan_sip.c: Ensure entering T.38 passthrough does not
	  cause an infinite loop After R340970 Asterisk was still polling
	  the RTCP file descriptor after RTCP is shut down and removed. If
	  the descriptor happened to have data ready when the removal
	  occured then Asterisk would go into an infinite loop trying to
	  read data that it can never actually access. This change disables
	  the audio RTCP file descriptor for the duration of the T.38
	  transaction. (closes issue ASTERISK-18951) Reported-by: Kristijan
	  Vrban ........ Merged revisions 353915 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-03 16:22 +0000 [r354000-353962]  Jonathan Rose <jrose@digium.com>

	* res/res_fax.c: Fixes a segfault occuring when performing attended
	  transfer with FAXOPT(gateway)=yes (closes issue ASTERISK-19184)
	  Reported by: Alexandr

	* /, channels/chan_agent.c: Fixes deadlocks occuring in chan_agent
	  due to r335976 Bad locking order was added to chan_agent to
	  prevent segfaults from having no locking in a patch by irroot.
	  This patch addresses the bad locking order by releasing locks
	  before getting the right locking order to stop deadlocks from
	  occuring when doing multiple interactions with agents. (closes
	  issue ASTERISK-19285) Reported by: Alex Villacis Lasso Review:
	  https://reviewboard.asterisk.org/r/1708/ ........ Merged
	  revisions 353999 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-06 17:31 +0000 [r354217-354119]  Richard Mudgett <rmudgett@digium.com>

	* /, main/features.c: Add missing headers to AMI UnParkedCall event
	  to uniquely identify the call. The AMI UnParkedCall event was
	  missing the Parkinglot and Uniqueid headers that the AMI
	  ParkedCall event contains. (closes issue ASTERISK-19240) Reported
	  by: Michael Yara ........ Merged revisions 354116 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, pbx/pbx_config.c: Improved documentation of CLI "dialplan add
	  extension" command. * Documented dialplan add extension
	  <exten>,<priority>,<app(<app-data>)> format. * Allow acceptance
	  of command without the app-data value. There are many
	  applications that do no need any parameters so it is silly to
	  require that field for all commands. * Fixed a couple
	  ast_malloc/ast_free mismatches with ast_add_extension2() calls.
	  (closes issue ASTERISK-19222) Reported by: Andrey Solovyev Tested
	  by: rmudgett ........ Merged revisions 354216 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-07 15:19 +0000 [r354270]  Jonathan Rose <jrose@digium.com>

	* /, cdr/cdr_pgsql.c: Fix column duplication bug in module reload
	  for cdr_pgsql. Prior to this patch, attempts to reload
	  cdr_pgsql.so would cause the column list to keep its current data
	  and then add a second copy during the reload. This would cause
	  attempts to log the CDR to the database to fail. This patch also
	  cleans up some unnecessary null checks for ast_free and deals
	  with a few potential locking problems. (closes issue
	  ASTERISK-19216) Reported by: Jacek Konieczny Review:
	  https://reviewboard.asterisk.org/r/1711/ ........ Merged
	  revisions 354263 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-07 21:17 +0000 [r354349]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c, contrib/realtime/postgresql/realtime.sql:
	  Fix multiple SIP realtime issues 1. Set lastms to 0 when clearing
	  instead of "" 2. Don't set ipaddr or port to the string "(null)"
	  when they are empty 3. Add missing required fields, set default
	  for lastms to 0, and modify the length of the ipaddr field to 45
	  in the Postgresql realtime.sql file. (closes issue
	  ASTERISK-19172) Review: https://reviewboard.asterisk.org/r/1703/
	  ........ Merged revisions 354348 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-09 02:25 +0000 [r354493]  Russell Bryant <russell@russellbryant.com>

	* main/channel.c, /: Remove some unnecessary locking from
	  ast_hangup(). This patch removes some unnecessary locking of the
	  channels container in ast_hangup(). The reason this came up is
	  that this lock can very quickly block the entire system. If any
	  of the channel cleanup code decides to block, it causes a problem
	  for the whole system. For example, when audiohooks get destroyed,
	  if that blocks for a while waiting on the mixmonitor thread to
	  exit because it's busy blocking on some I/O, it causes a problem
	  for many other threads in the meantime. Review:
	  https://reviewboard.asterisk.org/r/1712/ ........ Merged
	  revisions 354492 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-09 02:54 +0000 [r354496]  Richard Mudgett <rmudgett@digium.com>

	* apps/app_parkandannounce.c, /: Fix crash in ParkAndAnnounce.
	  Well, thats embarrasing. I forgot to initialize the caller_id
	  storage. (closes issue ASTERISK-19311) Reported by: tootai Tested
	  by: rmudgett ........ Merged revisions 354495 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-09 16:35 +0000 [r354543]  Matthew Jordan <mjordan@digium.com>

	* /, channels/chan_sip.c: Fix SIP INFO DTMF handling for
	  non-numeric codes In ASTERISK-18924, SIP INFO DTMF handlingw as
	  changed to account for both lowercase alphatbetic DTMF events, as
	  well as uppercase alphabetic DTMF events. When this occurred, the
	  comparison of the character buffer containing the event code was
	  changed such that the buffer was first compared again '0' and '9'
	  to determine if it was numeric. Unfortunately, since the first
	  character in the buffer will typically be '1' in the case of
	  non-numeric event codes (10-16), this caused those codes to be
	  converted to a DTMF event of '1'. This patch fixes that, and
	  cleans up handling of both application/dtmf-relay and
	  application/dtmf content types. Review:
	  https://reviewboard.asterisk.org/r/1722/ (closes issue
	  ASTERISK-19290) Reported by: Ira Emus Tested by: mjordan ........
	  Merged revisions 354542 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-09 17:04 +0000 [r354546]  Mark Michelson <mmichelson@digium.com>

	* /, res/res_fax.c: Adding reload support to res_fax.so (closes
	  issue ASTERISK-16712) reported by Frank DiGennaro Review:
	  https://reviewboard.asterisk.org/r/1713 ........ Merged revisions
	  354545 from http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-09 17:08 +0000 [r354548]  Matthew Jordan <mjordan@digium.com>

	* /, channels/chan_sip.c: Clean-up of minor formatting issues in
	  r354542/3/4 rmudgett pointed out some formatting issues in the
	  check-in for ASTERISK-19290. This cleans those up. Review:
	  https://reviewboards.asterisk.org/r/1722/ ........ Merged
	  revisions 354547 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-09 19:54 +0000 [r354703-354656]  Kinsey Moore <kmoore@digium.com>

	* /, main/config.c: Make the config parser remove escaping
	  backslashes The config parser in Asterisk does not currently
	  remove a backslash that is used to escape a semicolon which would
	  otherwise be interpreted as the start of a comment. The change
	  here causes that backslash to be removed, but does not create a
	  real escape system in the config parser. The biggest complication
	  with a real escape system would be breaking existing configs
	  everywhere (parsing \\ as \ and breaking on escaped non-semicolon
	  characters) even though it would be the "right" way to do things.
	  (closes issue ASTERISK-17121) Review:
	  https://reviewboard.asterisk.org/r/1724/ ........ Merged
	  revisions 354655 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, channels/chan_sip.c: Fix parsing of SIP headers where compact
	  and non-compact headers are mixed Change parsing of SIP headers
	  so that compactness of the header no longer influences which
	  header will be chosen. Previously, a non-compact header would be
	  chosen instead of a preceeding compact-form header. (closes issue
	  ASTERISK-17192) Review: https://reviewboard.asterisk.org/r/1728/
	  ........ Merged revisions 354702 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-09 22:03 +0000 [r354750]  Terry Wilson <twilson@digium.com>

	* /, funcs/func_cdr.c: Note that CDRs are immutable once a bridge
	  is torn down CDRs cannot be modified after a bridge is torn down,
	  (e.g. after Dial() returns) even though the CDR() function may be
	  called. Since modifying the CDR code to change this behavior
	  could very easily break all kinds of things, this patch just
	  documents this limitation. (closes issues ASTERISK-16923) Review:
	  https://reviewboard.asterisk.org/r/1720/ ........ Merged
	  revisions 354749 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-10 18:05 +0000 [r354836]  Richard Mudgett <rmudgett@digium.com>

	* main/manager.c, /: Fix AMI Redirect ExtraChannel not redirecting
	  to the same exten and context. The astman_get_header() never
	  returns NULL so the check by the code for NULL would never fail.
	  (closes issue ASTERISK-16974) Reported by: Nuno Borges Patches:
	  0018325.patch (license #6116) patch uploaded by Nuno Borges
	  (modified) ........ Merged revisions 354835 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-10 22:00 +0000 [r354890]  Jason Parker <jparker@digium.com>

	* apps/app_voicemail.c, /: Fix a voicemail memory leak with
	  heard/deleted messages. open_mailbox() was changed quite a long
	  time ago to allocate this memory. close_mailbox() should have
	  been changed to be responsible for freeing it. ........ Merged
	  revisions 354889 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-13 16:41 +0000 [r354938]  Joshua Colp <jcolp@digium.com>

	* apps/app_confbridge.c: Don't try to play sound files that do not
	  exist. (closes issue ASTERISK-19188) Reported by: slesru

2012-02-13 17:24 +0000 [r354959]  Richard Mudgett <rmudgett@digium.com>

	* res/res_config_pgsql.c, /, configs/extconfig.conf.sample: Fix
	  reconnecting to pgsql database after connection loss. There can
	  only be one database connection in res_config_pgsql just like
	  res_config_sqlite. If the connection is lost, the connection may
	  not get reestablished to the same database if the res_pgsql.conf
	  and extconfig.conf files are inconsistent. * Made only use the
	  configured database from res_pgsql.conf. * Fixed potential buffer
	  overwrite of last[] in config_pgsql(). (closes issue
	  ASTERISK-16982) Reported by: german aracil boned Review:
	  https://reviewboard.asterisk.org/r/1731/ ........ Merged
	  revisions 354953 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-13 19:51 +0000 [r355010]  Joshua Colp <jcolp@digium.com>

	* /, pbx/pbx_config.c: Only allow one 'dialplan reload' to execute
	  at a time as otherwise they would share the same common local
	  context list. (closes issue AST-758) ........ Merged revisions
	  355009 from http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-13 22:03 +0000 [r355057]  Richard Mudgett <rmudgett@digium.com>

	* pbx/pbx_spool.c, /: Fix occasional incorrectly delayed call-file
	  execution. Since the dir timestamp is available at one second
	  resolution, we cannot know if it was updated within the same
	  second after we scanned it. Therefore, we will force another scan
	  if the dir was just modified. * Changed to force another scan if
	  the directory was just modified. (closes issue ASTERISK-19081)
	  Reported by: Knut Bakke Review:
	  https://reviewboard.asterisk.org/r/1688/ ........ Merged
	  revisions 355056 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-14 09:49 +0000 [r355137]  Alexandr Anikin <may@telecom-service.ru>

	* addons/chan_ooh323.c, /: call manager_event only if there is not
	  null channel structure (Closes issue ASTERISK-19298) Reported by:
	  robinfood Patches: issue19298.patch uploaded by may213 (License
	  #5415) ........ Merged revisions 355136 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-14 13:33 +0000 [r355183]  Sean Bright <sean@malleable.com>

	* /, channels/chan_iax2.c: Clear the high order bit from the
	  destination call number before sending. send_apathetic_reply
	  takes the incoming frame's source call number as the destination
	  call number for the outgoing frame. If the incoming frame was a
	  full frame, then the high order bit of the source call number is
	  set and will be interpreted as a retransmit when sent back out as
	  the destination call number. ........ Merged revisions 355182
	  from http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-14 15:53 +0000 [r355229]  Jason Parker <jparker@digium.com>

	* /, configs/cdr_sqlite3_custom.conf.sample: Don't enable sqlite3
	  CDRs by default in sample configs. ........ Merged revisions
	  355228 from http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-14 16:27 +0000 [r355271]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Properly invert the return of a strncmp
	  call. This was causing identification that should have been made
	  private to be public. (closes issue AST-814) reported by Patrick
	  Anderson Patches: chan_sip.c.diff uploaded by Patrick Anderson
	  (license 5430) ........ Merged revisions 355268 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-14 18:14 +0000 [r355375-355320]  Richard Mudgett <rmudgett@digium.com>

	* /, cel/cel_sqlite3_custom.c: Fix lock typo that should be unlock
	  in cel_sqlite_custom reload. (closes issue ASTERISK-19356)
	  Reported by: Alex Villacis Lasso Patches:
	  asterisk-1.8.9.2-cel_sqlite3_custom-fix-reload-locking-typo.patch
	  (license #5617) patch uploaded by Alex Villacis Lasso Review:
	  https://reviewboard.asterisk.org/r/1740/ ........ Merged
	  revisions 355319 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac,
	  formats/format_ogg_vorbis.c: Fix voicemail problems when using
	  ogg/vorbis. Ogg/vorbis was fairly useless as a voicemail file
	  format because it did not implement the seek and tell format
	  callbacks among other problems. Since we were already using the
	  libvorbis and libvorbisenc libraries we can use libvorbisfile as
	  it is also part of the vorbis library package. * Made use the
	  libvorbisfile to handle the ogg/vorbis file stream. The
	  format_ogg_vorbis.c is now mostly a wrapper around libvorbisfile.
	  (closes issue ASTERISK-16926) Reported by: sque Patches:
	  ogg_vorbis_use_libvorbisfile.patch (license #6108) patch uploaded
	  by sque ........ Merged revisions 355365 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-15 17:25 +0000 [r355530-355449]  Sean Bright <sean@malleable.com>

	* /, channels/chan_iax2.c: Use TRUNK_CALL_START as originally
	  intended. Back in r646, TRUNK_CALL_START was added and defined as
	  0x4000. That same value was also hard-coded in one part of the
	  IAX2 code instead of using the #define. TRUNK_CALL_START has
	  changed over the years (for dealing with LOW_MEMORY), but the
	  hard-coded usage was never updated to match. This patch fixes
	  that. ........ Merged revisions 355448 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, channels/chan_iax2.c: Only use maxtrunkcall and
	  maxnontrunkcall in chan_iax2 if IAX_OLD_FIND is specified. These
	  variables are only accessed from the IAX_OLD_FIND path, so there
	  is no reason to keep them updated otherwise. ........ Merged
	  revisions 355458 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, channels/chan_iax2.c: When IAX2 debugging is enabled, make
	  sure to log 'apathetic' messages too. ........ Merged revisions
	  355529 from http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-16 18:32 +0000 [r355620-355575]  Richard Mudgett <rmudgett@digium.com>

	* /, res/res_monitor.c: Fix AMI Monitor action without File header
	  converting channel name into filename. * Fix potential Solaris
	  crash if Monitor application has a urlbase and no fname_base
	  option. ........ Merged revisions 355574 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, configure, include/asterisk/autoconfig.h.in,
	  autoconf/ast_c_declare_check.m4 (added), configure.ac,
	  formats/format_ogg_vorbis.c: Fix compile problem when old version
	  of libvorbisfile v1.1.2 is used. The principle difference between
	  libvorbisfile v1.1.2 and newer (at least v1.2.0) is the addition
	  of the predefined callbacks OV_CALLBACKS_xxx in
	  vorbis/vorbisfile.h used for ov_open_callbacks(). * Updated the
	  configure script to detect if libvorbisfile.h declares
	  OV_CALLBACKS_NOCLOSE. * Copied the declaration of
	  OV_CALLBACKS_NOCLOSE from v1.2.0 to allow v1.1.2 to compile.
	  (closes issue ASTERISK-19370) Reported by: Jonn Taylor ........
	  Merged revisions 355608 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-16 20:01 +0000 [r355623]  Sean Bright <sean@malleable.com>

	* /, main/audiohook.c: Revert a change to
	  audio_audiohook_write_list that had no affect. When I made this
	  change initially, I was under the false impression that the
	  audiohooks structure remained on the channel after all of the
	  hooks had been detached. This is not the case, ast ast_read takes
	  care of removing the audiohooks structure if the lists are empty.
	  ........ Merged revisions 355622 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-17 19:06 +0000 [r355733]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Fix regressions with regards to route-set
	  creation on early dialogs. This fixes two main issues: 1.
	  Asterisk would send a CANCEL to the route created by the
	  provisional response instead of using the same destination it did
	  in the initial INVITE. 2. If a new route set arrives in a 200 OK
	  than was in the 1XX response (perfectly possible if our outbound
	  INVITE gets forked), then the route set in the 200 OK needs to
	  overwrite the route set in the 1XX response. (closes issue
	  ASTERISK-19358) Reported by: Karsten Wemheuer Tested by: Karsten
	  Wemheuer patches: ASTERISK-19358.patch uploaded by Mark Michelson
	  (license 5049) ASTERISK-19358.patch uploaded by Stefan Schmidt
	  (license 6034) Review: https://reviewboard.asterisk.org/r/1749
	  ........ Merged revisions 355732 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-17 19:34 +0000 [r355794-355747]  Sean Bright <sean@malleable.com>

	* /, channels/chan_iax2.c: Pass the correct value to
	  ast_timer_set_rate() for IAX2 trunking. IAX2 uses the trunkfreq
	  variable to determine how often to send trunk packets, but this
	  value is in milliseconds while ast_timer_set_rate() expects the
	  rate argument to be ticks per second. So we divide 1000 by
	  trunkfreq and pass that in instead. With a default of 20ms, this
	  change makes IAX2 send trunk packets every 20ms instead of every
	  50ms. Tracked down by myself and Bob Wienholt. ........ Merged
	  revisions 355746 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* configs/iax.conf.sample, /, channels/chan_iax2.c: Don't allow
	  trunkfreq to be greater than 1000ms. ........ Merged revisions
	  355793 from http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-18 07:58 +0000 [r355851]  Alec L Davis <sivad.a@paradise.net.nz>

	* channels/sig_pri.h, channels/chan_dahdi.c, channels/sig_analog.c,
	  channels/sig_ss7.h, /, channels/sig_analog.h, channels/sig_pri.c,
	  channels/sig_ss7.c: push 'outgoing' flag from sig_XXX up to
	  chan_dahdi 'p->outgoing' in chan_dahdi and sig_analog wern't kept
	  in sync, particulary FXS ast_hangup didn't clear the 'outgoing'
	  flag. sig_pri and sig_ss7 were keeping 'outgoing' flag insync.
	  Now provides a callback for all the low level sig_XXX modules.
	  (issue ASTERISK-19316) alecdavis (license 585) Reported by:
	  Jeremy Pepper Tested by: alecdavis Review:
	  https://reviewboard.asterisk.org/r/1747/ ........ Merged
	  revisions 355850 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-18 17:02 +0000 [r355896-355895]  Paul Belanger <pabelanger@digium.com>

	* /: Fix -Werror=unused-but-set-variable compiler error (gcc 4.6.2)
	  ........ Merged revisions 355839 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /: Revert commit

2012-02-19 17:50 +0000 [r355998-355902]  Sean Bright <sean@malleable.com>

	* /, channels/chan_iax2.c: Set the length of the ast_sockaddr, so
	  that we can set it's port later. Without this, the call to
	  ast_sockaddr_set_port a few lines later is a noop. ........
	  Merged revisions 355901 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, channels/chan_iax2.c: Add some boilerplate documentation for
	  IAXVAR and IAXPEER. ........ Merged revisions 355904 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* channels/chan_dahdi.c, /: Change some debug messages from
	  LOG_DEBUG to ast_debug. ........ Merged revisions 355949 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* channels/chan_dahdi.c, /: This was a LOG_NOTICE, so roll it back.
	  ........ Merged revisions 355952 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, channels/chan_iax2.c: Remove spurious warning when
	  'qualifyfreqnotok' is set successfully. (closes issue
	  ASTERISK-17176) Reported by: John Covert Tested by: Sean Bright
	  Patches: chan_iax2.c.qualifyfreqnotok.patch uploaded by John
	  Covert (license 5512) ........ Merged revisions 355997 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-21 04:30 +0000 [r356074]  Kinsey Moore <kmoore@digium.com>

	* main/ccss.c: Add missing newline to ccss state change
	  notification Move along, nothing to see here...

2012-02-21 11:17 +0000 [r356108]  Sean Bright <sean@malleable.com>

	* /, channels/chan_iax2.c: Make 'iax2 show callnumber usage' output
	  make sense when an IP is passed in. ........ Merged revisions
	  356107 from http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-22 14:53 +0000 [r356215]  Matthew Jordan <mjordan@digium.com>

	* /, channels/chan_sip.c: Merged revisions 356214 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r356214 | mjordan | 2012-02-22 08:50:20 -0600 (Wed, 22 Feb 2012)
	  | 27 lines Fix potential buffer overrun and memory leak when
	  executing "sip show peers" The "sip show peers" command uses a
	  fix sized array to sort the current peers in the peers
	  ao2_container. The size of the array is based on the current
	  number of peers in the container. However, once the size of the
	  array is determined, the number of peers in the container can
	  change, as the peers container is not locked. This could cause a
	  buffer overrun when populating the array, if peers were added to
	  the container after the array was created. Additionally, a memory
	  leak of the allocated array would occur if a user caused the
	  _show_peers method to return CLI_SHOWUSAGE. We now create a
	  snapshot of the current peers using an ao2_callback with the
	  OBJ_MULTIPLE flag. This size of the array is set to the number of
	  peers that the iterator will iterate over; hence, if peers are
	  added or removed from the peers container it will not affect the
	  execution of the "sip show peers" command. Review:
	  https://reviewboard.asterisk.org/r/1738/ (closes issue
	  ASTERISK-19231) (closes issue ASTERISK-19361) Reported by: Thomas
	  Arimont, Jamuel Starkey Tested by: Thomas Arimont, Jamuel Starkey
	  Patches: sip_show_peers_2012_02_16.diff uploaded by mjordan
	  (license 6283) ........

2012-02-22 21:18 +0000 [r356297]  Terry Wilson <twilson@digium.com>

	* main/loader.c, res/res_calendar.c, /,
	  include/asterisk/calendar.h: Track module use count for
	  res_calendar If the res_calendar module was followed immediately
	  by one of the calendar tech modules and "core stop gracefully"
	  was run, Asterisk would crash. This patch adds use count tracking
	  for res_calendar so that it is unloaded after the tech modules
	  when shutting down gracefully. It is now not possible to unload
	  all the of the calendar modules via "module unload
	  res_calednar.so", but it is still possible to unload them all via
	  "module unload -h res_calendar.so". Review:
	  https://reviewboard.asterisk.org/r/1752/ ........ Merged
	  revisions 356291 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-23 03:23 +0000 [r356431-356428]  Paul Belanger <pabelanger@digium.com>

	* /, apps/app_rpt.c: Multiple revisions 356290,356335,356337
	  ........ r356290 | pabelanger | 2012-02-22 15:20:29 -0500 (Wed,
	  22 Feb 2012) | 4 lines Fix -Werror=unused-but-set-variable
	  compiler error (gcc 4.6.2) Review:
	  https://reviewboard.asterisk.org/r/1763/ ........ r356335 |
	  pabelanger | 2012-02-22 16:29:25 -0500 (Wed, 22 Feb 2012) | 2
	  lines Add back strsep() function for previous commit ........
	  r356337 | pabelanger | 2012-02-22 16:36:37 -0500 (Wed, 22 Feb
	  2012) | 2 lines Missed one strsep() function ........ Merged
	  revisions 356290,356335,356337 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* addons/chan_ooh323.c, /: Fix -Werror=unused-but-set-variable
	  compiler error (gcc 4.6.2) ........ Merged revisions 356430 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-23 15:40 +0000 [r356476]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Fix ACK routing for non-2xx responses.
	  When we send an ACK for a 2xx response to an INVITE, we are
	  supposed to use the learned route set. However, when we receive a
	  non-2xx final response to an INVITE, we are supposed to send the
	  ACK to the same place we initially sent the INVITE. We had been
	  doing this up until the changes went in that would build a route
	  set from provisional responses. That introduced a regression
	  where we would use the learned route set under all circumstances.
	  With this change, we now will set the destination of our ACK
	  based on the invitestate. If it is INV_COMPLETED then that means
	  that we have received a non-2xx final response (INV_TERMINATED
	  indicates a 2xx response was received). If it is INV_CANCELLED,
	  then that means the call is being canceled, which means that we
	  should be ACKing a 487 response. The other change introduced here
	  is setting the invitestate to INV_CONFIRMED when we send an ACK
	  *after* the reqprep instead of before. This way, we can tell in
	  reqprep more easily what the invitestate is prior to sending the
	  ACK. (closes issue ASTERISK-19389) reported by Karsten Wemheuer
	  patches: ASTERISK-19389v2.patch uploaded by Mark Michelson
	  (license #5049) (with some slight modifications prior to commit)
	  ........ Merged revisions 356475 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-23 19:52 +0000 [r356522]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/chan_sip.c, main/features.c: Fix blind transfer
	  parking issues if the dialed extension is not recognized as a
	  parking extension. Custom parking extensions may not be coded
	  such that the first and only extension priority is the Park
	  application. These custom parking extensions will not be
	  recognized as parking extensions. When a call is blind
	  transferred to an extension that is not recognized as a parking
	  extension, the normal blind transfer code causes the transferred
	  channel to start executing dialplan. Calls that get parked in
	  this manner do not know the original channel name that parked the
	  call so the original parker could never be called back if the
	  parked call is not retrieved before the timeout time. The parking
	  space is also announced to the call being parked as a side effect
	  of not knowing the original parking channel. * Fix handling of
	  BLINDTRANSFER channel variable for call parking. * Fixed SIP
	  blind transfer using the wrong dialplan context variable to check
	  for the parking extension. (closes issue ASTERISK-19322) Reported
	  by: aragon Tested by: rmudgett, jparker Review:
	  https://reviewboard.asterisk.org/r/1730/ JIRA AST-766 ........
	  Merged revisions 356521 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-24 15:07 +0000 [r356651-356605]  Matthew Jordan <mjordan@digium.com>

	* res/res_srtp.c, channels/sip/sdp_crypto.c,
	  include/asterisk/res_srtp.h, main/rtp_engine.c, /,
	  include/asterisk/rtp_engine.h: Allow SRTP policies to be reloaded
	  Currently, when using res_srtp, once the SRTP policy has been
	  added to the current session the policy is locked into place. Any
	  attempt to replace an existing policy, which would be needed if
	  the remote endpoint negotiated a new cryptographic key, is
	  instead rejected in res_srtp. This happens in particular in
	  transfer scenarios, where the endpoint that Asterisk is
	  communicating with changes but uses the same RTP session. This
	  patch modifies res_srtp to allow remote and local policies to be
	  reloaded in the underlying SRTP library. From the perspective of
	  users of the SRTP API, the only change is that the adding of
	  remote and local policies are now added in a single method call,
	  whereas they previously were added separately. This was changed
	  to account for the differences in handling remote and local
	  policies in libsrtp. Review:
	  https://reviewboard.asterisk.org/r/1741/ (closes issue
	  ASTERISK-19253) Reported by: Thomas Arimont Tested by: Thomas
	  Arimont Patches: srtp_renew_keys_2012_02_22.diff uploaded by Matt
	  Jordan (license 6283) (with some small modifications for this
	  check-in) ........ Merged revisions 356604 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* res/res_srtp.c, /: Remove srtp_shutdown from res_srtp The patch
	  for ASTERISK-19253 included properly shutting down the libsrtp
	  library in the case of module unload. Unfortunately, not all
	  distributions have the srtp_shutdown call. As such, this patch
	  removes calling srtp_shutdown. ........ Merged revisions 356650
	  from http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-24 18:27 +0000 [r356690]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/chan_sip.c, include/asterisk/tcptls.h,
	  channels/sip/include/sip.h: Fix worker thread resource leak in
	  SIP TCP/TLS. The SIP TCP/TLS worker threads were created joinable
	  but noone could join them if they died on their own. * Fix the
	  SIP TCP/TLS worker threads to not be created joinable. *
	  _sip_tcp_helper_thread() only needs one parameter since the pvt
	  parameter is only passed in as NULL and never used. (closes issue
	  ASTERISK-19203) Reported by: Steve Davies Review:
	  https://reviewboard.asterisk.org/r/1714/ ........ Merged
	  revisions 356677 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-25 17:22 +0000 [r356798]  Matthew Jordan <mjordan@digium.com>

	* apps/app_voicemail.c, /: Fix crash in app_voicemail during
	  close_mailbox In r354890, a memory leak in app_voicemail was
	  fixed by properly disposing of the allocated heard/deleted
	  pointers. However, there are situations, particularly when no
	  messages are found in a folder, where these pointers are not
	  allocated and not NULL. In that case, an invalid free would be
	  attempted, which could crash app_voicemail. As there are a number
	  of code paths where this could occur, this patch uses the number
	  of messages detected in the folder before it attempts to free the
	  pointers. This resolves the crash detected in the Asterisk Test
	  Suite's check_voicemail_nominal test. ........ Merged revisions
	  356797 from http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-27 15:30 +0000 [r356961]  Jonathan Rose <jrose@digium.com>

	* /, res/res_odbc.c: Remove possible segfaults from res_odbc by
	  adding locks around usage of odbc handle (closes issue
	  ASTERISK-19011) Reported by: Walter Doekes Patches:
	  issueA19011_combine_read_and_write_locks_WORK_IN_PROGRESS.patch
	  uploaded by Walter Doekes (license 5674) review:
	  https://reviewboard.asterisk.org/r/1719/ review:
	  https://reviewboard.asterisk.org/r/1622/ ........ Merged
	  revisions 356917 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-27 16:05 +0000 [r356964]  Terry Wilson <twilson@digium.com>

	* /, main/features.c: Copy CDR variables when set during a bridge
	  This patch makes sure amaflags, accountcode, and userfield get
	  copied to the bridge CDR when set during a bridge (like via a
	  custom feature). (closes issue ASTERISK-16990) Review:
	  https://reviewboard.asterisk.org/r/1721/ ........ Merged
	  revisions 356963 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-02-27 23:36 +0000 [r357095]  Richard Mudgett <rmudgett@digium.com>

	* main/channel.c, /: Fix callerid of Originated calls. Thanks to
	  Matt Riddell for tracking this down. (closes issue
	  ASTERISK-19385) Reported by: ornix ........ Merged revisions
	  357093 from http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-03-05  Asterisk Development Team <asteriskteam@digium.com>

	* Asterisk 10.2.0 Released.

2012-03-01  Asterisk Development Team <asteriskteam@digium.com>

	* Asterisk 10.2.0-rc4 Released.

	* main/acl.c: Prevent outbound SIP NOTIFY packets from displaying a
	  port of 0.

	  In the change from 1.6.2 to 1.8, ast_sockaddr was introduced which
	  changed the behavior of ast_find_ourip such that port number was
	  wiped out.  This caused the port in internip (which is used for
	  Contact and Call-ID on NOTIFYs) to be 0.  This change causes
	  ast_find_ourip to be port-preserving again.

2012-02-28  Asterisk Development Team <asteriskteam@digium.com>

	* Asterisk 10.2.0-rc3 Released.

	* main/channel.c: Fix callerid of Originated calls.

	  The callerid of originated calls (independent of mechanism) was not
	  being passed to the outbound channel.  This patch fixes that.  Thanks
	  to Matt Riddell for tracking this down.
	  (closes issue ASTERISK-19385)
	  Reported by: ornix

	* channels/chan_sip.c: Fix ACK routing for non-2xx responses.

	  When we send an ACK for a 2xx response to an INVITE, we are supposed
	  to use the learned route set. However, when we receive a non-2xx
	  final response to an INVITE, we are supposed to send the ACK to the
	  same place we initially sent the INVITE.

	  We had been doing this up until the changes went in that would build
	  a route set from provisional responses. That introduced a regression
	  where we would use the learned route set under all circumstances.

	  With this change, we now will set the destination of our ACK based on
	  the invitestate. If it is INV_COMPLETED then that means that we have
	  received a non-2xx final response (INV_TERMINATED indicates a 2xx
	  response was received).  If it is INV_CANCELLED, then that means the
	  call is being canceled, which means that we should be ACKing a 487
	  response.

	  The other change introduced here is setting the invitestate to
	  INV_CONFIRMED when we send an ACK *after* the reqprep instead of
	  before. This way, we can tell in reqprep more easily what the
	  invitestate is prior to sending the ACK.

	  (closes issue ASTERISK-19389)
 	  reported by Karsten Wemheuer
	  patches:
	    ASTERISK-19389v2.patch uploaded by Mark Michelson (license #5049)

	* channels/chan_sip.c: Fix regressions with regards to route-set
	  creation on early dialogs.

	  This fixes two main issues:
	  1. Asterisk would send a CANCEL to the route created by the provisional
	     response instead of using the same destination it did in the initial
	     INVITE.
	  2. If a new route set arrives in a 200 OK than was in the 1XX response
	     (perfectly possible if our outbound INVITE gets forked), then the
	     route set in the 200 OK needs to overwrite the route set in the 1XX
	     response.
	  (closes issue ASTERISK-19358)
	  Reported by: Karsten Wemheuer
	  Tested by: Karsten Wemheuer
	  patches:
	   ASTERISK-19358.patch uploaded by Mark Michelson (license 5049)
	   ASTERISK-19358.patch uploaded by Stefan Schmidt (license 6034)

 	  Review: https://reviewboard.asterisk.org/r/1749


2012-02-10  Asterisk Development Team <asteriskteam@digium.com>

	* Asterisk 10.2.0-rc2 Released.

	* channels/chan_sip.c: Fix SIP INFO DTMF handling for non-numeric
	  codes. In ASTERISK-18924, SIP INFO DTMF handling was changed to
	  account for both lowercase alphatbetic DTMF events, as well as
	  uppercase alphabetic DTMF events.  When this occurred, the comparison
	  of the character buffer containing the event code was changed such
	  that the buffer was first compared against '0' and '9' to determine if
	  it was numeric.  Unfortunately, since the first character in the
	  buffer will typically be '1' in the case of non-numeric event codes
	  (10-16), this caused those codes to be converted to a DTMF event of
	  '1'.  This patch fixes that, and cleans up handling of both
	  application/dtmf-relay and application/dtmf content types.
	  Review: https://reviewboard.asterisk.org/r/1722/
	  (closes issue ASTERISK-19290) Reported by: Ira Emus
	  Tested by: mjordan

	* apps/app_parkandannounce.c: Fix crash in ParkAndAnnounce from
	  uninitialized caller_id storage (closes issue ASTERISK-19311)
	  Reported by: tootai 
	  Tested by: rmudgett

	* channels/chan_agent.c: Fixes deadlocks occuring in chan_agent due to
	  r335976. Bad locking order was added to chan_agent to prevent
	  segfaults from having no locking in a patch by irroot. This patch
	  addresses the bad locking order by releasing locks before getting the
	  right locking order to stop deadlocks from occuring when doing
	  multiple interactions with agents. (closes issue ASTERISK-19285)
	  Reported by: Alex Villacis Lasso
	  Review: https://reviewboard.asterisk.org/r/1708/

	* channels/chan_sip.c: Ensure entering T.38 passthrough does not cause
	  an infinite loop. After R340970 Asterisk was still polling the RTCP
	  file descriptor after RTCP is shut down and removed. If the
	  descriptor happened to have data ready when the removal occured then
	  Asterisk would go into an infinite loop trying to read data that it
	  can never actually access. This change disables the audio RTCP file
	  descriptor for the duration of the T.38 transaction. (closes issue
	  ASTERISK-18951) Reported-by: Kristijan Vrban

	* channels/chan_sip.c,include/asterisk/dnsmgr.h,main/dnsmgr.c: Re-link
	  peers by IP when dnsmgr changes the IP  Asterisk's dnsmgr currently
	  takes a pointer to an ast_sockaddr and updates it anytime an address
	  resolves to something different. There are a couple of issues with
	  this. First, the ast_sockaddr is usually the address of an ast_sockaddr
	  inside a refcounted struct and we never bump the refcount of those
	  structs when using dnsmgr. This makes it possible that a refresh could
	  happen after the destructor for that object is called (despite 
	  ast_dnsmgr_release being called in that destructor). Second, the
	  module using dnsmgr cannot be aware of an address changing without
	  polling for it in the code. If an action needs to be taken on address
	  update (like re-linking a SIP peer in the peers_by_ip table), then
	  polling for this change negates many of the benefits of having dnsmgr
	  in the first place.

2012-02-01  Asterisk Development Team <asteriskteam@digium.com>

	* Asterisk 10.2.0-rc1 Released.

	* Test results:
	  http://bamboo.asterisk.org/browse/TESTING-ASTERISK1020RCS-2

2012-01-30 12:48 +0000 [r353261]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/chan_sip.c: Clarify log WARNING message when
	  port-zero SDP 'm' lines received. Previously, if an m-line in an
	  SDP offer or answer had a port number of zero, that line was
	  skipped, and resulted in an 'Unsupported SDP media type...'
	  warning message. This was misleading, as the media type was not
	  unsupported, but was ignored because the m-line indicated that
	  the media stream had been rejected (in an answer) or was not
	  going to be used (in an offer). ........ Merged revisions 353260
	  from http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-29 02:44 +0000 [r353176]  Russell Bryant <russell@russellbryant.com>

	* main/netsock.c, /: Find even more network interfaces. The
	  previous change made the code look for emN and pciN in addition
	  to what it did originally, which was search for ethN. However, it
	  needed to be looking for pciN#N, so that's what it does now. This
	  also moves the memset() to be before every ioctl(). ........
	  Merged revisions 353175 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-28 14:51 +0000 [r353127]  Kevin P. Fleming <kpfleming@digium.com>

	* main/rtp_engine.c, /: Add 'L16-256' MIME subtype alias for
	  slin16. Asterisk has supported the 'L16' MIME subtype for 16kHz
	  signed linear (PCM) audio for quite some time, but some endpoints
	  refer to it as 'L16-256'. This commit adds this as an alias for
	  the existing format. ........ Merged revisions 353126 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-28 04:27 +0000 [r353078]  Russell Bryant <russell@russellbryant.com>

	* main/netsock.c, /: Update ast_set_default_eid() to find more
	  network interfaces. As of Fedora 15, ethN is not the name of
	  ethernet interfaces. The names are emN or pciN. Update some code
	  that searched for interfaces named ethN to look for the new
	  names, as well. For more information about why this change was
	  made, see this page: http://domsch.com/blog/?p=455 ........
	  Merged revisions 353077 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-27 21:37 +0000 [r352992-353039]  Richard Mudgett <rmudgett@digium.com>

	* apps/app_queue.c: Audit of ao2_iterator_init() usage for v10.
	  Missed one.

	* tests/test_format_api.c: Audit of ao2_iterator_init() usage for
	  v10. Fix double format_cap iterator cleanup.

2012-01-27 19:19 +0000 [r352965]  Jonathan Rose <jrose@digium.com>

	* /, res/res_monitor.c: Make failed PauseMonitor and UnpauseMonitor
	  with no valid channel not close AMI session. I also went ahead
	  and took a little time to make sure that the manager value
	  AMI_SUCCESS was used instead of just return 0 being thrown around
	  everywhere since that's how we handle this stuff these days.
	  (closes issue ASTERISK-19249) Reporter: Jamuel Starkey Patches:
	  res_monitor.c-ASTERISK-19249.diff uploaded by Jamuel Starkey
	  (license 5766) ........ Merged revisions 352959 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-27 18:36 +0000 [r352956]  Richard Mudgett <rmudgett@digium.com>

	* res/res_srtp.c, main/pbx.c, /, channels/chan_sip.c,
	  include/asterisk/indications.h, res/snmp/agent.c,
	  main/taskprocessor.c, apps/app_queue.c, channels/chan_iax2.c,
	  apps/app_chanspy.c, main/indications.c, res/res_odbc.c: Audit of
	  ao2_iterator_init() usage for v1.8. Fixes numerous reference
	  leaks and missing ao2_iterator_destroy() calls as a result.
	  Review: https://reviewboard.asterisk.org/r/1697/ ........ Merged
	  revisions 352955 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-27 00:08 +0000 [r352863]  Alec L Davis <sivad.a@paradise.net.nz>

	* /, channels/chan_sip.c, channels/sip/include/sip.h: Merged
	  revisions 352862 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r352862 | alecdavis | 2012-01-27 13:05:30 +1300 (Fri, 27 Jan
	  2012) | 12 lines rfc4235 - Section 4.1: Versions MUST be
	  representable using a non-negative 32 bit integer. If a BLF
	  subscription exists for long enough, using %d may print negative
	  version numbers. Unlikely, as 2^32 at 1 update per second is ~137
	  years, or half that before the versions number started going
	  negative. Tested with Asterisk 1.8.8.2 with Grandstream phones.
	  alecdavis (license 585) Tested by: alecdavis Review:
	  https://reviewboard.asterisk.org/r/1694/ ........

2012-01-26 20:22 +0000 [r352817]  Alexandr Anikin <may@telecom-service.ru>

	* addons/chan_ooh323.c, /: Fix outbound DTMF for inband mode (tell
	  asterisk core to generate DTMF sounds). (Closes issue
	  ASTERISK-19233) Reported by: Matt Behrens Patches:
	  chan_ooh323.c.patch uploaded by Matt Behrens (License #6346)
	  ........ Merged revisions 352807 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-26 19:07 +0000 [r352756]  Jonathan Rose <jrose@digium.com>

	* /, channels/chan_sip.c: Copy amaflags to sip_pvt from peer during
	  create_addr_from_peer For whatever reason, we don't have a single
	  function for copying data like this from SIP peers to the SIP
	  pvt. This patch adds the copying of amaflags to the sip_pvt, but
	  it would probably be worth discussing this function along with
	  the others that essentially just copy some amount of data from a
	  peer to a private. (Closes issue ASTERISK-19029) Reported by:
	  Matt Lehner ........ Merged revisions 352755 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-26 06:33 +0000 [r352705]  Alec L Davis <sivad.a@paradise.net.nz>

	* /, channels/chan_sip.c: Merged revisions 352704 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r352704 | alecdavis | 2012-01-26 19:27:07 +1300 (Thu, 26 Jan
	  2012) | 20 lines Cleanup dialog-info+xml Notify dialog Make
	  similar to other Notify messages. sample output: <?xml
	  version="1.0"?> <dialog-info
	  xmlns="urn:ietf:params:xml:ns:dialog-info" version="715"
	  state="full" entity="sip:8523@192.168.x.xx"> <dialog id="8523">
	  <state>terminated</state> </dialog> </dialog-info> Tested with
	  Asterisk 1.8.8.2 with Grandstream phones. alecdavis (license 585)
	  Tested by: alecdavis Review:
	  https://reviewboard.asterisk.org/r/1693/ ........

2012-01-25 22:23 +0000 [r352651]  Paul Belanger <pabelanger@digium.com>

	* apps/app_voicemail.c, /: Fix -Werror=unused-but-set-variable
	  compiler error (gcc 4.6.2) ........ Merged revisions 352643 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-25 21:18 +0000 [r352616]  Kevin P. Fleming <kpfleming@digium.com>

	* /, main/test.c: Avoid unnecessary rebuilds of main/test.c.
	  main/test.c includes "asterisk/version.h", when it should include
	  "asterisk/ast_version.h" instead (and it should use the
	  ast_get_version() and ast_get_version_num() functions). This
	  commit modifies it to extract the Asterisk version information
	  using the proper APIs, and as a result means that main/test.c no
	  longer needs to be rebuilt when a Subversion checkout is updated
	  or modified. ........ Merged revisions 352612 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-25 17:30 +0000 [r352556]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Remove some extraneous debugging from
	  registry memleak fix ........ Merged revisions 352551 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-25 17:16 +0000 [r352520]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_sip.c, CHANGES, main/message.c,
	  channels/sip/include/sip.h: Fixes for sending SIP MESSAGE outside
	  of calls. * Fix authenticate MESSAGE losing custom headers added
	  by the MESSAGE_DATA function in the authorization attempt. * Pass
	  up better From header contents for SIP to use. Now is in the
	  "display-name" <URI> format expected by MessageSend. (Note that
	  this is a behavior change that could concievably affect some
	  people.) * Block user from adding standard headers that are added
	  automatically. (To, From,...) * Allow the user to override the
	  Content-Type header contents sent by MessageSend. * Decrement
	  Max-Forwards header if the user transferred it from an incoming
	  message. * Expand SIP short header names so the dialplan and
	  other code only has to deal with the full names. * Documents what
	  SIP expects in the MessageSend(from) parameter. (closes issue
	  ASTERISK-18992) Reported by: Yuri (closes issue ASTERISK-18917)
	  Reported by: Shaun Clark Review:
	  https://reviewboard.asterisk.org/r/1683/

2012-01-25 16:54 +0000 [r352516]  Kevin P. Fleming <kpfleming@digium.com>

	* main/format.c, main/format_cap.c, main/format_pref.c: Eliminate
	  unnecessary rebuilds of main/format*.c. These files have no need
	  to include "asterisk/version.h", and doing so forces them to be
	  rebuilt each time a Subversion checkout moves between 'modified'
	  and 'unmodified' states.

2012-01-25 16:49 +0000 [r352515]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Clean up some SIP registry-related memory
	  leaks 1) Be sure and free at unload the epa_backend we allocate
	  at startup 2) Do the same sip_registry cleanup at unload we do at
	  reload Review: https://reviewboard.asterisk.org/r/1689/ ........
	  Merged revisions 352514 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-25 16:41 +0000 [r352512]  Jonathan Rose <jrose@digium.com>

	* /, configs/sip.conf.sample: Redocuments sip types peer, user,
	  friend in sip.conf.sample There was faulty information in the
	  sample config describing user as a synonym for friend so it has
	  been changed to better elaborate on the differences between the
	  three entity types. (closes issue ASTERISK-15537) Reported by:
	  yarique ........ Merged revisions 352511 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-24 22:22 +0000 [r352430]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Don't do a DNS lookup on an outbound
	  REGISTER host if there is an outbound proxy configured. (closes
	  issue ASTERISK-16550) reported by: Olle Johansson ........ Merged
	  revisions 352424 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-24 20:35 +0000 [r352373]  Jonathan Rose <jrose@digium.com>

	* /, sounds/Makefile: Set core sounds version to 1.4.22. Now that
	  we have the right license for the Russian 1.4.22 sounds as well
	  as the sounds for the Australian English 1.4.22 sounds, we can
	  finally set the sounds to use 1.4.22! (closes issue
	  ASTERISK-18978) Reported by: Cameron Twomey Patches:
	  confbridge.tar.001 uploaded by Cameron Twomey confbridge.tar.002
	  uploaded by Cameron Twomey ........ Merged revisions 352367 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-24 17:02 +0000 [r352292]  Richard Mudgett <rmudgett@digium.com>

	* /, funcs/func_odbc.c: Fix locking issues with channel datastores
	  in func_odbc.c. * Fixed a potential memory leak when an existing
	  datastore is manually destroyed by inline code instead of calling
	  ast_datastore_free(). (closes issue ASTERISK-17948) Reported by:
	  Archie Cobbs Review: https://reviewboard.asterisk.org/r/1687/
	  ........ Merged revisions 352291 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-23 20:30 +0000 [r352228-352231]  Mark Michelson <mmichelson@digium.com>

	* /, main/features.c: Fix grammar of comment. ........ Merged
	  revisions 352230 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, main/features.c: Fix blind transfers from failing if an 'h'
	  extension is present. This prevents the 'h' extension from being
	  run on the transferee channel when it is transferred via a native
	  transfer mechanism such as SIP REFER. (closes ASTERISK-19173)
	  Reported by: Ross Beer Tested by: Kristjan Vrban Patches:
	  ASTERISK-19173 by Mark Michelson (license 5049) Review:
	  https://reviewboard.asterisk.org/r/1685 ........ Merged revisions
	  352199 from http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-23 19:18 +0000 [r352149]  Matthew Jordan <mjordan@digium.com>

	* /, res/res_fax_spandsp.c: Correctly apply FAXOPT settings (V17,
	  V27, V29) before starting spandsp layer While the FAXOPT function
	  could be used to set the modem capabilities, the input to that
	  function was not being applied correctly to the spandsp layer.
	  This patch applies the current model capabilities before starting
	  the spandsp layer. (closes issue: ASTERISK-16409) Reported by:
	  Kristijan Vrban Tested by: Matt Jordan, Matthew Nicholson
	  Patches: spandsp-modems-1.8.diff uploaded by mnicholson (license
	  5081) spandsp-modems-10.diff uploaded by mnicholson (license
	  5081) ........ Merged revisions 352144 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-23 17:34 +0000 [r352091]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/chan_sip.c: Fix sip_cfg.notifycid to be set with the
	  defined enum values. The invalid value used when notifycid was
	  enabled was benign. As far as the code was concerned -1 and 1 are
	  equivalent. (closes issue ASTERISK-19232) Reported by: Eike
	  Kuiper ........ Merged revisions 352090 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-21 00:21 +0000 [r352035]  Richard Mudgett <rmudgett@digium.com>

	* /, funcs/func_timeout.c, main/app.c: Fix ast_app_dtget() time
	  unit inconsistency. Note: Noone calls ast_app_dtget() with the
	  timeout parameter of zero so the bad code normally will never get
	  executed. * Fix unnecessary floating point division in
	  func_timeout.c timeout_write() when all other values are
	  integers. (closes issue ASTERISK-16817) Reported by: Dmitry
	  Andrianov ........ Merged revisions 352029 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-21 00:08 +0000 [r352015-352017]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Remove XXX comment that is not necessary.
	  ........ Merged revisions 352016 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, channels/chan_sip.c: Fix RTP reference leak. If a blind
	  transfer were initiated using a REFER without a prior reINVITE to
	  place the call on hold, AND if Asterisk were sending RTCP
	  reports, then there was a reference for the RTP instance of the
	  transferer. This fixes the issue by merging two similar but
	  slightly conflicting sections of code into a single area. It also
	  adds a stop_media_flows() call in the case that the transferer's
	  UA never sends a BYE to us like it is supposed to. (issue
	  ASTERISK-19192) Review: https://reviewboard.asterisk.org/r/1681/
	  ........ Merged revisions 352014 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-20 19:35 +0000 [r351816-351861]  Kinsey Moore <kmoore@digium.com>

	* /, codecs/ilbc/iLBC_test.c: More corrections for the ilbc code
	  These changes are in a file that is not compiled by default, and
	  so were missed on earlier checks. ........ Merged revisions
	  351860 from http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /: Recorded merge of revisions 351858 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8 ........ Allow
	  ilbc code to build under dev mode GCC 4.6.3 found some set/unused
	  variables in the ILBC code.

	* codecs/ilbc/LPCencode.c, codecs/ilbc/iLBC_decode.c: Restore
	  LSF_check function calls from set/unused variable removal These
	  functions are not noops and modify the array that is passed in.
	  Thanks for the catch Richard.

	* codecs/ilbc/LPCencode.c, codecs/ilbc/iLBC_decode.c: Remove more
	  set, but unused variables in the ilbc codec GCC 4.6.3 caught
	  these in dev mode as well.

2012-01-20 15:59 +0000 [r351762]  Jonathan Rose <jrose@digium.com>

	* /, channels/chan_sip.c: Adds setting of mwi_from field to
	  check_auth_result check_peer_ok (closes ASTERISK-19057) Reported
	  By: Yuri Patches: 348360chan_sip.diff uploaded by Yuri (license
	  5242) ........ Merged revisions 351759 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-20 15:54 +0000 [r351761]  Matthew Jordan <mjordan@digium.com>

	* codecs/ilbc/helpfun.c, /: Remove unused variable 'tmp' from
	  helpfun in ilbc codec gcc version 4.6.2 caught an unused variable
	  in the ilbc codec library. This would prevent compilation with
	  --enable-dev-mode; variable removed. ........ Merged revisions
	  351760 from http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-20 13:01 +0000 [r351708]  Stefan Schmidt <sst@sil.at>

	* /, contrib/asterisk-ng-doxygen: enable doxygen build for files in
	  the channels/sip folder like reqresp_parser.c ........ Merged
	  revisions 351707 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-19 23:25 +0000 [r351646]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/chan_sip.c, channels/sip/reqresp_parser.c: Misc minor
	  fixes in reqresp_parser.c and chan_sip.c. * Fix corner cases in
	  get_calleridname() parsing and ensure that the output buffer is
	  nul terminated. * Make get_calleridname() truncate the name it
	  parses if the given buffer is too small rather than abandoning
	  the parse and not returning anything for the name. Adjusted
	  get_calleridname_test() unit test to handle the truncation
	  change. * Fix get_in_brackets_test() unit test to check the
	  results of get_in_brackets() correctly. * Fix
	  parse_name_andor_addr() to not return the address of a local
	  buffer. This function is currently not used. * Fix potential NULL
	  pointer dereference in sip_sendtext(). * No need to
	  memset(calleridname) in check_user_full() or tmp_name in
	  get_name_and_number() because get_calleridname() ensures that it
	  is nul terminated. * Reply with an accurate response if
	  get_msg_text() fails in receive_message(). This is academic in
	  v1.8 because get_msg_text() can never fail. ........ Merged
	  revisions 351618 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-19 22:43 +0000 [r351612]  Kinsey Moore <kmoore@digium.com>

	* res/res_rtp_asterisk.c, /: Correct output of RTCP jitter
	  statistics in SR and RR reports Change the RTCP RR and SR
	  generation code to convert Asterisk's internal jitter statistics
	  to be represented in RTP timestamp units based on the rate of the
	  codec in use instead of in seconds. (closes issue ASTERISK-14530)
	  ........ Merged revisions 351611 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-19 21:47 +0000 [r351560]  Jonathan Rose <jrose@digium.com>

	* /, channels/chan_sip.c, include/asterisk/netsock2.h: Eliminates
	  doubling the :port part of SIP Notify Message-Account headers.
	  This patch prevents the domain string from getting mangled during
	  the initreqprep step by moving the initialization to before its
	  immediate use. It also documents this pitfall for the
	  ast_sockaddr_stringify functions. (issue ASTERISK-19057) Reported
	  by: Yuri Review: https://reviewboard.asterisk.org/r/1678/
	  ........ Merged revisions 351559 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-19 21:12 +0000 [r351505]  Joshua Colp <jcolp@digium.com>

	* /, channels/chan_sip.c: Prevent crash when an SDP offer is
	  received with an encrypted video stream when support for video is
	  disabled and res_srtp is loaded. (closes issue ASTERISK-19202)
	  Reported by: Catalin Sanda ........ Merged revisions 351504 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-18 21:05 +0000 [r351451]  Matthew Jordan <mjordan@digium.com>

	* codecs/ilbc/helpfun.c (added), codecs/ilbc/LICENSE_ADDENDUM
	  (added), codecs/ilbc/doCPLC.c (added), codecs/ilbc/anaFilter.c
	  (added), codecs/ilbc/helpfun.h (added), codecs/ilbc/createCB.c
	  (added), codecs/ilbc/doCPLC.h (added), codecs/ilbc/anaFilter.h
	  (added), codecs/ilbc/constants.c (added),
	  codecs/ilbc/iLBC_decode.c (added), codecs/ilbc/createCB.h
	  (added), codecs/ilbc/constants.h (added),
	  codecs/ilbc/iLBC_decode.h (added), codecs/ilbc/iCBSearch.c
	  (added), codecs/ilbc/filter.c (added), codecs/ilbc/hpInput.c
	  (added), codecs/ilbc/gainquant.c (added), codecs/ilbc/iCBSearch.h
	  (added), codecs/ilbc/hpOutput.c (added), codecs/ilbc/rfc3951.txt
	  (added), codecs/ilbc/filter.h (added), codecs/ilbc/hpInput.h
	  (added), codecs/ilbc/LPCencode.c (added), codecs/ilbc/gainquant.h
	  (added), codecs/codec_ilbc.c, codecs/ilbc/hpOutput.h (added),
	  codecs/ilbc/StateSearchW.c (added), codecs/ilbc/PATENTS (added),
	  contrib/scripts/get_ilbc_source.sh, codecs/ilbc/LPCencode.h
	  (added), codecs/ilbc/LICENSE (added), codecs/ilbc/StateSearchW.h
	  (added), codecs/ilbc/iCBConstruct.c (added),
	  codecs/ilbc/syntFilter.c (added), /, codecs/ilbc/iCBConstruct.h
	  (added), codecs/ilbc/iLBC_test.c (added),
	  codecs/ilbc/syntFilter.h (added), codecs/ilbc/StateConstructW.c
	  (added), codecs/ilbc/packing.c (added),
	  codecs/ilbc/StateConstructW.h (added), codecs/ilbc/packing.h
	  (added), codecs/ilbc/getCBvec.c (added), codecs/ilbc/LPCdecode.c
	  (added), codecs/ilbc/enhancer.c (added), codecs/ilbc/lsf.c
	  (added), codecs/ilbc/iLBC_encode.c (added),
	  codecs/ilbc/getCBvec.h (added), codecs/ilbc/LPCdecode.h (added),
	  codecs/ilbc/enhancer.h (added), codecs/ilbc/FrameClassify.c
	  (added), codecs/ilbc/iLBC_define.h (added), codecs/ilbc/lsf.h
	  (added), codecs/ilbc/extract-cfile.awk (added),
	  codecs/ilbc/iLBC_encode.h (added), codecs/ilbc/Makefile,
	  codecs/ilbc/FrameClassify.h (added): Include iLBC source code for
	  distribution with Asterisk This patch includes the iLBC source
	  code for distribution with Asterisk. Clarification regarding the
	  iLBC source code was provided by Google, and the appropriate
	  licenses have been included in the codecs/ilbc folder. Review:
	  https://reviewboard.asterisk.org/r/1675 Review:
	  https://reviewboard.asterisk.org/r/1649 (closes issue:
	  ASTERISK-18943) Reporter: Leif Madsen Tested by: Matt Jordan
	  ........ Merged revisions 351450 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-18 15:57 +0000 [r351408]  Stefan Schmidt <sst@sil.at>

	* /, channels/chan_sip.c: The get_pai function in chan_sip.c didn't
	  recognized a proper callerid name and number from a
	  P-Asserted-Identity cause the header parsing logic was wrong.
	  Changing the parsing functions to the sip header parsing APIs in
	  reqresp_parser.h solves this problem. Review:
	  https://reviewboard.asterisk.org/r/1673 Reviewed by: wdoekes2 and
	  Mark Michelson ........ Merged revisions 351396 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-17 17:22 +0000 [r351308]  Mark Michelson <mmichelson@digium.com>

	* res/res_rtp_asterisk.c, /: Eliminate odd initialization of
	  probation variable. ........ Merged revisions 351306 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-17 17:08 +0000 [r351289]  Jonathan Rose <jrose@digium.com>

	* res/res_rtp_asterisk.c, /, configs/rtp.conf.sample, CHANGES: Adds
	  pjmedia probation concepts to res_rtp_asterisk's learning mode.
	  In order to better handle RTP sources with strictrtp enabled
	  (which is now default in 10) using the learning mode to figure
	  out new sources when they change is handled by checking for a
	  number of consecutive (by sequence number) packets received to an
	  rtp struct based on a new configurable value called 'probation'.
	  Also, during learning mode instead of liberally accepting all
	  packets received, we now reject packets until a clear source has
	  been determined. Review: https://reviewboard.asterisk.org/r/1663/
	  ........ Merged revisions 351287 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-17 16:54 +0000 [r351286]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Use built-in parsing functions for
	  Contact and Record-Route headers. If a Contact or a Record-Route
	  header had a quoted string with an item in angle brackets, then
	  we would mis-parse it. For instance, "Bob <1234>"
	  <1234@example.org> would be misparsed as having the URI "1234"
	  The fix for this is to use parsing functions from
	  reqresp_parser.h since they are heavily tested and are awesome.
	  (issue ASTERISK-18990) ........ Merged revisions 351284 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-17 16:07 +0000 [r351234]  Matthew Jordan <mjordan@digium.com>

	* /, channels/chan_sip.c: Fix udptl issue with initial INVITE
	  introduced by r351027 When an inital INVITE occurs that contains
	  image media, a channel is not yet associated with the SIP dialog.
	  The file descriptor associated with the udptl session needs to be
	  set in initialize_udptl or in sip_new to account for this
	  scenario. ........ Merged revisions 351233 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-17 01:43 +0000 [r351183]  Russell Bryant <russell@russellbryant.com>

	* /, channels/chan_sip.c: Merged revisions 351182 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r351182 | russell | 2012-01-16 20:37:03 -0500 (Mon, 16 Jan 2012)
	  | 22 lines Add some missing locking in chan_sip. This patch adds
	  some missing locking to the function
	  send_provisional_keepalive_full(). This function is called from
	  the scheduler, which is processed in the SIP monitor thread. The
	  associated channel (or pbx) thread will also be using the same
	  sip_pvt and ast_channel so locking must be used. The
	  sip_pvt_lock_full() function is used to ensure proper locking
	  order in a safe manner. In passing, document a suspected
	  reference counting error in this function. The "fix" is left
	  commented out because when the "fix" is present, crashes occur.
	  My theory is that fixing it is exposing a reference counting
	  error elsewhere, but I don't know where. (Or my analysis of this
	  being a problem could have been completely wrong in the first
	  place). Leave the comment in the code for so that someone may
	  investigate it again in the future. Also add a bit of doxygen to
	  transmit_provisional_response(). (closes issue ASTERISK-18979)
	  Review: https://reviewboard.asterisk.org/r/1648 ........

2012-01-16 21:17 +0000 [r351081-351131]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Ensure ACK retransmit & hangup on non-200
	  response to INVITE When handling a non-2xx final response on an
	  INVITE transaction, we have to keep the transaction around after
	  we send an ACK in case we receive a retransmission of the
	  response so we can re-transmit the ACK, but also tear down the
	  ast_channel as soon as we transmit the ACK. Before this patch, we
	  could fail at both of these things. Calling
	  sip_alreadygone/needdestroy prevented us from keeping the
	  transaction up and retransmitting the ACK, and queueing
	  CONGESTION was not sufficient to cause the channel to be torn
	  down when originating calls via the CLI, for example. This patch
	  queues a hangup with CONGESTION instead of just queueing
	  CONGESTION for these responses and removes the sip_alreadygone
	  and sip_needdestroy calls from handle_response_invite on non-2xx
	  responses. It relies on the hangup calling sip_scheddestroy. For
	  more information, see section 17.1.1.1 of RFC 3261. (closes issue
	  ASTERISK-17717) Review: https://reviewboard.asterisk.org/r/1672/
	  ........ Merged revisions 351130 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, channels/chan_sip.c: Don't prematurely stop SIP session timer
	  When Asterisk is the UAS (incoming call, endpoint is re-inviting)
	  the SIP session timer expires after half the time the sip
	  endpoint indicates in the Session-expires header in
	  proc_session_timer(). The session timer was being stopped totally
	  and being handled as an error case instead of running again until
	  the second expiry. This patch treats the half-time expiry as a
	  non-error case and continues the timer until the true expiry.
	  (closes issue ASTERISK-18996) Reported by: Thomas Arimont Tested
	  by: Thomas Arimont Patches: session_timer_fix.diff by Terry
	  Wilson (License #5357) based on session_timer.patch by Thomas
	  Arimont (License #5525) ........ Merged revisions 351080 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-16 19:12 +0000 [r351028]  Matthew Jordan <mjordan@digium.com>

	* /, channels/chan_sip.c: Create and initialize udptl only when
	  dialog negotiates for image media Prior to this patch, the udptl
	  struct was allocated and initialized when a dialog was associated
	  with a peer that supported T.38, when a new SIP channel was
	  allocated, or what an INVITE request was received. This resulted
	  in any dialog associated with a peer that supported T.38 having
	  udptl support assigned to it, including the UDP ports needed for
	  communication. This occurred even in non-INVITE dialogs that
	  would never send image media. This patch creates and initializes
	  the udptl structure only when the SDP for a dialog specifies that
	  image media is supported, or when Asterisk indicates through the
	  appropriate control frame that a dialog is to support T.38.
	  (closes issue ASTERISK-16698) Reported by: under Tested by:
	  Stefan Schmidt Patches: udptl_20120113.diff uploaded by mjordan
	  (License #6283) (closes issue ASTERISK-16794) Reported by: Elazar
	  Broad Tested by: Stefan Schmidt review:
	  https://reviewboard.asterisk.org/r/1668/ ........ Merged
	  revisions 351027 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-16 17:11 +0000 [r350978]  Sean Bright <sean@malleable.com>

	* main/db.c: Sort the output of 'database showkey' as well. You can
	  pass wildcards (%) to the database CLI commands, so this will
	  sort the returned list of matches.

2012-01-16 17:06 +0000 [r350976]  Joshua Colp <jcolp@digium.com>

	* main/rtp_engine.c, /: Add missing code to set direct RTP setup
	  information during dialing. ........ Merged revisions 350975 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-16 14:27 +0000 [r350938]  Sean Bright <sean@malleable.com>

	* main/db.c: Sort the output of 'database show' by key. This more
	  closely mimics the behavior of 'database show' before the
	  conversion to sqlite3.

2012-01-15 20:12 +0000 [r350886-350889]  Walter Doekes <walter+asterisk@wjd.nu>

	* /, main/asterisk.c: Allow only one thread at a time to do
	  asterisk cleanup/shutdown. Add locking around the
	  really-really-quit part of the core stop/restart part. Previously
	  more than one thread could be called to do cleanup, causing
	  atexit handlers to be run multiple times, in turn causing
	  segfaults. (issue ASTERISK-18883) Reviewed by: Terry Wilson
	  Review: https://reviewboard.asterisk.org/r/1662/ Review:
	  https://reviewboard.asterisk.org/r/1658/ ........ Merged
	  revisions 350888 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, utils/extconf.c: Fix -Werror=unused-but-set-variable compile
	  error in utils/extconf.c. Note that I'm not confirming legitimacy
	  of having that file in tree at all. Is anyone using
	  aelparse/conf2ael? (issue ASTERISK-15350) ........ Merged
	  revisions 350885 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-14 16:41 +0000 [r350790-350838]  Kevin P. Fleming <kpfleming@digium.com>

	* /, configure, autoconf/ast_gcc_attribute.m4, configure.ac,
	  autoconf/libcurl.m4: Ensure that all AC_LANG_PROGRAM calls in the
	  configure script are properly quoted. Recent versions of autoconf
	  (2.68 on my system) won't properly process the configure script
	  unless every call to AC_LANG_PROGRAM is m4-quoted. Many calls in
	  the script were, but many were not. This patch corrects the
	  unquoted calls. ........ Merged revisions 350837 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* contrib/scripts/install_prereq, /, channels/chan_h323.c,
	  addons/chan_mobile.c, res/res_pktccops.c: Multiple revisions
	  350788-350789 ........ r350788 | kpfleming | 2012-01-14 09:22:33
	  -0600 (Sat, 14 Jan 2012) | 8 lines Ensure that two prerequisites
	  are properly installed on Debian-style distributions. * Don't
	  specify a specific version of libgmime; newer versions are
	  available now and acceptable. * Install libsrtp so that res_srtp
	  can be built. ........ r350789 | kpfleming | 2012-01-14 09:23:32
	  -0600 (Sat, 14 Jan 2012) | 3 lines Correct some
	  'set-but-not-used' variable warnings. ........ Merged revisions
	  350788-350789 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-13 22:10 +0000 [r350737]  Kinsey Moore <kmoore@digium.com>

	* /, include/asterisk/autoconfig.h.in: Run bootstrap.sh for the for
	  the ASTERISK-18929 fix configure and autoconfig.h.in were not
	  regenerated when the fix was committed. ........ Merged revisions
	  350736 from http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-13 21:51 +0000 [r350734]  Richard Mudgett <rmudgett@digium.com>

	* /, configs/cel_pgsql.conf.sample, configs/cel_odbc.conf.sample:
	  Correct eventtype names in cel_odbc and cel_pgsql sample files
	  ........ Merged revisions 350733 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-13 21:41 +0000 [r350731]  Kinsey Moore <kmoore@digium.com>

	* /, configure.ac, bootstrap.sh, main/asterisk.c: Make sure
	  asterisk builds on OpenBSD OpenBSD defines SO_PEERCRED, but it
	  returns a 'struct sockpeercred', not 'struct ucred', which causes
	  compilation of main/asterisk.c to fail in read_credentials().
	  This allows configure to check for sockpeercred and asterisk to
	  deal with it properly. (closes issue ASTERISK-18929) Reported-by:
	  Barry Miller Patch-by: Barry Miller ........ Merged revisions
	  350730 from http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-13 20:31 +0000 [r350680]  Mark Michelson <mmichelson@digium.com>

	* /, channels/sip/config_parser.c: Set port to a default sane value
	  if a bogus one is provided when parsing hostnames. ........
	  Merged revisions 350679 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-13 17:29 +0000 [r350585]  Richard Mudgett <rmudgett@digium.com>

	* configs/cel_sqlite3_custom.conf.sample, cel/cel_odbc.c,
	  configs/cel.conf.sample, /, cel/cel_manager.c,
	  configs/cel_pgsql.conf.sample, configs/cel_odbc.conf.sample,
	  main/cel.c, configs/cel_custom.conf.sample: Add missing CEL
	  logging fields to various CEL backends. Multiple revisions
	  350555,350571 ........ r350555 | rmudgett | 2012-01-13 11:12:51
	  -0600 (Fri, 13 Jan 2012) | 12 lines Add missing CEL logging
	  fields to various CEL backends. * Add missing eventextra to
	  cel_psql.c and cel_odbc.c. * Add missing PeerAccount and
	  EventExtra to cel_manager.c. * Add missing userdeftype support
	  for cel_custom.conf.sample and cel_sqlite3_custom.conf.sample.
	  (closes issue ASTERISK-17190) Reported by: Bryant Zimmerman
	  ........ r350571 | rmudgett | 2012-01-13 11:23:57 -0600 (Fri, 13
	  Jan 2012) | 8 lines Use compatible names for event extra data for
	  various CEL backends. * Change eventextra to extra in cel_psql.c
	  and cel_odbc.c. * Change EventExtra to Extra in cel_manager.c.
	  (issue ASTERISK-17190) ........ Merged revisions 350555,350571
	  from http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-13 16:59 +0000 [r350550-350553]  Matthew Jordan <mjordan@digium.com>

	* /, apps/app_queue.c: Realtime queues failed to load queue
	  information without queue member table Previously, realtime
	  queues could be loaded without defining the queue member table.
	  This allowed for queue members to be dynamic, while the realtime
	  queue definitions could exist in some backing storage. Revision
	  342223 broke this when it changed the return value for
	  realtime_multientry to return NULL when no results are returned.
	  Previously, an empty ast_config object was expected. (closes
	  issue ASTERISK-19170) Reported by: Rene Mendoza Tested by: Rene
	  Mendoza Patches: rt_queue_member_patch.diff uploaded by Matt
	  Jordan (license 6283) ........ Merged revisions 350552 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* bridges/bridge_builtin_features.c, channels/chan_bridge.c,
	  include/asterisk/bridging.h, apps/app_confbridge.c,
	  main/bridging.c: Fix crash from bridge channel hangup race
	  condition in ConfBridge This patch addresses two issues in
	  ConfBridge and the channel bridge layer: 1. It fixes a race
	  condition wherein the bridge channel could be hung up 2. It
	  removes the deadlock avoidance from the bridging layer and makes
	  the bridge_pvt an ao2 ref counted object Patch by David Vossel
	  (mjordan was merely the commit monkey) (issue ASTERISK-18988)
	  (closes issue ASTERISK-18885) Reported by: Dmitry Melekhov Tested
	  by: Matt Jordan Patches: chan_bridge_cleanup_v.diff uploaded by
	  David Vossel (license 5628) (closes issue ASTERISK-19100)
	  Reported by: Matt Jordan Tested by: Matt Jordan Review:
	  https://reviewboard.asterisk.org/r/1654/

2012-01-12 16:04 +0000 [r350502]  Jonathan Rose <jrose@digium.com>

	* /, main/features.c: Adds peer to CEL report on CEL_BRIDGE_START
	  and CEL_BRIDGE_END (closes issue ASTERISK-17940) Reporter: Nic
	  Colledge Patches: features_18.patch uploaded by Nic Colledge
	  (license 6245) ........ Merged revisions 350501 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-11 22:51 +0000 [r350312-350453]  Richard Mudgett <rmudgett@digium.com>

	* /, main/cel.c: Remove extraneous BRIDGEPEER AMI VarSet event on a
	  CEL dummy channel. (closes issue ASTERISK-19180) Reported by:
	  Corey Farrell Patches: asterisk_cel_noevent_varset.diff (license
	  #5909) patch uploaded by Corey Farrell ........ Merged revisions
	  350452 from http://svn.asterisk.org/svn/asterisk/branches/1.8

	* apps/app_dial.c, /, CHANGES, apps/app_followme.c: Make FollowMe
	  optionally update connected line information when the accepting
	  endpoint is bridged. Like Dial and Queue, FollowMe needs to deal
	  with AST_CONTROL_CONNECTED_LINE information so when the parties
	  are initially bridged, the connected line information will be
	  correct. * Added the 'I' option just like the app_dial and
	  app_queue 'I' option. * Made 'N' option ignored if the call is
	  already answered. (closes issue ASTERISK-18969) Reported by:
	  rmudgett Tested by: rmudgett Review:
	  https://reviewboard.asterisk.org/r/1656/ ........ Merged
	  revisions 350364 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, funcs/func_lock.c: Fix absolute/relative time mismatch in LOCK
	  function. The time passed by the LOCK function to an internal
	  function was relative time when the function expected absolute
	  time. * Don't use C++ keywords in get_lock(). (closes issue
	  ASTERISK-16868) Reported by: Andrey Solovyev Patches:
	  20101102__issue18207.diff.txt (license #5003) patch uploaded by
	  Andrey Solovyev (modified) ........ Merged revisions 350311 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-09 21:55 +0000 [r350221]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/chan_iax2.c: Fix joinable thread terminating without
	  joiner memory leak in chan_iax.c. The iax2_process_thread() can
	  exit without anyone waiting to join the thread. If noone is
	  waiting to join the thread then a large memory leak occurs. *
	  Made iax2_process_thread() deatach itself if nobody is waiting to
	  join the thread. (closes issue ASTERISK-17339) Reported by:
	  Tzafrir Cohen Patches:
	  asterisk-1.8.4.4-chan_iax2-detach-thread-on-non-stop-exit.patch
	  (license #5617) patch uploaded by Alex Villacis Lasso (modified)
	  (closes issue ASTERISK-17825) Reported by: wangjin ........
	  Merged revisions 350220 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-09 19:34 +0000 [r350180]  Walter Doekes <walter+asterisk@wjd.nu>

	* main/db.c: Fix shutdown handling of sqlite3 astdb. If a db_sync
	  was scheduled just before shutdown, the atexit code calling
	  db_sync would have no effect, causing the astdb commit thread to
	  stay alive. This caused the SIP/realtime_sipregs test to fail.
	  (The fallback kill would run the atexit code again and that would
	  wreak havoc.) This fixes that the atexit kill condition is picked
	  up properly. (closes issue ASTERISK-18883) Reviewed by: Terry
	  Wilson Review: https://reviewboard.asterisk.org/r/1659

2012-01-09 18:57 +0000 [r350076-350129]  Richard Mudgett <rmudgett@digium.com>

	* /, contrib/scripts/valgrind_compare (added): Multiple revisions
	  350127-350128 ........ r350127 | rmudgett | 2012-01-09 12:40:33
	  -0600 (Mon, 09 Jan 2012) | 12 lines Update contrib script
	  live_ast to invoke Asterisk with valgrind and suppression file. *
	  Added valgrind_compare script to compare two valgrind log files
	  for differences. (issue ASTERISK-17339) Reported by: Tzafrir
	  Cohen Patches: valgrind_compare (license #5035) script uploaded
	  by Tzafrir Cohen live_ast_valgrind.diff (license #5035) patch
	  uploaded by Tzafrir Cohen live_ast_valgrind_v2.diff (license
	  #5185) patch uploaded by Paul Belanger ........ r350128 |
	  rmudgett | 2012-01-09 12:54:56 -0600 (Mon, 09 Jan 2012) | 11
	  lines live_ast: valgrind: run asterisk under valgrind Adds a new
	  sub-command, "valgrind" to live_ast. It runs asterisk under
	  valgrind. The extra command-line parameters are passed to
	  Asterisk as usual, and parameters to valgrind are passed through
	  LIVE_AST_VALGRIND_ARGS in live.conf . Review:
	  https://reviewboard.asterisk.org/r/1109/ Merged revisions 326636
	  from http://svn.asterisk.org/svn/asterisk/branches/10 ........
	  Merged revisions 350127-350128 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, main/asterisk.c: Make Asterisk -x command line parameter imply
	  -r parameter presence. The Asterisk -x command line parameter is
	  documented inconsistently. * Made the -x documentation and
	  behavior consistent. * Since this is also a new year, updated the
	  copyright notices while here. (closes issue ASTERISK-19094)
	  Reported by: Eugene Patches:
	  issueA19094_correct_asterisk_option_x.patch (license #5674) patch
	  uploaded by Walter Doekes (modified) Tested by: Eugene ........
	  Merged revisions 350075 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-09 15:39 +0000 [r350024]  Kinsey Moore <kmoore@digium.com>

	* /, apps/app_meetme.c: Prevent SLA settings from getting wiped out
	  on reload If SLA was reloaded without the config file being
	  changed, current settings got wiped out before the SLA reload
	  code decided it wasn't going to reload the file since nothing was
	  changed. Moving the settings reset later in the reload process
	  fixes this. (closes issue AST-744) ........ Merged revisions
	  350023 from http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-06 23:25 +0000 [r349977]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Don't leak CID in From header when
	  presentation=unavailable When someone does
	  Set(CALLERPRES()=unavailable) (or
	  Set(CALLERID(pres)=unavailable)) when sendrpid=no, the From
	  header shows "Anonymous" <anonymous@anonymous.invalid>. When
	  sendrpid=yes/pai, the From header will still display the callerid
	  info, even though we supply an rpid header with the anonymous
	  info. It seems like we shouldn't leak that info in any case.
	  Skimming http://tools.ietf.org/html/draft-ietf-sip-privacy-04
	  seems to indicate that one shouldn't send identifying info in the
	  From in this case. This patch anonymizes the From header as well
	  even when sendrpid=yes/pai. (closes issue ASTERISK-16538) Review:
	  https://reviewboard.asterisk.org/r/1649/ ........ Merged
	  revisions 349968 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-06 21:25 +0000 [r349928]  Kinsey Moore <kmoore@digium.com>

	* pbx/pbx_lua.c: Fix lua goto detection to prevent unexpected
	  behavior with confbridge A bug in the pbx_lua goto detection was
	  causing the dialplan to hangup unexpectedly after confbridge
	  exited if it had called lua dialplan code during execution.
	  Patch-by: Timo Teras Acked-by: Matt Nicholson (closes issue
	  ASTERISK-18976)

2012-01-06 16:48 +0000 [r349873]  Richard Mudgett <rmudgett@digium.com>

	* /, apps/app_followme.c: Fix memory leaks in app_followme
	  find_realtime(). (closes issue ASTERISK-19055) Reported by: Matt
	  Jordan ........ Merged revisions 349872 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-05 23:56 +0000 [r349822]  Matthew Jordan <mjordan@digium.com>

	* res/res_fax.c: Fix premature free'ing of the frame committed in
	  r349608 Even though we set the frame to the ast_null_frame and
	  return that, the caller of the frame hook may still need the
	  frame. This now is a bit more careful about when it frees the
	  frame, i.e., only under the same conditions that applied when we
	  duplicated it in the first place.

2012-01-05 23:46 +0000 [r349820]  Richard Mudgett <rmudgett@digium.com>

	* /, cel/cel_sqlite3_custom.c: Make not assume that the
	  cel_sqlite3_custom SQL table primary key is AcctId. If a table is
	  created by some other application and the primary key is not
	  named "AcctId", cel/cel_sqlite3_custom.c will always try to
	  create the table and fail because it already exists. * Change the
	  SQL table query to not require AcctId as the primary key. (closes
	  issue ASTERISK-18963) Reported by: socketpair Patches: fix.patch
	  (license #6337) patch uploaded by socketpair ........ Merged
	  revisions 349819 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-05 22:10 +0000 [r349732]  Kinsey Moore <kmoore@digium.com>

	* /, main/file.c: Allow playback of formats that don't support
	  seeking ast_streamfile previously did unconditional seeking on
	  files that broke playback of formats that don't support that
	  functionality. This patch avoids the seek that was causing the
	  problem. This regression was introduced in r158062. (closes issue
	  ASTERISK-18994) Patch-by: Timo Teras ........ Merged revisions
	  349731 from http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-05 21:55 +0000 [r349673-349729]  Jonathan Rose <jrose@digium.com>

	* main/dsp.c, /: Fix an issue where dsp.c would interpret multiple
	  dtmf events from a single key press. When receiving calls from a
	  mobile phone into a DISA system on a connection with significant
	  interference, the reporter's Asterisk system would interpret DTMF
	  incorrectly and replicate digits received. This patch resolves
	  that by increasing the number of frames a mismatch has to be
	  detected before assuming the DTMF is over by 1 frame and adjusts
	  dtmf_detect function to reset hits and misses only when an edge
	  is detected. (closes issue ASTERISK-17493) Reported by: Alec
	  Davis Patches: bug18904-refactor.diff.txt uploaded by Alec Davis
	  (license 5546) Review: https://reviewboard.asterisk.org/r/1130/
	  ........ Merged revisions 349728 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, main/asterisk.c: Ensures Asterisk closes when receiving
	  terminal signals in 'no fork' mode. When catching a signal, in no
	  fork mode the console thread is identical to the thread
	  responsible for catching the signal and closing Asterisk, which
	  requires it to first dispense with the console thread. Prior to
	  this patch, if these threads were identical, upon receiving a
	  killing signal, the thread will send an URG signal to itself,
	  which we also catch and then promptly do nothing with. Obviously
	  this isn't useful behavior. (closes issue ASTERISK-19127)
	  Reported By: Bryon Clark Patches: quit_on_signals.patch uploaded
	  by Bryon Clark (license 6157) ........ Merged revisions 349672
	  from http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-04 22:19 +0000 [r349608-349619]  Matthew Jordan <mjordan@digium.com>

	* apps/confbridge/conf_config_parser.c: Fix for ConfBridge config
	  parser unlocking channel mutex too many times When looking up a
	  ConfBridge profile, the config parser would, if it found a
	  channel datastore on the channel requesting the bridge profile,
	  unlock the channel mutex twice. Since that's a little aggressive,
	  it now only unlocks it once. (closes issue ASTERISK-19042)
	  Reported by: Matt Jordan Tested by: Matt Jordan Patches: 19042
	  uploaded by David Vossel (license 5628)

	* res/res_fax.c: Free successfully translated frame in
	  fax_gateway_framehook A frame that is translated via
	  ast_translate is also duplicated via ast_frdup. This will
	  allocate a new frame on the heap, which needs to be free'd at the
	  appropriate time. This issue reporter used valgrind to find that
	  this occurred in res_fax's fax_gateway_framehook; a quick search
	  through the code showed that only place this was currently not
	  handling the translatted frame properly. (closes issue
	  ASTERISK-19133) Reported by: Sylvain Rochet

2012-01-04 20:50 +0000 [r349559]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, /: Fix segfault in chan_dahdi for
	  CHANNEL(dahdi_span) evaluation on hangup. * Added NULL private
	  pointer checks in the following chan_dahdi channel callbacks:
	  dahdi_func_read(), dahdi_func_write(), dahdi_setoption(), and
	  dahdi_queryoption(). (closes issue ASTERISK-19142) Reported by:
	  Diego Aguirre Tested by: rmudgett ........ Merged revisions
	  349558 from http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-04 20:23 +0000 [r349505-349532]  Kinsey Moore <kmoore@digium.com>

	* contrib/init.d/rc.debian.asterisk, /: Make debian init script
	  conform to the LSB standard Previously, this init script would
	  return 1 if Asterisk was already running. This is incorrect
	  behavior according to the LSB standard and has been fixed by
	  returning 0 instead. (closes issue ASTERISK-17958) Reported-by:
	  johnc ........ Merged revisions 349529 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* contrib/scripts/autosupport, /, contrib/scripts/autosupport.8:
	  Update autosupport script and man page Added information
	  collection from the output of the utilities: top, free, uptime,
	  ifconfig Added information collection from the output of the
	  Asterisk command 'dahdi show status' Added option / flag '-n,
	  --non-interactive' Updated man page to reflect new option / flag
	  '-n, --non-interactive' Patch-by: John Bigelow (itzanger) (closes
	  issue AST-749) ........ Merged revisions 349504 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-04 19:44 +0000 [r349451-349502]  Jonathan Rose <jrose@digium.com>

	* /, channels/chan_sip.c: Adds Subscription-State header to notify
	  with call completion. per RFC3265 (Closes issue ASTERISK-17953)
	  Reported by: George Konopacki Patches: 19400.patch uploaded by
	  mmichelson (license 5049) ........ Merged revisions 349482 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* main/pbx.c, /: Fix documentation for SayNumber to reflect the
	  fact that language is changed in CHANNEL() (closes issue
	  ASTERISK-18962) reported by: Nir Simionovich ........ Merged
	  revisions 349450 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2012-01-27  Asterisk Development Team <asteriskteam@digium.com>

	* Asterisk 10.1.0 Released.

	* Test results:
	  http://bamboo.asterisk.org/browse/TESTING-ASTERISK1010RCS-4

2012-01-24  Asterisk Development Team <asteriskteam@digium.com>

	* Asterisk 10.1.0-rc2 Released.

	* Test results:
	  http://bamboo.asterisk.org/browse/TESTING-ASTERISK1010RCS-3

	* main/file.c: Allow playback of formats that don't support
	  seeking.  ast_streamfile previously did unconditional seeking
	  on files that broke playback of formats that don't support that
	  functionality.  This patch avoids the seek that was causing the
	  problem.  (closes issue ASTERISK-18994) Patch-by: Timo Teras

	* channels/chan_sip.c: AST-2012-001: prevent crash when an SDP offer
	  is received with an encrypted video stream when support for video
	  is disabled and res_srtp is loaded.  (closes issue ASTERISK-19202)
	  Reported by: Catalin Sanda

	* channels/chan_sip.c: Fix RTP reference leak.  If a blind transfer
	  were initiated using a REFER without a prior reINVITE to place the
	  call on hold, AND if Asterisk were sending RTCP reports, then there
	  was a reference leak for the RTP instance of the transferer.
	  (closes issue ASERISK-19192) Reported by: Tyuta Vitali

	* res/res_rtp_asterisk: Add pjmedia probation concepts to
	  res_rtp_asterisk's learning mode.  In order to better handle RTP
	  sources with strictrtp enabled (which is the default setting in 10)
	  using the learning mode to figure out new sources when they change is
	  handled by checking for a number of consecutive (by sequence number)
	  packets received to an rtp struct based on a new configurable value
	  called 'probation'.  Also, during learning mode instead of liberally
	  accepting all packets received, we now reject packets until a clear
	  source has been determined.

	* main/features.c: Fix blind transfers from failing if an 'h' extension
	  is present.  This prevents the 'h' extension from being run on the
	  transferee channel when it is transferred via a native transfer
	  mechanism such as SIP REFER.  (closes issue ASTERISK-19173) Reported
	  by: Ross Beer Tested by: Kristjan Vrban Patches: ASTERISK-19173 by
	  Mark Michelson (license 5049)

	* apps/app_queue.c: Realtime queues failed to load queue
	  information without queue member table.  Revision 342223 
	  broke this when it changed the return value for 
	  realtime_multientry to return NULL when no results are
	  returned.  (closes issue ASTERISK-19170) Reported by: Rene
	  Mendoza Tested by: Rene Mendoza

2011-12-30  Asterisk Development Team <asteriskteam@digium.com>

        * Asterisk 10.1.0-rc1 Released.

        * Test results:
          http://bamboo.asterisk.org/browse/TESTING-ASTERISK1010RCS-1

2011-12-29 15:14 +0000 [r349340]  Matthew Jordan <mjordan@digium.com>


	* main/rtp_engine.c, /: Handle AST_CONTROL_UPDATE_RTP_PEER frames
	  in local bridge loop Failing to handle
	  AST_CONTROL_UPDATE_RTP_PEER frames in the local bridge loop
	  causes the loop to exit prematurely. This causes a variety of
	  negative side effects, depending on when the loop exits. This
	  patch handles the frame by essentially swallowing the frame in
	  the local loop, as the current channel drivers expect the RTP
	  bridge to handle the frame, and, in the case of the local bridge
	  loop, no additional action is necessary. (issue ASTERISK-19040)
	  (issue ASTERISK-19128) (issue ASTERISK-17725) (issue
	  ASTERISK-18340) (closes issue ASTERISK-19095) Reported by: Stefan
	  Schmidt Tested by: Matt Jordan Review:
	  https://reviewboard.asterisk.org/r/1640/ ........ Merged
	  revisions 349339 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-28 21:33 +0000 [r349290]  Sean Bright <sean@malleable.com>

	* /, main/audiohook.c: Use ast_audiohook_write_list_empty to
	  determine if our lists are empty instead of duplicating that
	  logic. ........ Merged revisions 349289 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-28 19:00 +0000 [r349248-349250]  Kevin P. Fleming <kpfleming@digium.com>

	* utils: Tell Subversion to gnore the 'astdb2bdb' binary file if it
	  exists.

	* main/dsp.c, res/res_fax.c, include/asterisk/dsp.h,
	  include/asterisk/res_fax.h, res/res_fax_spandsp.c: Improve T.38
	  gateway V.21 preamble detection. This commit removes the V.21
	  preamble detection code previously added to the generic DSP
	  implementation in Asterisk, and instead enhances the res_fax
	  module to be able to utilize V.21 preamble detection
	  functionality made available by FAX technology modules. This
	  commit also adds such support to res_fax_spandsp, which uses the
	  Spandsp modem tone detection code to do the V.21 preamble
	  detection. There should be no functional change here, other than
	  much more reliable V.21 preamble detection (and thus T.38 gateway
	  initiation).

2011-12-27 20:53 +0000 [r349195]  Matthew Jordan <mjordan@digium.com>

	* /, res/res_timing_pthread.c, include/asterisk/module.h,
	  res/res_timing_dahdi.c, res/res_timing_timerfd.c,
	  res/res_musiconhold.c: Fix timing source dependency issues with
	  MOH Prior to this patch, res_musiconhold existed at the same
	  module priority level as the timing sources that it depends on.
	  This would cause a problem when music on hold was reloaded, as
	  the timing source could be changed after res_musiconhold was
	  processed. This patch adds a new module priority level,
	  AST_MODPRI_TIMING, that the various timing modules are now loaded
	  at. This now occurs before loading other resource modules, such
	  that the timing source is guaranteed to be set prior to resolving
	  the timing source dependencies. (closes issue ASTERISK-17474)
	  Reporter: Luke H Tested by: Luke H, Vladimir Mikhelson, zzsurf,
	  Wes Van Tlghem, elguero, Thomas Arimont Patches:
	  asterisk-17474-dahdi_timing-infinite-wait-fix_v3_branch-1.8.diff
	  uploaded by elguero (License #5026)
	  asterisk-17474-dahdi_timing-infinite-wait-fix_v3_branch-10.diff
	  uploaded by elguero (License #5026)
	  asterisk-17474-dahdi_timing-infinite-wait-fix_v3.diff uploaded by
	  elguero (License #5026) Review:
	  https://reviewboard.asterisk.org/r/1578/ ........ Merged
	  revisions 349194 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-27 17:17 +0000 [r349145]  Sean Bright <sean@malleable.com>

	* /, main/audiohook.c: Once an audiohook is attached to a channel,
	  we continue to transcode all of the frames, even after all of the
	  hooks are detached. This patch short-cicuits us out before we
	  transcode unnecessarily. ........ Merged revisions 349144 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-23 17:32 +0000 [r349045]  Sean Bright <sean@malleable.com>

	* /, apps/app_chanspy.c: Merged revisions 349044 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r349044 | seanbright | 2011-12-23 12:25:01 -0500 (Fri, 23 Dec
	  2011) | 18 lines In ChanSpy, don't create audiohooks that will
	  never be used. When ChanSpy is initialized it creates and
	  attaches 3 audiohooks: 1) Read audio off of the channel that we
	  are spying on 2) Write audio to the channel that we are spying on
	  3) Write audio to the channel that is bridged to the channel that
	  we are spying on. The first is always necessary, but the others
	  are used only when specific options are passed to the ChanSpy
	  application (B, d, w, and W to be specific). When those flags are
	  not passed, neither of those audiohooks are ever sent frames, but
	  we still try to process the hooks for each voice frame that we
	  recieve on the channel. So in short - only create and attach
	  audiohooks that we actually need. ........

2011-12-23 15:25 +0000 [r348993]  Kinsey Moore <kmoore@digium.com>

	* apps/app_dial.c, /: Fix missing doc tags found while fixing
	  ASTERISK-18689 Add missing <variable></variable> tags in app_dial
	  documentation. ........ Merged revisions 348992 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-23 02:30 +0000 [r348952]  Richard Mudgett <rmudgett@digium.com>

	* main/pbx.c, /, channels/chan_sip.c, include/asterisk/pbx.h: Fix
	  extension state callback references in chan_sip. Chan_sip gives a
	  dialog reference to the extension state callback and assumes that
	  when ast_extension_state_del() returns, the callback cannot
	  happen anymore. Chan_sip then reduces the dialog reference count
	  associated with the callback. Recent changes (ASTERISK-17760)
	  have resulted in the potential for the callback to happen after
	  ast_extension_state_del() has returned. For chan_sip, this could
	  be very bad because the dialog pointer could have already been
	  destroyed. * Added ast_extension_state_add_destroy() so chan_sip
	  can account for the sip_pvt reference given to the extension
	  state callback when the extension state callback is deleted. *
	  Fix pbx.c awkward statecbs handling in
	  ast_extension_state_add_destroy() and handle_statechange() now
	  that the struct ast_state_cb has a destructor to call. * Ensure
	  that ast_extension_state_add_destroy() will never return -1 or 0
	  for a successful registration. * Fixed pbx.c statecbs_cmp() to
	  compare the correct information. The passed in value to compare
	  is a change_cb function pointer not an object pointer. * Make
	  pbx.c ast_merge_contexts_and_delete() not perform callbacks with
	  AST_EXTENSION_REMOVED with locks held. Chan_sip is notorious for
	  deadlocking when those locks are held during the callback. *
	  Removed unused lock declaration for the pbx.c store_hints list.
	  (closes issue ASTERISK-18844) Reported by: rmudgett Review:
	  https://reviewboard.asterisk.org/r/1635/ ........ Merged
	  revisions 348940 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-22 22:37 +0000 [r348846-348889]  Matthew Jordan <mjordan@digium.com>

	* cel/cel_pgsql.c, /: Fix for memory leaks / cleanup in cel_pgsql
	  There were a number of issues in cel_pgsql's pgsql_log method: *
	  If either sql or sql2 could not be allocated, the method would
	  return while the pgsql_lock was still locked * If the execution
	  of the log statement succeeded, the sql and sql2 structs were
	  never free'd * Reconnection successes were logged as ERRORs. In
	  general, the severity of several logging statements was reduced
	  (closes issue ASTERISK-18879) Reported by: Niolas Bouliane Tested
	  by: Matt Jordan Review: https://reviewboard.asterisk.org/r/1624/
	  ........ Merged revisions 348888 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* main/say.c, main/file.c, main/app.c, apps/app_confbridge.c,
	  main/bridging.c: Add Asterisk TestSuite event hooks to support
	  ConfBridge testing This patch adds initial testsuite event hooks
	  so that ConfBridge tests can be executed in the Asterisk
	  TestSuite. (issue ASTERISK-19059)

2011-12-22 20:17 +0000 [r348845]  Terry Wilson <twilson@digium.com>

	* /, include/asterisk/format_pref.h: Allow packetization vaules >
	  127 According to the RTP packetization documentation, and the
	  maximum values listed in AST_FORMAT_LIST, we should support
	  values > that the signed char array that ast_codec_pref makes
	  available to store the value. All places in the code treat the
	  framing field as though it were an int array instaead of a char
	  array anyway, so this just fixes the type of the array. (closes
	  issue ASTERISK-18876) Review:
	  https://reviewboard.asterisk.org/r/1639/ ........ Merged
	  revisions 348833 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-21 20:13 +0000 [r348736-348793]  Richard Mudgett <rmudgett@digium.com>

	* codecs/speex: Make codecs/speex ignore *.i files also.

	* apps/confbridge: Make apps/confbridge ignore *.i files also.

	* /, channels/chan_iax2.c: Fix chan_iax2 to not report an RDNIS
	  number if it is blank. Some ISDN switches complain or block the
	  call if the RDNIS number is empty. * Made chan_iax2 not save a
	  RDNIS number into the ast_channel if the string is blank. This is
	  what other channel drivers do. (closes issue ASTERISK-17152)
	  Reported by: rmudgett ........ Merged revisions 348735 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-19 21:37 +0000 [r348648]  Richard Mudgett <rmudgett@digium.com>

	* /, configure, configure.ac: Fix crashes on other platforms caused
	  by interference from Darwin weak symbol support. Support weak
	  symbols on a platform specific basis. The Mac OS X (Darwin)
	  support must be isolated from the other platforms because it has
	  caused other platforms to crash. Several other platforms
	  including Linux have GCC versions that define the weak attribute.
	  However, this attribute is only setup for use in the code by
	  Darwin. (closes issue ASTERISK-18728) Reported by: Ben Klang
	  Review: https://reviewboard.asterisk.org/r/1617/ ........ Merged
	  revisions 348647 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-19 19:48 +0000 [r348605]  Leif Madsen <lmadsen@digium.com>

	* main/message.c: Update documentation for MESSAGE_SEND_STATUS
	  variable. (Closes issue ASTERISK-19056) Reported by: Yuri
	  Patches: 348360.diff uploaded by Yuri (license #5242)

2011-12-18 18:28 +0000 [r348517]  Kevin P. Fleming <kpfleming@digium.com>

	* /, configs/sip.conf.sample: Correct two flaws in sip.conf.sample
	  related to AST-2011-013. * The sample file listed *two* values
	  for the 'nat' option as being the default. Only 'force_rport' is
	  the default. * The warning about having differing 'nat' settings
	  confusingly referred to both peers and users. ........ Merged
	  revisions 348515 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.6.2 ........
	  Merged revisions 348516 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-16 23:56 +0000 [r348311-348465]  Richard Mudgett <rmudgett@digium.com>

	* main/channel.c, /, main/features.c: Clean-up on isle five for
	  __ast_request_and_dial() and ast_call_forward(). * Add locking
	  when a channel inherits variables and datastores in
	  __ast_request_and_dial() and ast_call_forward(). Note: The
	  involved channels are not active so there was minimal potential
	  for problems. * Remove calls to ast_set_callerid() in
	  __ast_request_and_dial() and ast_call_forward() because the set
	  information is for the wrong direction. * Don't use C++ keywords
	  for variable names in ast_call_forward(). * Run the redirecting
	  interception macro if defined when forwarding a call in
	  ast_call_forward(). Note: Currently will never execute because
	  the only callers that supply a calling channel supply a hungup or
	  zombie channel. * Make feature_request_and_dial() put the
	  transferee into autoservice when it calls ast_call_forward() in
	  case a redirection interception macro is run. Note: Currently
	  will never happen because the caller channel (Party B) is always
	  hungup at this time. * Make feature_request_and_dial() ignore the
	  AST_CONTROL_PROCEEDING frame to silence a log message. ........
	  Merged revisions 348464 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* main/channel.c, /: Fix cut and past error in ast_call_forward().
	  (issue ASTERISK-18836) ........ Merged revisions 348401 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* main/channel.c, main/pbx.c, /, apps/app_authenticate.c,
	  funcs/func_cdr.c, main/features.c, include/asterisk/cdr.h,
	  apps/app_followme.c, apps/app_queue.c, res/res_monitor.c: Fix
	  crash during CDR update. The ast_cdr_setcid() and
	  ast_cdr_update() were shown in ASTERISK-18836 to be called by
	  different threads for the same channel. The channel driver thread
	  and the PBX thread running dialplan. * Add lock protection around
	  CDR API calls that access an ast_channel pointer. (closes issue
	  ASTERISK-18836) Reported by: gpluser Review:
	  https://reviewboard.asterisk.org/r/1628/ ........ Merged
	  revisions 348362 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* apps/app_parkandannounce.c, /: Fix ParkAndAnnounce to pass the
	  CallerID to the announcing channel. ParkAndAnnounce tried to pass
	  the CallerID to the announcing channel but the ID was wiped out
	  by the channel masquerade done when parking the call. * Save the
	  CallerID before parking the channel to pass it to the announcing
	  channel. * Fixed a minor memory leak in ParkAndAnnounce. *
	  Updated some ParkAndAnnounce log messages. ........ Merged
	  revisions 348310 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-14 22:34 +0000 [r348265]  Matthew Jordan <mjordan@digium.com>

	* apps/app_originate.c: Added support for all slin formats to
	  app_originate Previously, app_originate could not originate a
	  call into a non-8kHz conference bridge as the formats for
	  non-8kHz slin codecs were not applied to the created channel.
	  This patch adds all of the formats by default, such that if a
	  created channel has a codec that supports a higher sampling rate,
	  a translation path can be built between it and other channels.

2011-12-14 22:05 +0000 [r348213]  Matthew Nicholson <mnicholson@digium.com>

	* /, res/res_fax.c: Don't clear LOCALSTATIONID before sending or
	  receiving. The user may set that variable. ASTERISK-18921
	  ........ Merged revisions 348212 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-14 21:58 +0000 [r348211]  Matthew Jordan <mjordan@digium.com>

	* apps/app_queue.c: Fixed Asterisk crash when function QUEUE_MEMBER
	  receives invalid input The function QUEUE_MEMBER has two required
	  parameters (queuename, option). It was only checking for the
	  presence of queuename. The patch checks for the existence of the
	  option parameter and provides better error logging when invalid
	  values are provided for the option parameter as well.

2011-12-14 20:35 +0000 [r348155-348158]  Jonathan Rose <jrose@digium.com>

	* /, configs/features.conf.sample: Fix accidental use of tabs
	  instead of spaces from previous features.conf.sample change
	  ........ Merged revisions 348157 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, configs/features.conf.sample: Document PARKINGSLOT variable in
	  features.conf.sample (issue ASTERISK-16239) ........ Merged
	  revisions 348154 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-13 23:06 +0000 [r348102]  Richard Mudgett <rmudgett@digium.com>

	* /, bridges/bridge_builtin_features.c, apps/app_followme.c: Fix
	  FollowMe CallerID on outgoing calls. The addition of the
	  Connected Line support changed how CallerID is passed to outgoing
	  calls. The FollowMe application was not updated to pass CallerID
	  to the outgoing calls. * Fix FollowMe CallerID on outgoing calls.
	  * Restructured findmeexec() to fix several memory leaks and
	  eliminate some duplicated code. * Made check the return value of
	  create_followme_number(). Putting a NULL into the numbers list is
	  bad if create_followme_number() fails. * Fixed a couple uses of
	  ast_strdupa() inside loops. * The changes to
	  bridge_builtin_features.c fix a similar CallerID issue with the
	  bridging API attended and blind transfers. (Not used at this
	  time.) (closes issue ASTERISK-17557) Reported by: hamlet505a
	  Tested by: rmudgett Review:
	  https://reviewboard.asterisk.org/r/1612/ ........ Merged
	  revisions 348101 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-13 15:20 +0000 [r348056]  Stefan Schmidt <sst@sil.at>

	* channels/chan_sip.c: Fix possible misshandling of an incoming SIP
	  response as a peer poke response. Also make sure peer has even
	  qualify enabled when handle a peer poke response. (closes issue
	  ASTERISK-18940) Reported by: Vitaliy Tested by: Vitaliy and
	  UnixDev Review: https://reviewboard.asterisk.org/r/1620 Reviewed
	  by: David Vossel ........ Merged revisions 348048 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-12 19:24 +0000 [r347996]  Terry Wilson <twilson@digium.com>

	* res/res_srtp.c, /: Add a separate buffer for SRTCP packets The
	  function ast_srtp_protect used a common buffer for both SRTP and
	  SRTCP packets. Since this function can be called from multiple
	  threads for the same SRTP session (scheduler for SRTCP and
	  channel for SRTP) it was possible for the packets to become
	  corrupted as the buffer was used by both threads simultaneously.
	  This patch adds a separate buffer for SRTCP packets to avoid the
	  problem. (closes issue ASTERISK-18889, Reported/patch by Daniel
	  Collins) ........ Merged revisions 347995 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-12 18:13 +0000 [r347953-347955]  Richard Mudgett <rmudgett@digium.com>

	* configs/extensions.conf.sample, configs/iax.conf.sample,
	  configs/chan_dahdi.conf.sample, configs/chan_ooh323.conf.sample,
	  configs/vpb.conf.sample, configs/extensions.lua.sample,
	  configs/sip.conf.sample: Reverting -r347953 for ASTERISK-14122

	* configs/extensions.conf.sample, configs/iax.conf.sample,
	  configs/chan_dahdi.conf.sample, configs/chan_ooh323.conf.sample,
	  configs/vpb.conf.sample, configs/extensions.lua.sample,
	  configs/sip.conf.sample: Update sample configs to put incoming
	  calls into context public. * Add warning about the SIP allowguest
	  option in context public. (closes issue ASTERISK-14122) Reported
	  by: Alec Davis Review: https://reviewboard.asterisk.org/r/719/

2011-12-09 01:29 +0000 [r347812]  Richard Mudgett <rmudgett@digium.com>

	* main/pbx.c, /: Fix some parsing issues in
	  add_exten_to_pattern_tree(). * Simplify compare_char() and avoid
	  potential sign extension issue. * Fix infinite loop in
	  add_exten_to_pattern_tree() handling of character set escape
	  handling. * Added buffer overflow checks in
	  add_exten_to_pattern_tree() character set collection. * Made
	  ignore empty character sets. * Added escape character handling to
	  end-of-range character in character sets. This has a slight
	  change in behavior if the end-of-range character is an escape
	  character. You must now escape it. * Fix potential sign extension
	  issue when expanding character set ranges. * Made remove
	  duplicated characters from character sets. The duplicate
	  characters lower extension matching priority and prevent
	  duplicate extension detection. * Fix escape character handling
	  when the escape character is trying to escape the end-of-string.
	  We could have continued processing characters after the end of
	  the exten string. We could have added the previous character to
	  the pattern matching tree incorrectly. (closes issue
	  ASTERISK-18909) Reported by: Luke-Jr ........ Merged revisions
	  347811 from http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-08 21:31 +0000 [r347727]  Walter Doekes <walter+asterisk@wjd.nu>

	* /, channels/chan_sip.c: Fix regression when using tcpenable=no
	  and tlsenable=yes. The tlsenable settings are tucked away in
	  main/tcptls.c, so I missed them when resolving ASTERISK-18837.
	  This should resolve the test suite breakage of the sip tls tests.
	  Review: https://reviewboard.asterisk.org/r/1615 Reviewed by: Matt
	  Jordan ........ Merged revisions 347718 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-08 20:43 +0000 [r347656]  Jonathan Rose <jrose@digium.com>

	* apps/app_queue.c: Fix regressed behavior of queue set penalty to
	  work without specifying 'in <queuename>' r325483 caused a
	  regression in Asterisk 10+ that would make Asterisk segfault when
	  attempting to set penalty on an interface without specifying a
	  queue in the queue set penalty CLI command. In addition, no
	  attempt would be made whatsoever to perform the penalty setting
	  on all the queues in the core list with either the cli command or
	  the non-segfaulting ami equivalent. This patch fixes that and
	  also makes an attempt to document and rename some functions
	  required by this command to better represent what they actually
	  do. Oh yeah, and the use of this command without specifying a
	  specific queue actually works now. Review:
	  https://reviewboard.asterisk.org/r/1609/

2011-12-08 17:53 +0000 [r347600]  Richard Mudgett <rmudgett@digium.com>

	* /, main/features.c: Mark channel running the h exten with the
	  soft-hangup flag. When a bridge is broken, ast_bridge_call()
	  might execute the h exten on the calling channel. However, that
	  channel may not have been the channel that broke the bridge by
	  hanging up. The channel executing the h exten must be in a hung
	  up state so things like AGI run in the correct mode. * Make sure
	  ast_bridge_call() marks the channel it is executing the h exten
	  on as hung up. (The AST_SOFTHANGUP_APPUNLOAD flag is used so as
	  to match the pbx.c main dialplan execution loop when it executes
	  the h exten.) (closes issue ASTERISK-18811) Reported by: David
	  Hajek Patches: jira_asterisk_18811_v1.8.patch (license #5621)
	  patch uploaded by rmudgett Tested by: David Hajek, rmudgett
	  ........ Merged revisions 347595 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-08 16:20 +0000 [r347532]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Don't crash on INFO automon request with
	  no channel AST-2011-014. When automon was enabled in
	  features.conf, it was possible to crash Asterisk by sending an
	  INFO request if no channel had been created yet. (closes issue
	  ASTERISK-18805) ........ Merged revisions 347530 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.6.2 ........
	  Merged revisions 347531 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-07 21:39 +0000 [r347439]  Richard Mudgett <rmudgett@digium.com>

	* main/manager.c, /: Update AMI Getvar and Setvar documentation
	  about supplying a channel name. (closes issue ASTERISK-18958)
	  Reported by: Red Patches: jira_asterisk_18958_v1.8.patch (license
	  #5621) patch uploaded by rmudgett ........ Merged revisions
	  347438 from http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-07 20:27 +0000 [r347383]  Jonathan Rose <jrose@digium.com>

	* /, apps/app_meetme.c: Fix: Meetme recording variables from
	  realtime DB use null entries over channel variables Meetme would
	  attempt to substitute the realtime values of RECORDING_FILE and
	  RECORDING_FORMAT from the meetme db entry instead of using the
	  channel variable set for those variables in spite of those
	  database entries being NULL or even lacking a column to represent
	  them. (closes issue ASTERISK-18873) Reported by: Byron Clark
	  Patches: ASTERISK-18873-1.patch uploaded by Byron Clark (license
	  6157) ........ Merged revisions 347369 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-07 20:12 +0000 [r347344]  Terry Wilson <twilson@digium.com>

	* Makefile, include/asterisk/paths.h, configs/asterisk.conf.sample,
	  build_tools/make_defaults_h, main/asterisk.c, main/db.c: Add
	  ASTSBINDIR to the list of configurable paths This patch also
	  makes astdb2sqlite3 and astcanary use the configured directory
	  instead of relying on $PATH. (closes issue ASTERISK-18959)
	  Review: https://reviewboard.asterisk.org/r/1613/

2011-12-06 23:56 +0000 [r347293]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/chan_sip.c: Make SIP INFO messages for dtmf-relay
	  signals case insensitive. (closes issue ASTERISK-18924) Reported
	  by: Kevin Taylor ........ Merged revisions 347292 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-06 21:53 +0000 [r347240]  Jonathan Rose <jrose@digium.com>

	* main/pbx.c, /: Documents CHANNEL(musicclass) taking priority over
	  m([x]) in waitExten If waitExten specifies a music class to use
	  with its music on hold option, it will use CHANNEL(musicclass)
	  instead if that channel variable has been set on the initiating
	  channel. This documents that behavior in the waitExten app so
	  that this can be known without checking the documentation of the
	  code in function local_ast_moh_start. (closes issue
	  ASTERISK-18804) ........ Merged revisions 347239 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-06 19:42 +0000 [r347124-347167]  Walter Doekes <walter+asterisk@wjd.nu>

	* /, channels/chan_sip.c: Don't allow transport=tcp when
	  tcpenable=no. When tcpenable=no, sending to transport=tcp hosts
	  was still allowed. Resolving the source address wasn't possible
	  and yielded the string "(null)" in SIP messages. Fixed that and a
	  couple of not-so-correct log messages. (closes issue
	  ASTERISK-18837) Reported by: Andreas Topp Review:
	  https://reviewboard.asterisk.org/r/1585 Reviewed by: Matt Jordan
	  ........ Merged revisions 347166 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* apps/app_voicemail.c, /: Add regression tests for issue
	  ASTERISK-18838. Review: https://reviewboard.asterisk.org/r/1572
	  Reviewed by: Matt Jordan ........ Merged revisions 347131 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* apps/app_voicemail.c, /: Move setting of voicemail zonetag and
	  locale up a bit. The voicemail [general] zonetag and locale
	  variables weren't loaded until after the mailboxes were
	  initialized. This caused the settings to be unset for those
	  mailboxes until a reload was performed. (closes issue
	  ASTERISK-18838) Review: https://reviewboard.asterisk.org/r/1570
	  Reviewed by: Matt Jordan ........ Merged revisions 347111 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-06 17:24 +0000 [r347068]  Matthew Jordan <mjordan@digium.com>

	* /, channels/chan_sip.c: Fixed crash from orphaned MWI
	  subscriptions in chan_sip This patch resolves the issue where MWI
	  subscriptions are orphaned by subsequent SIP SUBSCRIBE messages.
	  When a peer is removed, either by pruning realtime SIP peers or
	  by unloading / loading chan_sip, the MWI subscriptions that were
	  orphaned would still be on the event engine list of valid
	  subscriptions but have a pointer to a peer that no longer was
	  valid. When an MWI event would occur, this would cause a seg
	  fault. (closes issue ASTERISK-18663) Reported by: Ross Beer
	  Tested by: Ross Beer, Matt Jordan Patches:
	  blf_mwi_diff_12_06_11.txt uploaded by Matt Jordan (license 6283)
	  Review: https://reviewboard.asterisk.org/r/1610/ ........ Merged
	  revisions 347058 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-05 17:42 +0000 [r347007]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, channels/sig_analog.c, /,
	  channels/sig_analog.h: Restore call progress code for analog
	  ports. Extracting sig_analog from chan_dahdi lost call progress
	  detection functionality. * Fix analog ports from considering a
	  call answered immediately after dialing has completed if the
	  callprogress option is enabled. (closes issue ASTERISK-18841)
	  Reported by: Richard Miller Patches: chan_dahdi.diff (license
	  #5685) patch uploaded by Richard Miller (Modified by me)
	  sig_analog.c.diff (license #5685) patch uploaded by Richard
	  Miller (Modified by me) sig_analog.h.diff (license #5685) patch
	  uploaded by Richard Miller ........ Merged revisions 347006 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-05 15:02 +0000 [r346955]  Jonathan Rose <jrose@digium.com>

	* main/pbx.c, /: Resolve duplicate label used in multiple
	  priorities for the same extension. Prior to this patch, if labels
	  with the same name were used for different priorities in the same
	  extension, the new label would be accepted, but it would be
	  unusable since attempts to reach that label would just go to the
	  first one. Now pbx.c detects this, generates a warning in logs,
	  and culls the label before adding it to the dialplan. (closes
	  issue ASTERISK-18807) Reported by: Kenneth Shumard Patches:
	  pbx.c.patch uploaded by Kenneth Shumard (License 5077) ........
	  Merged revisions 346954 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-05 14:46 +0000 [r346952]  Kinsey Moore <kmoore@digium.com>

	* res/res_jabber.exports.in, /: Fix chan_jingle/gtalk load
	  regression introduced in r346087 Add missing symbol exports for
	  ast_aji_client_destroy and ast_aji_buddy_destroy for usage
	  outside res_jabber. Testing of these changes focused on
	  res_jabber itself, so this problem was missed. Reported-by:
	  Michael Spiceland ........ Merged revisions 346951 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-04 10:03 +0000 [r346900]  Walter Doekes <walter+asterisk@wjd.nu>

	* /, channels/chan_sip.c: For SIP REGISTER fix domain-only URIs and
	  domain ACL bypass. The code that allowed admins to create users
	  with domain-only uri's had stopped to work in 1.8 because of the
	  reqresp parser rewrites. This is fixed now: if you have a
	  [mydomain.com] sip user, you can register with useraddr
	  sip:mydomain.com. Note that in that case -- if you're using
	  domain ACLs (a configured domain list) -- mydomain.com must be in
	  the allow list as well. Reviewboard r1606 shows a list of
	  registration combinations and which SIP response codes are
	  returned. Review: https://reviewboard.asterisk.org/r/1533/
	  Reviewed by: Terry Wilson (closes issue ASTERISK-18389) (closes
	  issue ASTERISK-18741) ........ Merged revisions 346899 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-02 23:27 +0000 [r346856]  Matthew Jordan <mjordan@digium.com>

	* channels/chan_sip.c: Update SIP MESSAGE To parsing to correctly
	  handle URI The previous patch (r346040) incorrectly parsed the
	  URI in the presence of a port, e.g., user@hostname:port would
	  fail as the port would be double appended to the SIP message.
	  This patch uses the parse_uri function to correctly parse the URI
	  into its username and hostname parts, and places them in the
	  correct fields in the sip_pvt structure. (issue ASTERISK-18903)
	  Review: https://reviewboard.asterisk.org/r/1597/

2011-12-02 16:42 +0000 [r346763]  Alexandr Anikin <may@telecom-service.ru>

	* addons/chan_ooh323.c, /, channels/chan_h323.c: Merged revisions
	  346762 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r346762 | may | 2011-12-02 20:19:19 +0400 (Fri, 02 Dec 2011) | 7
	  lines process null frame pointer returned by
	  ast_rtp_instance_read correctly (closes issue ASTERISK-16697)
	  Reported by: under Patches: segfault.diff (License #5871) patch
	  uploaded by under ........

2011-12-01 21:14 +0000 [r346701]  Richard Mudgett <rmudgett@digium.com>

	* main/stun.c, /, res/res_stun_monitor.c,
	  configs/res_stun_monitor.conf.sample, include/asterisk/stun.h:
	  Re-resolve the STUN address if a STUN poll fails for
	  res_stun_monitor. The STUN socket must remain open between polls
	  or the external address seen by the STUN server is likely to
	  change. However, if the STUN request poll fails then the STUN
	  server address needs to be re-resolved and the STUN socket needs
	  to be closed and reopened. * Re-resolve the STUN server address
	  and create a new socket if the STUN request poll fails. * Fix
	  ast_stun_request() return value consistency. * Fix
	  ast_stun_request() to check the received packet for expected
	  message type and transaction ID. * Fix ast_stun_request() to read
	  packets until timeout or an associated response packet is found.
	  The stun_purge_socket() hack is no longer required. * Reduce
	  ast_stun_request() error messages to debug output. * No longer
	  pass in the destination address to ast_stun_request() if the
	  socket is already bound or connected to the destination. (closes
	  issue ASTERISK-18327) Reported by: Wolfram Joost Tested by:
	  rmudgett Review: https://reviewboard.asterisk.org/r/1595/
	  ........ Merged revisions 346700 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-12-01 20:37 +0000 [r346565-346698]  Jonathan Rose <jrose@digium.com>

	* /, channels/chan_sip.c: Change 183 Ringing in sipfrag body to 180
	  ringing. 183 Ringing isn't even a thing. 183 is actually a
	  session progress message. (closes issue ASTERISK-18925) Reported
	  by: Sebastian Denz Tested by: jrose Patches:
	  asterisk18-use_180_instead_of_183_in_sipfrag.diff by Sebastian
	  Denz (License #6139) ........ Merged revisions 346697 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* main/tcptls.c, /, channels/chan_sip.c, include/asterisk/tcptls.h:
	  r346525 | jrose | 2011-11-30 15:10:38 -0600 (Wed, 30 Nov 2011) |
	  18 lines Cleaning up chan_sip/tcptls file descriptor closing.
	  This patch attempts to eliminate various possible instances of
	  undefined behavior caused by invoking close/fclose in situations
	  where fclose may have already been issued on a
	  tcptls_session_instance and/or closing file descriptors that
	  don't have a valid index for fd (-1). Thanks for more than a
	  little help from wdoekes. (closes issue ASTERISK-18700) Reported
	  by: Erik Wallin (issue ASTERISK-18345) Reported by: Stephane
	  Cazelas (issue ASTERISK-18342) Reported by: Stephane Chazelas
	  Review: https://reviewboard.asterisk.org/r/1576/ ........ Merged
	  revisions 346564 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-30 19:37 +0000 [r346473]  Leif Madsen <lmadsen@digium.com>

	* /, configs/queues.conf.sample: Update queues.conf.sample
	  documentation. Update the documentation surrounding the use of
	  MONITOR_EXEC to make it more clear that it can be used for both
	  Monitor() and MixMonitor() usage. (closes issue ASTERISK-17413)
	  Reported by: David Woolley Patches:
	  issue18817_mixmonitor_queues_doc.diff by Michael L. Young
	  (License #5026) ........ Merged revisions 346472 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-29 00:00 +0000 [r346349]  David Vossel <dvossel@digium.com>

	* include/asterisk/message.h, main/message.c: Fixes memory leak in
	  message API. The ast_msg_get_var function did not properly
	  decrement the ref count of the var it retrieves. The way this is
	  implemented is a bit tricky, as we must decrement the var and
	  then return the var's value. As long as the documentation for the
	  function is followed, this will not result in a dangling pointer
	  as the ast_msg structure owns its own reference to the var while
	  it exists in the var container.

2011-11-28 14:32 +0000 [r346293]  Stefan Schmidt <sst@sil.at>

	* res/res_rtp_asterisk.c, /: Fix regression that 'rtp/rtcp set
	  debup ip' only works when also a port was specified. (closes
	  issue ASTERISK-18693) Reported by: Davide Dal Fra Review:
	  https://reviewboard.asterisk.org/r/1600/ Reviewed by: Walter
	  Doekes ........ Merged revisions 346292 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-23 22:58 +0000 [r346240]  Richard Mudgett <rmudgett@digium.com>

	* include/asterisk/acl.h, /, channels/chan_skinny.c,
	  channels/chan_h323.c, main/acl.c, channels/chan_iax2.c: Fix calls
	  to ast_get_ip() not initializing the address family. ........
	  Merged revisions 346239 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-23 20:45 +0000 [r346145-346198]  Walter Doekes <walter+asterisk@wjd.nu>

	* /, channels/chan_sip.c: Minor cleanup in chan_sip get_msg_text()
	  function. In r116240, get_msg_text() got an extra parameter to
	  fix the unwanted addition of trailing newlines to SIP MESSAGE
	  bodies. This caused all linefeeds to be trimmed, which isn't
	  right either. This is a stop-gap; the right fix is to return the
	  original SIP request body. Review:
	  https://reviewboard.asterisk.org/r/1586 Reviewed by: Matt Jordan
	  ........ Merged revisions 346147 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, include/asterisk/strings.h: Fix ast_str_truncate signedness
	  warning and documentation. Review:
	  https://reviewboard.asterisk.org/r/1594 ........ Merged revisions
	  346144 from http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-23 17:14 +0000 [r346087]  Kinsey Moore <kmoore@digium.com>

	* channels/chan_jingle.c, /, include/asterisk/jabber.h,
	  channels/chan_gtalk.c, res/res_jabber.c: Fix res_jabber resource
	  leaks This should fix almost all resource leaks in res_jabber
	  that involve ASTOBJ_CONTAINER_FIND and resolves an ambiguous
	  situation where ast_aji_get_client would sometimes bump an
	  object's refcount and sometimes not. Review:
	  https://reviewboard.asterisk.org/r/1553 ........ Merged revisions
	  346086 from http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-23 16:19 +0000 [r346040]  Matthew Jordan <mjordan@digium.com>

	* channels/chan_sip.c: Fixed SendMessage stripping extension from
	  To: header in SIP MESSAGE When using the MessageSend application
	  to send a SIP MESSAGE to a non-peer, chan_sip attempted to
	  validate the hostname or IP Address. In the process, it stripped
	  off the extension and failed to add it back to the sip_pvt
	  structure before transmitting. This patch adds the full URI
	  passed in from the message core to the sip_pvt structure. (closes
	  issue ASTERISK-18903) Reported by: Shaun Clark Tested by: Matt
	  Jordan Review: https://reviewboard.asterisk.org/r/1597/

2011-11-23 16:10 +0000 [r346031]  Terry Wilson <twilson@digium.com>

	* /, res/res_musiconhold.c: Resume playing existing hold music for
	  cached realtime MOH As a result of the fix for ASTERISK-18039,
	  realtime caching MOH no longer properly resumes playing back a
	  file between different holds in the same call. This is because
	  scanning for new files causes the existing file array to be
	  emptied and we were just comparing that the saved pointer to the
	  filename matched the pointer to the filename in a particular
	  position in the array. An easy fix is to save the filename
	  instead of a pointer to it and then do a strcmp instead of
	  comparing the addresses. (closes issue ASTERISK-18912) Review:
	  https://reviewboard.asterisk.org/r/1596/ ........ Merged
	  revisions 346030 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-23 16:06 +0000 [r346029]  Paul Belanger <pabelanger@digium.com>

	* res/res_format_attr_celt.c, res/res_format_attr_silk.c: Added
	  support level for new modules

2011-11-22 23:00 +0000 [r345977]  Richard Mudgett <rmudgett@digium.com>

	* main/dnsmgr.c, /, include/asterisk/dnsmgr.h: Fix dnsmgr entries
	  to ask for the same address family each time. The dnsmgr refresh
	  would always get the first address found regardless of the
	  original address family requested. So if you asked for only IPv4
	  addresses originally, you might get an IPv6 address on refresh. *
	  Saved the original address family requested by
	  ast_dnsmgr_lookup() to be used when the address is refreshed.
	  ........ Merged revisions 345976 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-22 20:31 +0000 [r345924]  Walter Doekes <walter+asterisk@wjd.nu>

	* include/asterisk/logger.h, /: Clarify why the AST_LOG_* macros
	  exist next to the LOG_* macros. (issue ASTERISK-17973) ........
	  Merged revisions 345923 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-22 16:40 +0000 [r345882]  Paul Belanger <pabelanger@digium.com>

	* apps/confbridge/conf_config_parser.c: Add missing sound_only_one
	  config variable (closes issue ASTERISK-18895) Reported by:
	  zvision Patches: conf_config_parser.diff (license #5755) patch
	  uploaded by zvision

2011-11-21 21:07 +0000 [r345830]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c, configs/sip.conf.sample, CHANGES: Default
	  to nat=yes; warn when nat in general and peer differ It is
	  possible to enumerate SIP usernames when the general and
	  user/peer nat settings differ in whether to respond to the port a
	  request is sent from or the port listed for responses in the Via
	  header. In 1.4 and 1.6.2, this would mean if one setting was
	  nat=yes or nat=route and the other was either nat=no or
	  nat=never. In 1.8 and 10, this would mean when one was
	  nat=force_rport and the other was nat=no. In order to address
	  this problem, it was decided to switch the default behavior to
	  nat=yes/force_rport as it is the most commonly used option and to
	  strongly discourage setting nat per-peer/user when at all
	  possible. For more discussion of the issue, please see:
	  http://lists.digium.com/pipermail/asterisk-dev/2011-November/052191.html
	  (closes issue ASTERISK-18862) Review:
	  https://reviewboard.asterisk.org/r/1591/ ........ Merged
	  revisions 345776 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.4 ........ Merged
	  revisions 345800 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.6.2 ........
	  Merged revisions 345828 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-19 15:10 +0000 [r345640-345683]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, main/db.c: Update the documentation to better clarify how the
	  existing commands work. Review:
	  https://reviewboard.asterisk.org/r/1593/ ........ Merged
	  revisions 345682 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* main/db.c: Fix a change in behavior in 'database show' from 1.8.
	  In 1.8 and previous versions, one could use any fullword portion
	  of the key name, including the full key, to obtain the record.
	  Until this patch, this did not work for the full key. Closes
	  issue ASTERISK-18886 Patch: by tilghman Review: by twilson
	  (http://pastebin.com/7rtu6bpk) on #asterisk-dev

2011-11-17 17:29 +0000 [r345558]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/sig_pri.c: Remove dead code since pri_grab() can
	  never fail. Dead code makes programmers sick. I am sick of
	  looking at it. ........ Merged revisions 345546 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-16 14:49 +0000 [r345488]  Jonathan Rose <jrose@digium.com>

	* apps/app_voicemail.c, /: Guarantee messages go into the right
	  folders with multiple recipients Before, using the U flag in
	  Voicemail with multiple recipients would put urgent messages in
	  the INBOX folder for all users past the first thanks to a bug
	  with the message copying function. This would also cause messages
	  to fail to be sent if the INBOX directory hadn't been created for
	  that mailbox yet. (closes issue ASTERISK-18245) Reported by: Matt
	  Jordan (closes issue ASTERISK-18246) Reported by: Matt Jordan
	  Review: https://reviewboard.asterisk.org/r/1589/ ........ Merged
	  revisions 345487 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-15 20:10 +0000 [r345220-345432]  Richard Mudgett <rmudgett@digium.com>

	* /, res/res_agi.c: Make FastAGI HANGUP show up in AGI debug
	  output. * Change from using send() to ast_agi_send() so the
	  HANGUP shows up in the AGI debug output. (closes issue
	  ASTERISK-18723) Reported by: James Van Vleet Patches:
	  jira_asterisk_18723_v1.8.patch (license #5621) patch uploaded by
	  rmudgett ........ Merged revisions 345431 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, channels/sig_pri.c: Fix typo in sig_pri using wrong structure
	  name. It is fortunate that the typo does not alter generated code
	  since the e->restart.channel and e->ring.channel members are in
	  the same position. (closes issue ASTERISK-18868) Reported by:
	  zvision Patches: sig_pri.c.diff (License #5755) patch uploaded by
	  zvision ........ Merged revisions 345370 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, apps/app_queue.c: Make queue log indicate if ADDMEMBER is
	  paused for AMI and realtime. * Add parameter to queue log
	  ADDMEMBER to indicate if the member is paused. (closes issue
	  ASTERISK-18645) Reported by: garlew Patches: paused.diff (License
	  #5337) patch uploaded by garlew Tested by: rmudgett, garlew
	  Review: https://reviewboard.asterisk.org/r/1469/ ........ Merged
	  revisions 345285 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, channels/chan_sip.c, configs/sip.conf.sample, UPGRADE-1.8.txt,
	  channels/sip/include/sip.h: Restore SIP DTMF overlap dialing
	  method. The recent fix for ASTERISK-17288 to get RFC3578 SIP
	  overlap support working correctly removed a long standing ability
	  to do overlap dialing using DTMF in the early media phase of a
	  call. See ASTERISK-18702 it has a very good description of the
	  issue. I started with Pavel Troller's chan_sip.diff patch on
	  issue ASTERISK-18702. * Added 'dtmf' enum value to sip.conf
	  allowoverlap config option. The new option value causes the
	  Incomplte application to not send anything with chan_sip so the
	  caller can supply more digits via DTMF. * Renames
	  SIP_GET_DEST_PICKUP_EXTEN_FOUND to SIP_GET_DEST_EXTEN_MATCHMORE
	  since that is what it really means. * Fixed get_destination()
	  inconsistency with the pickup extension matching. * Fixed
	  initialization of PAGE3 of global_flags in reload_config().
	  (closes issue ASTERISK-18702) Reported by: Pavel Troller Review:
	  https://reviewboard.asterisk.org/r/1517/ Review:
	  https://reviewboard.asterisk.org/r/1582/ ........ Merged
	  revisions 345273 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* main/pbx.c, /: Fix Progress spelling error in main/pbx.c. (closes
	  issue ASTERISK-18857) Reported by: David M Patches:
	  mainpbx-trivial.patch (License #6326) patch uploaded by David M
	  ........ Merged revisions 345219 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-14 19:10 +0000 [r345164]  Terry Wilson <twilson@digium.com>

	* main/channel.c, /: Don't read past end of input when calling
	  write() int blah = 1; ... write(chan->alertpipe[1], &blah,
	  new_frames * sizeof(blah)) != (new_frames * sizeof(blah))) is
	  only valid when new_frames == 1. Otherwise we start reading into
	  adjacent variables declared on the stack. The read end discards
	  what is read, so the values don't matter but it's not a good idea
	  to read past where we want even though new_frames is almost
	  always 1 and should never be large. This patch is basically taken
	  out of kpfleming's eventfd branch, as he mentioned that he
	  remembered fixing it there when I talked to him about this issue.
	  Review: https://reviewboard.asterisk.org/r/1583/ ........ Merged
	  revisions 345163 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-14 19:01 +0000 [r345161]  Walter Doekes <walter+asterisk@wjd.nu>

	* channels/sip/include/reqresp_parser.h, /: Update reqresp_parser
	  parse_uri doxygen comments. The issue mentioned in the bug report
	  had been fixed recently by twilson. The reporter included this
	  documentation fix. (closes issue ASTERISK-18572) Reported by:
	  Richard Miller Patch by: Richard Miller (modified) ........
	  Merged revisions 345160 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-14 16:12 +0000 [r345117]  Jonathan Rose <jrose@digium.com>

	* apps/app_voicemail.c, /: Moves voicemail setup password entry to
	  the end of the setup process. This change was made because
	  forcegreeting and forcename settings in voicemail could be
	  circumvented by hanging up after entering a password, because the
	  only way voicemail currently observes whether a mailbox is new or
	  not is by checking to see if the password is the same as the
	  mailbox number or not. (closes issue ASTERISK-18282) Reported by:
	  Matt Jordan Review: https://reviewboard.asterisk.org/r/1581/
	  ........ Merged revisions 345062 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-14 15:10 +0000 [r345064]  Kinsey Moore <kmoore@digium.com>

	* /, channels/chan_sip.c: Ensure that a null vmexten does not cause
	  a segfault When sip_send_mwi_to_peer was modified recently to
	  avoid deadlocks, vmexten was not expected to be null. This change
	  handles that situation to avoid a segfault. ........ Merged
	  revisions 345063 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-12 16:17 +0000 [r344966]  Gregory Nietsky <gregory@distrotech.co.za>

	* channels/chan_misdn.c, /: mISDN Round Robin break when no channel
	  is available Prevent channels been parsed repetitively. ........
	  Merged revisions 344965 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-12 00:34 +0000 [r344900]  Terry Wilson <twilson@digium.com>

	* /, res/res_musiconhold.c: Don't forget to rescan MOH files for
	  cached realtime classes Realtime MOH class caching was
	  implemented because without it, you would build a completely new
	  MOH class and would start the music over at the beginning each
	  time hold was pressed in a conversation. Unfortunately, this
	  broke re-scanning for file changes for realtime MOH classes. This
	  patch corrects that issue. (closes issue ASTERISK-18039) Review:
	  https://reviewboard.asterisk.org/r/1579/ ........ Merged
	  revisions 344899 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-11 21:58 +0000 [r344845]  Walter Doekes <walter+asterisk@wjd.nu>

	* include/asterisk/stringfields.h, include/asterisk/utils.h, /,
	  main/utils.c: Use __alignof__ instead of sizeof for stringfield
	  length storage. Kevin P Fleming suggested that r343157 should use
	  __alignof__ instead of sizeof. For most systems this won't be an
	  issue, but better fix it now while it's still fresh. Review:
	  https://reviewboard.asterisk.org/r/1573 ........ Merged revisions
	  344843 from http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-11 21:50 +0000 [r344842]  Matthew Jordan <mjordan@digium.com>

	* /, main/file.c: Video format was treated as audio when removed
	  from the file playback scheduler This patch fixes the format type
	  check in ast_closestream and filestream_destructor. Previously a
	  comparison operator was used, but since audio formats are no
	  longer contiguous (and AST_FORMAT_AUDIO_MASK includes formats
	  that have a value greater than the video formats), a bitwise AND
	  operation is used instead. Duplicated code was also moved to
	  filestream_close. (closes issue ASTERISK-18682) Reported by: Aldo
	  Bedrij Tested by: Matt Jordan Review:
	  https://reviewboard.asterisk.org/r/1580/ ........ Merged
	  revisions 344823 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-11 21:36 +0000 [r344836-344839]  Walter Doekes <walter+asterisk@wjd.nu>

	* /, channels/sip/reqresp_parser.c: Remove unneeded if(params)
	  checks in reqresp_parser. Nick Lewis added them in
	  https://reviewboard.asterisk.org/r/549/diff/1-2/ for no apparent
	  reason. There is no way that params could become NULL in that
	  piece of code, so I removed these excess checks again. ........
	  Merged revisions 344837 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* main/manager.c, /: Fix bad quoting of multiline mxml opaque_data
	  that caused invalid xml. The opaque_data was added and enclosed
	  in single quotes, assuming it would be only a single line. The
	  rest of the lines were appended after the closing quote. (closes
	  issue ASTERISK-18852) Reported by: peep_ on IRC Review:
	  https://reviewboard.asterisk.org/r/1577 ........ Merged revisions
	  344835 from http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-11 20:14 +0000 [r344770]  Kinsey Moore <kmoore@digium.com>

	* /, channels/chan_sip.c: Fix regression introduced by SDP fixups
	  If capability is adjusted when switching to UDPTL during fax
	  transmission, fax teardown fails. Make sure capability is only
	  touched if RTP is active. This regression was introduced in
	  R344385. ........ Merged revisions 344769 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-11 18:36 +0000 [r344662-344716]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/chan_sip.c: Check sip.conf maxforwards parameter for
	  range 1 <= x <= 255. JIRA AST-710 ........ Merged revisions
	  344715 from http://svn.asterisk.org/svn/asterisk/branches/1.8

	* main/cli.c, /: Make CLI "core show channel" not hold the channel
	  lock during console output. Holding the channel lock while the
	  CLI "core show channel" command is executing can slow down the
	  system. It could block the system if the console output is halted
	  or paused. * Made capture the CLI "core show channel" output into
	  a buffer to be output after the channel is unlocked. * Removed
	  use of C++ keyword as a variable name. out renamed to obuf. *
	  Checked allocation of obuf for failure so will not crash. (closes
	  issue ASTERISK-18571) Reported by: Pavel Troller Tested by:
	  rmudgett ........ Merged revisions 344661 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-11 15:33 +0000 [r344609]  Jonathan Rose <jrose@digium.com>

	* main/pbx.c, /: Fix a segmentation fault when using an extension
	  with CID matching and no CID. Attempting to call an extension
	  which used Caller ID matching with a channel that has an empty
	  caller id string would result in a segmentation fault. (closes
	  issue ASTERISK-18392 Reported By: Ales Zelenik ........ Merged
	  revisions 344608 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-10 23:21 +0000 [r344537-344557]  Richard Mudgett <rmudgett@digium.com>

	* apps/app_macro.c: Fix app_macro.c MODULEINFO section termination.
	  (closes issue ASTERISK-18848) Reported by: Tony Mountifield

	* /, apps/app_queue.c: Fix potential deadlock calling ast_call()
	  with channel locks held. Fixed app_queue.c:ring_entry() calling
	  ast_call() with the channel locks held. Chan_local attempts to do
	  deadlock avoidance in its ast_call() callback and could deadlock
	  if a channel lock is already held. ........ Merged revisions
	  344539 from http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, apps/app_queue.c: Make AMI event AgentCalled get
	  CallerID/ConnectedLine info from the incoming channel. It was
	  strange that the AgentCalled AMI event would get most of its
	  information from the incoming channel but then get the CallerID
	  information from the outgoing channel. Before connected line
	  support was added, this information was always the same at this
	  point. (closes issue ASTERISK-18152) Reported by: Thomas Farnham
	  Tested by: rmudgett ........ Merged revisions 344536 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-10 21:54 +0000 [r344493]  David Vossel <dvossel@digium.com>

	* main/bridging.c: Fixes issue with ConfBridge participants hanging
	  up during DTMF feature menu usage getting stuck in conference
	  forever. When a conference user enters the DTMF menu they are
	  suspended from the bridge while the channel is handed off to the
	  DTMF feature code. If a user entered this state and hungup, there
	  existed a race condition where the channel could not exit the
	  conference because it was waiting on a signal that would never
	  arrive. This patch fixes that, because it would stupid for me to
	  talk about the problem and commit a patch for something else.
	  (closes issue ASTERISK-18829) Reported by: zvision

2011-11-10 21:14 +0000 [r344386-344440]  Kinsey Moore <kmoore@digium.com>

	* /, apps/app_meetme.c: Fix another incorrect case with meetme's
	  PIN logic and add documentation This fixes an issue where a user
	  of a dynamic conference was asked for a PIN twice. This also adds
	  documentation to assist in future modifications to the piece of
	  code responsible for PIN checking. (closes issue AST-670)
	  ........ Merged revisions 344439 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, channels/chan_sip.c, channels/sip/include/sip.h: Fix several
	  bugs with SDP parsing and well-formedness of responses Fix bug
	  ASTERISK-16558 which dealt with the order of responses to
	  incoming streams defined by SDP. Fix unreported bug where
	  offering multiple same-type streams would cause Asterisk to reply
	  with an incorrect SDP response missing one or more streams
	  without a proper declination. Fix bugs related to a single
	  non-audio stream being offered with responses requesting codecs
	  that were not offered in the initial invite along with an
	  additional audio stream that was not in the initial invite.
	  Review: https://reviewboard.asterisk.org/r/1516/ ........ Merged
	  revisions 344385 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-10 16:25 +0000 [r344334]  Matthew Nicholson <mnicholson@digium.com>

	* res/res_rtp_asterisk.c, /: only attempt to do stun handling on
	  ipv4 or ipv4 mapped to ipv6 addresses Patch by: jkonieczny
	  (modified) ASTERISK-18490 ........ Merged revisions 344330 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-09 20:53 +0000 [r344271]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/chan_sip.c: Fix deadlock during dialplan reload.
	  Another deadlock between the conlock/hints and channels/channel
	  locking orders. * Don't hold the channel and private lock in
	  sip_new() when calling ast_exists_extension(). (closes issue
	  ASTERISK-18740) Reported by: Byron Clark Patches:
	  sip_exists_exten_dlock_3.diff (license #5041) patch uploaded by
	  Gregory Hinton Nietsky ASTERISK-18740.patch (license #6157) patch
	  uploaded by Byron Clark Tested by: Byron Clark ........ Merged
	  revisions 344268 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-09 20:07 +0000 [r344175-344216]  Terry Wilson <twilson@digium.com>

	* channels/sip/include/reqresp_parser.h, /, channels/chan_sip.c,
	  channels/sip/reqresp_parser.c, channels/sip/include/sip.h: Don't
	  treat a host:port string as a domain The domain matching code
	  prior to 1.8 used to manually remove the port from the host:port
	  string when determining if an incoming request matched the list
	  of domains. When switching to the new parsing functions, the
	  documentation implied that the "domain" was being returned by
	  these functions, when instead it was returning the "hostport" as
	  defined by RFC 3261. This led to confusion and resulted in 1.8+
	  rejecting an incoming request from x.x.x.x:xxxxx when
	  domain=x.x.x.x was set in sip.conf. This patch renames the
	  "domain" variables in the parsing functions to "hostport" to more
	  accurately describe what it is that they are returning and also
	  properly truncates the resulting hostport strings when dealing
	  with domain matching. Review:
	  https://reviewboard.asterisk.org/r/1574/ ........ Merged
	  revisions 344215 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, tests/test_netsock2.c: Add a unit test for
	  ast_sockaddr_split_hostport Review:
	  https://reviewboard.asterisk.org/r/1575/ ........ Merged
	  revisions 344157 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-09 19:02 +0000 [r344159-344160]  Alexandr Anikin <may@telecom-service.ru>

	* /: delete svn:mergeinfo

	* addons/ooh323c/src/ooq931.c, addons/ooh323c/src/ooh323.c, /,
	  addons/ooh323c/src/ooh245.c, addons/ooh323c/src/ooq931.h,
	  addons/ooh323c/src/ootypes.h, addons/ooh323c/src/oochannels.c:
	  Generate response to Status Enquiry message with Status q.931
	  message. Some PBXes require this for call status checking (closes
	  issue ASTERISK-18748) Reported by: Fabrizio Lazzaretti Patches:
	  ASTERISK-18748-5.patch (License #5415) patch uploaded by may213
	  Tested by: Fabrizio Lazzaretti ........ Merged revisions 344158
	  from http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-09 17:14 +0000 [r344103]  Kinsey Moore <kmoore@digium.com>

	* /, apps/app_meetme.c: Fix pin parameter behavior regression in
	  MeetMe The last time this code was touched (by me), a subtlety
	  was missed based on the difference between needing to check a
	  pin's validity and the need to prompt for a pin. (closes issue
	  ASTERISK-18488) ........ Merged revisions 344102 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-09 15:26 +0000 [r344049]  Matthew Nicholson <mnicholson@digium.com>

	* /, formats/format_wav.c: don't call ltohl() twice on the same
	  value ASTERISK-18739 Patch by: pawel (modified) ........ Merged
	  revisions 344048 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-08 21:59 +0000 [r344004]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_sip.c: Residual changes for Asterisk v10 branch
	  from ASTERISK-18747. Residual changes for Asterisk v10 branch
	  from ASTERISK-18747 after
	  https://reviewboard.asterisk.org/r/1564/ commit and associated
	  dialogs callid hash key change fix. * Make check_rtp_timeout()
	  return CMP_MATCH if need to delete dialog from dialogs_rtpcheck.
	  This is an optimization to avoid an unneeded lock/unlock and
	  object search when using ao2_unlink. * Prevent crash in
	  check_rtp_timeout() if dialog->rtp is NULL. Review:
	  https://reviewboard.asterisk.org/r/1557/

2011-12-15  Asterisk Development Team <asteriskteam@digium.com>

	* Asterisk 10.0.0 Released.

2011-12-08  Asterisk Development Team <asteriskteam@digium.com>

	* Asterisk 10.0.0-rc3 Released.

	* Add ASTSBINDIR to the list of configurable paths

	  This patch also makes astdb2sqlite3 and astcanary use the configured
	  directory instead of relying on $PATH.

	  (closes issue ASTERISK-18959)
	  Review: https://reviewboard.asterisk.org/r/1613/

	* Don't crash on INFO automon request with no channel

	  AST-2011-014. When automon was enabled in features.conf, it was possible
	  to crash Asterisk by sending an INFO request if no channel had been
	  created yet.

	  (closes issue ASTERISK-18805)

	* Fixed crash from orphaned MWI subscriptions in chan_sip

	  This patch resolves the issue where MWI subscriptions are orphaned
	  by subsequent SIP SUBSCRIBE messages.  When a peer is removed, either
	  by pruning realtime SIP peers or by unloading / loading chan_sip, the
	  MWI subscriptions that were orphaned would still be on the event engine
	  list of valid subscriptions but have a pointer to a peer that no longer
	  was valid.  When an MWI event would occur, this would cause a seg fault.

	  (closes issue ASTERISK-18663)
	  Review: https://reviewboard.asterisk.org/r/1610/

	* Fix a change in behavior in 'database show' from 1.8.

	  In 1.8 and previous versions, one could use any fullword portion of
	  the key name, including the full key, to obtain the record. Until this
	  patch, this did not work for the full key.

	   (closes issue ASTERISK-18886)

	* Default to nat=yes; warn when nat in general and peer differ

	  AST-2011-013.  It is possible to enumerate SIP usernames when the general and
	  user/peer nat settings differ in whether to respond to the port a request is
	  sent from or the port listed for responses in the Via header. In 1.4 and
	  1.6.2, this would mean if one setting was nat=yes or nat=route and the other
	  was either nat=no or nat=never. In 1.8 and 10, this would mean when one
	  was nat=force_rport and the other was nat=no.

	  In order to address this problem, it was decided to switch the default
	  behavior to nat=yes/force_rport as it is the most commonly used option
	  and to strongly discourage setting nat per-peer/user when at all
	  possible.

	  For more discussion of the issue, please see:
	    http://lists.digium.com/pipermail/asterisk-dev/2011-November/052191.html

	    (closes issue ASTERISK-18862)
	    Review: https://reviewboard.asterisk.org/r/1591/

	* Fixed SendMessage stripping extension from To: header in SIP MESSAGE

	  When using the MessageSend application to send a SIP MESSAGE to a
	  non-peer, chan_sip attempted to validate the hostname or IP Address. In the
	  process, it stripped off the extension and failed to add it back to the sip_pvt
	  structure before transmitting. This patch adds the full URI passed in
	  from the message core to the sip_pvt structure.

	    (closes issue ASTERISK-18903)
	      Reported by: Shaun Clark
	      Tested by: Matt Jordan

	    Review: https://reviewboard.asterisk.org/r/1597/

2011-11-15  Asterisk Development Team <asteriskteam@digium.com>

	* Asterisk 10.0.0-rc2 Released.

	* Test results: http://bamboo.asterisk.org/browse/TESTING-ASTERISK10RCS-3

	* Ensure that a null vmexten does not cause a segfault
	  
	  Ensure that a null vmexten does not cause a segfault.  When 
	  sip_send_mwi_to_peer was modified recently to avoid 
	  deadlocks, vmexten was not expected to be null.  This change handles 
	  that situation to avoid a segfault
	  
	  Merged revisions 345063 from http://svn.asterisk.org/svn/asterisk/branches/1.8

	* Fixes issue with ConfBridge participants hanging up during DTMF feature 
	  menu usage getting stuck in conference forever.

	  When a conference user enters the DTMF menu they are suspended from the
	  bridge while the channel is handed off to the DTMF feature code.  If a
	  user entered this state and hungup, there existed a race condition where
	  the channel could not exit the conference because it was waiting on a
	  signal that would never arrive.  This patch fixes that, because it would
	  stupid for me to talk about the problem and commit a patch for something
	  else.

	  (closes issue ASTERISK-18829)
	  Reported by: zvision

	* Fix app_macro.c MODULEINFO section termination.

	  (closes issue ASTERISK-18848)
	  Reported by: Tony Mountifield

2011-11-08  Asterisk Development Team <asteriskteam@digium.com>

	* Asterisk 10.0.0-rc1 Released.

	* Test results: http://bamboo.asterisk.org/browse/AST10-LUCID-317

2011-11-08 19:27 +0000 [r343944]  wdoekes <wdoekes@localhost>:

	* /, pbx/pbx_config.c: Fix crash when dialplan remove include is
	  called with too few arguments. "dialplan remove include x from y"
	  crashed when the amount of arguments was less than 6. (closes
	  issue ASTERISK-18762) Reported by: Andrey Solovyev Tested by:
	  Andrey Solovyev ........ Merged revisions 343936 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-08 18:29 +0000 [r343900]  David Vossel <dvossel@digium.com>

	* channels/chan_sip.c: Fixes regression caused by r343635 There was
	  a missing unlock for a function return that is only present in
	  Asterisk 10 and Asterisk Trunk. (closes issue ASTERISK-18839)
	  Reported by: Michael L. Young Patches:
	  asterisk-18839-missing-lock-trunk-v2.diff (License #5026) patch
	  uploaded by Michael L. Young

2011-11-08 18:01 +0000 [r343852]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/chan_sip.c, main/acl.c: Fixed reference to incorrect
	  variable if unknown host configured crash. * Fixed a LOG_ERROR
	  message referencing the config variable list v that had
	  previously been processed and became NULL. * Added error return
	  value set that was missing in an ast_append_ha() error return
	  path. (closes issue ASTERISK-18743) Reported by: Michele Patches:
	  issueA18743-fix_dynamic_exclude_static_bad_host_log.patch
	  (license #5674) patch uploaded by Walter Doekes Tested by:
	  Michele ........ Merged revisions 343851 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-08 13:26 +0000 [r343789-343792]  Leif Madsen <lmadsen@digium.com>

	* /: Recorded merge of revisions 343791 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8 ........ Fix
	  boo-boo in prep_tarball script. A hardcoded a branch number was
	  in the prep_tarball which could not work. Changed it to the
	  variable.

	* build_tools/prep_tarball: Fix boo-boo in prep_tarball script. A
	  hardcoded a branch number was in the prep_tarball which could not
	  work. Changed it to the variable.

2011-11-07 22:37 +0000 [r343743]  Kinsey Moore <kmoore@digium.com>

	* channels/chan_sip.c: Make "sip show settings" CLI command get
	  RPID flags from the right global page The "Trust RPID" and "Send
	  RPID" entries in the "sip show settings" CLI command pulled the
	  flags from the incorrect global flags page. These are now read
	  from sip global flags page 0. (closes issue AST-711)

2011-11-07 21:42 +0000 [r343691]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/chan_sip.c: respect case changes in peer names on sip
	  reload ASTERISK-18669 ........ Merged revisions 343690 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-07 21:27 +0000 [r343677]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/chan_sip.c: Fix __sip_subscribe_mwi_do() incorectly
	  changing dialogs hash key callid. Changing an object value used
	  as a container key requires removing the object from the
	  container and reinserting it. * Created change_callid_pvt() to
	  call instead of build_callid_pvt(). The change_callid_pvt() will
	  correctly change the dialog callid so the ao2 conainter can
	  explicitly unlink it. ........ Merged revisions 343637 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-07 20:31 +0000 [r343635]  Kinsey Moore <kmoore@digium.com>

	* /, channels/chan_sip.c: Prevent BLF subscriptions from causing
	  deadlocks Fix a locking inversion in sip_send_mwi_to_peer that
	  was causing deadlocks. This function now requires that both the
	  peer and associated pvt be unlocked before it is called for cases
	  where peer and peer->mwipvt form a circular reference. (closes
	  issue ASTERISK-18663) Review:
	  https://reviewboard.asterisk.org/r/1563/ ........ Merged
	  revisions 343621 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-07 19:55 +0000 [r343580]  wdoekes <wdoekes@localhost>:

	* main/udptl.c, UPGRADE.txt: Correct the default udptl port range.
	  The udptl port range was defined as 4000-4999 in the
	  udptl.conf.sample, as 4500-4599 if you didn't have a config and
	  4500-4999 if your config was broken. Default is now 4000-4999.
	  (closes issue ASTERISK-16250) Reviewed by: Tilghman Lesher
	  Review: https://reviewboard.asterisk.org/r/1565

2011-11-07 19:51 +0000 [r343578]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/chan_sip.c: Fix deadlock if peer is destroyed while
	  sending MWI notice. A dialog cannot be destroyed by the
	  ao2_callback dialog_needdestroy because of a deadlock between the
	  dialogs container lock and the RWLOCK of the events subscription
	  list. * Create dialogs_to_destroy container to hold dialogs that
	  will be destroyed. * Ensure that the event subscription callback
	  will never happen with an invalid peer pointer by making the
	  event callback removal the first thing in the peer destructor
	  callback. NOTE: This particular deadlock will not happen with
	  Asterisk 10, but some of the changes still apply. (closes issue
	  ASTERISK-18747) Reported by: Gregory Hinton Nietsky Review:
	  https://reviewboard.asterisk.org/r/1564/ ........ Merged
	  revisions 343577 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-07 18:39 +0000 [r343533]  Matthew Nicholson <mnicholson@digium.com>

	* main/format.c: list all of the codecs associated with a
	  particular format id for CLI command "core show codec" AST-699

2011-11-04 15:11 +0000 [r343445]  Alexandr Anikin <may@telecom-service.ru>

	* addons/ooh323c/src/ooq931.c, addons/ooh323c/src/ooGkClient.c,
	  addons/ooh323c/src/ooTimer.c, addons/ooh323c/src/dlist.c, /,
	  addons/ooh323c/src/dlist.h, addons/ooh323c/src/printHandler.c:
	  Final fix memleaks in GkClient codes, same for Timer codes.
	  (these memleaks stop development of gk codes, now i can continue)
	  Fix printHandler 'Unbalanced Structure' issues with locking
	  printHandler data for single thread. ........ Merged revisions
	  343281 from http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-03 20:31 +0000 [r343393]  wdoekes <wdoekes@localhost>:

	* /, res/res_config_sqlite.c: Fix sqlite config driver segfault and
	  broken queries The sqlite realtime handler assumed you had a
	  static config configured as well. The realtime multientry handler
	  assumed that you weren't using dynamic realtime. (closes issue
	  ASTERISK-18354) (closes issue ASTERISK-18355) Review:
	  https://reviewboard.asterisk.org/r/1561 ........ Merged revisions
	  343375 from http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-03 19:57 +0000 [r343337]  Richard Mudgett <rmudgett@digium.com>

	* /, funcs/func_dialgroup.c: Remove invalid flag given to iterator
	  in func_dialgroup.c ........ Merged revisions 343336 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-03 15:39 +0000 [r343221-343277]  Terry Wilson <twilson@digium.com>

	* /, channels/sip/include/sip.h: Make room for the fax detect flags
	  The original REGISTERTRYING flag, in addition to being impossible
	  to check, also encroached on the space for the flag above it.
	  This patch moves the flags that were below REGISTERTRYING back to
	  where they were as though we had just removed the REGISTERTRYING
	  option. ........ Merged revisions 343276 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* contrib/realtime/mysql/sippeers.sql, /, channels/chan_sip.c,
	  channels/sip/include/sip.h: Remove registertrying option in
	  chan_sip This option is not only useless, but has been broken
	  since inception since the flag was never copied from the peer
	  where it is set to the pvt where it was checked. RFC 3261
	  specificially states that you should not send a provisional
	  response to a non-INVITE request, and if we did fix the code so
	  that it worked, it would cause the same kind of user enumeration
	  vulnerability that we've discussed with the nat= setting. This
	  patch removes registertrying option and any code that would have
	  sent a 100 response to a register. Review:
	  https://reviewboard.asterisk.org/r/1562/ ........ Merged
	  revisions 343220 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-02 22:24 +0000 [r343158-343192]  wdoekes <wdoekes@localhost>:

	* /, channels/chan_sip.c: Fix improper warning introduced by
	  r342927 and more tweaks Changeset r342927 introduced a warning
	  which was only supposed to be emitted when a found realtime peer
	  had an empty (or no) name. It turned out that there were some
	  inconsistencies left. Now found peers with an empty name are
	  explicitly ignored like before r342927 but better. Reviewed by:
	  Stefan Schmidts, Terry Wilson Review:
	  https://reviewboard.asterisk.org/r/1560 ........ Merged revisions
	  343181 from http://svn.asterisk.org/svn/asterisk/branches/1.8

	* include/asterisk/stringfields.h, include/asterisk/utils.h, /,
	  main/utils.c: Ensure that string field lengths are properly
	  aligned Integers should always be aligned. For some platforms
	  (ARM, SPARC) this is more important than for others. This
	  changeset ensures that the string field string lengths are
	  aligned on *all* platforms, not just on the SPARC for which there
	  was a workaround. It also fixes that the length integer can be
	  resized to 32 bits without problems if needed. (closes issue
	  ASTERISK-17310) Reported by: radael, S Adrian Reviewed by:
	  Tzafrir Cohen, Terry Wilson Tested by: S Adrian Review:
	  https://reviewboard.asterisk.org/r/1549 ........ Merged revisions
	  343157 from http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-02 19:33 +0000 [r343048-343103]  Leif Madsen <lmadsen@digium.com>

	* /, apps/app_authenticate.c: Add note about how Authenticate()
	  application with option 'd' works. (closes issue ASTERISK-17422)
	  Reported by: Leif Madsen ........ Merged revisions 343102 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, configs/queues.conf.sample: Update documentation for
	  leastrecent strategy. In queues.conf.sample the leastrecent
	  strategy was incorrectly described. Now updated to reflect how
	  the strategy actually checks peers. (closes issue ASTERISK-17854)
	  Reported by: Sebastian Denz Patches: queues.conf-doc_issue.patch
	  (License #6139) ........ Merged revisions 343047 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-02 13:45 +0000 [r342991]  Kevin P. Fleming <kpfleming@digium.com>

	* /, apps/app_meetme.c: Modify comments in MeetMe application
	  documentation about DAHDI. The MeetMe application documentation
	  has some comments about usage of DAHDI, and they were a bit
	  outdated relative to modern DAHDI releases. This patch changes
	  the comment to just tell the user that a functional DAHDI timing
	  source is required, and no longer mention 'dahdi_dummy', since
	  that module does not exist in current DAHDI releases. ........
	  Merged revisions 342990 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-11-01 20:58 +0000 [r342870-342929]  wdoekes <wdoekes@localhost>:

	* /, channels/chan_sip.c, configs/extconfig.conf.sample,
	  include/asterisk/config.h, main/config.c: Several fixes to the
	  chan_sip dynamic realtime peer/user lookup There were several
	  problems with the dynamic realtime peer/user lookup code. The
	  lookup logic had become rather hard to read due to lots of
	  incremental changes to the realtime_peer function. And, during
	  the addition of the sipregs functionality, several possibilities
	  for memory leaks had been introduced. The insecure=port matching
	  has always been broken for anyone using the sipregs family. And,
	  related, the broken implementation forced those using sipregs to
	  *still* have an ipaddr column on their sippeers table. Thanks
	  Terry Wilson for comprehensive testing and finding and fixing
	  unexpected behaviour from the multientry realtime call which
	  caused the realtime_peer to have a completely unused code path.
	  This changeset fixes the leaks, the lookup inconsistenties and
	  that you won't need an ipaddr column on your sippeers table
	  anymore (when you're using sipregs). Beware that when you're
	  using sipregs, peers with insecure=port will now start matching!
	  (closes issue ASTERISK-17792) (closes issue ASTERISK-18356)
	  Reported by: marcelloceschia, Walter Doekes Reviewed by: Terry
	  Wilson Review: https://reviewboard.asterisk.org/r/1395 ........
	  Merged revisions 342927 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* contrib/realtime/mysql/sipfriends.sql (removed),
	  contrib/realtime/mysql/sippeers.sql (added),
	  configs/res_config_mysql.conf.sample, /,
	  configs/extconfig.conf.sample, configs/res_ldap.conf.sample,
	  res/res_realtime.c, UPGRADE-1.8.txt, configs/dbsep.conf.sample,
	  main/config.c: Cleanup references to sipusers and sipfriends
	  dynamic realtime families Somewhere between 1.4 and 1.8 the
	  sipusers family has become completely unused. Before that, the
	  sipfriends family had been obsoleted in favor of separate
	  sipusers and sippeers families. Apparently, they have been merged
	  back again into a single family which is now called "sippeers".
	  Reviewed by: irroot, oej, pabelanger Review:
	  https://reviewboard.asterisk.org/r/1523 ........ Merged revisions
	  342869 from http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-31 17:46 +0000 [r342824]  Richard Mudgett <rmudgett@digium.com>

	* main/format.c, main/format_cap.c: Misc format capability fixes. *
	  Fixed typo in format_cap.c:joint_copy_helper() using the wrong
	  variable. * Fix potential race between checking if an interface
	  exists and adding it to the container in
	  format.c:ast_format_attr_reg_interface(). * Fixed double rwlock
	  destroy in format.c:ast_format_attr_init() error exit path. *
	  Simplified format.c:find_interface() and
	  format.c:has_interface().

2011-10-31 16:04 +0000 [r342770]  Matthew Jordan <mjordan@digium.com>

	* main/pbx.c, /, channels/chan_iax2.c: Fixed invalid memory access
	  when adding extension to pattern match tree When an extension is
	  removed from a context, its entry in the pattern match tree is
	  not deleted. Instead, the extension is marked as deleted. When an
	  extension is removed and re-added, if that extension is also a
	  prefix of another extension, several log messages would report an
	  error and did not check whether or not the extension was deleted
	  before accessing the memory. Additionally, if the extension was
	  already in the tree but previously deleted, and the pattern was
	  at the end of a match, the findonly flag was not honored and the
	  extension would be erroneously undeleted. Additionaly, it was
	  discovered that an IAX2 peer could be unregistered via the CLI,
	  while at the same time it could be scheduled for unregistration
	  by Asterisk. The unregistration method now checks to see if the
	  peer was already unregistered before continuing with an
	  unregistration. (closes issue ASTERISK-18135) Reported by: Jaco
	  Kroon, Henry Fernandes, Kristijan Vrban Tested by: Matt Jordan
	  Review: https://reviewboard.asterisk.org/r/1526 ........ Merged
	  revisions 342769 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-30 02:21 +0000 [r342715]  Terry Wilson <twilson@digium.com>

	* res/res_calendar.c: Don't crash on empty notify channel

2011-10-29 04:26 +0000 [r342662]  Richard Mudgett <rmudgett@digium.com>

	* /, include/asterisk/linkedlists.h, tests/test_linkedlists.c: Fix
	  AST_LIST_INSERT_BEFORE_CURRENT() updating the wrong variable.
	  AST_LIST_INSERT_BEFORE_CURRENT() could not be used twice in an
	  iteration or before AST_LIST_REMOVE_CURRENT() without corrupting
	  the list. AST_LIST_INSERT_BEFORE_CURRENT() could also corrupt the
	  list if AST_LIST_INSERT_BEFORE_CURRENT() or
	  AST_LIST_REMOVE_CURRENT() is used on the next iteration. * Fixed
	  cut and paste error using the wrong variable in
	  AST_LIST_INSERT_BEFORE_CURRENT(). * Added linked list unit tests
	  for AST_LIST_INSERT_BEFORE_CURRENT(), AST_LIST_APPEND_LIST(), and
	  AST_LIST_INSERT_LIST_AFTER(). ........ Merged revisions 342661
	  from http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-27 20:10 +0000 [r342605]  Matthew Nicholson <mnicholson@digium.com>

	* main/dsp.c: tweak the v21 detector to detect an additional
	  pattern of hits and misses

2011-10-27 19:41 +0000 [r342546-342603]  Jonathan Rose <jrose@digium.com>

	* res/res_rtp_multicast.c, /: Fix sequence number overflow over 16
	  bits causing codec change in RTP packets. Sequence number was
	  handled as an unsigned integer (usually 32 bits I think, more
	  depending on the architecture) and was put into the rtp packet
	  which is basically just a bunch of bits using an or operation.
	  Sequence number only has 16 bits allocated to it in an RTP packet
	  anyway, so it would add to the next field which just happened to
	  be the codec. This makes sure the sequence number is set to be a
	  16 bit integer regardless of architecture (hopefully) and also
	  makes it so the incrementing of the sequence number does bitwise
	  or at the peak of a 16 bit number so that the value will be set
	  back to 0 when going beyond 65535 anyway. (closes issue
	  ASTERISK-18291) Reported by: Will Schick Review:
	  https://reviewboard.asterisk.org/r/1542/ ........ Merged
	  revisions 342602 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, res/res_jabber.c: Cleanup reference leaks in res_jabber
	  res_jabber.c had a number of places where astobjs would be
	  referenced and have their reference counts bumped without having
	  a dereference made before the object lost scope. This patch adds
	  a number of ASTOBJ_UNREFs to resolve that. Review:
	  https://reviewboard.asterisk.org/r/1478/ ........ Merged
	  revisions 342545 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-25 22:05 +0000 [r342485-342488]  Richard Mudgett <rmudgett@digium.com>

	* /, main/astobj2.c: Check fopen return value for ao2 reference
	  debug output. Reported by: wdoekes Patched by: wdoekes Review:
	  https://reviewboard.asterisk.org/r/1539/ ........ Merged
	  revisions 342487 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, channels/sig_pri.c: Change D-channel warning to be less
	  confusing on non-NFAS setups. The "No D-channels available! Using
	  Primary channel as D-channel anyway!" WARNING message has been
	  confusing on non-NFAS setups. The message refers to things that
	  are NFAS specific. * Changed the warning to several different
	  warnings to be more accurate for the situation and less confusing
	  as a result: "No D-channels up! Switching selected D-channel from
	  X to Y.", "No D-channels up!", and "D-channel is down!". ........
	  Merged revisions 342484 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-25 21:10 +0000 [r342381-342436]  Terry Wilson <twilson@digium.com>

	* /, apps/app_queue.c: Use int for storing ao2_container_count
	  instad of size_t AST-676 ........ Merged revisions 342435 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, apps/app_queue.c: Simplify queue membercount code Despite an
	  ominous sounding comment stating that membercount was for "logged
	  in" members only and thus we couldn't use ao2_container_count(),
	  I could not find a single place in the code where that seemed to
	  be accurate. The only time we decremented membercount was when we
	  were marking something dead or actually removing it. The only
	  places we incremented it were either after ao2_link(), or trying
	  to correct for having set it to 0 during a reload. In every case
	  where we were correcting the value, it seemed that we were trying
	  to make the count actually match what ao2_container_count() would
	  return. The only place I could find where we made a determination
	  about something being "logged in" or not, we didn't trust the
	  membercount, but instead looked at devicestate, paused, etc. This
	  patch removes membercount, replaces its use with
	  ao2_container_count, and manually adds the results of
	  ao2_container_count to a "membercount" field for ast_data queue
	  query results. This patch also would fix AST-676, but as it is
	  slightly riskier than the previously committed fix, the two
	  commits have been made separately. Reivew:
	  https://reviewboard.asterisk.org/r/1541/ ........ Merged
	  revisions 342383 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, apps/app_queue.c: Properly update membercount for reloaded
	  members Since q->membercount is set to 0 before reloading, it is
	  important to increment it again for reloaded members as well as
	  added. (closes issue AST-676) Review:
	  https://reviewboard.asterisk.org/r/1541/ ........ Merged
	  revisions 342380 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-25 19:08 +0000 [r342277-342329]  Kinsey Moore <kmoore@digium.com>

	* pbx/pbx_spool.c, /: Fix compilation on Snow Leopard/FreeBSD for
	  pbx_spool.c One of the changes in the recent spool handling of
	  hardlinks patch was just outside a HAVE_INOTIFY block and caused
	  compilation to fail in some build environments. This has been
	  corrected. ........ Merged revisions 342328 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* pbx/pbx_spool.c, /: Merged revisions 342276 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r342276 | kmoore | 2011-10-25 11:06:57 -0500 (Tue, 25 Oct 2011) |
	  18 lines Fix spool handling to allow call files to be hardlinked
	  into place This fixes the inotify code to handle call files being
	  hardlinked into the spool directory. The smsq utility does this,
	  instead of rename(), to ensure that it cannot accidentally
	  overwrite an existing spool file. A rename() might do that, but
	  link() will definitely not. The inotify code had broken this,
	  because it would wait for an IN_CLOSE_WRITE event on the file...
	  which was never forthcoming, since it was never opened. Now we
	  look for IN_OPEN events following the IN_CREATE event, and only
	  wait for an IN_CLOSE_WRITE if the file was actually opened.
	  Patch-by: dwmw2 (closes issue ASTERISK-18331) Review:
	  https://reviewboard.asterisk.org/r/1391/ ........

2011-10-25 01:25 +0000 [r342224]  Terry Wilson <twilson@digium.com>

	* /, include/asterisk/config.h, main/config.c: Return NULL when no
	  results returned for realtime_multientry It was not documented
	  what the return value should be when no entries were returned
	  with the multientry realtime callback. This change forces
	  consistent behavior even if the backends return an empty
	  ast_config. Review: https://reviewboard.asterisk.org/r/1521/
	  ........ Merged revisions 342223 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-24 22:32 +0000 [r342183]  Richard Mudgett <rmudgett@digium.com>

	* include/asterisk/astobj2.h: Fix ao2obj.h comment typos and add
	  missing link/unlink nolock debug defines.

2011-10-24 19:51 +0000 [r342062]  Jonathan Rose <jrose@digium.com>

	* /, channels/chan_sip.c: Outbound SIP OPTIONS messages will now
	  include fromuser of related peer. This behavior matches up more
	  closely with the way invite/register/etc are handled. This patch
	  also modifies some adjacent code for code style compliance.
	  Pretty minor. (closes issue ASTERISK-17616) Reported by: Jeremy
	  Kister Patches: chan_sip.c-options-fromuser-fix-v1.patch uploaded
	  by Jeremy Kister (license #6232) ........ Merged revisions 342061
	  from http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-24 07:31 +0000 [r341920-342017]  Gregory Nietsky <gregory@distrotech.co.za>

	* apps/app_queue.c: queues container needs locking when using the
	  OBJ_NOLOCK flag

	* apps/app_queue.c: Remove some ref leaks and a return without
	  unlock. There some resource leaks introduced in asterisk 10 make
	  sure that locks are not held on return and we release ref's held.

	* /, apps/app_queue.c: Revert Janitor patch 341920 For now

	* /, apps/app_queue.c: Whitespace Fixups / Add Braces This
	  janitorial patch is related to work on RB1538 ........ Merged
	  revisions 341906 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-21 16:42 +0000 [r341807-341810]  Matthew Nicholson <mnicholson@digium.com>

	* /, pbx/pbx_lua.c: only process args that exist ASTERISK-18395
	  ........ Merged revisions 341809 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, pbx/pbx_lua.c: don't limit the length of app and function
	  arguments ASTERISK-18395 ........ Merged revisions 341806 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-20 21:58 +0000 [r341718]  Richard Mudgett <rmudgett@digium.com>

	* include/asterisk/features.h, /, main/features.c, res/res_agi.c:
	  Fix AGI exec Park to honor the Park application parameters. The
	  fix for ASTERISK-12715 and ASTERISK-12685 added a check for the
	  Park application because the channel needed to be masqueraded to
	  prevent a crash. Since the Park application now always
	  masquerades the channel into the parking lot, the special check
	  is no longer needed. The fix also resulted in AGI exec Park
	  attempting to double park the call and not honor the Park
	  application parameters. * Removed no longer necessary call to
	  ast_masq_park_call() by AGI exec for the Park application.
	  (Reverts -r146923) * Fix Park application to only return 0 or -1.
	  The AGI exec Park was causing broken pipe error messages because
	  the Park application returned 1 on successful park. (closes issue
	  ASTERISK-18737) ........ Merged revisions 341717 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-20 21:27 +0000 [r341665-341707]  Paul Belanger <pabelanger@digium.com>

	* /, funcs/func_callerid.c: Fixed typo from previous commit
	  ........ Merged revisions 341704 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, funcs/func_callerid.c: Updated documentation for the optional
	  CID parameter with CALLERID ........ Merged revisions 341664 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-20 18:20 +0000 [r341580-341599]  Gregory Nietsky <gregory@distrotech.co.za>

	* configs/queues.conf.sample: add documentation for
	  check_state_unknown in configs/queues.conf.sample app_queue
	  allows calls to members in a "Unknown" state to be treated as
	  available setting check_state_unknown = yes will cause app_queue
	  to query the channel driver to better determine the state this
	  only applies to queues with ringinuse or ignorebusy set
	  appropriately.

	* CHANGES, apps/app_queue.c: Add option to check state when state
	  is unknown r341486 reverts r325483 this is a rework of the patch.
	  optimize to minimize load. add option check_state_unknown to
	  control whether a member with unknown device state is checked
	  there is a small % chance that calls will be sent to the member
	  when they on a call. app_queue will see a device with unknown
	  state as available and does not try verify the state without this
	  option enabled. Review: https://reviewboard.asterisk.org/r/1535/

2011-10-20 15:14 +0000 [r341530]  Terry Wilson <twilson@digium.com>

	* /, include/asterisk/strings.h: Clean up ast_check_digits The code
	  was originally copied from the is_int() function in the AEL code.
	  wdoekes pointed out that the function should take a const char*
	  and that their was an unneeded variable. This is now fixed.
	  ........ Merged revisions 341529 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-19 21:23 +0000 [r341486]  Matthew Nicholson <mnicholson@digium.com>

	* apps/app_queue.c: Fix a performance regression introduced in
	  r325483. The regression was caused by a call to
	  ast_parse_device_state() in app_queue's ring_entry() function.
	  The ast_parse_device_state() function eventually calls
	  ast_channel_get_full() with a channel name prefix which causes it
	  to walk the channel list causing massive lock contention and slow
	  downs. This patch fixes the regression by removing the call to
	  ast_parase_device_state() which should be unnecessary. Queue
	  member device state should be maintained by device state events.
	  Some users have seen instances where busy agents were called when
	  they shouldn't have, which is the reason the call to
	  ast_parse_device_state() was added. That change appears to have
	  resolved that issue but also causes this performance regression.
	  There may still be issues with queue member status, and if so,
	  alternative methods should be investigated to resolve them.
	  AST-695

2011-10-19 19:01 +0000 [r341436]  Paul Belanger <pabelanger@digium.com>

	* /, channels/chan_gtalk.c: Outgoing calls with Google Voice Google
	  has recently make some changes (again) to their protocol. Rather
	  then patching asterisk to flip between the two different methods,
	  we now allow both. Lets hope this keeps Google Voice happy for a
	  while. (closes issue ASTERISK-18714) Reported by: Iordan Iordanov
	  Patches: chan_gtalk.patch uploaded by Iordan Iordanov (licenses
	  6311) ........ Merged revisions 341435 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-19 07:42 +0000 [r341380]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c, include/asterisk/strings.h: Don't use
	  is_int() since it doesn't link well on all platforms Just create
	  an normal API function in strings.h that does the same thing just
	  to be safe. ASTERISK-17146 ........ Merged revisions 341379 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-19 07:23 +0000 [r341377]  Stefan Schmidt <sst@sil.at>

	* /, channels/chan_sip.c: Don't sent in-dialog requests like UPDATE
	  when Asterisk has not yet received a Contact URI from a UAS
	  ........ Merged revisions 341366 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-18 23:42 +0000 [r341315]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Don't resolve numeric hosts or contact
	  unresolved hosts If a SIP dial string contains a numeric hostname
	  that is not a peer name, don't try to resolve it as it is
	  unlikely that someone really means Dial(SIP/0.0.4.26) when
	  Dial(SIP/1050) is called. Also, make sure that create_addr
	  returns -1 if an address isn't resolved so that we don't attempt
	  to send SIP requests to an address that doesn't resolve. (closes
	  issue ASTERISK-17146, ASTERISK-17716) Review:
	  https://reviewboard.asterisk.org/r/1532/ ........ Merged
	  revisions 341314 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-18 23:33 +0000 [r341313]  Alexandr Anikin <may@telecom-service.ru>

	* addons/chan_ooh323.c, /: Merged revisions 341312 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r341312 | may | 2011-10-19 03:20:53 +0400 (Wed, 19 Oct
	  2011) | 3 lines fix issue on channel numbering (calls could have
	  same channel number on heavy loaded system) ........

2011-10-18 21:11 +0000 [r341255]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_mgcp.c, include/asterisk/features.h,
	  channels/chan_dahdi.c, channels/sig_analog.c, /,
	  channels/chan_sip.c, main/features.c, channels/chan_iax2.c,
	  channels/sip/include/sip.h: More parking issues. * Fix potential
	  deadlocks in SIP and IAX blind transfer to parking. * Fix SIP,
	  IAX, DAHDI analog, and MGCP channel drivers to respect the
	  parkext_exclusive option with transfers (Park(,,,,,exclusive_lot)
	  parameter). Created ast_park_call_exten() and
	  ast_masq_park_call_exten() to maintian API compatibility. * Made
	  masq_park_call() handle a failed ast_channel_masquerade() setup.
	  * Reduced excessive struct parkeduser.peername[] size. ........
	  Merged revisions 341254 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-17 17:36 +0000 [r341190]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Initialize variables before calling
	  parse_uri If parse_uri was called with an empty URI, some
	  pointers would be modified and an invalid read could result. This
	  patch avoids calling parse_uri with an empty contact uri when
	  parsing REGISTER requests. AST-2011-012 (closes issue
	  ASTERISK-18668) ........ Merged revisions 341189 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-17 16:53 +0000 [r341148]  Tzafrir Cohen <tzafrir.cohen@xorcom.com>

	* /, pbx/pbx_realtime.c: Remove an unused include of md5.h Unused
	  include of asterisk/md5.h in pbx_realtime.c . A commit needed to
	  test the commit message. Merged-From:
	  http://svn.asterisk.org/svn/asterisk/branches/1.8@341074

2011-10-17 16:38 +0000 [r341122-341146]  Paul Belanger <pabelanger@digium.com>

	* tests/test_format_api.c: Set 'core' support level for
	  test_format_api.c

	* apps/app_voicemail.c, /: Multiple revisions 341108,341112
	  ........ r341108 | pabelanger | 2011-10-17 12:22:19 -0400 (Mon,
	  17 Oct 2011) | 2 lines Voicemail compiler flags are 'core'
	  support ........ r341112 | pabelanger | 2011-10-17 12:23:33 -0400
	  (Mon, 17 Oct 2011) | 2 lines Fix previous commit ........ Merged
	  revisions 341108,341112 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-17 16:18 +0000 [r341094]  Jason Parker <jparker@digium.com>

	* CHANGES: Add information about limitations of new codec support
	  in channel drivers. (issue ASTERISK-18680)

2011-10-17 15:39 +0000 [r341089]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Don't try to remove peers without IPs
	  from peers_by_ip (closes issue ASTERISK-18696) ........ Merged
	  revisions 341088 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-14 21:36 +0000 [r341023]  Kevin P. Fleming <kpfleming@digium.com>

	* /, build_tools/embed_modules.xml, Makefile.moddir_rules: Change
	  the internal name of the menuselect options that are used to
	  control whether modules are embedded or not; using just the bare
	  category name led to accidentally enabling these options when
	  users used the wrong "--enable" operation on the menuselect
	  command line. Now the internal option names are prefixed with
	  "EMBED_", so they won't be the same as the name of the category
	  containing the modules they control the embedding of. ........
	  Merged revisions 341022 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-14 20:50 +0000 [r340971]  Kinsey Moore <kmoore@digium.com>

	* res/res_rtp_asterisk.c, /, channels/chan_sip.c: Merged revisions
	  340970 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r340970 | kmoore | 2011-10-14 15:49:39 -0500 (Fri, 14 Oct 2011) |
	  8 lines Quiet RTCP Receiver Reports during fax transmission RTCP
	  is now disabled for "inactive" RTP audio streams during SIP T.38
	  sessions. The ability to disable RTCP streams in res_rtp_asterisk
	  was missing, so this code was added to support the bug fix.
	  (closes issue ASTERISK-18400) ........

2011-10-14 18:23 +0000 [r340931]  Jonathan Rose <jrose@digium.com>

	* utils/utils.xml, funcs/func_jitterbuffer.c: Some additional
	  module documentation changes for 10 for the menuselect change.
	  (issue ASTERISK-18268)

2011-10-14 16:39 +0000 [r340879]  Terry Wilson <twilson@digium.com>

	* main/channel.c, /: Avoid unnecessary WARNING message Add
	  AST_CONTROL_UPDATE_RTP_PEER frame to be ignored here to avoid
	  displaying a WARNING message. (closes issue ASTERISK-18610) Patch
	  by: Kristijan_Vrban ........ Merged revisions 340878 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-14 16:18 +0000 [r340868]  Jonathan Rose <jrose@digium.com>

	* funcs/func_realtime.c, build_tools/cflags.xml, utils/utils.xml,
	  /, res/res_fax.c, apps/app_celgenuserevent.c,
	  codecs/codec_dahdi.c, apps/app_system.c, res/res_curl.c: Fixes
	  some support level info so that it can be read by menuselect.
	  (issue ASTERISK-18268) Review:
	  https://reviewboard.asterisk.org/r/1525/ ........ Merged
	  revisions 340863 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-13 22:54 +0000 [r340810]  Richard Mudgett <rmudgett@digium.com>

	* /, main/features.c: Fix DTMF blind transfer continuing to execute
	  dialplan after transfer. Party A calls Party B. Party A DTMF
	  blind transfers Party B to Party C. Party A channel continues to
	  execute dialplan. * Fixed the return value of
	  builtin_blindtransfer() to return the correct value after a
	  transfer so the dialplan will not keep executing. * Removed
	  unnecessary connected line update that did not really do
	  anything. * Made access to GOTO_ON_BLINDXFR thread safe in
	  check_goto_on_transfer(). * Fixed leak of xferchan for failure
	  cases in check_goto_on_transfer(). * Updated debug messages in
	  builtin_blindtransfer() and check_goto_on_transfer(). (closes
	  issue ASTERISK-18275) Reported by: rmudgett Tested by: rmudgett
	  ........ Merged revisions 340809 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-13 08:46 +0000 [r340770]  Gregory Nietsky <gregory@distrotech.co.za>

	* channels/chan_sip.c: Only send MWI Notify on register if the
	  registration is successful. lastmsgssent was removed from
	  chan_sip and the old behavior of sending a mwi notify on register
	  [except when subscribemwi is set] was restored but this must only
	  happen when registration succeeds. leaking information for
	  unsuccessful registrations is not secure.

2011-10-13 06:59 +0000 [r340718]  Stefan Schmidt <sst@sil.at>

	* channels/chan_sip.c: Merged revisions 340717 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r340717 | schmidts | 2011-10-13 06:58:00 +0000 (Thu, 13 Oct 2011)
	  | 3 lines storing the route-set also on a 181 response not only
	  on 180,182 or 183. ........

2011-10-13 06:56 +0000 [r340578-340716]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Initialize ast_sockaddr before calling
	  ast_sockaddr_resolve Avoid possible jump based on unitialized
	  value ........ Merged revisions 340715 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, res/res_config_sqlite.c: Don't skip the query field on a
	  realtime multi query There is no documented reason to not add the
	  query field to the varlist returned by a realtime multi query,
	  despite the config category being set to its value. Of course,
	  there is no documentation that the category should be set to the
	  value either. There is lots of no documentation when it comes to
	  realtime. But, other engines do not skip this field so I am
	  forcing this backend to follow the convention, because not doing
	  so is very silly. ........ Merged revisions 340662 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, channels/chan_sip.c: Merged revisions 340534 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r340534 | twilson | 2011-10-12 13:19:36 -0700 (Wed, 12 Oct 2011)
	  | 9 lines Update SIP realtime fullcontact regardless of caching
	  We should update the fullcontact field in the realtime table
	  whether or not rtcachefriends is set. There is no reason to treat
	  a non-cached realtime entity differently than a cached in this
	  regard. (closes issue ASTERISK-18446) Reported by: wdoekes
	  ........

2011-10-12 20:33 +0000 [r340577]  Stefan Schmidt <sst@sil.at>

	* /, channels/chan_sip.c: Merged revisions 340576 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r340576 | schmidts | 2011-10-12 20:30:37 +0000 (Mit, 12 Okt 2011)
	  | 3 lines Store route-set from provisional SIP responses so
	  early-dialog requests can be routed properly ........

2011-10-12 20:08 +0000 [r340471-340523]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, /: Initialize the PRI channel alarms
	  properly on startup. The PRI channel alarms were initialized with
	  an inverted sense. (closes issue ASTERISK-18710) Reported by:
	  Tzafrir Cohen ........ Merged revisions 340522 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* /, apps/app_meetme.c: Update MeetMe p and X option documentation
	  when interacting with the s option. ASTERISK-12175 changed the p
	  and X options to not interfere with the s option when they are
	  used together. It makes more sense for the s option to have
	  priority for the DTMF '*' key since it cannot change its
	  activation code. Otherwise, you could not use option s with the p
	  or X options. JIRA AST-671 ........ Merged revisions 340470 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-12 16:28 +0000 [r340419]  Paul Belanger <pabelanger@digium.com>

	* /, channels/chan_sip.c: Fix verbose messages when IPv6 logic was
	  added (closes issue ASTERISK-18612) Reported by: Tim Osman
	  ........ Merged revisions 340418 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-11 21:05 +0000 [r340281-340366]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, channels/sig_ss7.h, /, channels/sig_ss7.c:
	  Add protection for SS7 channel allocation and better glare
	  handling. * Added a CLI "ss7 show channels" command that might
	  prove useful for future debugging. * Made the incoming SS7
	  channel event check and gripe message uniform. * Made sure that
	  the DNID string for an incoming call is always initialized.
	  (issue ASTERISK-17966) Reported by: Kenneth Van Velthoven
	  Patches: jira_asterisk_17966_v1.8_glare.patch (license #5621)
	  patch uploaded by rmudgett ........ Merged revisions 340365 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* channels/sip/include/dialog.h, /, channels/chan_sip.c: Fix some
	  potential deadlocks pointed out by helgrind. * Fixed deadlock
	  potential calling dialog_unlink_all() in __sip_autodestruct().
	  Found by helgrind. * Fixed deadlock potential in
	  handle_request_invite() after calling sip_new(). Found by
	  helgrind. * The sip_new() function now returns with the created
	  channel already locked. * Removed the dead code that starts a PBX
	  in in sip_new(). No sip_new() callers caused that code to be
	  executed and it was a bad thing to do anyway. * Removed unused
	  parameters and return value from dialog_unlink_all(). * Made
	  dialog_unlink_all() and __sip_autodestruct() safely obtain the
	  owner and private channel locks without a deadlock avoidance
	  loop. ........ Merged revisions 340284 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* main/manager.c, /, include/asterisk/manager.h: Convert registered
	  AMI actions to ao2 objects. * Fixed race between calling an AMI
	  action callback and unregistering that action. Refixes
	  ASTERISK-13784 broken by ASTERISK-17785 change. * Fixed potential
	  memory leak if an AMI action failed to get registered because is
	  already was registered. Part of the ao2 conversion. * Fixed AMI
	  ListCommands action not walking the actions list with a lock
	  held. * Fix usage of ast_strdupa() and alloca() in loops. Excess
	  stack usage. * Fix AMI Originate action Variable header requiring
	  a space after the header colon. Reported by Yaroslav Panych on
	  the asterisk-dev list. * Increased the number of listed variables
	  allowed per AMI Originate action Variable header to 64. * Fixed
	  AMI GetConfigJSON action output format. * Fixed usage of res
	  contents outside of scope in append_channel_vars(). * Fixed
	  inconsistency of config file channelvars option. The values no
	  longer accumulate with every channelvars option in the config
	  file. Only the last value is kept to be consistent with the CLI
	  "manager show settings" command. (closes issue ASTERISK-18479)
	  Reported by: Jaco Kroon ........ Merged revisions 340279 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-10-11 18:41 +0000 [r340280]  Tzafrir Cohen <tzafrir.cohen@xorcom.com>

	* main/channel.c, /, main/sha1.c, include/asterisk/sha1.h: Update
	  SHA1 code to RFC 6234 RFC 6234 is an update to RFC 3174 from
	  which the code was originally taken. It has a slightly better
	  code, and a better phrased license (simple 3-clause BSD). *
	  main/sha1.c is sha1.c from RFC 6234 with formatting changes only.
	  * include/asterisk/sha1.h merges sha.h and sha-private.h from RFC
	  6234. * Removed unused include of asterisk/sha1.h from
	  main/channels.c Review: https://reviewboard.asterisk.org/r/1503/
	  Merge-From:
	  http://svn.asterisk.org/svn/asterisk/branches/1.8@340263

2011-10-10 22:55 +0000 [r340219-340222]  Terry Wilson <twilson@digium.com>

	* main/db.c: On astdb conversion, also warn about permissions
	  requirements The user running Asterisk must have permission to
	  the directory the Asterisk database resides in since SQLite 3
	  needs to be able to create a journal file. (closes issue
	  ASTERISK-18174)

	* utils/astdb2bdb.c (added): Add a missing file for the astdb2bdb
	  conversion utility

	* utils/Makefile, utils/utils.xml, UPGRADE.txt: Add astdb
	  conversion utility for Berkeley to SQLite 3 If someone wants to
	  backtrack from Asterisk 1.8 to 10 they can use the astdb2bdb
	  utility to convert the database back to the Berkeley format that
	  Asterisk 1.8 uses. Review:
	  https://reviewboard.asterisk.org/r/1502/

2011-10-10 20:30 +0000 [r340165]  Matthew Jordan <mjordan@digium.com>

	* /, channels/chan_sip.c: Merged revisions 340164 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r340164 | mjordan | 2011-10-10 15:23:48 -0500 (Mon, 10 Oct 2011)
	  | 13 lines Updated chan_sip to place calls on hold if SDP address
	  in INVITE is ANY This patch fixes the case where an INVITE is
	  received with c=0.0.0.0 or ::. In this case, the call should be
	  placed on hold. Previously, we checked for the address being
	  null; this patch keeps that behavior but also checks for the ANY
	  IP addresses. Review: https://reviewboard.asterisk.org/r/1504/
	  (closes issue ASTERISK-18086) Reported by: James Bottomley Tested
	  by: Matt Jordan ........

2011-10-10 14:15 +0000 [r340109]  Matthew Nicholson <mnicholson@digium.com>

	* main/loader.c, main/xmldoc.c, main/pbx.c, main/manager.c, /,
	  res/res_fax.c, apps/app_fax.c, include/asterisk/module.h,
	  res/res_agi.c, include/asterisk/xmldoc.h, doc/appdocsxml.dtd:
	  Merged revisions 340108 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r340108 | mnicholson | 2011-10-10 09:14:48 -0500 (Mon, 10 Oct
	  2011) | 11 lines Load the proper XML documentation when multiple
	  modules document the same application. This patch adds an
	  optional "module" attribute to the XML documentation spec that
	  allows the documentation processor to match apps with identical
	  names from different modules to their documentation. This patch
	  also fixes a number of bugs with the documentation processor and
	  should make it a little more efficient. Support for multiple
	  languages has also been properly implemented. ASTERISK-18130
	  Review: https://reviewboard.asterisk.org/r/1485/ ........

2011-10-09 22:18 +0000 [r339992-340031]  Damien Wedhorn <voip@facts.com.au>

	* channels/chan_skinny.c: Return -1 to skinny_session if register
	  rejected. If device registration is rejected, return -1 so that
	  the session is destroyed immediately. Previously, a segfault
	  would occur on a graceful shutdown if a register is rejected and
	  the skinny_session has not yet timed out.

	* channels/chan_skinny.c: Remove log message on traverse session
	  list. On destroying a session, a list of sessions is traversed to
	  find the matching session. For each session not matching, skinny
	  erroneously logged that the session was not matched. While
	  technically correct the message was misleading, and tended to
	  indicate errors that were not there.

2011-10-09 01:18 +0000 [r339831-339942]  igorg <igorg@localhost>:

	* channels/chan_unistim.c, /: Merged revisions 339938 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r339938 | igorg | 2011-10-09 08:16:09 +0700 (–í—Å–∫, 09 –û–∫—Ç
	  2011) | 6 lines Fix compilation issue, caused by missed session
	  structure (closes issue ASTERISK-18694) Reported by: alex70
	  ........

	* channels/chan_unistim.c, /: Merged revisions 339884 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r339884 | igorg | 2011-10-08 22:45:20 +0700 (–°–±—Ç, 08 –û–∫—Ç
	  2011) | 7 lines Fix segfault in Unistim channel (closes issue
	  ASTERISK-18638) Reported by: jonnt ........

	* channels/chan_unistim.c, /: Merged revisions 339830 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r339830 | igorg | 2011-10-08 21:56:35 +0700 (–°–±—Ç, 08 –û–∫—Ç
	  2011) | 8 lines Fix char array cast as short array in
	  send_client() function (for ARM platform) (closes issue
	  ASTERISK-17314) Reported by: jjoshua ........

2011-10-07 19:36 +0000 [r339777]  Richard Mudgett <rmudgett@digium.com>

	* /, apps/app_url.c: Merged revisions 339776 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r339776 | rmudgett | 2011-10-07 14:34:55 -0500 (Fri, 07 Oct 2011)
	  | 5 lines Initialize option flags for SendURL application.
	  (closes issue ASTERISK-18574) Reported by: marcelloceschia
	  ........

2011-10-06 23:08 +0000 [r339722]  Damien Wedhorn <voip@facts.com.au>

	* channels/chan_skinny.c: Reject v17 skinny devices in Asterisk10
	  Small fix for Asterisk10 to reject skinny devices with skinny
	  firmware version17 and above. Review:
	  https://reviewboard.asterisk.org/r/1497/

2011-10-06 22:58 +0000 [r339720]  Richard Mudgett <rmudgett@digium.com>

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac,
	  autoconf/ast_ext_lib.m4: Merged revisions 339719 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r339719 | rmudgett | 2011-10-06 17:47:50 -0500 (Thu, 06
	  Oct 2011) | 20 lines Fix regression in configure script for
	  libpri capability checks. JIRA AST-598 added the
	  PRI_L2_PERSISTENCE option to fix BRI PTMP TE layer 2 persistence
	  issues with some telcos. ASTERISK-18535 attempted to fix the
	  unexpected requirement that libpri *must* have that feature to
	  work with Asterisk. The AST_EXT_LIB_SETUP_DEPENDENT lines made
	  the PRI optional features required. Unfortunately, I thought
	  AST_EXT_LIB_SETUP_DEPENDENT didn't do anything useful for libpri
	  and deleted those lines for libpri. The result was the
	  HAVE_PRI_xxx defines that control the ability to use optional
	  libpri features were also deleted. * Created
	  AST_EXT_LIB_SETUP_OPTIONAL configuration macro to allow optional
	  features in a library that the source code could take advantage
	  of if the code supports the feature. (closes issue
	  ASTERISK-18687) Reported by: Norbert Tested by: rmudgett ........

2011-10-06 20:47 +0000 [r339681]  Damien Wedhorn <voip@facts.com.au>

	* channels/chan_skinny.c: Fixed segfault on core stop gracefully.
	  There was an issue that the cap and confcap pointers for each
	  line and device were being memcpy'd so they all pointed to the
	  same ast_format_cap. On destroying, a segfault occured on the
	  second call to the same struct. skinny reload now works again as
	  well. Tested by snuff (in trunk) and myself.

2011-10-06 17:53 +0000 [r339626]  Richard Mudgett <rmudgett@digium.com>

	* main/udptl.c, /, channels/chan_sip.c: Merged revisions 339625 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r339625 | rmudgett | 2011-10-06 12:49:38 -0500 (Thu, 06 Oct 2011)
	  | 18 lines Fix debugging messages generated by 'udptl debug'. *
	  Makes chan_sip set the tag to the channel name. * Fixes received
	  debug message sequence number. * Removed tx/rx debug message type
	  since it was hard coded to 0. * Made udptl.c logged message
	  header consistent if possible: "UDPTL (%s): ". * Removed unused
	  rx_expected_seq_no from struct ast_udptl. (closes issue
	  ASTERISK-18401) Reported by: Kevin P. Fleming Patches:
	  jira_asterisk_18401_v1.8.patch (license #5621) patch uploaded by
	  rmudgett Tested by: Matthew Nicholson ........

2011-10-06 13:43 +0000 [r339586]  Leif Madsen <lmadsen@digium.com>

	* /, build_tools/prep_tarball: Merged revisions 339566 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r339566 | lmadsen | 2011-10-05 16:30:11 -0500 (Wed, 05
	  Oct 2011) | 8 lines Update prep_tarball script to download
	  pre-exported documentation. I've updated the prep_tarball script
	  to now download the pre-exported documentation from the Asterisk
	  wiki. This will give us more control over what is being included
	  in the tarball releases, and will make both the PDF and HTML
	  exported documentation look much better (especially when viewing
	  from a console). (Closes issue ASTERISK-18677) ........

2011-10-05 17:01 +0000 [r339508-339512]  Richard Mudgett <rmudgett@digium.com>

	* apps/app_dial.c, /: Merged revisions 339511 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r339511 | rmudgett | 2011-10-05 12:01:01 -0500 (Wed, 05 Oct 2011)
	  | 1 line Fix Dial F option notes formatting. ........

	* main/manager.c, /: Merged revisions 339504,339506 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r339504 | rmudgett | 2011-10-05 11:26:45 -0500 (Wed, 05
	  Oct 2011) | 7 lines Add missing documentation of required AMI
	  action Challenge AuthType header. (closes issue ASTERISK-18554)
	  Reported by: Vlad Povorozniuc Patches:
	  __20110919-manager-challenge-docs.patch.txt (license #4999) patch
	  uploaded by Leif Madsen ........ r339506 | rmudgett | 2011-10-05
	  11:32:03 -0500 (Wed, 05 Oct 2011) | 1 line Fix XML error in AMI
	  action Challenge. ........

2011-10-05 16:32 +0000 [r339507]  Matthew Nicholson <mnicholson@digium.com>

	* /, res/res_fax.c: Merged revisions 339505 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r339505 | mnicholson | 2011-10-05 11:31:21 -0500 (Wed, 05 Oct
	  2011) | 3 lines The app name in the documentation must match what
	  we register the application as. ........

2011-10-05 06:28 +0000 [r339463]  Gregory Nietsky <gregory@distrotech.co.za>

	* res/res_fax.c: Only change the capabilities on the gateway when
	  the session is been destroyed there is still a race condition
	  that ends in a segfault. if the caps are changed the logic in
	  res_fax_spandsp will run T30 code not gateway code to end the
	  session. this has been experienced on a "slower" under spec
	  system.

2011-10-04 22:56 +0000 [r339407]  Richard Mudgett <rmudgett@digium.com>

	* Makefile, /: Merged revisions 339406 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r339406 | rmudgett | 2011-10-04 17:54:15 -0500 (Tue, 04 Oct 2011)
	  | 8 lines Make always create the MOH directory
	  (/var/lib/asterisk/moh). (closes issue ASTERISK-18409) Reported
	  by: abelbeck Patches: asterisk-1.8-makefile-moh.patch (license
	  #5903) patch uploaded by abelbeck Tested by: abelbeck, Michael
	  Keuter ........

2011-10-04 19:44 +0000 [r339298-339353]  Jonathan Rose <jrose@digium.com>

	* /, main/say.c: Merged revisions 339352 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r339352 | jrose | 2011-10-04 14:33:12 -0500 (Tue, 04 Oct 2011) |
	  12 lines Removes improper use of sound 'and' in German language
	  mode from application saynumber Asterisk would say 'Five hundert
	  und sechs und zwanzig' instead of 'Five hundert sechs und
	  zwanzig'... which is both weird sounding and wrong. This patch
	  makes sure Asterisk will only say the 'and' word between the
	  single digit and double digit places. (closes issue
	  ASTERISK-18212) Reported By: Lionel Elie Mamane Patches:
	  upstream_germand_no_and.diff (License #5402) uploaded by Lionel
	  Elie Mamane ........

	* /, res/res_jabber.c: Merged revisions 339297 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r339297 | jrose | 2011-10-04 09:01:05 -0500 (Tue, 04 Oct 2011) |
	  13 lines Reverting revision 333265 due to component connection
	  problems it introduces. I'm going to attempt some generic
	  res_jabber cleanup and come up with a new fix for this problem,
	  but first it seems prudent to remove this rather broad attempt to
	  fix it and instead approach this problem either from the same
	  angle but looking only at canceling (or possibly rescheduling)
	  the send when we absolutely know it will cause a segfault or, if
	  that can't be easily accomplished, strictly from the devstate
	  side of things. Also, I'm pretty sure a lot of the code in
	  res_jabber isn't thread safe. (issue ASTERISK-18626) (issue
	  ASTERISK-18078) ........

2011-10-04 11:49 +0000 [r339245]  Alexandr Anikin <may@telecom-service.ru>

	* addons/ooh323c/src/memheap.c, /: Merged revisions 339244 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r339244 | may | 2011-10-04 15:44:55 +0400 (Tue, 04 Oct 2011) | 2
	  lines fix forget declaration in previous change ........

2011-10-03 20:13 +0000 [r339145-339148]  Leif Madsen <lmadsen@digium.com>

	* /, channels/chan_sip.c: Merged revisions 339147 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r339147 | lmadsen | 2011-10-03 15:12:43 -0500 (Mon, 03 Oct 2011)
	  | 6 lines Remove duplicated Maxforwards line in AMI output.
	  (Closes issue ASTERISK-18637) Reported by: Jacek Konieczny
	  Patches: asterisk-sipshowpeer.patch (License #6298) uploaded by
	  Jacek Konieczny ........

	* apps/app_dial.c, /: Merged revisions 339144 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r339144 | lmadsen | 2011-10-03 14:54:52 -0500 (Mon, 03 Oct 2011)
	  | 6 lines Make documentation for Dial() options 'F' and 'F()'
	  more clear. (Closes issue ASTERISK-18646) Reported by: Physis
	  Heckman Tested by: Richard Mudgett ........

2011-10-03 18:52 +0000 [r339089]  Alexandr Anikin <may@telecom-service.ru>

	* addons/ooh323c/src/memheap.c, /: Merged revisions 339087 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r339087 | may | 2011-10-03 22:42:49 +0400 (Mon, 03 Oct 2011) | 4
	  lines destroy memheap mutex properly before memheap deleted (fix
	  memory leak occured after r304950 changes with DEBUG_THREAD
	  compile option) ........

2011-10-03 18:44 +0000 [r339088]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c, main/file.c: Merged revisions 339086 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r339086 | twilson | 2011-10-03 11:40:52 -0700 (Mon, 03 Oct 2011)
	  | 10 lines Properly ignore AST_CONTROL_UPDATE_RTP_PEER in more
	  places After the change in r336294, the new
	  AST_CONTROL_UPDATE_RTP_PEER frame is sent when a re-invite
	  happens. If we receive a re-invite from a device the
	  waitstream_core was not aware of the new control frame and would
	  drop the call. (closes issue ASTERISK-18610) Reported by:
	  Kristijan_Vrban ........

2011-10-03 15:54 +0000 [r339011-339045]  Matthew Nicholson <mnicholson@digium.com>

	* res/res_fax.c: Ported ast_fax_caps_to_str() to 10, not sure why
	  it wasn't already here. This function prints a list of caps
	  instead of a hex bitfield.

	* res/res_fax.c: Don't clear the AST_FAX_TECH_MULTI_DOC flag right
	  after we set it.

	* res/res_fax.c: properly remove the AST_FAX_TECH_GATEWAY flag
	  (instead of setting all of the other flags)

2011-10-03 14:38 +0000 [r338904-338997]  Gregory Nietsky <gregory@distrotech.co.za>

	* CHANGES: Documentation noting the extension of CHANNEL() for
	  chan_ooh323

	* addons/chan_ooh323.c, funcs/func_channel.c: Remove the channel
	  function OOH323() and place its options into CHANNEL() channel
	  drivers should not have there own dialplan functions.

	* res/res_fax.c: Fixup a race condition in res_fax.c where
	  FAXOPT(gateway)=no will turn off the gateway but the framehook is
	  not destroyed. this problem happens when a gateway is attempted
	  in the dialplan and the device is not available i may want to do
	  fax to mail in the server it will not be allowed. instead of
	  checking only AST_FAX_TECH_GATEWAY also check gateway_id Reverts
	  338904 Fix some white space.

	* res/res_fax.c: Remove T38 Gateway capability when detaching
	  framehook. SET(FAXOPT(gateway)=no) does not remove the capability
	  when detaching the framehook. small patch to fix this problem.

2011-09-30 22:06 +0000 [r338801]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 338800 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r338800 | rmudgett | 2011-09-30 17:05:10 -0500 (Fri, 30
	  Sep 2011) | 12 lines Fix segfault in analog_ss_thread() not
	  checking ast_read() for NULL. NOTE: The problem was reported
	  against v1.6.2. It is unlikely to ever happen on v1.8 and above
	  since chan_dahdi.c:analog_ss_thread() is unlikely to be used. The
	  version in sig_analog.c has largely replaced it. (closes issue
	  ASTERISK-18648) Reported by: Stephan Bosch Patches:
	  jira_asterisk_18648_v1.8.patch (license #5621) patch uploaded by
	  rmudgett Tested by: Stephan Bosch ........

2011-09-30 18:55 +0000 [r338719]  Jonathan Rose <jrose@digium.com>

	* /, configs/queues.conf.sample: Merged revisions 338718 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r338718 | jrose | 2011-09-30 13:54:30 -0500 (Fri, 30 Sep 2011) |
	  1 line Adds documentation for QueueMemberStatus event generation
	  ........

2011-09-30 16:35 +0000 [r338664]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/chan_sip.c: Fix formatting of AMI header for SIP show
	  peer. ASTERISK-17486 exposed the problem for AMI parsers. (closes
	  issue ASTERISK-18649) Reported by: Jacek Konieczny Patches:
	  asterisk-sipshowpeer_response_end.patch (license #6298) patch
	  uploaded by Jacek Konieczny ........ Merged revisions 338663 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

2011-09-29 21:14 +0000 [r338556]  Paul Belanger <pabelanger@digium.com>

	* tests/test_amihooks.c, tests/test_security_events.c, /,
	  tests/test_locale.c, tests/test_logger.c,
	  tests/test_dlinklists.c, tests/test_linkedlists.c: Merged
	  revisions 338555 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r338555 | pabelanger | 2011-09-29 17:12:21 -0400 (Thu, 29 Sep
	  2011) | 2 lines Test modules should depend on the TEST_FRAMEWORK
	  flag ........

2011-09-29 20:54 +0000 [r338552]  Jason Parker <jparker@digium.com>

	* /, tests/test_db.c, tests/test_netsock2.c: Merged revisions
	  338551 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r338551 | qwell | 2011-09-29 15:54:13 -0500 (Thu, 29 Sep 2011) |
	  1 line Test modules have a support level of core. ........

2011-09-29 18:32 +0000 [r338493]  Leif Madsen <lmadsen@digium.com>

	* /, channels/chan_sip.c: Merged revisions 338492 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r338492 | lmadsen | 2011-09-29 13:31:33 -0500 (Thu, 29 Sep 2011)
	  | 6 lines Update documentation for SIP_HEADER. The SIP_HEADER
	  function only works on the the initial SIP INVITE. The
	  documentation was updated in trunk, but not in 1.8 or 10, so I'm
	  making them match. (Closes issue ASTERISK-18640) ........

2011-09-29 12:16 +0000 [r338417]  Gregory Nietsky <gregory@distrotech.co.za>

	* /, channels/chan_sip.c, channels/sip/include/sip.h: Merged
	  revisions 338416 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r338416 | irroot | 2011-09-29 14:13:05 +0200 (Thu, 29 Sep 2011) |
	  12 lines The rtptimeout setting is ignored on a per peer basis.
	  Not only is the rtptimeout ignored in some cases but rtpkeepalive
	  and rtpholdtimeout is affected. this commit also removes
	  rtptimeout/rtpholdtimeout on text rtp. (closes issue
	  ASTERISK-18559) Review: https://reviewboard.asterisk.org/r/1452
	  ........

2011-09-28 22:36 +0000 [r338253-338323]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/sig_pri.c: Merged revisions 338322 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r338322 | rmudgett | 2011-09-28 17:35:52 -0500 (Wed, 28 Sep 2011)
	  | 5 lines Make duplicate call ptr warning message more helpful. *
	  Adds the value of the call ptr to the duplicate call ptr message
	  to help trace why there is a duplicate call ptr. ........

	* include/asterisk/logger.h, /: Merged revisions 338235 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r338235 | rmudgett | 2011-09-28 16:17:45 -0500 (Wed, 28 Sep 2011)
	  | 7 lines Fix inconsistency in LOG_VERBOSE/AST_LOG_VERBOSE
	  declaration. (closes issue ASTERISK-17973) Reported by: Luke H
	  Patches: logger_h.patch (license #6278) patch uploaded by Luke H
	  ........

2011-09-28 20:54 +0000 [r338228]  Jason Parker <jparker@digium.com>

	* build_tools/cflags.xml, channels/chan_usbradio.c,
	  build_tools/cflags-devmode.xml, agi/agi.xml, utils/utils.xml, /,
	  build_tools/embed_modules.xml, tests/test_db.c,
	  tests/test_netsock2.c: Merged revisions 338227 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r338227 | qwell | 2011-09-28 15:52:47 -0500 (Wed, 28 Sep 2011) |
	  1 line Add support levels to non-module sections of menuselect
	  (cflags, utils, etc). ........

2011-09-28 20:26 +0000 [r338225]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 338224 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r338224 | rmudgett | 2011-09-28 15:24:41 -0500 (Wed, 28
	  Sep 2011) | 5 lines Fix chan_dahd compiling with gcc 4.6 when PRI
	  and SS7 not present. (closes issue ASTERISK-18357) Reported by:
	  Matthew Nicholson ........

2011-09-27 20:13 +0000 [r338085]  Paul Belanger <pabelanger@digium.com>

	* /, apps/app_macro.c: Merged revisions 338084 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r338084 | pabelanger | 2011-09-27 16:10:13 -0400 (Tue, 27 Sep
	  2011) | 2 lines Upgrade app_macro to core ........

2011-09-26 19:35 +0000 [r337974]  Richard Mudgett <rmudgett@digium.com>

	* cdr/cdr_manager.c, cdr/cdr_custom.c, apps/app_voicemail.c,
	  apps/app_dial.c, main/pbx.c, cdr/cdr_sqlite3_custom.c, /,
	  include/asterisk/cel.h, cdr/cdr_syslog.c, tests/test_gosub.c,
	  include/asterisk/channel.h, main/cel.c, main/manager.c,
	  funcs/func_odbc.c, cel/cel_custom.c, apps/app_minivm.c,
	  main/logger.c, cel/cel_sqlite3_custom.c: Merged revisions 337973
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r337973 | rmudgett | 2011-09-26 14:30:39 -0500 (Mon, 26 Sep 2011)
	  | 30 lines Fix deadlock when using dummy channels. Dummy channels
	  created by ast_dummy_channel_alloc() should be destoyed by
	  ast_channel_unref(). Using ast_channel_release() needlessly grabs
	  the channel container lock and can cause a deadlock as a result.
	  * Analyzed use of ast_dummy_channel_alloc() and made use
	  ast_channel_unref() when done with the dummy channel. (Primary
	  reason for the reported deadlock.) * Made
	  app_dial.c:dial_exec_full() not call ast_call() holding any
	  channel locks. Chan_local could not perform deadlock avoidance
	  correctly. (Potential deadlock exposed by this issue. Secondary
	  reason for the reported deadlock since the held lock was part of
	  the deadlock chain.) * Fixed some uses of
	  ast_dummy_channel_alloc() not checking the returned channel
	  pointer for failure. * Fixed some potential chan=NULL pointer
	  usage in func_odbc.c. Protected by testing the bogus_chan value.
	  * Fixed needlessly clearing a 1024 char auto array when setting
	  the first char to zero is enough in manager.c:action_getvar().
	  (closes issue ASTERISK-18613) Reported by: Thomas Arimont
	  Patches: jira_asterisk_18613_v1.8.patch (license #5621) patch
	  uploaded by rmudgett Tested by: Thomas Arimont ........

2011-09-27  Asterisk Development Team <asteriskteam@digium.com>

	* Asterisk 10.0.0-beta2 Released.

	* Based on revision that passed automated testing
	  (http://bamboo.asterisk.org/browse/AST10-LUCID-178)

2011-09-26 19:35 +0000 [r337974]  Richard Mudgett <rmudgett@digium.com>

	* cdr/cdr_manager.c, cdr/cdr_custom.c, apps/app_voicemail.c,
	  apps/app_dial.c, main/pbx.c, cdr/cdr_sqlite3_custom.c, /,
	  include/asterisk/cel.h, cdr/cdr_syslog.c, tests/test_gosub.c,
	  include/asterisk/channel.h, main/cel.c, main/manager.c,
	  funcs/func_odbc.c, cel/cel_custom.c, apps/app_minivm.c,
	  main/logger.c, cel/cel_sqlite3_custom.c: Merged revisions 337973
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r337973 | rmudgett | 2011-09-26 14:30:39 -0500 (Mon, 26 Sep 2011)
	  | 30 lines Fix deadlock when using dummy channels. Dummy channels
	  created by ast_dummy_channel_alloc() should be destoyed by
	  ast_channel_unref(). Using ast_channel_release() needlessly grabs
	  the channel container lock and can cause a deadlock as a result.
	  * Analyzed use of ast_dummy_channel_alloc() and made use
	  ast_channel_unref() when done with the dummy channel. (Primary
	  reason for the reported deadlock.) * Made
	  app_dial.c:dial_exec_full() not call ast_call() holding any
	  channel locks. Chan_local could not perform deadlock avoidance
	  correctly. (Potential deadlock exposed by this issue. Secondary
	  reason for the reported deadlock since the held lock was part of
	  the deadlock chain.) * Fixed some uses of
	  ast_dummy_channel_alloc() not checking the returned channel
	  pointer for failure. * Fixed some potential chan=NULL pointer
	  usage in func_odbc.c. Protected by testing the bogus_chan value.
	  * Fixed needlessly clearing a 1024 char auto array when setting
	  the first char to zero is enough in manager.c:action_getvar().
	  (closes issue ASTERISK-18613) Reported by: Thomas Arimont
	  Patches: jira_asterisk_18613_v1.8.patch (license #5621) patch
	  uploaded by rmudgett Tested by: Thomas Arimont ........

2011-09-23 19:18 +0000 [r337840-337902]  Gregory Nietsky <gregory@distrotech.co.za>

	* /, contrib/init.d/rc.archlinux.asterisk: Merged revisions 337898
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r337898 | irroot | 2011-09-23 21:14:30 +0200 (Fri, 23 Sep 2011) |
	  4 lines Spelling fix ........

	* /, apps/app_queue.c: Merged revisions 337839 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r337839 | irroot | 2011-09-23 10:34:03 +0200 (Fri, 23 Sep 2011) |
	  11 lines Make sure a CDR is on the stack for call in the Queue.
	  Only let update_cdr act on the last CDR in the stack. In some
	  circumstances [Attended transfer to queue] a CDR record is not
	  inserted for this call where it should. (closes issue
	  ASTERISK-18567) Review: https://reviewboard.asterisk.org/r/1266
	  ........

2011-09-23 00:45 +0000 [r337775]  Russell Bryant <russell@digium.com>

	* configs/res_pktccops.conf.sample, /: Merged revisions 337774 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r337774 | russell | 2011-09-22 19:44:19 -0500 (Thu, 22 Sep 2011)
	  | 11 lines Comment out entries in sample res_pktccops.conf. With
	  these options enabled, they can cause Asterisk to freak out by
	  SYN flooding a network and eating the CPU. Obviously it would be
	  good to fix the code so that this can't happen, but we can at
	  least change the default configuration so it doesn't happen. This
	  was reported downstream to the Fedora issue tracker:
	  https://bugzilla.redhat.com/show_bug.cgi?id=658431 ........

2011-09-22 21:37 +0000 [r337721]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/sig_pri.c: Merged revisions 337720 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r337720 | rmudgett | 2011-09-22 16:29:46 -0500 (Thu, 22 Sep 2011)
	  | 18 lines Made ISDN not add numbering plan prefix strings to
	  empty numbers. When the Caller-ID is restricted, the expected
	  behavior is for the Caller-ID to be blank. In chan_dahdi, the
	  national prefix is placed onto the Caller-ID number even if it is
	  restricted (empty) causing the Caller-ID to be the national
	  prefix rather than blank. This behavior was lost when sig_pri was
	  extracted from chan_dahdi. * Made not add prefix strings to empty
	  connected line, calling, and ANI number strings. (closes issue
	  ASTERISK-18577) Reported by: Kris Shaw Patches:
	  jira_asterisk_18577_v1.8.patch (license #5621) patch uploaded by
	  rmudgett Tested by: Kris Shaw ........

2011-09-22 18:43 +0000 [r337640]  Paul Belanger <pabelanger@digium.com>

	* CREDITS, apps/app_meetme.c, CHANGES: Revert previous commit New
	  feature should be added into trunk, unfortunately it is too late
	  for the Asterisk 10 branch.

2011-09-22 15:47 +0000 [r337595-337597]  Jonathan Rose <jrose@digium.com>

	* channels/sip/security_events.c (added),
	  channels/sip/include/security_events.h (added): Forgot to svn add
	  new files to r337595 Part of Generating security events for
	  chan_sip (issue ASTERISK-18264) Reported by: Michael L. Young
	  Patches: security_events_chan_sip_v4.patch (License #5026) by
	  Michael L. Young Reviewboard:
	  https://reviewboard.asterisk.org/r/1362/

	* configs/logger.conf.sample, channels/chan_sip.c,
	  include/asterisk/event_defs.h, main/security_events.c,
	  main/event.c, CHANGES, channels/sip/include/sip.h,
	  include/asterisk/security_events_defs.h: Generate Security events
	  in chan_sip using new Security Events Framework Security Events
	  Framework was added in 1.8 and support was added for AMI to
	  generate events at that time. This patch adds support for
	  chan_sip to generate security events. (closes issue
	  ASTERISK-18264) Reported by: Michael L. Young Patches:
	  security_events_chan_sip_v4.patch (license #5026) by Michael L.
	  Young Review: https://reviewboard.asterisk.org/r/1362/

2011-09-22 11:44 +0000 [r337431-337542]  Gregory Nietsky <gregory@distrotech.co.za>

	* res/res_srtp.c, /: Merged revisions 337541 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r337541 | irroot | 2011-09-22 13:39:49 +0200 (Thu, 22 Sep 2011) |
	  8 lines Add warned to ast_srtp to prevent errors on each frame
	  from libsrtp The first 9 frames are not reported as some devices
	  dont use srtp from first frame these are suppresed. the warning
	  is then output only once every 100 frames. ........

	* /, channels/chan_h323.c: Merged revisions 337486 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r337486 | irroot | 2011-09-22 11:22:26 +0200 (Thu, 22
	  Sep 2011) | 10 lines If IP address is used in chan_h323 host
	  parameter of peer configuration. module tries to resolve IP
	  address to IP address and fails. Simple fix to set family of
	  socket this is a hangover from ipv6 changes. (closes issue
	  ASTERISK-18237) (issue ASTERISK-17278) (issue ASTERISK-17500)
	  ........

	* apps/app_originate.c, CHANGES: Revert commit r337261 This commit
	  is for trunk not version 10 ----- Adds a timeout argument to
	  app_originate the default is 30s this will be used if the timout
	  supplied is invalid or no timeout is supplied. -----

	* main/channel.c, /: Merged revisions 337430 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r337430 | irroot | 2011-09-22 08:18:33 +0200 (Thu, 22 Sep 2011) |
	  19 lines Its possible to loose audio on ast_write when the
	  channel is not transcoded correctly. in the case of DAHDI the
	  channel is hungup. This patch tries to "fix" the problem and make
	  the channel compatiable and warn the user of this problem. Please
	  note there is a underlying problem with codec negotion this does
	  not fix the problem it does try to rectify it and prevent loss of
	  service. Review: https://reviewboard.asterisk.org/r/1442/ (closes
	  issue ASTERISK-17541) (closes issue ASTERISK-18063) (issue
	  ASTERISK-14384) (issue ASTERISK-17502) (issue ASTERISK-18325)
	  (issue ASTERISK-18422) ........

2011-09-21 21:25 +0000 [r337342-337380]  Tilghman Lesher <tilghman@meg.abyt.es>

	* apps/app_voicemail.c, /: More silly spacing changes ..... Merged
	  revisions 337353 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* apps/app_voicemail.c, /: ........ Dumb little spacing fix.
	  ........ Merged revisions 337344 from
	  http://svn.asterisk.org/svn/asterisk/branches/1.8

	* funcs/func_curl.c, /: ........ Escape commas in keys and values,
	  when keys and values are enumerated by commas. Review:
	  https://reviewboard.asterisk.org/r/1433 ........ Merged revisions
	  337325 from https://origsvn.digium.com/svn/asterisk/branches/1.8

2011-09-21 11:15 +0000 [r337261-337263]  Gregory Nietsky <gregory@distrotech.co.za>

	* configs/sip.conf.sample: Whitespace fixup from SRTP patch

	* apps/app_originate.c, CHANGES: Adds a timeout argument to
	  app_originate the default is 30s this will be used if the timout
	  supplied is invalid or no timeout is supplied. Contributed by:
	  jacco (thank you for the work) Review:
	  https://reviewboard.asterisk.org/r/1310/

2011-09-21 09:32 +0000 [r337178-337219]  Olle Johansson <oej@edvina.net>

	* configs/extensions.conf.sample, main/pbx.c, CHANGES: Make
	  ast_pbx_run() not default to s@default if extension is not found
	  Review: https://reviewboard.asterisk.org/r/1446/ This is a bug -
	  or architecture mistake - that has been in Asterisk for a very
	  long time. It was exposed by the AMI originate action and
	  possibly some other applications. Most channel drivers checks if
	  an extension exists BEFORE starting a pbx on an inbound call, so
	  most calls will not depend on this issue. Thanks everyone
	  involved in the review and on IRC and the mailing list for a
	  quick review and all the feedback. (closes issue ASTERISK-18578)

	* res/res_rtp_asterisk.c, configs/rtp.conf.sample, CHANGES: Change
	  strictrtp option to default to yes in the RTP module Suggested by
	  Kapejod on Facebook Review:
	  https://reviewboard.asterisk.org/r/1448/ (closes issue
	  ASTERISK-18587) Thanks for quick feedback to kpfleming and
	  Tilghman --Denna och nedanst√•ende rader kommer inte med i
	  loggmeddelandet-- M CHANGES M configs/rtp.conf.sample M
	  res/res_rtp_asterisk.c

2011-09-20 22:49 +0000 [r337120]  Matthew Jordan <mjordan@digium.com>

	* apps/app_voicemail.c, apps/app_dial.c, include/asterisk/app.h, /,
	  apps/app_meetme.c, apps/app_minivm.c, main/app.c,
	  apps/app_confbridge.c, apps/app_followme.c: Merged revisions
	  337118 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r337118 | mjordan | 2011-09-20 17:38:54 -0500 (Tue, 20 Sep 2011)
	  | 21 lines Fix for incorrect voicemail duration in external
	  notifications This patch fixes an issue where the voicemail
	  duration was being reported with a duration significantly less
	  than the actual sound file duration. Voicemails that contained
	  mostly silence were reporting the duration of only the sound in
	  the file, as opposed to the duration of the file with the
	  silence. This patch fixes this by having two durations reported
	  in the __ast_play_and_record family of functions - the
	  sound_duration and the actual duration of the file. The
	  sound_duration, which is optional, now reports the duration of
	  the sound in the file, while the actual full duration of the file
	  is reported in the duration parameter. This allows the voicemail
	  applications to use the sound_duration for minimum duration
	  checking, while reporting the full duration to external parties
	  if the voicemail is kept. (issue ASTERISK-2234) (closes issue
	  ASTERISK-16981) Reported by: Mary Ciuciu, Byron Clark, Brad
	  House, Karsten Wemheuer, KevinH Tested by: Matt Jordan Review:
	  https://reviewboard.asterisk.org/r/1443 ........

2011-09-20 22:47 +0000 [r337119]  Richard Mudgett <rmudgett@digium.com>

	* funcs/func_strings.c: Fix crash with STRREPLACE function. The
	  ast_func_read() function calls the .read2 callback with the len
	  parameter set to zero indicating no size restrictions on the
	  supplied ast_str buffer. The value was used to dimension a local
	  starts[] array with the array subsequently used. * Reworked the
	  strreplace() function to perform the string replacement in a
	  straight forward manner. Eliminated the need for the starts[]
	  array. (closes issue ASTERISK-18545) Reported by: Federico Alves
	  Patches: jira_asterisk_18545_v10.patch (license #5621) patch
	  uploaded by rmudgett Tested by: rmudgett, Federico Alves

2011-09-20 22:19 +0000 [r337116]  Leif Madsen <lmadsen@digium.com>

	* /, contrib/init.d/rc.redhat.asterisk: Merged revisions 337115 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r337115 | lmadsen | 2011-09-20 17:18:25 -0500 (Tue, 20 Sep 2011)
	  | 7 lines Update RedHat Init script to work with Heartbeat. The
	  current RedHat init script was not LSB compatible. This change
	  will make it LSB compatible so that it can work correctly with
	  Heartbeat. (Closes issue ASTERISK-18253) Reported by: c0rnoTa
	  ........

2011-09-20 21:05 +0000 [r337062]  Kinsey Moore <kmoore@digium.com>

	* tests/test_pbx.c, main/pbx.c, /: Merged revisions 337061 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r337061 | kmoore | 2011-09-20 16:04:11 -0500 (Tue, 20 Sep 2011) |
	  11 lines Make CANMATCH with the new pattern match engine behave
	  more like the old one When checking an extension for E_CANMATCH
	  using the new extension matching algorithm, an exact match was
	  not returned as a possible match resulting in the queue failing
	  to allow a caller to exit on DTMF. This removes the requirement
	  that an extension be longer than acquired digits for an
	  E_CANMATCH operation to succeed. (closes issue ASTERISK-18044)
	  Review: https://reviewboard.asterisk.org/r/1367/ ........

2011-09-20 19:12 +0000 [r336978-337008]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/sig_ss7.c: Merged revisions 337007 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r337007 | rmudgett | 2011-09-20 14:10:30 -0500 (Tue, 20 Sep 2011)
	  | 15 lines Check if a channel was created before using the
	  pointer in sig_ss7_new_ast_channel(). Fixes the crash in
	  ASTERISK-17955 gdb-11918.txt backtrace. * Added some missing
	  libss7 access lock protection. * Prevent cancelling the
	  ss7_linkset() thread at inoportune times just like the
	  pri_dchannel() thread. (issue ASTERISK-17955) Reported by: Ian M
	  Sherman Patches: jira_asterisk_17955_v1.8.patch (license #5621)
	  patch uploaded by rmudgett (attached to related ASTERISK-17966)
	  ........

	* /, channels/sig_ss7.c: Merged revisions 336977 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r336977 | rmudgett | 2011-09-20 13:12:17 -0500 (Tue, 20 Sep 2011)
	  | 21 lines Fix deadlock from not releasing SS7 linkset lock.
	  sig_ss7_hangup() failed to release the SS7 linkset lock if the
	  call had the alreadyhungup flag set. * Made unlock the SS7
	  linkset lock in sig_ss7_hangup() if the alreadyhungup flag is
	  set. * Made ss7_start_call() not hold any locks while creating
	  the channel for an incoming call to prevent deadlock. * Made
	  ss7_grab() a void function, since it could never fail, to
	  simplify calling code. * Made obtain the channel lock to do
	  softhangup in some places. Patches: jira_ast_668_v1.8.patch
	  (license #5621) patch uploaded by rmudgett JIRA AST-668 ........

2011-09-20 16:51 +0000 [r336936]  Gregory Nietsky <gregory@distrotech.co.za>

	* channels/sip/sdp_crypto.c, channels/chan_sip.c,
	  channels/sip/include/sdp_crypto.h, channels/sip/include/srtp.h,
	  configs/sip.conf.sample, CHANGES, channels/sip/include/sip.h:
	  Allow Setting Auth Tag Bit length Based on invite or config
	  option Update the SIP SRTP API to allow use of 32 or 80 bit
	  taglen. Curently only 80 bit is supported. The outgoing invite
	  will use the taglen of the incoming invite preventing one-way
	  audio. (Closes issue ASTERISK-17895) Review:
	  https://reviewboard.asterisk.org/r/1173/

2011-09-20 01:03 +0000 [r336878]  Russell Bryant <russell@digium.com>

	* res/res_rtp_asterisk.c, /: Merged revisions 336877 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r336877 | russell | 2011-09-19 19:56:20 -0500 (Mon, 19
	  Sep 2011) | 36 lines Fix crashes in ast_rtcp_write(). This patch
	  addresses crashes related to RTCP handling. The backtraces just
	  show a crash in ast_rtcp_write() where it appears that the RTP
	  instance is no longer valid. There is a race condition with
	  scheduled RTCP transmissions and the destruction of the RTP
	  instance. This patch utilizes the fact that ast_rtp_instance is a
	  reference counted object and ensures that it will not get
	  destroyed while a reference is still around due to scheduled RTCP
	  transmissions. RTCP transmissions are scheduled and executed from
	  the chan_sip scheduler context. This scheduler context is
	  processed in the SIP monitor thread. The destruction of an RTP
	  instance occurs when the associated sip_pvt gets destroyed (which
	  happens when the sip_pvt reference count reaches 0). However, the
	  SIP monitor thread is not the only thread that can cause a
	  sip_pvt to get destroyed. The sip_hangup function, executed from
	  a channel thread, also decrements the reference count on a
	  sip_pvt and could cause it to get destroyed. While this is being
	  changed anyway, the patch also removes calling ast_sched_del()
	  from within the RTCP scheduler callback. It's not helpful. Simply
	  returning 0 prevents the callback from being rescheduled. (closes
	  issue ASTERISK-18570) Related issues that look like they are the
	  same problem: (issue ASTERISK-17560) (issue ASTERISK-15406)
	  (issue ASTERISK-15257) (issue ASTERISK-13334) (issue
	  ASTERISK-9977) (issue ASTERISK-9716) Review:
	  https://reviewboard.asterisk.org/r/1444/ ........

2011-09-19 22:13 +0000 [r336792]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 336791 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r336791 | twilson | 2011-09-19 17:07:58 -0500 (Mon, 19 Sep 2011)
	  | 2 lines Don't interfere with T.38 reinvites This is an update
	  to the fix for ASTERISK-18340 and ASTERISK-17725 ........

2011-09-19 21:41 +0000 [r336734-336789]  Tilghman Lesher <tilghman@meg.abyt.es>

	* funcs/func_strings.c: Ensure substring will not be found in the
	  previous match.

	* include/asterisk/optional_api.h, Makefile, /, configure,
	  include/asterisk/autoconfig.h.in, main/Makefile,
	  codecs/gsm/Makefile, configure.ac, Makefile.rules: Merged
	  revisions 336733 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r336733 | tilghman | 2011-09-19 15:27:03 -0500 (Mon, 19 Sep 2011)
	  | 11 lines Various changes to allow 1.8 to compile on Mac OS X
	  Lion (10.7) * Makefile workaround for 10.6 extended to work on
	  10.7 and later. * Now uses the 'weak' symbol for Lion systems,
	  which no longer support 'weak_import' Closes ASTERISK-17612.
	  Closes ASTERISK-18213. Tested by: tilghman, oej. ........

2011-09-19 20:16 +0000 [r336717]  Jonathan Rose <jrose@digium.com>

	* /, apps/app_echo.c, apps/app_saycounted.c, apps/app_mp3.c,
	  apps/app_morsecode.c, res/res_musiconhold.c, apps/app_queue.c,
	  apps/app_mixmonitor.c: Merged revisions 336716 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r336716 | jrose | 2011-09-19 15:07:36 -0500 (Mon, 19 Sep 2011) |
	  7 lines Document applications that play audio and do not answer
	  unanswered calls. This patch is part of an effort to document
	  early media and its usage. If you are interested in contributing
	  to this documentation effort, there are probably other
	  applications worth documenting as well as an Asterisk wiki
	  article at
	  https://wiki.asterisk.org/wiki/display/AST/Early+Media+and+the+Progress+Application
	  ........

2011-09-19 18:51 +0000 [r336659]  Richard Mudgett <rmudgett@digium.com>

	* apps/app_dial.c, /, UPGRADE-1.8.txt: Merged revisions 336658 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r336658 | rmudgett | 2011-09-19 13:46:40 -0500 (Mon, 19 Sep 2011)
	  | 31 lines Made Dial d and H options no longer immediately
	  auto-answer the calling leg. The Dial d and H options break DTMF
	  attended transfer atxferdropcall option. 1) Party A calls party
	  B. 2) Party B does a DTMF attended transfer to Party C. If the
	  dialplan uses the Dial d or H options to call Party C then the
	  Dial application answers the call immediately before initiating
	  the call leg to Party C. The premature answer causes the transfer
	  code to not invoke the atxferdropcall=no behavior for a blonde
	  transfer since Party C has "answered". The transfer code thinks
	  that Party B has "consulted" with Party C when Party B hangs up
	  and completes the transfer to Party A. Party A now hears ringback
	  until Party C actually answers. ASTERISK-13294 Dial d option.
	  ASTERISK-11067 Dial H option to disconnect before answer. The
	  referenced issues made Dial answer with the d and H options
	  because many SIP and ISDN phones cannot send DTMF before the call
	  is connected. * Made require the dialplan to control when or if
	  the call needs to be answered to use the Dial application d and H
	  options. (The call is no longer surprise answered when using the
	  Dial d or H options.) Review:
	  https://reviewboard.asterisk.org/r/1381/ JIRA AST-623 JIRA
	  AST-666 ........

2011-09-19 15:42 +0000 [r336573]  Leif Madsen <lmadsen@digium.com>

	* /, contrib/scripts/get_ilbc_source.sh: Merged revisions 336572
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r336572 | lmadsen | 2011-09-19 10:41:16 -0500 (Mon, 19 Sep 2011)
	  | 7 lines Update get_ilbc_source.sh script to work again.
	  Recently iLBC support in Asterisk has changed after the
	  acquisition of GIPS by Google. More information about how this
	  may affect you is available in a blog post at:
	  http://blogs.asterisk.org/2011/09/19/ilbc-support-in-asterisk-after-googles-acquisition-of-gips/
	  ........

2011-09-19 15:32 +0000 [r336570]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/sig_pri.c: Merged revisions 336569 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r336569 | rmudgett | 2011-09-19 10:25:34 -0500 (Mon, 19 Sep 2011)
	  | 4 lines Rework sig_pri_hangup() to be simpler and clearer. JIRA
	  AST-675 ........

2011-09-19 13:48 +0000 [r336502-336504]  Olle Johansson <oej@edvina.net>

	* Makefile: Revert accidental change

	* Makefile, /, channels/chan_sip.c: Merged revisions 336501 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r336501 | oej | 2011-09-19 15:33:50 +0200 (M√•n, 19 Sep 2011) | 5
	  lines Add diversion header to a 302 redirect response if we have
	  diversion data (closes issue ASTERISK-18143) patch by oej
	  ........

2011-09-19 13:31 +0000 [r336500]  Gregory Nietsky <gregory@distrotech.co.za>

	* /, channels/chan_h323.c: Merged revisions 336499 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r336499 | irroot | 2011-09-19 15:27:52 +0200 (Mon, 19
	  Sep 2011) | 13 lines A long time ago in a galaxy far far away a
	  IPv6 update was made, chan_h323 was not updated causeing all to
	  flee to chan_ooh323. the brave Jedi [asterisk developers]
	  pondered this miscarrige of justice and restored order to the
	  force for the sake of closing out 2 old issues. (closes issue
	  ASTERISK-17278) (closes issue ASTERISK-17500) Reported by: dread,
	  sybasesql Tested by: irroot Reviewed by: IRC (russellb,
	  kpfleming) ........

2011-09-19 12:15 +0000 [r336381-336441]  Olle Johansson <oej@edvina.net>

	* main/manager.c, /: Merged revisions 336440 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r336440 | oej | 2011-09-19 14:06:48 +0200 (M√•n, 19 Sep 2011) | 2
	  lines Make sure manager_debug option is reset at reload ........

	* /, channels/chan_sip.c: Merged revisions 336378 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r336378 | oej | 2011-09-19 11:40:44 +0200 (M√•n, 19 Sep 2011) | 9
	  lines Add missing unlock at MWI message sending time (closes
	  issue ASTERISK-18573) Patches: sip_mwi_lock.patch (license #5041)
	  by Gregory Hinton Nietsky Thanks to irrot for the reminder, to
	  Gregory for the patch! ........

2011-09-16 22:11 +0000 [r336313-336316]  Terry Wilson <twilson@digium.com>

	* /, funcs/func_frame_trace.c: Merged revisions 336314 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r336314 | twilson | 2011-09-16 17:10:56 -0500 (Fri, 16
	  Sep 2011) | 2 lines Whitespace fix ........

	* /, funcs/func_frame_trace.c: Merged revisions 336312 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r336312 | twilson | 2011-09-16 17:04:25 -0500 (Fri, 16
	  Sep 2011) | 5 lines Add missing frame types to func_frame_trace
	  Also casts control frames to the proper enum so that the compile
	  will catch new additions. ........

2011-09-16 21:09 +0000 [r336307]  Jonathan Rose <jrose@digium.com>

	* main/channel.c, main/rtp_engine.c, /, channels/chan_sip.c,
	  include/asterisk/frame.h: Merged revisions 336294 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r336294 | jrose | 2011-09-16 14:53:40 -0500 (Fri, 16 Sep
	  2011) | 13 lines Fix bad RTP media bridges in directmedia calls
	  on peers separated by multiple Asterisk nodes. In a situation
	  involving devices on separate Asterisk trunks, the remote RTP
	  bridge would break when starting a call with directmedia. This
	  patch queues a new type of control frame so that our RTP bridge
	  loop can properly detect when these situations occur and check to
	  see if peers need to be updated in order to send their media to
	  the proper location. (Closes issue ASTERISK-18340) Reported by:
	  Thomas Arimont (Closes issue ASTERISK-17725) Reported by: kwk
	  Tested by: twilson, jrose ........

2011-09-16 19:10 +0000 [r336235]  Sean Bright <sean@malleable.com>

	* /, UPGRADE-1.8.txt: Merged revisions 336234 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r336234 | seanbright | 2011-09-16 15:06:27 -0400 (Fri, 16 Sep
	  2011) | 2 lines Make a note that inotify won't work with an NFS
	  mounted spooler directory. ........

2011-09-16 10:12 +0000 [r336094-336167]  Gregory Nietsky <gregory@distrotech.co.za>

	* channels/chan_misdn.c, /: Merged revisions 336166 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r336166 | irroot | 2011-09-16 12:09:17 +0200 (Fri, 16
	  Sep 2011) | 16 lines The round robin routing routine in
	  chan_misdn.c is broken. it rotates between ports but never checks
	  the channels in the ports. i have extensivly tested it and
	  verified it works on 1 upto 4 ports. before the patch only 1 out
	  of each port was used now all are used as expected. (closes issue
	  ASTERISK-18413) Reported by: irroot Tested by: irroot Reviewed
	  by: irroot Review: https://reviewboard.asterisk.org/r/1410/
	  ........

	* /, apps/app_queue.c: Merged revisions 336093 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r336093 | irroot | 2011-09-15 17:46:21 +0200 (Thu, 15 Sep 2011) |
	  20 lines Locking order in app_queue.c causes deadlocks. a channel
	  lock must never be held with the queues container lock held. the
	  deadlock occured on masquerade. the queues container lock is a
	  relic of the past the old queue module lock. with ao2 there is no
	  need to hold this lock when dealing with members this patch
	  removes unneeded locks. (closes issue ASTERISK-18101) (closes
	  issue ASTERISK-18487) Reported by: Paul Rolfe, Jason Legault
	  Tested by: irroot, Jason Legault, Paul Rolfe Reviewed by: Matthew
	  Nicholson Review: https://reviewboard.asterisk.org/r/1402/
	  ........

2011-09-15 15:19 +0000 [r336091]  David Vossel <dvossel@digium.com>

	* main/format_cap.c: Removes some no-op code found in format_cap.c.

2011-09-15 12:46 +0000 [r336042]  Olle Johansson <oej@edvina.net>

	* CREDITS, apps/app_meetme.c, CHANGES: Meetme: Introducing a new
	  option "k" to kill a conference if there's only a single member
	  left. When using Meetme as a modular call bridge from third party
	  applications, it's handy to make it behave like a normal call
	  bridge. When the second to last person exists, the last person
	  will be kicked out of the conference when this option is enabled.
	  (closes issue ASTERISK-18234) Review:
	  https://reviewboard.asterisk.org/r/1376/ Patch by oej, sponsored
	  by ClearIT, Solna, Sweden

2011-09-15 08:29 +0000 [r335991]  Gregory Nietsky <gregory@distrotech.co.za>

	* /, channels/chan_agent.c: Merged revisions 335978 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r335978 | irroot | 2011-09-15 10:15:22 +0200 (Thu, 15
	  Sep 2011) | 11 lines lock the channel before calling
	  ast_bridged_channel() to prevent a seg fault. AMI agents list
	  called on shutdown causes a segfault, introducing proper locking
	  will prevent this. (closes issue ASTERISK-18092) Reported by:
	  agustina Patches: chan_agent.patch (License #5041) patch uploaded
	  by irroot ........

2011-09-14 18:31 +0000 [r335852-335912]  Richard Mudgett <rmudgett@digium.com>

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac:
	  Merged revisions 335911 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r335911 | rmudgett | 2011-09-14 13:21:35 -0500 (Wed, 14 Sep 2011)
	  | 13 lines Remove unnecessary libpri dependency checks in the
	  configure script. Using the --with-pri option with the configure
	  script generated an error about not having PRI_L2_PERSISTENCE if
	  you did not have the absolute latest libpri SVN checkout
	  installed. The AST_EXT_LIB_SETUP_DEPENDENT macro in the
	  configure.ac script seems to be for libraries that are dependent
	  upon other libraries and not necessarily for optional/added
	  features within a library. (closes issue ASTERISK-18535) Reported
	  by: Michael Keuter ........

	* channels/chan_dahdi.c, /: Merged revisions 335851 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r335851 | rmudgett | 2011-09-14 10:53:25 -0500 (Wed, 14
	  Sep 2011) | 11 lines Fixed cut-n-paste regression using the wrong
	  variable. Fixes the missing DAHDI channels when using the newer
	  chan_dahdi.conf sections for channel configuration. (closes issue
	  ASTERISK-18496) Reported by: Sean Darcy Patches:
	  jira_asterisk_18496_v1.8.patch (license #5621) patch uploaded by
	  rmudgett Tested by: Sean Darcy, rmudgett ........

2011-09-14 13:28 +0000 [r335791]  Matthew Nicholson <mnicholson@digium.com>

	* main/manager.c, /: Merged revisions 335790 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r335790 | mnicholson | 2011-09-14 08:28:16 -0500 (Wed, 14 Sep
	  2011) | 4 lines The tech and data members of
	  fast_originate_helper are not string fields. ASTERISK-17709
	  ........

2011-09-13 22:10 +0000 [r335721]  Richard Mudgett <rmudgett@digium.com>

	* /, apps/app_directed_pickup.c: Merged revisions 335720 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r335720 | rmudgett | 2011-09-13 17:10:15 -0500 (Tue, 13 Sep 2011)
	  | 1 line Remove obsolete todo comment about PICKUPRESULT.
	  ........

2011-09-13 21:37 +0000 [r335717]  Tzafrir Cohen <tzafrir.cohen@xorcom.com>

	* main/asterisk.c: do parse defaultlanguage from asterisk.conf Do
	  parse the option "defaultlanguage" from the [options] section of
	  asterisk.conf, as in the sample config file. Otherwise the
	  build-time default language (normally "en") is always the default
	  one. Review: https://reviewboard.asterisk.org/r/1342/
	  Signed-off-by: Tzafrir Cohen (License #5035)
	  <tzafrir.cohen@xorcom.com> Original-Commit:
	  http://svn.digium.com/svn/asterisk/branches/1.8@335716

2011-09-13 18:55 +0000 [r335656]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, configure, configure.ac: Merged revisions 335655 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r335655 | tilghman | 2011-09-13 13:52:38 -0500 (Tue, 13
	  Sep 2011) | 4 lines Move mandatory checks closer to the beginning
	  of the file. If these are going to fail, they should fail as
	  quickly as possible. ........

2011-09-13 18:47 +0000 [r335653]  Matthew Nicholson <mnicholson@digium.com>

	* main/pbx.c, main/manager.c, /: Merged revisions 335618 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r335618 | mnicholson | 2011-09-13 13:20:52 -0500 (Tue, 13 Sep
	  2011) | 5 lines Don't limit the size of appdata for manager
	  originate actions. ASTERISK-17709 Patch by: tilghman (with
	  modifications) ........

2011-09-13 07:24 +0000 [r335510]  Russell Bryant <russell@digium.com>

	* include/asterisk/event.h, /, res/ais/evt.c, main/event.c: Merged
	  revisions 335497 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r335497 | russell | 2011-09-13 02:11:36 -0500 (Tue, 13 Sep 2011)
	  | 15 lines Fix a crash in res_ais. This patch resolves a crash
	  observed in a load testing environment that involved the use of
	  the res_ais module. I observed some crashes where the event
	  delivery callback would get called, but the length parameter
	  incidcating how much data there was to read was 0. The code
	  assumed (with good reason I would think) that if this callback
	  got called, there was an event available to read. However, if the
	  rare case that there's nothing there, catch it and return instead
	  of blowing up. More specifically, the change always ensure that
	  the size of the received event in the cluster is always big
	  enough to be a real ast_event. Review:
	  https://reviewboard.asterisk.org/r/1423/ ........

2011-09-12 15:55 +0000 [r335434]  Matthew Nicholson <mnicholson@digium.com>

	* main/channel.c, /: Merged revisions 335433 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r335433 | mnicholson | 2011-09-12 10:54:41 -0500 (Mon, 12 Sep
	  2011) | 6 lines Properly set caller_warning and callee_warning
	  before we try to use them. ASTERISK-18199 Patch by: elguero
	  Testing by: rtang ........

2011-09-12 14:22 +0000 [r335346]  Kinsey Moore <kmoore@digium.com>

	* apps/app_dial.c, /: Merged revisions 335341 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r335341 | kmoore | 2011-09-12 09:21:17 -0500 (Mon, 12 Sep 2011) |
	  10 lines Ensure frames are not written to dialed channel if
	  ringback is requested When a single channel was dialed and there
	  was media to be forwarded to the calling channel, the media was
	  written without regard for ringback causing silence to be heard
	  in some circumstances. This regression was introduced when the
	  meaning of "single" changed to mean only the number of channels
	  dialed. (closes issue ASTERISK-18083) ........

2011-09-12 13:47 +0000 [r335323]  Olle Johansson <oej@edvina.net>

	* /, channels/chan_sip.c: Merged revisions 335319 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r335319 | oej | 2011-09-12 15:25:30 +0200 (M√•n, 12 Sep 2011) | 12
	  lines Lock the peer->mvipvt to avoid crashes with SIP history
	  enabled After the launch of 1.6 event-based MWI we have two
	  threads handling the peer->mwipvt, which cause issues with SIP
	  history additions in combination with the max limit for number of
	  history entries. Review: https://reviewboard.asterisk.org/r/1373/
	  (closes issue ASTERISK-18288) Thanks to irrot for peer review.
	  Work with this bug funded by IPvision AS ........

2011-09-12 13:27 +0000 [r335321]  Kinsey Moore <kmoore@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 335320 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r335320 | kmoore | 2011-09-12 08:25:42 -0500 (Mon, 12
	  Sep 2011) | 9 lines Prevent IAX2 from getting IPv6 addresses via
	  DNS IAX2 does not support IPv6 and getting such addresses from
	  DNS can cause error messages on the remote end involving bad IPv4
	  address casts in the presence of IPv6/IPv4 tunnels. This patch
	  ensures that IAX2 will not encounter IPv6 addresses via DNS
	  queries. (closes issue ASTERISK-18090) ........

2011-09-12 11:11 +0000 [r335260]  Stefan Schmidt <sst@sil.at>

	* /, channels/chan_sip.c: Merged revisions 335259 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r335259 | schmidts | 2011-09-12 11:09:19 +0000 (Mon, 12 Sep 2011)
	  | 6 lines build_peer doesnt unlink a peer object from peers_by_ip
	  container which leads to a wrong refcounter value. adding an
	  ao2_unlink from the peers_by_ip container fix it. Review:
	  https://reviewboard.asterisk.org/r/1428/ ........

2011-09-09 16:27 +0000 [r335078]  Matthew Jordan <mjordan@digium.com>

	* channels/chan_mgcp.c, channels/chan_unistim.c, apps/app_dial.c,
	  main/pbx.c, addons/chan_ooh323.c, /, channels/chan_sip.c,
	  channels/chan_console.c, channels/sig_pri.c, channels/chan_oss.c,
	  main/channel.c, channels/chan_usbradio.c, main/dial.c,
	  channels/chan_dahdi.c, channels/chan_misdn.c,
	  channels/chan_skinny.c, funcs/func_frame_trace.c,
	  main/features.c, channels/chan_h323.c, channels/chan_alsa.c,
	  include/asterisk/frame.h, channels/sig_ss7.c: Merged revisions
	  335064 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r335064 | mjordan | 2011-09-09 11:09:09 -0500 (Fri, 09 Sep 2011)
	  | 23 lines Updated SIP 484 handling; added Incomplete control
	  frame When a SIP phone uses the dial application and receives a
	  484 Address Incomplete response, if overlapped dialing is enabled
	  for SIP, then the 484 Address Incomplete is forwarded back to the
	  SIP phone and the HANGUPCAUSE channel variable is set to 28.
	  Previously, the Incomplete application dialplan logic was
	  automatically triggered; now, explicit dialplan usage of the
	  application is required. Additionally, this patch adds a new
	  AST_CONTOL_FRAME type called AST_CONTROL_INCOMPLETE. If a channel
	  driver receives this control frame, it is an indication that the
	  dialplan expects more digits back from the device. If the device
	  supports overlap dialing it should attempt to notify the device
	  that the dialplan is waiting for more digits; otherwise, it can
	  handle the frame in a manner appropriate to the channel driver.
	  (closes issue ASTERISK-17288) Reported by: Mikael Carlsson Tested
	  by: Matthew Jordan Review:
	  https://reviewboard.asterisk.org/r/1416/ ........

2011-09-09 07:23 +0000 [r335014]  Gregory Nietsky <gregory@distrotech.co.za>

	* funcs/func_dialplan.c, apps/app_readexten.c, CHANGES: Move code
	  for VALID_EXTEN from app_readexten to func_dialplan Mark
	  VALID_EXTEN deprecated. Review:
	  https://reviewboard.asterisk.org/r/1396/

2011-09-08 22:28 +0000 [r334954]  Richard Mudgett <rmudgett@digium.com>

	* /, main/logger.c: Merged revisions 334953 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r334953 | rmudgett | 2011-09-08 17:27:40 -0500 (Thu, 08 Sep 2011)
	  | 10 lines Fix crash with res_fax when MALLOC_DEBUG and "core
	  stop gracefully" are used. Asterisk crashes if MALLOC_DEBUG is
	  enabled when res_fax tries to unregister its logger level. * Make
	  ast_logger_unregister_level() use ast_free() instead of free().
	  When MALLOC_DEBUG is enabled, ast_free() does not degenerate into
	  a call to free(). Therefore, if you allocated memory with a form
	  of ast_malloc you must free it with ast_free. ........

2011-09-07 19:37 +0000 [r334844]  Paul Belanger <pabelanger@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 334843 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r334843 | pabelanger | 2011-09-07 15:35:52 -0400 (Wed,
	  07 Sep 2011) | 4 lines Cleanup chan_iax2.c log messages Review:
	  https://code.asterisk.org/code/cru/CR-AST-11 ........

2011-09-07 19:33 +0000 [r334841]  Richard Mudgett <rmudgett@digium.com>

	* /, main/features.c: Merged revisions 334840 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r334840 | rmudgett | 2011-09-07 14:31:44 -0500 (Wed, 07 Sep 2011)
	  | 10 lines Fix AMI action Park crash. * Made AMI action Park not
	  say anything to the parker channel (AMI header Channel2) since
	  the AMI action is a third party parking the call. (This is a
	  change in behavior that cannot be preserved without a lot of
	  effort.) * Made not play pbx-parkingfailed if the Park 's' option
	  is used. JIRA AST-660 ........

2011-09-07 15:10 +0000 [r334682-334747]  Stefan Schmidt <sst@sil.at>

	* /, main/features.c: Merged revisions 334682 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r334682 | schmidts | 2011-09-07 13:26:50 +0000 (Wed, 07 Sep 2011)
	  | 3 lines Adding the Feature to sent a Reason Header in a SIP
	  Cancel message by set the flag AST_FLAG_ANSWERED_ELSEWHERE before
	  doing a masquerade in the pickup function. ........

	* main/features.c: another clean up

	* main/features.c: Adding the Feature to sent a Reason Header in a
	  SIP Cancel message by set the flag AST_FLAG_ANSWERED_ELSEWHERE
	  before doing a masquerade in the pickup function.

2011-09-07 08:14 +0000 [r334617-334621]  Alec L Davis <sivad.a@paradise.net.nz>

	* /, CHANGES, apps/app_queue.c: Merged revisions 334620 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r334620 | alecdavis | 2011-09-07 20:12:49 +1200 (Wed, 07 Sep
	  2011) | 2 lines peroid typo ........

	* main/pbx.c, /: Merged revisions 334616 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r334616 | alecdavis | 2011-09-07 19:33:39 +1200 (Wed, 07 Sep
	  2011) | 10 lines Prevent segfault if call arrives before Asterisk
	  is fully booted. Prevent ast_pbx_start and ast_run_start from
	  starting a new thread unless asterisk is fully booted. alecdavis
	  (license 585) Tested by: alecdavis Review:
	  https://reviewboard.asterisk.org/r/1407/ ........

2011-09-06 15:47 +0000 [r334514]  Paul Belanger <pabelanger@digium.com>

	* configs/iax.conf.sample, CHANGES, channels/chan_iax2.c: authdebug
	  is now disabled by default To enable this functionaility again
	  set authdebug = yes in iax.conf Review:
	  https://reviewboard.asterisk.org/r/1414/

2011-09-06 13:58 +0000 [r334455]  Gregory Nietsky <gregory@distrotech.co.za>

	* apps/app_voicemail.c, /: Merged revisions 334453 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r334453 | irroot | 2011-09-06 15:48:03 +0200 (Tue, 06
	  Sep 2011) | 13 lines Make SQL query in app_voicemail.c portable
	  LIMIT is not portable. Regression from r312212 (closes issue
	  ASTERISK-18255) Reported by: Leif Madsen Tested by: Leif Madsen
	  Review: https://reviewboard.asterisk.org/r/1415/ ........

2011-09-02 21:08 +0000 [r334297-334357]  Richard Mudgett <rmudgett@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 334355 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r334355 | rmudgett | 2011-09-02 15:59:49 -0500 (Fri, 02
	  Sep 2011) | 19 lines MusicOnHold has extra unref which may lead
	  to memory corruption and crash. The problem happens when a call
	  is disconnected and you had started a MOH class that does not use
	  the files mode. If you define REF_DEBUG and recreate the problem,
	  it will announce itself with the following warning: Attempt to
	  unref mohclass 0xb70722e0 (default) when only 1 ref remained, and
	  class is still in a container! * Fixed moh_alloc() and
	  moh_release() functions not handling the state->class reference
	  consistently. (closes issue ASTERISK-18346) Reported by: Mark
	  Murawski Patches: jira_asterisk_18346_v1.8.patch (license #5621)
	  patch uploaded by rmudgett Tested by: rmudgett, Mark Murawski
	  Review: https://reviewboard.asterisk.org/r/1404/ ........

	* /, include/asterisk/config.h, main/config.c: Merged revisions
	  334296 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r334296 | rmudgett | 2011-09-02 12:10:58 -0500 (Fri, 02 Sep 2011)
	  | 39 lines Fix potential memory allocation failure crashes in
	  config.c. * Added required checks to the returned memory
	  allocation pointers to prevent crashes. * Made
	  ast_include_rename() create a replacement ast_variable list node
	  if the new filename is longer than the available space. Fixes
	  potential crash and memory leak. * Factored out
	  ast_variable_move() from ast_variable_update() so
	  ast_include_rename() can also use it when creating a replacement
	  ast_variable list node. * Made the filename stuffed at the end of
	  the struct a minimum allocated size in ast_variable_new() in case
	  ast_include_rename() changes the stored filename. * Constify
	  struct char pointers pointing to strings stuffed at the end of
	  the struct for: ast_variable, cache_file_mtime, and
	  ast_config_map. * Factored out cfmtime_new() to remove inlined
	  code and allow some struct pointers to become const. * Removed
	  the list lock from struct cache_file_mtime that was never used. *
	  Added doxygen comments to several structure elements and better
	  documented what strings are stuffed at the struct end char array.
	  * Reworked ast_config_text_file_save() and set_fn() to handle
	  allocation failure of the include file scratch pad object
	  tracking blank lines. * Made ast_config_text_file_save() fn[]
	  declared with PATH_MAX to ensure it is long enough for any
	  filename with path. Also reduced the number of container fileset
	  buckets from a rediculus 180,000 to 1023. JIRA AST-618 Review:
	  https://reviewboard.asterisk.org/r/1378/ ........

2011-09-01 17:39 +0000 [r334235]  Tilghman Lesher <tilghman@meg.abyt.es>

	* main/pbx.c, /: Merged revisions 334234 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r334234 | tilghman | 2011-09-01 12:38:33 -0500 (Thu, 01 Sep 2011)
	  | 2 lines Remove 1.6 compatibility documentation from 1.8, as it
	  no longer applies. ........

2011-09-01 17:36 +0000 [r334233]  Matthew Nicholson <mnicholson@digium.com>

	* CHANGES: fixed a typo

2011-09-01 17:30 +0000 [r334230]  Tilghman Lesher <tilghman@meg.abyt.es>

	* res/res_config_odbc.c, /: Merged revisions 334229 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r334229 | tilghman | 2011-09-01 12:28:09 -0500 (Thu, 01
	  Sep 2011) | 18 lines Create a local alias for
	  ast_odbc_clear_cache. As a function pointer, the reference has to
	  be resolved at load time irrespective of the RTLD_LAZY flag.
	  Creating a local alias solves this problem, because the structure
	  is initialized with that local function pointer, while the actual
	  function can remain lazily linked until runtime. The reason why
	  this is important is because we lazily load function references
	  during the module loading process, in order to obtain priority
	  values for each module, ensuring that modules are loaded in the
	  correct order. Previous to this change, when this module was
	  initially loaded, the module loader would emit a symbol
	  resolution error, because of the above requirement. Closes
	  ASTERISK-18399 (reported by Mikael Carlsson, fix suggested by
	  Walter Doekes, patch by me) ........

2011-08-31 18:53 +0000 [r334064-334157]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 334156 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r334156 | mnicholson | 2011-08-31 13:50:33 -0500 (Wed, 31 Aug
	  2011) | 4 lines Disable T.38 when we get a invite with image
	  media port set to 0 ASTERISK-17678 ........

	* res/res_fax.c: only alter the gateway_timeout when attching the
	  gateway to a channel ASTERISK-18219

2011-08-31 16:00 +0000 [r334010-334013]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 334012 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r334012 | rmudgett | 2011-08-31 10:57:12 -0500 (Wed, 31
	  Aug 2011) | 23 lines No DAHDI channel available for conference,
	  user introduction disabled. The following error will consistently
	  occur when trying to dial into a MeetMe conference when the
	  server does not have DAHDI hardware installed: app_meetme.c: No
	  DAHDI channel available for conference, user introduction
	  disabled (is chan_dahdi loaded?) While chan_dahdi is loaded
	  correctly during compilation and install of Asterisk/Dahdi,
	  including associated modules, etc., a chan_dahdi.conf
	  configuration file in /etc/asterisk is not created by FreePBX if
	  hardware does not exist, causing MeetMe to be unable to open a
	  DAHDI pseudo channel. * Allow chan_dahdi to create a pseudo
	  channel when there is no chan_dahdi.conf file to load. (closes
	  issue ASTERISK-17398) Reported by: Preston Edwards Patches:
	  jira_asterisk_17398_v1.8.patch (license #5621) patch uploaded by
	  rmudgett Tested by: rmudgett ........

	* main/channel.c, /, channels/chan_agent.c: Merged revisions 334009
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r334009 | rmudgett | 2011-08-31 10:20:31 -0500 (Wed, 31 Aug 2011)
	  | 43 lines Call pickup race leaves orphaned channels or crashes.
	  Multiple users attempting to pickup a call that has been forked
	  to multiple extensions either crashes or fails a masquerade with
	  a "bad things may happen" message. This is the scenario that is
	  causing all the grief: 1) Pickup target is selected 2) target is
	  marked as being picked up in ast_do_pickup() 3) target is
	  unlocked by ast_do_pickup() 4) app dial or queue gets a chance to
	  hang up losing calls and calls ast_hangup() on target 5) SINCE A
	  MASQUERADE HAS NOT BEEN SETUP YET BY ast_do_pickup() with
	  ast_channel_masquerade(), ast_hangup() completes successfully and
	  the channel is no longer in the channels container. 6)
	  ast_do_pickup() then calls ast_channel_masquerade() to schedule
	  the masquerade on the dead channel. 7) ast_do_pickup() then calls
	  ast_do_masquerade() on the dead channel 8) bad things happen
	  while doing the masquerade and in the process ast_do_masquerade()
	  puts the dead channel back into the channels container 9) The
	  "orphaned" channel is visible in the channels list if a crash
	  does not happen. This patch does the following: * Made
	  ast_hangup() set AST_FLAG_ZOMBIE on a successfully hung-up
	  channel and not release the channel lock until that has happened.
	  * Made __ast_channel_masquerade() not setup a masquerade if
	  either channel has AST_FLAG_ZOMBIE set. * Fix chan_agent misuse
	  of AST_FLAG_ZOMBIE since it would no longer work. (closes issue
	  ASTERISK-18222) Reported by: Alec Davis Tested by: rmudgett, Alec
	  Davis, irroot, Karsten Wemheuer (closes issue ASTERISK-18273)
	  Reported by: Karsten Wemheuer Tested by: rmudgett, Alec Davis,
	  irroot, Karsten Wemheuer Review:
	  https://reviewboard.asterisk.org/r/1400/ ........

2011-08-31 15:19 +0000 [r334007]  Kinsey Moore <kmoore@digium.com>

	* /, channels/chan_sip.c: Merged revisions 334006 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r334006 | kmoore | 2011-08-31 10:18:37 -0500 (Wed, 31 Aug 2011) |
	  7 lines Correct an AMI protocol violation with SIPshowpeer The
	  response of SIPshowpeer ends with "\r\n\r\n". Since other
	  commands are ended by using \r\n this confuses any interfacing
	  script. (closes issue ASTERISK-17486) ........

2011-08-30 21:53 +0000 [r333961-333962]  Alexandr Anikin <may@telecom-service.ru>

	* addons/ooh323c/src/ooh323.c: security fix. really drop call if
	  signalling addr is not same as socket addr

	* addons/ooh323c/src/ooq931.c, addons/ooh323c/src/ooCalls.c,
	  addons/ooh323c/src/ooh323.c, addons/ooh323c/src/ooGkClient.c, /,
	  addons/ooh323c/src/ooCalls.h, addons/ooh323c/src/oochannels.c:
	  Merged revisions 333947 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r333947 | may | 2011-08-31 01:16:30 +0400 (Wed, 31 Aug 2011) | 5
	  lines cleanups in ACF/ARJ GK replies processing fixed long (24
	  sec) pause if acf/arj proccessed before ast_cond_wait called to
	  wait this ........

2011-08-30 14:01 +0000 [r333895]  Matthew Nicholson <mnicholson@digium.com>

	* res/res_fax.c: Replaced FAXOPT(gwtimeout) with a second parameter
	  to FAXOPT(gateway). Patch by: irroot Review:
	  https://reviewboard.asterisk.org/r/1385/ ASTERISK-18219

2011-08-29 21:41 +0000 [r333837]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 333836 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r333836 | twilson | 2011-08-29 16:38:31 -0500 (Mon, 29 Aug 2011)
	  | 15 lines Refresh peer address if DNS unavailable at peer
	  creation If Asterisk starts and no DNS is available, outbound
	  registrations will fail indefinitely. This patch copies the
	  address from the sip_registry struct, which will be updated, to
	  the peer->addr when necessary. If dnsmgr is enabled, the
	  registration fails without the patch because even though the
	  address on the registry is updated via dnsmgr, the address is
	  just copied on the first try. Since we use ast_sockaddr_copy,
	  dnsmgr can't update the address that is copied to the sip_pvt or
	  peers. Closes issue ASTERISK-18000 Review:
	  https://reviewboard.asterisk.org/r/1335/ ........

2011-08-29 21:12 +0000 [r333786]  Richard Mudgett <rmudgett@digium.com>

	* /, include/asterisk/channel.h, addons/chan_mobile.c: Merged
	  revisions 333784-333785 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r333784 | rmudgett | 2011-08-29 16:05:43 -0500 (Mon, 29 Aug 2011)
	  | 2 lines Fix deadlock potential of
	  chan_mobile.c:mbl_ast_hangup(). ........ r333785 | rmudgett |
	  2011-08-29 16:06:16 -0500 (Mon, 29 Aug 2011) | 1 line Add some do
	  not hold locks notes to channel.h ........

2011-08-29 18:22 +0000 [r333716]  Matthew Nicholson <mnicholson@digium.com>

	* res/res_fax_spandsp.c: It is possible for the gateway to be
	  attached when the channel is still negotiating T.38. This change
	  handles that case. ASTERISK-18329

2011-08-29 17:28 +0000 [r333681]  Terry Wilson <twilson@digium.com>

	* main/channel.c, CHANGES: Use realtime text when it is negotiated
	  This patch make use of wirte_text() realtime text instead of
	  send_text() if T.140 is in native formats. ASTERISK-17937 Review:
	  https://reviewboard.asterisk.org/r/1356/

2011-08-29 17:12 +0000 [r333631]  Matthew Jordan <mjordan@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 333630 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r333630 | mjordan | 2011-08-29 12:11:15 -0500 (Mon, 29
	  Aug 2011) | 1 line Fixed improperly formatted TestEvent AMI
	  message in app_voicemail ........

2011-08-29 15:56 +0000 [r333570]  Jonathan Rose <jrose@digium.com>

	* /, res/res_jabber.c: Merged revisions 333569 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r333569 | jrose | 2011-08-29 10:55:34 -0500 (Mon, 29 Aug 2011) |
	  4 lines Accidental use of variable client->status instead of
	  client->state in from ASTERISK-18078 (issue ASTERISK-18078)
	  ........

2011-08-28 09:55 +0000 [r333508]  Tzafrir Cohen <tzafrir.cohen@xorcom.com>

	* channels/chan_vpb.cc: chan_vpb: remove unused variables (gcc4.6)
	  GCC 4.6 detects variables that get assined to, but never used
	  later. Also removes some remmed-out lines that become invalid.
	  (closes issue ASTERISK-18336) Signed-off-by: Tzafrir Cohen
	  (License #5035) <tzafrir.cohen@xorcom.com>,

2011-08-26 16:28 +0000 [r333410]  Jonathan Rose <jrose@digium.com>

	* /, res/res_jabber.c: Merged revisions 333378 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r333378 | jrose | 2011-08-26 11:19:07 -0500 (Fri, 26 Aug 2011) |
	  13 lines [patch] Buddies are always auto-registered when
	  processing the roster Reporter said autoregister flag was ignored
	  for registering 'buddies' which had a subscription to us.
	  Verified that this was the case and observed how the patch
	  addressed this and made sure it didn't break anything. (closes
	  issue ASTERISK-14233) Reported by: Simon Arlott Patches:
	  asterisk-0015229.patch (license #5756) patch uploaded by Simon
	  Arlott Tested by: Jonathan Rose ........

2011-08-26 15:58 +0000 [r333370]  Matthew Jordan <mjordan@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 333339 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r333339 | mjordan | 2011-08-26 08:36:36 -0500 (Fri, 26
	  Aug 2011) | 20 lines Bug fixes for voicemail user emailsubject /
	  emailbody. This code change fixes a few issues with the voicemail
	  user override of emailbody and emailsubject, including escaping
	  the strings, potential memory leaks, and not overriding the
	  voicemail defaults. Revision 325877 fixed this for
	  ASTERISK-16795, but did not fix it for ASTERISK-16781. A
	  subsequent check-in prevented 325877 from being applied to 10.
	  This check-in resolves both issues, and applies the changes to
	  1.8, 10, and trunk. (closes issue ASTERISK-16781) Reported by:
	  Sebastien Couture Tested by: mjordan (closes issue
	  ASTERISK-16795) Reported by: mdeneen Tested by: mjordan Review:
	  https://reviewboard.asterisk.org/r/1374 ........

2011-08-25 19:01 +0000 [r333268]  Jason Parker <jparker@digium.com>

	* Makefile, /: Merged revisions 333267 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r333267 | qwell | 2011-08-25 14:00:55 -0500 (Thu, 25 Aug 2011) |
	  2 lines Fix for DESTDIR spaces patch. ........

2011-08-25 19:00 +0000 [r333266]  Jonathan Rose <jrose@digium.com>

	* /, res/res_jabber.c: Merged revisions 333265 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r333265 | jrose | 2011-08-25 13:47:42 -0500 (Thu, 25 Aug 2011) |
	  14 lines Segfault when publishing device states via XMPP and not
	  connected When using publishing device state with res_jabber,
	  Asterisk will attempt to send a device state using the
	  unconnected client using iks_send_raw and crash. This patch
	  checks the validity of the connection before attempting to send
	  the device state. (closes issue ASTERISK-18078) Reported by:
	  Michael L. Young Patches:
	  res_jabber-segfault-pubsub-not-connected2.patch (license #5026)
	  patch uploaded by Michael L. Young Tested by: Jonathan Rose
	  ........

2011-08-25 15:29 +0000 [r333203]  Jason Parker <jparker@digium.com>

	* Makefile, build_tools/mkpkgconfig, /, configure, configure.ac,
	  makeopts.in, sounds/Makefile: Merged revisions 333201 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r333201 | qwell | 2011-08-25 10:27:06 -0500 (Thu, 25 Aug 2011) |
	  8 lines Fix installation into directories containing spaces. This
	  also vastly simplifies the logic in sounds/Makefile (Closes issue
	  ASTERISK-18290) Reported by: Paul Belanger Review:
	  https://reviewboard.asterisk.org/r/1379/ ........

2011-08-24 16:51 +0000 [r333115]  Matthew Nicholson <mnicholson@digium.com>

	* res/res_fax.c: Changed the "timeout" option to "gwtimeout".
	  ASTERISK-18219

2011-08-23 18:15 +0000 [r332878-333011]  Richard Mudgett <rmudgett@digium.com>

	* /, apps/app_queue.c: Merged revisions 333010 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r333010 | rmudgett | 2011-08-23 13:14:01 -0500 (Tue, 23 Aug 2011)
	  | 12 lines Memory Leak in app_queue The patch that was committed
	  in the 1.6.x versions of Asterisk for ASTERISK-15862 actually
	  fixed two issues. One was not applicable to 1.8 but the other is.
	  queue_leak.patch fixes the portion applicable to 1.8. (closes
	  issue ASTERISK-18265) Reported by: Fred Schroeder Patches:
	  queue_leak.patch (license #5049) patch uploaded by mmichelson
	  Tested by: Thomas Arimont ........

	* /, main/config.c: Merged revisions 332939 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r332939 | rmudgett | 2011-08-22 16:22:24 -0500 (Mon, 22 Aug 2011)
	  | 7 lines Minor code optimizations. * Simplify
	  ast_category_browse() logic for easier understanding. * Remove
	  dead code in ast_variable_delete() and simplify some of its
	  logic. ........

	* /, apps/app_queue.c: Merged revisions 332874 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r332874 | rmudgett | 2011-08-22 14:32:19 -0500 (Mon, 22 Aug 2011)
	  | 18 lines Reference leaks in app_queue. * Fixed
	  load_realtime_queue() leaking a queue reference when it
	  overwrites q when processing a realtime queue. (issue
	  ASTERISK-18265) * Make join_queue() unreference the queue
	  returned by load_realtime_queue() when it is done with the
	  pointer. The load_realtime_queue() returns a reference to the
	  just loaded realtime queue. * Fixed queues container reference
	  leak in queues_data_provider_get(). * queue_unref() should not
	  return q that was just unreferenced. * Made logic in
	  __queues_show() and queues_data_provider_get() when calling
	  load_realtime_queue() easier to understand. ........

2011-08-22 19:43 +0000 [r332877]  Paul Belanger <pabelanger@digium.com>

	* /, channels/chan_gtalk.c: Merged revisions 332876 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r332876 | pabelanger | 2011-08-22 15:41:24 -0400 (Mon,
	  22 Aug 2011) | 6 lines Revert previous commit It seems google is
	  still making changes to the protocol. (issue ASTERISK-18301)
	  ........

2011-08-22 19:41 +0000 [r332875]  Richard Mudgett <rmudgett@digium.com>

	* /: Fix merge property.

2011-08-22 18:40 +0000 [r332832]  Matthew Jordan <mjordan@digium.com>

	* apps/app_voicemail.c, include/asterisk/test.h, main/manager.c, /,
	  main/file.c, main/test.c, main/app.c,
	  configs/manager.conf.sample, include/asterisk/manager.h: Merged
	  revisions 332817 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r332817 | mjordan | 2011-08-22 13:15:51 -0500 (Mon, 22 Aug 2011)
	  | 4 lines Review: https://reviewboard.asterisk.org/r/1364/ This
	  update adds a new AMI event, TestEvent, which is enabled when the
	  TEST_FRAMEWORK compiler flag is defined. It also adds initial
	  usage of this event to app_voicemail. The TestEvent AMI event is
	  used extensively by the voicemail tests in the Asterisk Test
	  Suite. ........

2011-08-22 18:32 +0000 [r332761-332830]  Richard Mudgett <rmudgett@digium.com>

	* res/res_config_pgsql.c, res/res_config_odbc.c, /: Merged
	  revisions 332816 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r332816 | rmudgett | 2011-08-22 13:14:59 -0500 (Mon, 22 Aug 2011)
	  | 8 lines Memory leaks in realtime_multi_xxx() when database
	  access returns error. * Fix realtime_multi_pgsql() configuration
	  memory leak when the database access returns an error. * Fix
	  realtime_multi_odbc() configuration category use after free when
	  the database access returns an error. ........

	* /, main/config.c: Merged revisions 332759 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r332759 | rmudgett | 2011-08-22 12:00:03 -0500 (Mon, 22 Aug 2011)
	  | 15 lines Memory leak reading realtime database variable list.
	  Calling ast_load_realtime() can leak the last list node if the
	  read list only contains empty variable value items. * Fixed list
	  filter loop in ast_load_realtime() to delete the list node
	  immediately instead of the next time through the loop. The next
	  time through the loop may not happen if the node to delete is the
	  last in the list. (issue ASTERISK-18277) (issue ASTERISK-18265)
	  Patches: jira_asterisk_18265_v1.8_config.patch (license #5621)
	  patch uploaded by rmudgett ........

2011-08-22 16:29 +0000 [r332756]  Matthew Nicholson <mnicholson@digium.com>

	* res/res_fax.c, include/asterisk/res_fax.h: add a way to disable
	  and/or modify the gateway timeout ASTERISK-18219

2011-08-21 14:33 +0000 [r332700]  Paul Belanger <pabelanger@digium.com>

	* /, channels/chan_gtalk.c: Merged revisions 332699 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r332699 | pabelanger | 2011-08-21 10:31:31 -0400 (Sun,
	  21 Aug 2011) | 5 lines Fix outgoing calls in chan_gtalk (closes
	  issue ASTERISK-18301) Reported by: az1324 ........

2011-08-19 19:59 +0000 [r332654]  Kinsey Moore <kmoore@digium.com>

	* apps/app_confbridge.c: Make CONFBRIDGE_INFO behave more nicely
	  CONFBRIDGE_INFO doesn't behave as well in edge cases as
	  MEETME_INFO. With this patch, CONFBRIDGE_INFO should behave in a
	  much more reasonable manner when presented with invalid
	  conferences and keywords. Review:
	  https://reviewboard.asterisk.org/r/1359/

2011-08-18 21:34 +0000 [r332560]  Terry Wilson <twilson@digium.com>

	* main/netsock2.c, /: Merged revisions 332559 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r332559 | twilson | 2011-08-18 16:26:01 -0500 (Thu, 18 Aug 2011)
	  | 5 lines Fix possible error on stringification of IPv4-mapped
	  addrs The FreeBSD netsock2 test has been failing for a while. We
	  were pasing sa->len to getnameinfo instead of sa_tmp->len.
	  ASTERISK-18289 ........

2011-08-18 19:29 +0000 [r332504]  Kinsey Moore <kmoore@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 332503 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r332503 | kmoore | 2011-08-18 14:28:00 -0500 (Thu, 18
	  Aug 2011) | 8 lines CRC4 in "dahdi show status" gives wrong
	  impression to T1 users Change CRC4 to CRC in the output of "dahdi
	  show status" so that it can apply in more situations without
	  confusing users, especially since T1 lines use CRC6 instead of
	  CRC4. (closes issue AST-471) ........

2011-08-18 14:48 +0000 [r332369-332447]  Tilghman Lesher <tilghman@meg.abyt.es>

	* build_tools/cflags.xml, build_tools/cflags-devmode.xml, /: Merged
	  revisions 332446 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r332446 | tilghman | 2011-08-18 09:46:54 -0500 (Thu, 18 Aug 2011)
	  | 2 lines Move BETTER_BACKTRACES out of development mode, as it's
	  useful when DEBUG_THREADS is enabled. ........

	* Makefile, agi/Makefile, utils/Makefile, /, configure,
	  include/asterisk/autoconfig.h.in, configure.ac,
	  Makefile.moddir_rules, makeopts.in, sounds/Makefile: Merged
	  revisions 332355 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r332355 | tilghman | 2011-08-17 14:21:36 -0500 (Wed, 17 Aug 2011)
	  | 10 lines Re-add support for spaces in pathnames, including now
	  spaces in DESTDIR. This was initially added to 1.8 prior to
	  release, primarily to support the standard paths on Mac OS X, but
	  was partially reverted recently in Subversion, due to the lack of
	  support for spaces in DESTDIR. This commit restores support for
	  the standard paths on Mac OS X, and also includes support for
	  spaces in DESTDIR. (closes issue ASTERISK-18290) Reported by:
	  pabelanger Review: https://reviewboard.asterisk.org/r/1326/
	  ........

2011-08-17 18:09 +0000 [r332321]  Terry Wilson <twilson@digium.com>

	* /, res/res_timing_timerfd.c: Merged revisions 332320 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r332320 | twilson | 2011-08-17 12:35:27 -0500 (Wed, 17
	  Aug 2011) | 10 lines Don't read from a disarmed or invalid
	  timerfd Numerous isues have been reported for deadlocks that are
	  caused by a blocking read in res_timing_timerfd on a file
	  descriptor that will never be written to. This patch adds some
	  checks to make sure that the timerfd is both valid and armed
	  before calling read(). Should fix: ASTERISK-18142,
	  ASTERISK-18166, ASTERISK-18197, AST-486, AST-495, AST-507 and
	  possibly others. Review: https://reviewboard.asterisk.org/r/1361/
	  ........

2011-08-17 16:01 +0000 [r332265]  Richard Mudgett <rmudgett@digium.com>

	* channels/sig_pri.h, channels/chan_dahdi.c,
	  configs/chan_dahdi.conf.sample, /, configure,
	  include/asterisk/autoconfig.h.in, configure.ac,
	  channels/sig_pri.c: Merged revisions 332264 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r332264 | rmudgett | 2011-08-17 10:51:08 -0500 (Wed, 17 Aug 2011)
	  | 26 lines Outgoing BRI calls fail when using Asterisk 1.8 with
	  HA8, HB8, and B410P cards. France Telecom brings layer 2 and
	  layer 1 down on BRI lines when the line is idle. When layer 1
	  goes down Asterisk cannot make outgoing calls and the HA8 and HB8
	  cards also get IRQ misses. The inability to make outgoing calls
	  is because the line is in red alarm and Asterisk will not make
	  calls over a line it considers unavailable. The IRQ misses for
	  the HA8 and HB8 card are because the hardware is switching clock
	  sources from the line which just brought layer 1 down to internal
	  timing. There is a DAHDI option for the B410P card to not tell
	  Asterisk that layer 1 went down so Asterisk will allow outgoing
	  calls: "modprobe wcb4xxp teignored=1". There is a similar DAHDI
	  option for the HA8 and HB8 cards: "modprobe wctdm24xxp
	  bri_teignored=1". Unfortunately that will not clear up the IRQ
	  misses when the telco brings layer 1 down. * Add layer 2
	  persistence option to customize the layer 2 behavior on BRI PTMP
	  lines. The new option has three settings: 1) Use libpri default
	  layer 2 setting. 2) Keep layer 2 up. Bring layer 2 back up when
	  the peer brings it down. 3) Leave layer 2 down when the peer
	  brings it down. Layer 2 will be brought up as needed for outgoing
	  calls. JIRA AST-598 ........

2011-08-16 20:11 +0000 [r332177]  Paul Belanger <pabelanger@digium.com>

	* tests/test_amihooks.c, tests/test_substitution.c,
	  tests/test_heap.c, /, tests/test_expr.c,
	  tests/test_ast_format_str_reduce.c, tests/test_logger.c,
	  tests/test_gosub.c, tests/test_app.c, tests/test_dlinklists.c,
	  tests/test_event.c, tests/test_db.c, tests/test_linkedlists.c,
	  tests/test_sched.c, tests/test_netsock2.c, tests/test_pbx.c,
	  tests/test_strings.c, tests/test_func_file.c,
	  tests/test_security_events.c, tests/test_stringfields.c,
	  tests/test_time.c, tests/test_skel.c, tests/test_acl.c,
	  tests/test_locale.c, tests/test_utils.c,
	  tests/test_devicestate.c, tests/test_aoc.c, tests/test_astobj2.c,
	  tests/test_poll.c: Merged revisions 332176 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r332176 | pabelanger | 2011-08-16 16:10:13 -0400 (Tue, 16 Aug
	  2011) | 4 lines Flag test modules as 'core' Review:
	  https://reviewboard.asterisk.org/r/1369/ ........

2011-08-16 17:45 +0000 [r332119]  Jonathan Rose <jrose@digium.com>

	* /, channels/chan_sip.c: Merged revisions 332118 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r332118 | jrose | 2011-08-16 12:38:19 -0500 (Tue, 16 Aug 2011) |
	  16 lines ASTERISK-18067 ASTERISK-15479 - White Space affects
	  mailbox value, multiple MWI subs Before, having multiple
	  subscriptions to mailboxes on a sip peer set via the mailbox
	  setting in sip.conf would only result in updates being sent on
	  whichever mailbox triggered the mwi event. Now all of them get
	  counted regardless. Also fixes a bug involving parsing of the
	  mailbox option in sip.conf so that trailing and leading spaces
	  before/after commas are trimmed. (closes issue ASTERISK-18067)
	  Reported by: aragon (closes issue ASTERISK-15479) Reported by:
	  Ben Winslow Patches:
	  chan_sip.c-mwi_multi_mailbox_fix-1.6.2.13.diff (License #5288)
	  patch uploaded by Ben Winslow ........

2011-08-16 17:17 +0000 [r332101]  Richard Mudgett <rmudgett@digium.com>

	* /, main/features.c, CHANGES, configs/features.conf.sample,
	  main/asterisk.c: Merged revisions 332100 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r332100 | rmudgett | 2011-08-16 11:31:36 -0500 (Tue, 16 Aug 2011)
	  | 133 lines Fix multiple parking issues. JIRA ASTERISK-17183
	  Multi-parkinglot directs calls to wrong parkinglot. JIRA
	  ASTERISK-17870 Cannot retrieve parked calls. JIRA ASTERISK-17430
	  ParkedCall() with no extension should pickup first available call
	  and does not. JIRA AST-576 Issues with parking lots * Removed
	  searching for parking lots by extension. Parking lots can only be
	  found by the parking lot name since parking lot access extensions
	  and spaces are not guaranteed to be unique. * Added
	  parking_lot_name option to the Park and ParkedCall applications.
	  Updated documentation for Park and ParkedCall applications. * Add
	  parkext_exclusive configuration option to make parking entry
	  extensions specify which parking lot they access. (closes issue
	  ASTERISK-17183) Reported by: David Cabrejos Tested by: rmudgett,
	  David Cabrejos (closes issue ASTERISK-17870) Reported by: Remi
	  Quezada (closes issue ASTERISK-17430) Reported by: Philippe
	  Lindheimer JIRA ASTERISK-17452 Parking_offset not used JIRA
	  AST-624 'next' setting for findslot does nothing * Reimplemented
	  since findslot feature option broken by -r114655. (closes issue
	  ASTERISK-17452) Reported by: David Woolley Tested by: rmudgett
	  JIRA ASTERISK-15792 Dialplan continues execution after transfer
	  to park. This happens for DTMF attended transfer, DTMF blind
	  transfer, and DTMF one-touch-parking if the party initiating
	  these features also initiated the call. * Fixed the return code
	  from the affected builtin features when parking a call. (closes
	  issue ASTERISK-15792) Reported by: Mat Murdock Tested by:
	  rmudgett, twilson JIRA AST-607 The courtesytone is not playing to
	  the expected call when picking up a parked call. This is mostly a
	  documentation problem. However, the option is not reset to the
	  default when features.conf is reloaded. * Updated
	  features.conf.sample documentation for courtesytone and
	  parkedplay options. * Reset the parkedplay option to default when
	  features.conf is reloaded. JIRA AST-615 AMI Park action followed
	  by features reload results in orphaned channels in parking lot. *
	  Reloading features.conf will not touch parking lots that have
	  calls still parked in them. Reload again at a later time. Misc
	  additional fixes: * Added unit test for parking lot dialplan
	  usage checking. * Made update connected line when a parked call
	  is retrieved from a parking lot. * Made retrieved parked call
	  stop ringing or MOH depending upon how the call was waiting in
	  the parking lot. * Made CLI "features show" indicate if the
	  parking lot is enabled for use. * Added PARKINGDYNEXTEN channel
	  variable to allow dynamic parking lots to specify the parking lot
	  access extension. * Made AMI ParkedCalls action ParkedCall events
	  have a Parkinglot header. * Made AMI ParkedCalls action
	  ParkedCallsComplete event have a Total header. * Fixed potential
	  deadlock from AMI Park action holding channel locks while calling
	  masq_park_call(). * Fixed several places where ast_strdupa() were
	  used inside of loops. (Mostly fixed by refactoring the loop body
	  into its own function.) * Fixed copy_parkinglot() copying too
	  much from the source parking lot. Extracted the parking lot
	  configuration settings into struct parkinglot_cfg. * Refactored
	  courtesytone playing code to put the channel not playing the tone
	  in autoservice. * Fix when pbx-parkingfailed is played that the
	  other channel is put in autoservice if it exists. * Fixed
	  parkinglot reference leak in parked_call_exec() error paths. *
	  Fixed parkinglot_unref() use of parkinglot after it was unreffed.
	  * Made destroy the struct ast_parkinglot parkings lock when done.
	  * Refactored the features.conf parking lot configuration code to
	  eliminate redundancy. * Fixed feature reload to better protect
	  parking lots. * Fixed parking lot container reference leak in
	  handle_parkedcalls(). * Fixed the total count in
	  handle_parkedcalls(). Review:
	  https://reviewboard.asterisk.org/r/1358/ ........

2011-08-16 15:20 +0000 [r332022-332042]  Matthew Nicholson <mnicholson@digium.com>

	* channels/sip/include/sip.h: fix a code comment AST-580

	* UPGRADE.txt, CHANGES: Moved notes about 'storesipcause' to
	  UPGRADE.txt from CHANGES AST-580

	* /, channels/chan_sip.c, channels/sip/include/sip.h: Merged
	  revisions 332026 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r332026 | mnicholson | 2011-08-16 10:06:31 -0500 (Tue, 16 Aug
	  2011) | 2 lines use DEFAULT_STORE_SIP_CAUSE to set the default
	  value for the 'storesipcause' option AST-580 ........

	* /, channels/chan_sip.c, configs/sip.conf.sample, CHANGES: In 10
	  and trunk this option is disabled by default. Merged revisions
	  332021 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r332021 | mnicholson | 2011-08-16 09:20:43 -0500 (Tue, 16 Aug
	  2011) | 7 lines Added the 'storesipcause' option to sip.conf to
	  allow the user to disable the setting of HASH(SIP_CAUSE,<chan
	  name>) on the channel. Having chan_sip set HASH(SIP_CAUSE,<chan
	  name>) on the channel carries a significant performance penalty
	  because of the usage of the MASTER_CHANNEL() dialplan function.
	  AST-580 ........

2011-08-15 17:35 +0000 [r331956]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 331955 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r331955 | rmudgett | 2011-08-15 12:24:08 -0500 (Mon, 15
	  Aug 2011) | 13 lines Fix some minor chan_dahdi config load
	  issues. * Address chan_dahdi.conf dahdichan option todo item
	  about needing line number. * Make ignore_failed_channels option
	  also apply to dahdichan option. * Don't attempt to create a
	  default pseudo channel if the chan_dahdi.conf channel/channels
	  option is not allowed. * Add a similar check for dahdichan in
	  normal chan_dahdi.conf sections as is done in users.conf.
	  ........

2011-08-15 15:22 +0000 [r331894]  Paul Belanger <pabelanger@digium.com>

	* main/rtp_engine.c, /: Merged revisions 331886 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r331886 | pabelanger | 2011-08-15 11:21:16 -0400 (Mon, 15 Aug
	  2011) | 5 lines Fix noisy message when briding channels (closes
	  issue ASTERISK-18270) Reported by: Federico Alves ........

2011-08-15 15:14 +0000 [r331868]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 331867 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r331867 | dvossel | 2011-08-15 10:12:16 -0500 (Mon, 15 Aug 2011)
	  | 6 lines Fixes locking inversion issues present in the handling
	  of the sip REFER method. (closes issue ASTERISK-18082) Reported
	  by: James Van Vleet ........

2011-08-12 19:03 +0000 [r331775]  Matthew Nicholson <mnicholson@digium.com>

	* /, apps/app_queue.c: Merged revisions 331774 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r331774 | mnicholson | 2011-08-12 14:01:27 -0500 (Fri, 12 Aug
	  2011) | 11 lines Unlock the channel before calling update_queue.
	  Holding the channel lock when calling update_queue which attempts
	  to lock the queue lock can cause a deadlock. This deadlock
	  involves the following chain: 1. hold chan lock -> wait queue
	  lock 2. hold queue lock -> wait agent list lock 3. hold agent
	  list lock -> wait chan list lock 4. hold chan list lock -> wait
	  chan lock ........

2011-08-12 18:59 +0000 [r331715-331772]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 331771 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r331771 | rmudgett | 2011-08-12 13:58:40 -0500 (Fri, 12
	  Aug 2011) | 8 lines Suppress warning message when using
	  DAHDITransfer or DAHDIHangup. * The fake event should only be
	  processed by the channel that currently owns the private and not
	  the associated call waiting or 3-way channel. JIRA AST-620 JIRA
	  SWP-3616 ........

	* channels/chan_dahdi.c, /: Merged revisions 331714 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r331714 | rmudgett | 2011-08-12 12:47:57 -0500 (Fri, 12
	  Aug 2011) | 22 lines AMI actions DAHDIHangup and DAHDITransfer
	  have no effect. The AMI actions DAHDIHangup and DAHDITransfer
	  have no effect on a DAHDI channel. These two AMI actions are
	  highly specialized to analog channels and appear to make the
	  channel behave like a jack port for headsets. * Made the faked
	  DAHDI event get processed before a normal media stream read in
	  dahdi_read() instead of trying to trigger an exception read by
	  setting the AST_FLAG_EXCEPTION flag. Apparently a change was made
	  long ago that changed how AST_FLAG_EXCEPTION is processed in the
	  core. Unfortunately, the faked DAHDI events no longer worked when
	  that happened. * Updated the DAHDI AMI action documentation for
	  the following actions: DAHDITransfer, DAHDIHangup,
	  DAHDIDialOffhook, DAHDIDNDon, DAHDIDNDoff, DAHDIShowChannels, and
	  DAHDIRestart. * Made use sscanf() instead of atoi() for better
	  error checking of the DAHDIChannel header string. JIRA AST-620
	  JIRA SWP-3616 ........

2011-08-12 16:31 +0000 [r331659]  Terry Wilson <twilson@digium.com>

	* /, tests/test_netsock2.c: Merged revisions 331658 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r331658 | twilson | 2011-08-12 11:30:26 -0500 (Fri, 12
	  Aug 2011) | 4 lines Fix netsock2 multiple zero-expansion test
	  Remove erroneous single bracket. ........

2011-08-12 16:21 +0000 [r331654]  Kinsey Moore <kmoore@digium.com>

	* /, main/logger.c: Merged revisions 331649 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r331649 | kmoore | 2011-08-12 11:20:25 -0500 (Fri, 12 Aug 2011) |
	  12 lines Logger does not warn of failure to open logging channels
	  Currently, logger only prints an error message to stderr when it
	  fails to open a logger channel where many users will not see it
	  because the logger lock is held. The alternative provided by this
	  patch is to log the error to all attached consoles in the hopes
	  that it will be easier to see. Additionally, this patch prevents
	  the failed logger channel from being added to the list where it
	  would silently fail on each call to the Asterisk logger. (closes
	  issue ASTERISK-16231) Review:
	  https://reviewboard.asterisk.org/r/1338 ........

2011-08-12 16:18 +0000 [r331644]  Jonathan Rose <jrose@digium.com>

	* apps/app_dial.c, /, apps/app_meetme.c: Merged revisions 331635
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r331635 | jrose | 2011-08-12 10:49:17 -0500 (Fri, 12 Aug 2011) |
	  1 line Fixes 32bit compilation warnings brought on by 331634 in
	  app_dial and app_meetme ........

2011-08-11 21:54 +0000 [r331579]  Jason Parker <jparker@digium.com>

	* apps/app_dial.c, /, apps/app_meetme.c: Merged revisions 331578
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r331578 | qwell | 2011-08-11 16:46:39 -0500 (Thu, 11 Aug 2011) |
	  6 lines Use proper values for 64-bit option flags. Also, reusing
	  bits es no bueno, so change the value of a duplicate. (issue
	  ASTERISK-18239) ........

2011-08-11 21:42 +0000 [r331576]  Richard Mudgett <rmudgett@digium.com>

	* /, funcs/func_shell.c: Merged revisions 331575 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r331575 | rmudgett | 2011-08-11 16:39:58 -0500 (Thu, 11 Aug 2011)
	  | 9 lines Segfault in shell_helper in func_shell.c. The return
	  value of popen() was not checked for failure to open. (closes
	  issue ASTERISK-18109) JIRA SWP-3633 Reported by: Michael Myles
	  Tested by: rmudgett ........

2011-08-10 22:23 +0000 [r331518]  Kinsey Moore <kmoore@digium.com>

	* /, channels/chan_sip.c: Merged revisions 331517 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r331517 | kmoore | 2011-08-10 17:23:08 -0500 (Wed, 10 Aug 2011) |
	  10 lines SIP Notify via AMI or CLI leaks SIP PVTs Any SIP notify
	  sent via AMI or CLI leaks a SIP PVT with ref count +2. Removing
	  the additional ref just before the invite and adding an unref
	  following it corrects the issue as seen via REF_DEBUG. The unref
	  existed in a distant revision and it appears as though the wrong
	  ref operation was removed. (closes issue ASTERISK-18091) Review:
	  https://reviewboard.asterisk.org/r/1332/ ........

2011-08-10 20:41 +0000 [r331418-331462]  Richard Mudgett <rmudgett@digium.com>

	* /, main/logger.c: Merged revisions 331461 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r331461 | rmudgett | 2011-08-10 15:29:59 -0500 (Wed, 10 Aug 2011)
	  | 30 lines Output of queue log not started until logger reloaded.
	  ASTERISK-15863 caused a regression with queue logging. The output
	  of the queue log is not started until the logger configuration is
	  reloaded. * Queue log initialization is completely delayed until
	  the first message is posted to the queue log system. Including
	  the initial opening of the queue log file. * Fixed rotate_file()
	  ROTATE strategy to give the file just rotated out to the
	  configured exec function after rotate. Just like the other
	  strategies. * Fixed logger reload to always post the queue reload
	  entry instead of just if there is a queue log file. * Refactored
	  some code to eliminate some redundancy and to reduce stack
	  utilization. (closes issue ASTERISK-17036) JIRA SWP-2952 Reported
	  by: Juan Carlos Valero Patches: jira_asterisk_17036_v1.8.patch
	  (license #5621) patch uploaded by rmudgett Tested by: rmudgett
	  (closes issue ASTERISK-18208) Reported by: Christian Pinedo
	  Review: https://reviewboard.asterisk.org/r/1333/ ........

	* main/features.c: Make sure feature_request_and_dial() initializes
	  outstate if passed in.

	* main/features.c, CHANGES: Revert -r318141. It was a band-aid that
	  only partially fixed parking. A better fix is on reviewboard
	  review 1358. (issue ASTERISK-17374)

2011-08-10 13:48 +0000 [r331316]  Kinsey Moore <kmoore@digium.com>

	* main/manager.c, /: Merged revisions 331315 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r331315 | kmoore | 2011-08-10 08:47:46 -0500 (Wed, 10 Aug 2011) |
	  8 lines AMI action ModuleReload returns Error if Module: missing
	  or empty An empty string was not being checked for properly
	  causing identification of the module to be reloaded to fail and
	  return an Error with message "No such module." (closes issue
	  AST-616) ........

2011-08-09 23:12 +0000 [r331265]  Richard Mudgett <rmudgett@digium.com>

	* apps/app_parkandannounce.c, main/pbx.c, /, channels/chan_sip.c,
	  main/features.c, channels/chan_iax2.c: Merged revisions 331248
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r331248 | rmudgett | 2011-08-09 17:12:59 -0500 (Tue, 09 Aug 2011)
	  | 15 lines Misc minor items found in code. * Add some reentrancy
	  protection in pbx.c when creating the contexts_table hash table.
	  * Fix inverted test in chan_sip.c conditional code. * Fix
	  uninitialized variable and use of the wrong variable in
	  chan_iax2.c. * Fix test of return value in app_parkandannounce.c.
	  Explicitly testing for -1 is bad if the function does not
	  actually return that value when it fails. * Fixup some comments
	  and add some curly braces in features.c. ........

2011-08-09 16:36 +0000 [r331147-331200]  Alexandr Anikin <may@telecom-service.ru>

	* addons/ooh323c/src/ooq931.c, addons/ooh323c/src/ooGkClient.c:
	  Setup IP proto version for call in GK mode Added additional check
	  for IP semantics before parse destination by ast_parse_args due
	  to it can parse numeric as IP. (closes issue ASTERISK-18218)
	  Reported by: slesru Patch: ASTERISK-18218.patch

	* addons/ooh323c/src/ooGkClient.c, addons/chan_ooh323.c, /,
	  addons/ooh323c/src/ooLogChan.c: Merged revisions 331146 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r331146 | may | 2011-08-09 20:13:09 +0400 (Tue, 09 Aug 2011) | 4
	  lines move ast_cond_signal for admitted call after all data
	  filled/freed clear all log channels by pointed number not only
	  first free allocated callToken in ooh323_answer ........

2011-08-09 15:59 +0000 [r331138-331143]  Jason Parker <jparker@digium.com>

	* /, doc/asterisk.8: Merged revisions 331142 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r331142 | qwell | 2011-08-09 10:58:16 -0500 (Tue, 09 Aug 2011) |
	  1 line Regenerate asterisk man page from sgml. ........

	* doc/asterisk.sgml, /, doc/asterisk.8,
	  configs/asterisk.conf.sample, configs/voicemail.conf.sample:
	  Merged revisions 306999 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r306999 | lathama | 2011-02-08 14:22:35 -0600 (Tue, 08 Feb 2011)
	  | 12 lines Documentation Updates Note default polling setting in
	  voicemail.conf Add missing config to asterisk.conf Update manpage
	  (issue #16505) Reported by: tzafrir Patches:
	  asterisk_sgml_fixes_demo.diff uploaded by tzafrir (license 46)
	  Tested by: lathama, tzafrir ........

	* doc/asterisk.sgml, /, doc/asterisk.8,
	  configs/asterisk.conf.sample, configs/voicemail.conf.sample:
	  Revert merge of r306999, due to merge conflict.

2011-08-08 22:59 +0000 [r331041-331097]  Terry Wilson <twilson@digium.com>

	* UPGRADE.txt, CHANGES, include/asterisk/manager.h: Bump the AMI
	  protocol version to 1.2 As a result of converting Unlink events
	  that were missed in the AMI 1.1 update to Bridge events, the AMI
	  protocol version is being incremented.

	* main/channel.c, CHANGES: Replace AMI Unlink events with Bridge
	  events A previous update converted some of the Link and Unlink
	  events to Bridge events, but a couple of Unlink events were
	  missed. This patch rectifies the situation. (closes issue
	  ASTERISK-17455)

2011-08-08 20:53 +0000 [r331039]  Kinsey Moore <kmoore@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 331038 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r331038 | kmoore | 2011-08-08 15:52:45 -0500 (Mon, 08
	  Aug 2011) | 11 lines In-queue MOH stops after a periodic
	  announcement If the seek value is past the end of file when
	  resuming G.722 MOH, MOH will cease to function for the duration
	  of the MOH session through all starts and stops until saved state
	  is cleared. Adjusting the code to guarantee a single valid read
	  (which is already assumed) fixes the bug. (closes issue
	  ASTERISK-18077) Review: https://reviewboard.asterisk.org/r/1328/
	  Tested-by: Jonathan Rose <jrose@digium.com> ........

2011-08-05 15:53 +0000 [r330940]  David Vossel <dvossel@digium.com>

	* codecs/codec_resample.c: The slin resampler is no longer
	  dependent on an external library, but the dependency was not
	  removed correctly.

2011-08-05 07:38 +0000 [r330899]  Alexandr Anikin <may@telecom-service.ru>

	* addons/ooh323c/src/ooGkClient.c, /,
	  addons/ooh323c/src/ooCmdChannel.c: Merged revisions 330827 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r330827 | may | 2011-08-04 23:37:16 +0400 (Thu, 04 Aug 2011) | 4
	  lines change gk client behaivour on rrq/grq failures to setup
	  timers and next tries after timeout instead of complete failure
	  in the ooh323 stack ........

2011-08-04 20:51 +0000 [r330844]  Terry Wilson <twilson@digium.com>

	* /, configure, configure.ac: Merged revisions 330843 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r330843 | twilson | 2011-08-04 15:29:19 -0500 (Thu, 04
	  Aug 2011) | 4 lines Make libsrtp instructions more explicit when
	  linking fails (closes issue ASTERISK-18139) ........

2011-08-03 15:15 +0000 [r330706-330763]  Kinsey Moore <kmoore@digium.com>

	* /, main/Makefile: Merged revisions 330762 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r330762 | kmoore | 2011-08-03 10:14:36 -0500 (Wed, 03 Aug 2011) |
	  9 lines editing files in main/editline does not ensure rebuild of
	  libedit.a When editing a source file in main/editline, the build
	  system does not rebuild libedit.a and uses the already existing
	  one instead. Adding a PHONY to CHECK_SUBDIR fixes this problem.
	  (closes issue ASTERISK-16221) Patch-by: Walter Doekes ........

	* channels/chan_dahdi.c, channels/sig_analog.c, /: Merged revisions
	  330705 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r330705 | kmoore | 2011-08-03 08:38:17 -0500 (Wed, 03 Aug 2011) |
	  10 lines Call pickup broken for DAHDI channels when beginning
	  with # The call pickup feature did not work on DAHDI devices for
	  anything other than feature codes beginning with * since all
	  feature codes in chan_dahdi were originally hard-coded to begin
	  with *. This patch is also applied to chan_dahdi.c to fix this
	  bug with radio modes. (closes issue AST-621) Review:
	  https://reviewboard.asterisk.org/r/1336/ ........

2011-08-02 20:52 +0000 [r330649]  Kevin P. Fleming <kpfleming@digium.com>

	* /, res/res_jabber.c: Merged revisions 330648 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r330648 | kpfleming | 2011-08-02 15:51:56 -0500 (Tue, 02 Aug
	  2011) | 2 lines Convert an error message to actually be helpful.
	  ........

2011-08-02 16:17 +0000 [r330576-330586]  David Vossel <dvossel@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 330581 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r330581 | dvossel | 2011-08-02 11:15:08 -0500 (Tue, 02
	  Aug 2011) | 8 lines Fixes crash in chan_iax2. Fixes crash in
	  chan_iax2 resulting from an edge case in the way control frames
	  are queued during calltoken negotiation is complete. (closes
	  issue ASTERISK-17610) Reported by: mgrobecker ........

	* /, channels/chan_sip.c: Merged revisions 330578 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r330578 | dvossel | 2011-08-02 11:07:02 -0500 (Tue, 02 Aug 2011)
	  | 2 lines Optimization to buffer initialization fix. ........

	* /, channels/chan_sip.c: Merged revisions 330575 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r330575 | dvossel | 2011-08-02 10:53:21 -0500 (Tue, 02 Aug 2011)
	  | 5 lines Fixes uninitialized string buffer in log message.
	  (closes issue ASTERISK-17200) Reported by: lmadsen ........

2011-08-01 15:23 +0000 [r330434]  Kinsey Moore <kmoore@digium.com>

	* /, main/say.c: Merged revisions 330433 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r330433 | kmoore | 2011-08-01 10:22:10 -0500 (Mon, 01 Aug 2011) |
	  9 lines Incorrect playback for Spanish in some circumstances When
	  you say the time in spanish and it is 01:00 - 01:59 or 13:00 -
	  13:59 you must use female pronunciation "1F". The function
	  "say_date_with_format_es" does not take this in account. (closes
	  ASTERISK-15016) Patch-by: Luis Jimenez ........

2011-07-30 23:57 +0000 [r330369]  Richard Mudgett <rmudgett@digium.com>

	* main/channel.c, /: Merged revisions 330368 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r330368 | rmudgett | 2011-07-30 18:56:29 -0500 (Sat, 30 Jul 2011)
	  | 4 lines Remove some redundant locking code in
	  ast_do_masquerade(). Also updated some comments. ........

2011-07-30 15:34 +0000 [r330312]  Gregory Nietsky <gregory@distrotech.co.za>

	* main/channel.c, /: Merged revisions 330311 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r330311 | irroot | 2011-07-30 17:25:16 +0200 (Sat, 30 Jul 2011) |
	  9 lines prevent double masqurading channels when one is been hung
	  up and deadlock avoidance is used. There is a race condition in
	  ast_do_masquerade / ast_hangup (at least) Reported by me signed
	  off by schmidts with input from David Vossel Review:
	  https://reviewboard.asterisk.org/r/1323/ ........

2011-07-29 17:19 +0000 [r330204-330217]  Sean Bright <sean@malleable.com>

	* /, formats/format_wav.c: Merged revisions 330213 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r330213 | seanbright | 2011-07-29 13:18:56 -0400 (Fri,
	  29 Jul 2011) | 2 lines Correct the check for O_RDONLY. ........

	* /, formats/format_wav.c: Merged revisions 330203 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r330203 | seanbright | 2011-07-29 12:58:08 -0400 (Fri,
	  29 Jul 2011) | 2 lines Only write to wav files that were opened
	  to be written to. ........

2011-07-29 05:25 +0000 [r330162]  Paul Belanger <pabelanger@digium.com>

	* apps/app_confbridge.c: Fix typo pointed out on #asterisk Thanks
	  notten

2011-07-28 21:44 +0000 [r330108]  Terry Wilson <twilson@digium.com>

	* main/term.c, /: Merged revisions 330107 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r330107 | twilson | 2011-07-28 16:42:41 -0500 (Thu, 28 Jul 2011)
	  | 2 lines Make console colors work for TERM=xterm-256color
	  ........

2011-07-28 17:10 +0000 [r330051]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/sig_pri.c: Merged revisions 330050 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r330050 | rmudgett | 2011-07-28 12:04:24 -0500
	  (Thu, 28 Jul 2011) | 22 lines Merged revisions 330033 from
	  https://origsvn.digium.com/svn/asterisk/be/branches/C.3-bier
	  .......... r330033 | rmudgett | 2011-07-28 11:26:38 -0500 (Thu,
	  28 Jul 2011) | 15 lines Datacalls with B410P fail. Incoming and
	  outgoing call legs of a data call are using different formats:
	  a-law, u-law. When the call is bridged, the media stream is run
	  through translation to convert the media formats. The translation
	  is bad for data calls. * Make incoming call that does not
	  explicitly specify u-law or a-law use the DAHDI channel's default
	  law. The outgoing call always uses the default law from the DAHDI
	  channel. (closes issue ABE-2800) Patches:
	  jira_abe_2800_companding.patch (license #5621) patch uploaded by
	  rmudgett .......... ................

2011-07-28 15:45 +0000 [r329995]  Jason Parker <jparker@digium.com>

	* /, channels/chan_sip.c: Merged revisions 329994 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r329994 | qwell | 2011-07-28 10:45:24 -0500 (Thu, 28 Jul 2011) |
	  6 lines Fix a SIP transfer deadlock. The locking in this function
	  is very scary. There are like 6 structs involved. (closes issue
	  AST-470) ........

2011-07-28 15:28 +0000 [r329992]  Matthew Nicholson <mnicholson@digium.com>

	* /, res/res_fax.c: Merged revisions 329991 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r329991 | mnicholson | 2011-07-28 10:26:56 -0500 (Thu, 28 Jul
	  2011) | 6 lines check for CONFIG_STATUS_FILE_INVALID when loading
	  the res_fax config file Patch by: tzafrir Reported by: tzafrir
	  (closes issue ASTERISK-18161) ........

2011-07-28 13:03 +0000 [r329771-329952]  Sean Bright <sean@malleable.com>

	* configs/confbridge.conf.sample: The default conf-usermenu says
	  that '8' can be used to leave the conference, so put that in the
	  sample user menu. '5' is supposed to extend the conference, but
	  there doesn't appear to be a concept of that in the menu actions.

	* apps/app_confbridge.c: Correct the spelling of 'conference.'

	* /, channels/chan_sip.c: Merged revisions 329895 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r329895 | seanbright | 2011-07-28 07:34:33 -0400 (Thu, 28 Jul
	  2011) | 2 lines Make the output of Externhost in 'sip show
	  settings' more consistent. ........

	* /, Makefile.moddir_rules: Merged revisions 329767 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r329767 | seanbright | 2011-07-27 15:17:46 -0400 (Wed,
	  27 Jul 2011) | 8 lines Explicitly sort the module list so that
	  the menuselect lists are sorted. (closes issue ASTERISK-18141)
	  Reported by: Richard Miller Patches: sort-order.diff uploaded by
	  seanbright (License #5060) Tested by: leifmadsen ........

2011-07-27 18:11 +0000 [r329710]  Jonathan Rose <jrose@digium.com>

	* /, configs/indications.conf.sample: Merged revisions 329709 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r329709 | jrose | 2011-07-27 13:10:30 -0500 (Wed, 27 Jul 2011) |
	  8 lines Fix New Zealand indications profile based on
	  http://www.telepermit.co.nz/TNA102.pdf (closes issue
	  ASTERISK-16263) Reported by: richardf Patches:
	  nz-indications.patch uploaded by richardf (License #6015)
	  ........

2011-07-27 15:25 +0000 [r329670]  Sean Bright <sean@malleable.com>

	* main/loader.c: Sort the module list so that 'module show' is
	  alphabetical.

2011-07-27 04:25 +0000 [r329614]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, cdr/cdr_odbc.c: Merged revisions 329613 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r329613 | tilghman | 2011-07-26 23:23:46 -0500 (Tue, 26 Jul 2011)
	  | 6 lines Duration and billsec are swapped in high resolution
	  time. Closes ASTERISK-18024 Patches:
	  20110726__ASTERISK-18024.diff by Tilghman Lesher (License 5003)
	  ........

2011-07-26 14:19 +0000 [r329528-329538]  Jonathan Rose <jrose@digium.com>

	* apps/app_voicemail.c, /: Merged revisions 329529 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r329529 | jrose | 2011-07-26 09:04:55 -0500 (Tue, 26 Jul
	  2011) | 5 lines Changes sound file for prepend "then-press-pound"
	  to "vm-then-pound" which is the same prompt, only it turned out
	  "then-press-pound" was part of extra sounds. Also, vm is more
	  appropriate anyway. ........

	* apps/app_voicemail.c, include/asterisk/app.h, /,
	  configs/voicemail.conf.sample, main/app.c: Merged revisions
	  329527 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r329527 | jrose | 2011-07-26 08:25:35 -0500 (Tue, 26 Jul 2011) |
	  17 lines Fixes some voicemail forwarding behavior based around
	  prepend mode. Formerly, prepend forwarding would have the user
	  record a message with no useful prompt and an expectation for the
	  user to push a button on the phone when finished recording. If a
	  length of silence was detected instead, the recording would be
	  canceled and the user would re-enter the voicemail forwarding
	  menu. Subsequent time-outs in prepend recording would also bug
	  out in the sense that they would write over the original message
	  and get sent to the recipient regardless of whether they timed
	  out or were accepted. This patch fixes this issue and adds a
	  prompt which will be played after a timeout informing the user
	  that they needed to press a button. Currently, the sound files
	  that we have are somewhat inadquate for this, so after the call
	  we simply have Allison say "Please try again. Then press pound."
	  which actually relies on two separate sound files. Just one would
	  be more appropriate. reporter: Vlad Povorozniuc Review:
	  https://reviewboard.asterisk.org/r/1327/ ........

2011-07-25 19:55 +0000 [r329472]  Paul Belanger <pabelanger@digium.com>

	* /, main/enum.c: Merged revisions 329471 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r329471 | pabelanger | 2011-07-25 15:49:40 -0400 (Mon, 25 Jul
	  2011) | 2 lines Decrease verbose messages to debug, to help clean
	  up CLI. ........

2011-07-25 14:06 +0000 [r329430-329431]  Gregory Nietsky <gregory@distrotech.co.za>

	* main/dsp.c, include/asterisk/dsp.h: dsp_process was enhanced to
	  work with alaw and ulaw in addition to slin. noticed that some
	  functions could be refactored here it is. Reported by: irroot
	  Tested by: irroot, mnicholson Review:
	  https://reviewboard.asterisk.org/r/1304/

	* channels/chan_sip.c, channels/sip/include/sip.h: Remove
	  lastmsgssent from sip it has not been working since 1.6 Clean up
	  the return values to be consistant not currently used Add doxygen
	  returns MWI Event is sent on Register (closes issue
	  ASTERISK-17866) Reported by: one47 Tested by: irroot, mvanbaak
	  Review: https://reviewboard.asterisk.org/r/1272/

2011-07-22 21:14 +0000 [r329331-329334]  Richard Mudgett <rmudgett@digium.com>

	* main/pbx.c, /: Make use less redundant loop construct for
	  iterating over hints.

	* main/pbx.c, /: Merged revisions 329299 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r329299 | rmudgett | 2011-07-22 10:44:58 -0500 (Fri, 22 Jul 2011)
	  | 48 lines Deadlocks dealing with dialplan hints during reload.
	  There are two remaining different deadlocks reported dealing with
	  dialplan hints. The deadlock in ASTERISK-17666 is caused by
	  invalid locking order in ast_remove_hint(). The hints container
	  must be locked before the hint object. The deadlock in
	  ASTERISK-17760 is caused by a catch-22 situation in
	  handle_statechange(). The deadlock is caused by not having the
	  conlock before calling the watcher callbacks. Unfortunately,
	  having that lock causes a different deadlock as reported in
	  ASTERISK-16961. * Fixed ast_remove_hint() locking order. * Made
	  handle_statechange() no longer call the watcher callbacks holding
	  any locks that matter. * Made hint ao2 destructor do the watcher
	  callbacks for extension deactivation to guarantee that they get
	  called. * Fixed hint reference leak in ast_add_hint() if the
	  callback container constructor failed. * Fixed hint reference
	  leak in complete_core_show_hint() for every hint it found for CLI
	  tab completion. * Adjusted locking in
	  ast_merge_contexts_and_delete() for safety. * Added
	  context_merge_lock to prevent ast_merge_contexts_and_delete() and
	  handle_statechange() from interfering with each other. * Fixed
	  ast_change_hint() not taking into account that the extension is
	  used for the hash key. (closes issue ASTERISK-17666) Reported by:
	  irroot Tested by: irroot JIRA SWP-3318 (closes issue
	  ASTERISK-17760) Reported by: Byron Clark Tested by: irroot JIRA
	  SWP-3393 Review: https://reviewboard.asterisk.org/r/1313/
	  ........

2011-07-22  Leif Madsen <lmadsen@digium.com>

	* Asterisk 10.0.0-beta1 Released.

2011-07-21 20:22 +0000 [r329257]  Russell Bryant <russell@digium.com>

	* channels/chan_dahdi.c, main/features.c,
	  include/asterisk/netsock2.h, CHANGES, channels/sig_pri.c,
	  include/asterisk/rtp_engine.h: s/1.10/10.0/

2011-07-21 18:05 +0000 [r329200-329204]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, configs/chan_dahdi.conf.sample, /: Merged
	  revisions 329203 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r329203 | rmudgett | 2011-07-21 13:04:09 -0500 (Thu, 21 Jul 2011)
	  | 6 lines Document parkinglot in chan_dahdi.conf.sample. *
	  Document existing feature in chan_dahdi.conf.sample. * Remove
	  some dead code related to the parkinglot option. ........

	* /, apps/app_directed_pickup.c: Merged revisions 329199 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r329199 | rmudgett | 2011-07-21 12:30:57 -0500 (Thu, 21 Jul 2011)
	  | 17 lines Update PickupChan documentation. The PickupChan uses
	  the ampersand as the argument separator. Was documented as:
	  PickupChan(channel[,channel2[,...][,options]]) Fixed
	  documentation to:
	  PickupChan(Technology/Resource[&Technology2/Resource2[&...]][,options])
	  This is a continuation of ASTERISK-17494 for v1.8 and later.
	  (closes issue ASTERISK-18144) Reported by: Erik Smith Patches:
	  pickupchan_ducumentation-v2.patch (License #6263) patch uploaded
	  by Erik Smith Tested by: Erik Smith ........

2011-07-21 17:27 +0000 [r329188]  Jason Parker <jparker@digium.com>

	* UPGRADE.txt: Fix version number in UPGRADE.txt.

2011-07-21 16:52 +0000 [r329145]  Richard Mudgett <rmudgett@digium.com>

	* /, main/features.c: Merged revisions 329144 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r329144 | rmudgett | 2011-07-21 11:46:21 -0500 (Thu, 21 Jul 2011)
	  | 9 lines Dialplan bridge() app mutex 'current_dest_chan' freed
	  more times than we've locked! This appears to be a leftover from
	  when ast_channel was converted to ao2 objects. Simply removed the
	  extraneous unlock. (closes issue ASTERISK-17772) ........

2011-07-21 16:04 +0000 [r329104]  Russell Bryant <russell@digium.com>

	* / (added): Change Asterisk 2.0 to 2.0 in binary

2011-07-20 21:31 +0000 [r329056]  Paul Belanger <pabelanger@digium.com>

	* /, UPGRADE-1.8.txt: Merged revisions 329055 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/2.0
	  ................ r329055 | pabelanger | 2011-07-20 17:27:50 -0400
	  (Wed, 20 Jul 2011) | 9 lines Merged revisions 329027 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r329027 | pabelanger | 2011-07-20 17:20:36 -0400 (Wed,
	  20 Jul 2011) | 2 lines Asterisk now requires libpri 1.4.11+ for
	  PRI support. ........ ................

2011-07-20 20:19 +0000 [r328996]  Terry Wilson <twilson@digium.com>

	* /, tests/test_netsock2.c: Merged revisions 328992 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/2.0
	  ................ r328992 | twilson | 2011-07-20 15:18:25 -0500
	  (Wed, 20 Jul 2011) | 12 lines Merged revisions 328987 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r328987 | twilson | 2011-07-20 15:16:58 -0500 (Wed, 20 Jul 2011)
	  | 5 lines We can't guarantee an eth0 is present FreeBSD test
	  fails on this case presumably because there is no eth0 on the
	  test machine. Better to just remove this test for now. ........
	  ................

2011-07-20 19:03 +0000 [r328937]  Kinsey Moore <kmoore@digium.com>

	* /, channels/chan_sip.c: Merged revisions 328936 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/2.0
	  ................ r328936 | kmoore | 2011-07-20 14:01:37 -0500
	  (Wed, 20 Jul 2011) | 15 lines Merged revisions 328935 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r328935 | kmoore | 2011-07-20 14:00:23 -0500 (Wed, 20 Jul 2011) |
	  8 lines Inband DTMF regression The functionality of inband DTMF
	  in chan_sip relied upon ast_rtp_instance_dtmf_mode_get/set not
	  working properly to avoid calling ast_rtp_instance_dtmf_begin/end
	  on RTP streams with inband DTMF. According to documentation,
	  ast_rtp_instance_dtmf_begin/end is meant only for RFC2833 DTMF,
	  never inband. This fixes the regression introduced in revision
	  328823. ........ ................

2011-07-19 21:32 +0000 [r328880-328881]  Kevin P. Fleming <kpfleming@digium.com>

	* Makefile, /, Makefile.moddir_rules, sounds/Makefile: Merged
	  revisions 328879 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/2.0
	  ................ r328879 | kpfleming | 2011-07-19 16:31:16 -0500
	  (Tue, 19 Jul 2011) | 23 lines Merged revisions 328878 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r328878 | kpfleming | 2011-07-19 16:29:07 -0500 (Tue, 19 Jul
	  2011) | 17 lines Revert partial attempt at handling pathnames
	  with spaces. Revision 299794 attempted to improve the build
	  system to be able to handle pathnames (primarily DESTDIR) with
	  spaces in them, since this is common on some platforms (including
	  Mac OSX). Unfortunately, the changes were incomplete and did not
	  actually provide the desired behavior, and as a side effect the
	  functionality that ensured that stale headers in the Asterisk
	  'include' directory were removed got broken. In addition, the
	  check for stale (and possibly incompatible) modules in the
	  Asterisk 'modules' directory also got broken, and would never
	  report any stale modules. Users upgrading to this version or
	  later versions would then see unexpected module load errors.
	  Since there are few users who actually want to install Asterisk
	  into paths that contain spaces, and a proper fix for the build
	  system would take many hours, the best solution for now is to
	  just revert the partial solution. ........ ................

	* /: Edit the merge properties to match their names.

2011-07-19 21:21 +0000 [r328877]  Russell Bryant <russell@digium.com>

	* /: Fix properties after twilson's change so merges still work

2011-07-19 18:07 +0000 [r328772-328825]  Kinsey Moore <kmoore@digium.com>

	* res/res_rtp_asterisk.c, main/rtp_engine.c, /,
	  channels/chan_sip.c, include/asterisk/rtp_engine.h: Merged
	  revisions 328824 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.10
	  ................ r328824 | kmoore | 2011-07-19 13:05:21 -0500
	  (Tue, 19 Jul 2011) | 18 lines Merged revisions 328823 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r328823 | kmoore | 2011-07-19 12:57:18 -0500 (Tue, 19 Jul 2011) |
	  11 lines RTP bridge away with inband DTMF and feature detection
	  When deciding whether Asterisk was allowed to bridge the call
	  away from the core, chan_sip did not take into account the usage
	  of features on dialed channels that require monitoring of DTMF on
	  channels utilizing inband DTMF. This would cause Asterisk to
	  allow the call to be locally or remotely bridged, preventing
	  access to the data required to detect activations of such
	  features. (closes 17237) Review:
	  https://reviewboard.asterisk.org/r/1302/ ........
	  ................

	* /, apps/app_meetme.c: Merged revisions 328771 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.10
	  ................ r328771 | kmoore | 2011-07-19 10:46:54 -0500
	  (Tue, 19 Jul 2011) | 18 lines Merged revisions 328770 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r328770 | kmoore | 2011-07-19 10:43:32 -0500 (Tue, 19 Jul 2011) |
	  11 lines MeetMe requests a PIN twice in some circumstances If a
	  call to MeetMe includes both the dynamic(D) and always request
	  PIN(P) options, MeetMe will ask for the PIN two times: once for
	  creating the conference and once for entering the conference.
	  This behavior was introduced in rev 311616 when adding the
	  CONFFLAG_ALWAYSPROMPT option to the logic branch controlling PIN
	  entry for joining a conference. (closes AST-601) Review:
	  https://reviewboard.asterisk.org/r/1305/ ........
	  ................

2011-07-19 02:00 +0000 [r328718]  Terry Wilson <twilson@digium.com>

	* /, include/asterisk/linkedlists.h, tests/test_linkedlists.c
	  (added): Merged revisions 328717 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.10
	  ................ r328717 | twilson | 2011-07-18 20:55:32 -0500
	  (Mon, 18 Jul 2011) | 14 lines Merged revisions 328716 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r328716 | twilson | 2011-07-18 20:35:53 -0500 (Mon, 18 Jul 2011)
	  | 7 lines Make AST_LIST_REMOVE safer AST_LIST_REMOVE shouldn't
	  modify the element passed in if it isn't found. This commit also
	  adds linked list unit tests. Review:
	  https://reviewboard.asterisk.org/r/1321/ ........
	  ................

2011-07-18 20:51 +0000 [r328610-328665]  Mark Murawki <markm@intellasoft.net>

	* apps/app_dial.c, /: Merged revisions 328664 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.10
	  ................ r328664 | markm | 2011-07-18 16:50:13 -0400
	  (Mon, 18 Jul 2011) | 15 lines Merged revisions 328663 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r328663 | markm | 2011-07-18 16:47:04 -0400 (Mon, 18 Jul 2011) |
	  9 lines app_dial may double free a channel datastore When
	  starting a call with originate, and having the callee channel run
	  Bridge() on pickup, we will double free the dialed_interface_info
	  datastore, causing a crash. Make sure to check if the datastore
	  still exists before trying to free it. (closes issue
	  ASTERISK-17917) Reported by: Mark Murawski Tested by: Mark
	  Murawski ........ ................

	* /, channels/chan_sip.c: Merged revisions 328611 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.10
	  ................ r328611 | markm | 2011-07-18 08:56:49 -0400
	  (Mon, 18 Jul 2011) | 15 lines Merged revisions 328608 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r328608 | markm | 2011-07-18 08:35:57 -0400 (Mon, 18 Jul 2011) |
	  9 lines If the sip private structure is null, sip_setoption()
	  will defref the null pointer and crash. Ideally, sip_setoption
	  shouldn't be called if there is a lack of a sip private
	  structure. But this will fix a crash. (closes issue
	  ASTERISK-17909) Reported by: Mark Murawski Tested by: Mark
	  Murawski ........ ................

	* /, main/asterisk.c: Merged revisions 328609 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.10
	  ................ r328609 | markm | 2011-07-18 08:37:53 -0400
	  (Mon, 18 Jul 2011) | 15 lines Merged revisions 328593 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r328593 | markm | 2011-07-18 08:06:50 -0400 (Mon, 18 Jul 2011) |
	  8 lines Fixed invalid read and null pointer deref on asterisk
	  shutdown. In some cases when starting asterisk with -c and
	  hitting control-c to shutdown, there will be an invalid read and
	  null pointer deref causing a crash. (closes issue ASTERISK-17927)
	  Reported by: Mark Murawski Tested by: Mark Murawski, Kinsey
	  Moore, Tilghman Lesher ........ ................

2011-07-18 07:12 +0000 [r328542]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, funcs/func_odbc.c: Merged revisions 328541 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.10
	  ................ r328541 | tilghman | 2011-07-18 02:11:26 -0500
	  (Mon, 18 Jul 2011) | 9 lines Merged revisions 328540 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r328540 | tilghman | 2011-07-18 02:10:15 -0500 (Mon, 18
	  Jul 2011) | 2 lines Typo ........ ................

2011-07-15 21:41 +0000 [r328502]  Alexandr Anikin <may@telecom-service.ru>

	* addons/ooh323c/src/ooGkClient.c, /: Merged revisions
	  328428-328429 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.10
	  ................ r328428 | may | 2011-07-15 23:31:09 +0400 (Fri,
	  15 Jul 2011) | 13 lines Merged revisions 328427 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r328427 | may | 2011-07-15 23:22:24 +0400 (Fri, 15 Jul 2011) | 7
	  lines small gk processing fixes: - decrease for 1 second
	  registration ttl for very low expirations (some providers expire
	  few earlier than TTL) - delete rrq and registration expire timers
	  on URQ received as we make new registration. ........
	  ................ r328429 | may | 2011-07-15 23:35:50 +0400 (Fri,
	  15 Jul 2011) | 2 lines delete unproperly changed svn props
	  ................

2011-07-15 21:19 +0000 [r328449-328459]  Leif Madsen <lmadsen@digium.com>

	* /, apps/app_macro.c: Merged revisions 328451 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.10 ........
	  r328451 | lmadsen | 2011-07-15 16:17:25 -0500 (Fri, 15 Jul 2011)
	  | 1 line Build app_macro by default because things depend on it.
	  ........

	* /, UPGRADE-1.10.txt, UPGRADE.txt, CHANGES: Merged revisions
	  328448 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.10 ........
	  r328448 | lmadsen | 2011-07-15 16:57:15 -0400 (Fri, 15 Jul 2011)
	  | 2 lines Update UPGRADE.txt and CHANGES files. Update
	  documentation files stating that deprecated modules are no longer
	  built by default. ........

2011-07-15 08:19 +0000 [r328381]  Damien Wedhorn <voip@facts.com.au>

	* channels/chan_skinny.c: Add SLA to skinny. Adds sublines to
	  skinny lines. Each subline can be attached to an SLA
	  station/trunk combo. Includes the following functionality: Callid
	  is persistent for both in/out calls on all skinny devices. Can
	  join, hold, resume. All sublines appear under a single line
	  button. See:
	  https://wiki.asterisk.org/wiki/display/~wedhorn/Skinny+SLA for
	  doc. (closes issue ASTERISK-17947) Review:
	  https://reviewboard.asterisk.org/r/1239/

2011-07-15 00:23 +0000 [r328318-328344]  Richard Mudgett <rmudgett@digium.com>

	* main/manager.c, /, channels/chan_sip.c, channels/chan_skinny.c,
	  include/asterisk/extconf.h, include/asterisk/pbx.h,
	  apps/app_queue.c: Merged revisions 328329 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.10 ........
	  r328329 | rmudgett | 2011-07-14 19:19:32 -0500 (Thu, 14 Jul 2011)
	  | 2 lines Make hint watcher callback take const strings for
	  context and exten parameters. ........

	* /, channels/chan_sip.c: Merged revisions 328317 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.10
	  ................ r328317 | rmudgett | 2011-07-14 18:28:49 -0500
	  (Thu, 14 Jul 2011) | 13 lines Merged revisions 328302 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r328302 | rmudgett | 2011-07-14 18:12:06 -0500 (Thu, 14 Jul 2011)
	  | 6 lines Missing SIP pvt and channel unlock in
	  sip_set_rtp_peer(). Regression introduced by -r326144. Add
	  missing SIP pvt and channel unlock in sip_set_rtp_peer().
	  ........ ................

2011-07-14 20:28 +0000 [r328259]  Leif Madsen <lmadsen@digium.com>

	* funcs/func_speex.c, apps/app_playtones.c,
	  bridges/bridge_softmix.c, apps/app_alarmreceiver.c,
	  res/res_calendar_caldav.c, apps/app_ices.c, apps/app_exec.c,
	  channels/chan_iax2.c, res/res_pktccops.c, channels/chan_skinny.c,
	  pbx/pbx_ael.c, formats/format_h263.c, cdr/cdr_odbc.c,
	  cdr/cdr_manager.c, utils/refcounter.c, funcs/func_timeout.c,
	  formats/format_wav.c, apps/app_softhangup.c, codecs/codec_g726.c,
	  bridges/bridge_simple.c, funcs/func_cut.c, apps/app_talkdetect.c,
	  apps/app_db.c, funcs/func_callcompletion.c, funcs/func_channel.c,
	  funcs/func_iconv.c, pbx/pbx_config.c, res/res_odbc.c,
	  apps/app_voicemail.c, formats/format_sln.c,
	  apps/app_authenticate.c, apps/app_readexten.c,
	  res/res_phoneprov.c, apps/app_userevent.c, codecs/codec_gsm.c,
	  tests/test_func_file.c, apps/app_setcallerid.c,
	  res/res_config_odbc.c, funcs/func_audiohookinherit.c,
	  apps/app_osplookup.c, funcs/func_odbc.c, cel/cel_custom.c,
	  tests/test_utils.c, apps/app_mp3.c, res/res_timing_timerfd.c,
	  codecs/codec_resample.c, formats/format_h264.c,
	  apps/app_directory.c, formats/format_siren14.c,
	  tests/test_amihooks.c, res/res_config_pgsql.c,
	  funcs/func_version.c, channels/chan_sip.c, funcs/func_lock.c,
	  res/res_crypto.c, apps/app_originate.c, channels/chan_jingle.c,
	  apps/app_forkcdr.c, funcs/func_blacklist.c, apps/app_sms.c,
	  formats/format_g723.c, utils/extconf.c, tests/test_poll.c,
	  apps/app_stack.c, apps/app_verbose.c, utils/check_expr.c,
	  funcs/func_module.c, codecs/codec_adpcm.c, tests/test_event.c,
	  cdr/cdr_adaptive_odbc.c, apps/app_image.c,
	  formats/format_wav_gsm.c, utils/stereorize.c, pbx/pbx_loopback.c,
	  tests/test_time.c, funcs/func_shell.c, apps/app_skel.c,
	  channels/chan_alsa.c, apps/app_externalivr.c,
	  apps/app_milliwatt.c, formats/format_gsm.c, res/res_speech.c,
	  apps/app_dial.c, apps/app_page.c, apps/app_fax.c, utils/astman.c,
	  apps/app_disa.c, res/res_monitor.c, apps/app_waitforring.c,
	  addons/cdr_mysql.c, res/res_fax_spandsp.c,
	  res/res_timing_kqueue.c, apps/app_chanspy.c, apps/app_cdr.c,
	  channels/chan_unistim.c, funcs/func_base64.c,
	  channels/chan_multicast_rtp.c, funcs/func_md5.c,
	  apps/app_meetme.c, tests/test_gosub.c, funcs/func_sysinfo.c,
	  funcs/func_vmcount.c, res/res_musiconhold.c, cdr/cdr_radius.c,
	  apps/app_followme.c, res/res_config_sqlite.c,
	  apps/app_controlplayback.c, cdr/cdr_csv.c, formats/format_ilbc.c,
	  channels/chan_phone.c, funcs/func_enum.c, main/manager.c,
	  funcs/func_groupcount.c, tests/test_stringfields.c,
	  tests/test_locale.c, tests/test_devicestate.c,
	  funcs/func_frame_trace.c, funcs/func_aes.c, cdr/cdr_sqlite.c,
	  tests/test_astobj2.c, apps/app_ivrdemo.c, res/res_clioriginate.c,
	  apps/app_jack.c, apps/app_nbscat.c, res/res_calendar_icalendar.c,
	  codecs/codec_a_mu.c, tests/test_ast_format_str_reduce.c,
	  tests/test_dlinklists.c, res/res_convert.c, apps/app_waituntil.c,
	  pbx/pbx_lua.c, utils/astcanary.c, apps/app_queue.c,
	  channels/chan_oss.c, cdr/cdr_tds.c, channels/chan_usbradio.c,
	  apps/app_flash.c, apps/app_senddtmf.c, funcs/func_callerid.c,
	  addons/app_saycountpl.c, cel/cel_pgsql.c, apps/app_dahdibarge.c,
	  channels/chan_local.c, funcs/func_dialgroup.c,
	  tests/test_logger.c, apps/app_record.c, funcs/func_env.c,
	  funcs/func_strings.c, res/res_timing_dahdi.c,
	  apps/app_chanisavail.c, bridges/bridge_multiplexed.c,
	  res/res_rtp_multicast.c, cel/cel_odbc.c, channels/chan_dahdi.c,
	  pbx/pbx_spool.c, funcs/func_pitchshift.c, formats/format_pcm.c,
	  apps/app_dumpchan.c, main/http.c, res/res_clialiases.c,
	  res/res_calendar_exchange.c, res/res_ais.c, funcs/func_sprintf.c,
	  codecs/codec_g722.c, tests/test_expr.c, cel/cel_tds.c,
	  tests/test_app.c, utils/smsq.c, apps/app_morsecode.c,
	  formats/format_ogg_vorbis.c, tests/test_sched.c,
	  res/res_calendar_ews.c, apps/app_speech_utils.c,
	  tests/test_acl.c, apps/app_sendtext.c, funcs/func_cdr.c,
	  utils/hashtest2.c, utils/ael_main.c, apps/app_mixmonitor.c,
	  formats/format_g726.c, utils/streamplayer.c, res/res_calendar.c,
	  cel/cel_radius.c, channels/chan_vpb.cc, tests/test_heap.c,
	  addons/format_mp3.c, res/res_snmp.c, apps/app_dictate.c,
	  channels/chan_gtalk.c, funcs/func_logic.c, cdr/cdr_pgsql.c,
	  res/res_jabber.c, funcs/func_uri.c, cel/cel_manager.c,
	  apps/app_minivm.c, res/res_realtime.c, res/res_config_ldap.c,
	  apps/app_rpt.c, channels/chan_mgcp.c, apps/app_adsiprog.c,
	  codecs/codec_lpc10.c, apps/app_read.c, cdr/cdr_syslog.c,
	  codecs/codec_alaw.c, res/res_adsi.c, agi/eagi-test.c,
	  utils/conf2ael.c, tests/test_pbx.c, apps/app_channelredirect.c,
	  formats/format_vox.c, res/res_stun_monitor.c, tests/test_aoc.c,
	  pbx/pbx_dundi.c, funcs/func_devstate.c,
	  addons/res_config_mysql.c, funcs/func_rand.c,
	  apps/app_readfile.c, addons/chan_ooh323.c,
	  cdr/cdr_sqlite3_custom.c, /, apps/app_sayunixtime.c,
	  apps/app_test.c, res/res_http_post.c, res/res_smdi.c,
	  main/features.c, funcs/func_srv.c, apps/app_amd.c,
	  pbx/pbx_realtime.c, apps/app_url.c, formats/format_jpeg.c,
	  formats/format_g719.c, channels/chan_bridge.c,
	  apps/app_privacy.c, apps/app_echo.c, codecs/codec_speex.c,
	  apps/app_saycounted.c, apps/app_dahdiras.c,
	  channels/chan_agent.c, funcs/func_math.c, res/res_ael_share.c,
	  apps/app_transfer.c, res/res_mutestream.c, apps/app_playback.c,
	  res/res_config_curl.c, channels/chan_misdn.c, funcs/func_curl.c,
	  tests/test_skel.c, apps/app_macro.c, apps/app_zapateller.c,
	  codecs/codec_ilbc.c, addons/app_mysql.c,
	  tests/test_substitution.c, utils/muted.c, utils/hashtest.c,
	  funcs/func_sha1.c, formats/format_siren7.c,
	  tests/test_security_events.c, funcs/func_config.c,
	  bridges/bridge_builtin_features.c, funcs/func_volume.c,
	  res/res_agi.c, apps/app_confbridge.c, addons/chan_mobile.c,
	  apps/app_parkandannounce.c, res/res_security_log.c,
	  cdr/cdr_custom.c, apps/app_while.c, res/res_rtp_asterisk.c,
	  funcs/func_dialplan.c, funcs/func_db.c, apps/app_festival.c,
	  res/res_limit.c, res/res_fax.c, apps/app_waitforsilence.c,
	  channels/chan_console.c, apps/app_getcpeid.c,
	  funcs/func_global.c, res/res_srtp.c, funcs/func_extstate.c,
	  tests/test_strings.c, res/res_timing_pthread.c,
	  apps/app_directed_pickup.c, channels/chan_h323.c,
	  cel/cel_sqlite3_custom.c, codecs/codec_ulaw.c,
	  channels/chan_nbs.c, formats/format_g729.c: Merged revisions
	  328247 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.10
	  ................ r328247 | lmadsen | 2011-07-14 16:25:31 -0400
	  (Thu, 14 Jul 2011) | 14 lines Merged revisions 328209 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r328209 | lmadsen | 2011-07-14 16:13:06 -0400 (Thu, 14 Jul 2011)
	  | 6 lines Introduce <support_level> tags in MODULEINFO. This
	  change introduces MODULEINFO into many modules in Asterisk in
	  order to show the community support level for those modules. This
	  is used by changes committed to menuselect by Russell Bryant
	  recently (r917 in menuselect). More information about the support
	  level types and what they mean is available on the wiki at
	  https://wiki.asterisk.org/wiki/display/AST/Asterisk+Module+Support+States
	  ........ ................

2011-07-14 19:56 +0000 [r328208]  Jonathan Rose <jrose@digium.com>

	* /, res/res_monitor.c: Merged revisions 328207 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.10
	  ................ r328207 | jrose | 2011-07-14 14:45:18 -0500
	  (Thu, 14 Jul 2011) | 13 lines Merged revisions 328205 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r328205 | jrose | 2011-07-14 14:21:02 -0500 (Thu, 14 Jul 2011) |
	  6 lines Monitor application arguments requirements fixed. Monitor
	  was requiring options in spite of no individual option on Monitor
	  being required. Review: https://reviewboard.asterisk.org/r/1320/
	  ........ ................

2011-07-14 17:47 +0000 [r328163]  Matthew Nicholson <mnicholson@digium.com>

	* /, main/dsp.c: Merged revisions 328162 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.10 ........
	  r328162 | mnicholson | 2011-07-14 12:46:32 -0500 (Thu, 14 Jul
	  2011) | 3 lines tune the v21 preamble detector to properly detect
	  the desired sequence of hits and misses ........

2011-07-13 22:10 +0000 [r328121]  David Vossel <dvossel@digium.com>

	* /, apps/app_mixmonitor.c: Merged revisions 328120 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.10
	  ........ r328120 | dvossel | 2011-07-13 17:09:34 -0500 (Wed, 13
	  Jul 2011) | 15 lines Preserve sample rate quality of wideband
	  mixmonitor recordings. MixMonitor has the ability to record in
	  any file format Asterisk supports, but the quality of wideband
	  audio is not preserved. This is because regardless of the sample
	  rate the call is being recorded in, the audio is always
	  downsampled to 8khz and then upsampled to whatever wideband
	  format it is being written as. This patch resolves this by
	  requesting the audio from the audiohook in the signed linear
	  format closest to the sample rate of the format we are writing.
	  This fix is only possible for Asterisk 1.10 because audio hooks
	  in 1.8 are not capable of wideband audio. Review:
	  https://reviewboard.asterisk.org/r/1314/ ........

2011-07-13 21:06 +0000 [r328079]  Leif Madsen <lmadsen@digium.com>

	* BUGS, UPGRADE-1.10.txt (added), UPGRADE.txt: Add UPGRADE-1.10.txt
	  file from UPGRADE.txt.

2011-07-13 20:40 +0000 [r328075-328076]  Russell Bryant <russell@digium.com>

	* /: set 1.10 merge properties

	* /: remove 1.8 merge properties

2011-07-13 18:47 +0000 [r328016]  Richard Mudgett <rmudgett@digium.com>

	* /, configs/features.conf.sample: Merged revisions 328014 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r328014 | rmudgett | 2011-07-13 13:46:38 -0500 (Wed, 13 Jul 2011)
	  | 1 line Add ATXFER_NULL_TECH note in features.conf.sample.
	  ........

2011-07-12 23:02 +0000 [r327953]  Kevin P. Fleming <kpfleming@digium.com>

	* main/manager.c, /: Merged revisions 327950 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r327950 | kpfleming | 2011-07-12 17:53:53 -0500 (Tue, 12 Jul
	  2011) | 14 lines Correct double-free situation in manager output
	  processing. The process_output() function calls ast_str_append()
	  and xml_translate() on its 'out' parameter, which is a pointer to
	  an ast_str buffer. If either of these functions need to
	  reallocate the ast_str so it will have more space, they will free
	  the existing buffer and allocate a new one, returning the address
	  of the new one. However, because process_output only receives a
	  pointer to the ast_str, not a pointer to its caller's variable
	  holding the pointer, if the original ast_str is freed, the caller
	  will not know, and will continue to use it (and later attempt to
	  free it). (reported by jkroon on #asterisk-dev) ........

2011-07-12 20:08 +0000 [r327891]  Matthew Nicholson <mnicholson@digium.com>

	* /, apps/app_directory.c: Merged revisions 327890 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r327890 | mnicholson | 2011-07-12 15:07:20 -0500 (Tue,
	  12 Jul 2011) | 2 lines search in the current context for 'a' and
	  'o' instead of 'default' ........

2011-07-12 19:39 +0000 [r327889]  Jason Parker <jparker@digium.com>

	* Makefile, /: Merged revisions 327888 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r327888 | qwell | 2011-07-12 14:38:44 -0500 (Tue, 12 Jul 2011) |
	  1 line Fix uninstall target, so that modules dir gets cleared
	  again. ........

2011-07-12 19:18 +0000 [r327856]  Matthew Jordan <mjordan@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 327852 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r327852 | mjordan | 2011-07-12 14:10:34 -0500 (Tue, 12
	  Jul 2011) | 12 lines Added additional checks for mailbox /
	  password beginning with '*' character A bug existed such that if
	  a user entered a password with '*', and the extension 'a' did not
	  exist, an invalid mailbox would be created and the user
	  authenticated. The code was changed to prevent this from
	  occurring, and to prevent users from having mailboxes or
	  passwords defined that begin with the '*' character. (closes
	  issue ASTERISK-17443) Reported by: Kevin Scott Adams Tested by:
	  Matt Jordan Review: https://reviewboard.asterisk.org/r/1316/
	  ........

2011-07-12 15:38 +0000 [r327794]  Tilghman Lesher <tilghman@meg.abyt.es>

	* tests/test_substitution.c, /: Merged revisions 327793 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r327793 | tilghman | 2011-07-12 10:35:46 -0500 (Tue, 12 Jul 2011)
	  | 14 lines Use 'printf' (POSIX issue 4) instead of 'echo -n', for
	  portability. The problem with using 'echo -n' is that it is not
	  portable. While BSD systems required that the '-n' option be
	  removed and interpreted, System V required that all strings
	  should be echoed with no interpretation of options. This
	  fundamental difference of behavior means that it is never
	  possible to use the '-n' flag to echo in tests which are meant to
	  be portable. In this case, on Mac OS X 10.6, the /bin/sh shell
	  builtin 'echo' uses the System V semantics of the command, and
	  thus the SHELL test failed on that platform.
	  http://pubs.opengroup.org/onlinepubs/009695399/utilities/echo.html#tag_04_41_16
	  ........

2011-07-12 15:23 +0000 [r327769]  Matthew Nicholson <mnicholson@digium.com>

	* res/res_fax.c, include/asterisk/dsp.h, main/dsp.c: do v21
	  detection instead of CED detection for the fax gateway

2011-07-12 14:55 +0000 [r327749]  David Vossel <dvossel@digium.com>

	* main/bridging.c: Send video update frame to new video source in
	  follow_talker correctly.

2011-07-12 14:40 +0000 [r327748]  Kinsey Moore <kmoore@digium.com>

	* apps/app_confbridge.c: Segfault on shutdown when confbridge is
	  active When undergoing a shutdown and channels are kicked out of
	  a bridge, a segfault occurs because ConfBridge tries to play
	  sounds on the bridge after the underlying channels have been
	  blown away due to the shutdown. (closes ASTERISK-18040) Review:
	  https://reviewboard.asterisk.org/r/1283/

2011-07-11 20:06 +0000 [r327684]  Matthew Nicholson <mnicholson@digium.com>

	* tests/test_substitution.c: use printf instead of echo -n in
	  substitution test

2011-07-11 19:49 +0000 [r327683]  Terry Wilson <twilson@digium.com>

	* /, include/asterisk/jingle.h, channels/chan_gtalk.c: Merged
	  revisions 327682 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r327682 | twilson | 2011-07-11 12:41:59 -0700 (Mon, 11 Jul 2011)
	  | 9 lines Update chan_gtalk to work with changed GMail-based
	  calls The messages sent by the GMail client have changed, but
	  include the old-style messages as well. This patch checks for
	  this case and uses the old-style offer. (closes issue
	  ASTERISK-18084) Review: https://reviewboard.asterisk.org/r/1312/
	  ........

2011-07-11 18:44 +0000 [r327640]  David Vossel <dvossel@digium.com>

	* include/asterisk/bridging.h, bridges/bridge_softmix.c,
	  main/bridging.c: Updates follow_talker video_mode in confbridge
	  application. follow_talker mode originally echoed the same video
	  stream to all participants. As the primary talker switched
	  around, the video stream would result in the talker seeing
	  themselves. Now the primary talker sees the last person who was
	  talking rather than themselves.

2011-07-11 17:23 +0000 [r327469-327598]  Matthew Nicholson <mnicholson@digium.com>

	* res/res_fax.c: renamed fax_gateway_send_ced() to
	  fax_gateway_request_t38()

	* res/res_fax.c: actually do something with the ced timeout, also
	  added more debug output

	* res/res_fax.c: write silence on the channel during t.38
	  negotiation

	* main/pbx.c, tests/test_substitution.c, /: Merged revisions 327512
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r327512 | mnicholson | 2011-07-11 08:53:59 -0500 (Mon, 11 Jul
	  2011) | 2 lines reset our buffer each iteration when doing
	  variable substitution ........

	* res/res_fax.c: Delay sending an CED tone generated T.38 reinvite
	  to give the CED tone generating party time to send its own T.38
	  reinvite. Also don't forward frames through the gateway if we are
	  negotiating T.38.

	* res/res_fax.c: fixed wording in a comment

2011-07-11 10:57 +0000 [r327413]  Tzafrir Cohen <tzafrir.cohen@xorcom.com>

	* /, main/Makefile: Merged revisions 327411 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r327411 | tzafrir | 2011-07-11 13:46:34 +0300 (◊ë', 11 ◊ô◊ï◊ú 2011) |
	  5 lines fix building the Debian armhf (HardFloat) port Fixes
	  http://buildd.debian-ports.org/status/fetch.php?pkg=asterisk&arch=armhf&ver=1%3A1.8.4.4~dfsg-2&stamp=1309935385
	  (Missing pthreads) ........

2011-07-10 01:37 +0000 [r327359]  Alexandr Anikin <may@telecom-service.ru>

	* addons/chan_ooh323.c, configs/chan_ooh323.conf.sample: Full T.38
	  handshaking and fax detection Add full t.38 handshaking for
	  OOH323 that are required for newest T.38 gateway codes. Add fax
	  detection (cng tone, t38) and dialplan redirection to fax ext on
	  fax event detected. Add OOH323() function to set/get t38support
	  and faxdetect parameters. (closes issue ASTERISK-17754) Reported
	  by: irroot Patches: ooh323_faxdetect.patch uploaded by irroot
	  (license 52) issue19183-final.patch uploaded by may213 (license
	  454) Tested by: may213, irroot Review:
	  https://reviewboard.asterisk.org/r/1174/

2011-07-08 22:25 +0000 [r327246]  Jason Parker <jparker@digium.com>

	* main/stdtime, utils, codecs, utils/db1-ast/recno, apps, cel,
	  apps/confbridge, cdr, formats, codecs/gsm/src,
	  utils/db1-ast/hash, funcs, bridges, codecs/lpc10,
	  utils/db1-ast/db, codecs/g722, utils/db1-ast/mpool, main,
	  codecs/speex, channels/sip, pbx, res, res/ael, channels,
	  utils/db1-ast/btree: Add .o files to svn:ignore property, since
	  it's only ignored if locally configured to do so.

2011-07-08 21:43 +0000 [r327212]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/chan_sip.c: Merged revisions 327211 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r327211 | rmudgett | 2011-07-08 16:41:58 -0500 (Fri, 08 Jul 2011)
	  | 9 lines INVITE 403 Forbidden response always retransmits the
	  maximum times. Asterisk sends a 403 Forbidden response if
	  authentication fails for an INVITE as required. However, it
	  ignores the ACK and keeps retransmitting the response. * Made not
	  delete the to-tag in the dialog so the expected ACK can be
	  matched with the dialog and stop the retransmissions. ........

2011-07-08 20:33 +0000 [r327116-327168]  David Vossel <dvossel@digium.com>

	* UPGRADE.txt, CHANGES: Adds entry in UPDATES.txt for removal of
	  formats/format_sln16.c. Fixes typo in CHANGES as well.

	* CHANGES: Updates CHANGES log to reflect new slinear read/write
	  file interpreters.

	* formats/format_sln.c, formats/format_sln16.c (removed): Support
	  for writing and reading raw slin files 8khz-192khz.

	* formats/format_attr_silk.c (removed), formats/format_attr_celt.c
	  (removed), res/res_format_attr_silk.c (added),
	  res/res_format_attr_celt.c (added): Moves celt and silk format
	  attribute files into res folder. It was inconsistent to have the
	  silk and celt format attribute modules in the format file
	  interpreter folder.

2011-07-08 19:54 +0000 [r327107]  Matthew Nicholson <mnicholson@digium.com>

	* main/pbx.c, tests/test_substitution.c, /: Merged revisions 327106
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r327106 | mnicholson | 2011-07-08 14:52:51 -0500 (Fri, 08 Jul
	  2011) | 11 lines Reset our ast_str before passing it on to
	  dialplan function backends. It is possible for a dialplan backend
	  to not modify the given buffer or ast_str and still return
	  success. This causes any previous value stored in the buffer to
	  be used as if the new function call provided it. Some functions
	  also append to the given buffer assuming it is empty. The
	  test_substitution unit test has also been modified to detect this
	  problem. (closes issue ASTERISK-17878) ........

2011-07-08 16:00 +0000 [r327045-327047]  Russell Bryant <russell@digium.com>

	* /, tests/test_netsock2.c: Merged revisions 327046 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r327046 | russell | 2011-07-08 11:00:05 -0500 (Fri, 08
	  Jul 2011) | 2 lines Fix an error and add more log message info to
	  help see why this fails on FreeBSD. ........

	* channels/chan_dahdi.c, /: Merged revisions 327044 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r327044 | russell | 2011-07-08 10:28:44 -0500 (Fri, 08
	  Jul 2011) | 2 lines Resolve some set-but-unused-variable
	  warnings. ........

2011-07-08 01:26 +0000 [r327000]  Richard Mudgett <rmudgett@digium.com>

	* main/pbx.c, /: Merged revisions 326985 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r326985 | rmudgett | 2011-07-07 20:08:05 -0500 (Thu, 07 Jul 2011)
	  | 12 lines Some code cleanup in pbx.c * Mostly comment and format
	  changes. * ast_context_remove_extension_callerid() and
	  ast_add_extension_nolock() will write lock the found specific
	  context. * ast_context_find() will now tolerate a NULL name. *
	  Eliminated some inlined versions of find_context() and
	  find_context_locked(). ........

2011-07-07 22:39 +0000 [r326943]  Jason Parker <jparker@digium.com>

	* include/asterisk/celt.h: I think reviewboard broke this. The
	  whole file was doubled.

2011-07-07 22:17 +0000 [r326855-326904]  David Vossel <dvossel@digium.com>

	* formats/format_attr_celt.c (added): Adds the format_attr_celt
	  file which was also missing from the CELT pass through patch.

	* include/asterisk/celt.h (added): Adds missing celt.h file from
	  celt pass-through support patch.

	* CHANGES: Fixes spelling errors in CHANGES as well as adding a few
	  entries for CELT and confbridge.

	* main/channel.c, main/format.c, res/res_rtp_asterisk.c,
	  main/frame.c, main/rtp_engine.c, channels/chan_sip.c,
	  include/asterisk/format.h, configs/codecs.conf.sample: Adds
	  pass-through support for codec CELT. This patch adds pass-through
	  support for CELT. CELT formats are defined in codecs.conf and can
	  be configured to any sample rate a CELT endpoint supports. This
	  patch also addresses a crash in channel.c resulting from a frame
	  list being freed incorrectly. This crash was discovered while
	  testing a CELT translator which had to split encoded audio into
	  multiple frames. The codec translator is not a part of this
	  patch, but may be contributed in the future. Review:
	  https://reviewboard.asterisk.org/r/1294/

2011-07-07 19:20 +0000 [r326842]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, res/res_http_post.c: Merged revisions 326830 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r326830 | tilghman | 2011-07-07 14:17:19 -0500 (Thu, 07 Jul 2011)
	  | 1 line libgen.h is also needed on Darwin for basename(3)
	  ........

2011-07-07 17:24 +0000 [r326782]  David Vossel <dvossel@digium.com>

	* configs/confbridge.conf.sample,
	  apps/confbridge/include/confbridge.h, apps/app_confbridge.c,
	  apps/confbridge/conf_config_parser.c: Updates confbridge.conf
	  video documentation and adds dtmf action for releasing video src.

2011-07-07 16:50 +0000 [r326750]  Terry Wilson <twilson@digium.com>

	* utils/astdb2sqlite3.c, main/db.c: Use older functions out of
	  deference to older distros

2011-07-07 16:18 +0000 [r326694]  Jonathan Rose <jrose@digium.com>

	* res/res_config_odbc.c, /: Merged revisions 326689 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r326689 | jrose | 2011-07-07 11:04:51 -0500 (Thu, 07 Jul
	  2011) | 10 lines res_odbc patch by tilghman to fix integers with
	  null values Addresses some improper sql statements in res_odbc
	  that would cause an update to fail on realtime peers due to
	  trying to set as "(NULL)" rather than an actual NULL. (closes
	  issue #1922STERISK-17791) Reported by: marcelloceschia Patches:
	  20110505__issue19223.diff.txt uploaded by tilghman (license 14)
	  ........

2011-07-07 15:28 +0000 [r326682-326684]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 326683 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r326683 | mnicholson | 2011-07-07 10:28:25 -0500 (Thu, 07 Jul
	  2011) | 3 lines use sips: or sip: depending on the transport in
	  use when building reply digest URIs ........

	* /, channels/chan_sip.c: Merged revisions 326681 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r326681 | mnicholson | 2011-07-07 10:25:49 -0500 (Thu, 07 Jul
	  2011) | 3 lines make the uri parameter used in reply digests more
	  standards compliant in certain cases by prepending "sip:" or
	  "sips:" to it ........

2011-07-07 09:49 +0000 [r326636]  Tzafrir Cohen <tzafrir.cohen@xorcom.com>

	* contrib/scripts/live_ast: live_ast: valgrind: run asterisk under
	  valgrind Adds a new sub-command, "valgrind" to live_ast. It runs
	  asterisk under valgrind. The extra command-line parameters are
	  passed to Asterisk as usual, and parameters to valgrind are
	  passed through LIVE_AST_VALGRIND_ARGS in live.conf . Review:
	  https://reviewboard.asterisk.org/r/1109/

2011-07-06 20:58 +0000 [r326589]  Terry Wilson <twilson@digium.com>

	* utils/db1-ast/btree/bt_open.c, utils/db1-ast/hash/hash_log2.c,
	  utils/db1-ast/hash/hsearch.c, utils/db1-ast/btree/bt_page.c,
	  utils/db1-ast/hash/page.h, utils/db1-ast/mpool, configure,
	  utils/db1-ast/btree/extern.h, utils/db1-ast/include/db.h,
	  main/db.c, utils/db1-ast/btree/bt_seq.c,
	  utils/db1-ast/recno/recno.h, main/Makefile,
	  utils/db1-ast/btree/bt_utils.c, utils/db1-ast/recno/rec_seq.c,
	  configure.ac, utils/db1-ast/btree/bt_close.c, CHANGES,
	  utils/db1-ast/hash/search.h, utils/db1-ast/hash/README,
	  utils/db1-ast/recno/rec_open.c, utils/db1-ast/hash/hash_bigkey.c,
	  utils/db1-ast/recno/rec_delete.c, Makefile,
	  utils/db1-ast/include, utils/db1-ast/hash/hash_buf.c,
	  utils/db1-ast/db, utils/db1-ast/libdb.map,
	  utils/db1-ast/include/ndbm.h, utils/db1-ast/include/compat.h,
	  utils/db1-ast/mpool/mpool.c, utils/db1-ast/btree/bt_debug.c,
	  main/asterisk.c, utils/db1-ast (added),
	  utils/db1-ast/btree/bt_split.c, utils, utils/db1-ast/recno,
	  utils/db1-ast/btree/bt_delete.c,
	  utils/db1-ast/include/circ-queue.h, tests/test_db.c,
	  utils/db1-ast/Makefile, utils/db1-ast/hash/extern.h,
	  utils/db1-ast/recno/rec_search.c, utils/db1-ast/btree/bt_get.c,
	  utils/db1-ast/hash/hash.c, utils/db1-ast/btree/btree.h,
	  utils/db1-ast/db/db.c, utils/db1-ast/hash/hash.h,
	  utils/db1-ast/include/mpool.h, utils/db1-ast/recno/rec_get.c,
	  utils/db1-ast/hash/hash_func.c, utils/utils.xml,
	  utils/astdb2sqlite3.c (added), utils/db1-ast/btree/bt_overflow.c,
	  UPGRADE.txt, utils/db1-ast/btree/bt_conv.c,
	  utils/db1-ast/btree/bt_search.c, utils/db1-ast/btree/bt_put.c,
	  utils/db1-ast/recno/rec_utils.c, utils/Makefile,
	  utils/db1-ast/hash/hash_page.c, utils/db1-ast/hash,
	  utils/db1-ast/mpool/README, utils/db1-ast/hash/ndbm.c,
	  main/db1-ast (removed), utils/db1-ast/recno/rec_close.c,
	  utils/db1-ast/recno/rec_put.c, utils/db1-ast/recno/extern.h,
	  utils/db1-ast/btree: Replace Berkeley DB with SQLite 3 There were
	  some bugs in the very ancient version of Berkeley DB that
	  Asterisk used. Instead of spending the time tracking down the
	  bugs in the Berkeley code we move to the much better documented
	  SQLite 3. Conversion of the old astdb happens at runtime by
	  running the included astdb2sqlite3 utility. The ast_db API with
	  SQLite 3 backend should behave identically to the old Berkeley
	  backend, but in the future we could offer a much more robust
	  interface. We do not include the SQLite 3 library in the source
	  tree, but instead rely upon the distribution-provided libraries.
	  SQLite is so ubiquitous that this should not place undue burden
	  on administrators.

2011-07-06 17:39 +0000 [r326485-326544]  David Vossel <dvossel@digium.com>

	* channels/chan_sip.c: Fixes newlines from being stripped from out
	  of dialog sip MESSAGES.

	* /, res/res_timing_timerfd.c: Merged revisions 326484 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r326484 | dvossel | 2011-07-06 10:26:49 -0500 (Wed, 06
	  Jul 2011) | 10 lines Reverts fix for timerfd locking issue. jrose
	  discovered a performance issue with this fix that prevents his
	  analog phones from working when using timerfd as a timing source.
	  Until it is understood what is causing this performance problem,
	  this patch is being reverted. ........

2011-07-05 22:11 +0000 [r326412]  Tilghman Lesher <tilghman@meg.abyt.es>

	* channels/chan_jingle.c, channels/chan_dahdi.c,
	  funcs/func_speex.c, /, channels/chan_sip.c, codecs/codec_speex.c,
	  funcs/func_aes.c, pbx/pbx_dundi.c, channels/chan_gtalk.c,
	  apps/app_queue.c, channels/chan_iax2.c, res/res_jabber.c,
	  apps/app_stack.c, channels/chan_mgcp.c, apps/app_voicemail.c:
	  Merged revisions 326411 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r326411 | tilghman | 2011-07-05 17:08:29 -0500 (Tue, 05 Jul 2011)
	  | 14 lines Add the attribute "type" to each "<use>" for
	  menuselect. This matters only when autoconf fails to detect that
	  weak linking is supported. External optional dependencies will
	  become optional in both cases, as they are removed at compile
	  time when not detected. However, runtime-optional modules are
	  made mandatory when weak linking is not found. This change
	  affects only the external optional dependencies; previously, they
	  were incorrectly required when weak linking support was not
	  detected. Patches: 20110702__issue18062__asterisk_trunk.diff.txt
	  by tilghman (License #5003) Tested by: iasgoscouk ........

2011-07-05 20:25 +0000 [r326368]  Kinsey Moore <kmoore@digium.com>

	* contrib/scripts/file.convert.sh (added): Prompt conversion script
	  Several variables in the script control which files are converted
	  and the source and destination formats. Patch-by: Trey Blancher
	  <support@digium.com> (closes AST-560)

2011-07-05 17:35 +0000 [r326321]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/chan_sip.c, channels/sip/include/sip.h: Merged
	  revisions 326291 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r326291 | rmudgett | 2011-07-05 12:22:59 -0500 (Tue, 05 Jul 2011)
	  | 23 lines Used auth= parameter freed during "sip reload" causes
	  crash. If you use the auth= parameter and do a "sip reload" while
	  there is an ongoing call. The peer->auth data points to free'd
	  memory. The patch does several things: 1) Puts the authentication
	  list into an ao2 object for reference counting to fix the
	  reported crash during a SIP reload. 2) Converts the
	  authentication list from open coding to AST list macros. 3) Adds
	  display of the global authentication list in "sip show settings".
	  (closes issue ASTERISK-17939) Reported by: wdoekes Patches:
	  jira_asterisk_17939_v1.8.patch (license #5621) patch uploaded by
	  rmudgett Review: https://reviewboard.asterisk.org/r/1303/ JIRA
	  SWP-3526 ........

2011-07-05 16:46 +0000 [r326267]  Mark Murawki <markm@intellasoft.net>

	* main/manager.c, CHANGES: New feature: AMI Action FilterAdd This
	  adds a new action, FilterAdd to the manager interface that allows
	  control over event filters for the current session (closes issue
	  ASTERISK-16795) Reported by: kobaz Tested by: kobaz,loloski

2011-07-05 13:38 +0000 [r326210]  Matthew Jordan <mjordan@digium.com>

	* /, main/file.c: Merged revisions 326209 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r326209 | mjordan | 2011-07-05 08:23:57 -0500 (Tue, 05 Jul 2011)
	  | 7 lines Updated filestream destructor to block until move is
	  complete when cache is used When a cache directory is used, the
	  process is forked and a mv command is executed to move the
	  temporary file to the permanent location. This caused issues with
	  voicemail, where a race condition occurred when the parent
	  expected the file to be in the permanent location prior to the mv
	  command completing. The parent process is now blocked until the
	  mv command completes. (closes issue ASTERISK-17724) Reported by:
	  Adiren P. Tested by: mjordan ........

2011-07-01 21:11 +0000 [r326145]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/chan_sip.c: Merged revisions 326144 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r326144 | rmudgett | 2011-07-01 16:07:22 -0500 (Fri, 01 Jul 2011)
	  | 16 lines Better way to get chan and pvt lock for issue
	  ASTERISK-17431. Redoes -r308945 for issue ASTERISK-17431 deadlock
	  fix for sip_set_udptl_peer() and sip_set_rtp_peer(). * Lock the
	  channels in the defined order and avoid the need for a deadlock
	  avoidance loop. * Lock the channel before getting the pointer to
	  the private structure to be sure that the pointer will not change
	  due to a masquerade or channel hangup. * To preserve sanity,
	  check that chan and p->owner are the same. (Pointer rearangements
	  should not happen without the protection of locks because bad
	  things tend to happen otherwise.) ........

2011-07-01 16:36 +0000 [r326056-326101]  Gregory Nietsky <gregory@distrotech.co.za>

	* CHANGES: Change CHANGES move the commits to the right place
	  r296249 r318141 Application changes

	* CHANGES: Change CHANGES move the commits to the right place in
	  the file missed in review

2011-07-01 12:45 +0000 [r326006]  Matthew Nicholson <mnicholson@digium.com>

	* res/res_fax.c, res/res_fax_spandsp.c: updated irroots info for
	  the authors section

2011-06-30 21:05 +0000 [r325937]  David Vossel <dvossel@digium.com>

	* channels/chan_bridge.c: Fixes warning message caused by
	  confbridge playback chan not being answered.

2011-06-30 20:47 +0000 [r325936]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/chan_sip.c, configs/sip.conf.sample: Merged revisions
	  325935 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r325935 | rmudgett | 2011-06-30 15:39:45 -0500 (Thu, 30 Jun 2011)
	  | 11 lines Misc minor changes in chan_sip. * Add load failure
	  exit if primary SIP container(s) could not get created in
	  chan_sip.c:load_module(). * Removed a redundant static prototype.
	  * Some typos. * Some whitespace. ........

2011-06-30 20:33 +0000 [r325931]  David Vossel <dvossel@digium.com>

	* configs/confbridge.conf.sample,
	  apps/confbridge/include/confbridge.h,
	  include/asterisk/bridging.h, include/asterisk/dsp.h,
	  bridges/bridge_softmix.c, apps/app_confbridge.c, CHANGES,
	  main/bridging.c, main/dsp.c, apps/app_voicemail.c,
	  apps/confbridge/conf_config_parser.c: Video support for
	  ConfBridge. Review: https://reviewboard.asterisk.org/r/1288/

2011-06-30 20:24 +0000 [r325900]  Matthew Jordan <mjordan@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 325877 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r325877 | mjordan | 2011-06-30 15:09:48 -0500 (Thu, 30
	  Jun 2011) | 9 lines Patched voicemail user option for emailbody /
	  emailsubject Incorporated changes per ASTERISK-16795; updated
	  unit tests to check for vmu->emailbody / vmu->emailsubject
	  (closes issue ASTERISK-16795) Reported by: mdeneen Tested by:
	  mjordan ........

2011-06-30 19:31 +0000 [r325864]  Jonathan Rose <jrose@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 325821 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r325821 | jrose | 2011-06-30 14:17:32 -0500 (Thu, 30 Jun
	  2011) | 10 lines Fixes an issue with Music on Hold classes losing
	  files in playlist when realtime is used. The bug occurs rather
	  intermittently and I relied on the reporters to test the patch.
	  After a sanity check and some testing, I'm giving it an OK.
	  (closes issue ASTERISK-17875) Reported by: David Cunningham
	  Patches: res_musiconhold.c.mohrt17875_v1 uploaded by Igor
	  Goncharovsky (license #5009) ........

2011-06-30 18:22 +0000 [r325815-325816]  Matthew Nicholson <mnicholson@digium.com>

	* res/res_fax.c, include/asterisk/res_fax.h, CHANGES,
	  res/res_fax_spandsp.c: Fax gateway functionality (i.e.
	  translating between a T.30 terminal and a T.38 terminal). Can be
	  enabled on a channel by setting FAXOPT(gateway)=yes in the
	  dialplan. Big thanks to irroot for porting this code to use the
	  framehooks api.

	* main/frame.c: copy all flags on asterisk frames instead of just
	  the timing flag

2011-06-29 21:50 +0000 [r325741]  Kinsey Moore <kmoore@digium.com>

	* /, channels/chan_sip.c, channels/sip/include/sip.h: Merged
	  revisions 325740 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r325740 | kmoore | 2011-06-29 16:49:21 -0500 (Wed, 29 Jun 2011) |
	  7 lines chan_sip: cleanup from the introduction of ast_str Remove
	  the length field from sip_req and sip_pkt in chan_sip since they
	  are redundant (ast_str holds its own length) and refactor the
	  necessary functions. Review:
	  https://reviewboard.asterisk.org/r/1281/ ........

2011-06-29 19:02 +0000 [r325674]  David Vossel <dvossel@digium.com>

	* /, res/res_timing_timerfd.c: Merged revisions 325673 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r325673 | dvossel | 2011-06-29 13:59:33 -0500 (Wed, 29
	  Jun 2011) | 6 lines Fixes timerfd locking issue. (closes
	  ASTERISK-17867, ASTERISK-17415) Patches: fix uploaded by kobaz
	  Review: https://reviewboard.asterisk.org/r/1255/ ........

2011-06-29 18:18 +0000 [r325611-325616]  Richard Mudgett <rmudgett@digium.com>

	* /, apps/app_queue.c: Merged revisions 325614 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r325614 | rmudgett | 2011-06-29 13:16:45 -0500 (Wed, 29 Jun 2011)
	  | 5 lines Fixed some error exit cleanup in app_queue.c. * Fixed
	  error exit cleanup in app_queue.c copy_rules() and
	  reload_queue_rules(). ........

	* /, apps/app_queue.c: Merged revisions 325610 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r325610 | rmudgett | 2011-06-29 13:05:15 -0500 (Wed, 29 Jun 2011)
	  | 18 lines Response to QueueRule manager command does not contain
	  ActionID if it was specified. * Add ActionID support as
	  documented for the QueueRule AMI action. * Remove documentation
	  for ActionID with the Queues AMI action. The output does not
	  follow normal AMI response output and there is no place to put an
	  ActionID header. (closes issue AST-602) Reported by: Vlad
	  Povorozniuc Patches: jira_ast_602_v1.8.patch (license #5621)
	  patch uploaded by rmudgett Tested by: Vlad Povorozniuc, rmudgett
	  Review: https://reviewboard.asterisk.org/r/1295/ JIRA SWP-3575
	  ........

2011-06-29 16:19 +0000 [r325538-325547]  Matthew Nicholson <mnicholson@digium.com>

	* main/channel.c, /: Merged revisions 325545 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r325545 | mnicholson | 2011-06-29 11:18:39 -0500 (Wed, 29 Jun
	  2011) | 2 lines make framehooks prevent native bridging (for real
	  this time) ........

	* apps/app_dial.c, main/rtp_engine.c, /: Merged revisions 325537
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r325537 | mnicholson | 2011-06-29 10:34:47 -0500 (Wed, 29 Jun
	  2011) | 2 lines don't do native/remote bridging if a framehook is
	  active on the channel ........

2011-06-29 06:39 +0000 [r325483]  Gregory Nietsky <gregory@distrotech.co.za>

	* configs/queues.conf.sample, UPGRADE.txt, CHANGES,
	  apps/app_queue.c: Commit "distrotech" app_queue changes to Trunk
	  * Added general option negative_penalty_invalid default off. when
	  set members are seen as invalid/logged out when there penalty is
	  negative. for realtime members when set remove from queue will
	  set penalty to -1. * Added queue option autopausedelay when
	  autopause is enabled it will be delayed for this number of
	  seconds since last successful call if there was no prior call the
	  agent will be autopaused immediately. * Added member option
	  ignorebusy this when set and ringinuse is not will allow per
	  member control of multiple calls as ringinuse does for the Queue.
	  - Mark QUEUE_MEMBER_PENALTY Deprecated it never worked for
	  realtime members - QUEUE_MEMBER is now R/W supporting setting
	  paused, ignorebusy and penalty. (closes issue ASTERISK-17421)
	  (closes issue ASTERISK-17391) Reported by: irroot Tested by:
	  irroot, jrose Review: https://reviewboard.asterisk.org/r/1119/

2011-06-28 21:51 +0000 [r325417]  Kevin P. Fleming <kpfleming@digium.com>

	* /, channels/chan_sip.c: Merged revisions 325416 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r325416 | kpfleming | 2011-06-28 16:50:43 -0500 (Tue, 28 Jun
	  2011) | 3 lines Fix random misspelling noticed on asterisk-users.
	  ........

2011-06-28 20:32 +0000 [r325345]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 325339 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r325339 | dvossel | 2011-06-28 15:31:00 -0500 (Tue, 28 Jun 2011)
	  | 4 lines Fixes locking inversion caused by holding sip pvt lock
	  during async_goto. (closes ASTERISK-17352) ........

2011-06-28 17:38 +0000 [r325213]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 325212 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r325212 | rmudgett | 2011-06-28 12:30:16 -0500 (Tue, 28
	  Jun 2011) | 7 lines Use the device name and not the channel name
	  to initialize the device state. Correct ASTERISK-11323
	  implementation as I don't see how it ever worked as claimed when
	  it used the channel name and not the device name. (issue
	  ASTERISK-11323) ........

2011-06-28 16:04 +0000 [r325153]  Jonathan Rose <jrose@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 325152 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r325152 | jrose | 2011-06-28 10:46:29 -0500 (Tue, 28 Jun
	  2011) | 5 lines Fixes moh reload breaking custom mode moh classes
	  when the config file is untouched (closes issue ASTERISK-17730)
	  Reported by: sdolloff ........

2011-06-28 15:34 +0000 [r325151]  David Vossel <dvossel@digium.com>

	* channels/chan_sip.c: Fixes issue with video and text not being
	  reinvited correctly with directmedia If a SDP does not modify the
	  session, we ignore it. However, we were defaulting no text and
	  video support to true before checking to see if the sdp modified
	  anything or not. This would result in process_sdp ignoring an sdp
	  but removing video and text from the call during direct media
	  reinvites.

2011-06-28 15:12 +0000 [r325092]  Leif Madsen <lmadsen@digium.com>

	* /, build_tools/prep_tarball: Merged revisions 325091 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r325091 | lmadsen | 2011-06-28 10:12:00 -0500 (Tue, 28
	  Jun 2011) | 1 line Remove line from prep_tarball that kills
	  mkrelease. ........

2011-06-28 00:07 +0000 [r325046]  Terry Wilson <twilson@digium.com>

	* channels/chan_sip.c: Don't forget to build the Via when sending
	  MESSAGE

2011-06-27 16:32 +0000 [r324961]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, main/asterisk.c: Merged revisions 324955 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r324955 | tilghman | 2011-06-27 11:30:50 -0500 (Mon, 27 Jun 2011)
	  | 5 lines Save and restore errno from within signal handlers.
	  This is recommended by the POSIX standard, as well as by the
	  sigaction(2) manpage for various platforms that we support (e.g.
	  Mac OS X). ........

2011-06-27 15:38 +0000 [r324915]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/chan_sip.c: Merged revisions 324914 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r324914 | rmudgett | 2011-06-27 10:37:19 -0500 (Mon, 27 Jun 2011)
	  | 21 lines When subscribing MWI to an unsolicited mailbox the
	  first notification is incorrect. A remote peer subscribed to MWI
	  with the unsolicited option and a local phone subscribed to the
	  remote mailbox. The notify message-summary events are sent
	  correctly except for the first one when subscribing, which will
	  always be 0. This means the phone MWI indicator will be wrong
	  until the mailbox read/unread count changes and the event is
	  fired. Looks like this is a regression from ASTERISK-16149. * Fix
	  the logic to check the cache and if allowed then fallback to
	  manually counting mailbox messages. (closes issue ASTERISK-17997)
	  Reported by: rsw686 Patches: jira_asterisk_17997_v1.8.patch
	  (license #5621) uploaded by rmudgett Tested by: rsw686 JIRA
	  SWP-3551 ........

2011-06-24 20:50 +0000 [r324850]  Richard Mudgett <rmudgett@digium.com>

	* /, pbx/pbx_config.c: Merged revisions 324849 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r324849 | rmudgett | 2011-06-24 15:46:01 -0500 (Fri, 24 Jun 2011)
	  | 15 lines Syntax errors in dialplan do not display the file
	  name. When issuing the CLI command "dialplan reload" syntax
	  errors and warnings are displayed on the console. The offending
	  line number is displayed on the console, but the file name is not
	  displayed. Errors caught in main/config.c do display the file
	  name. (closes issue ASTERISK-17985) Reported by: ulogic Patches:
	  pbx_config.patch uploaded by ulogic (License #5685) modified
	  format Tested by: rmudgett JIRA SWP-3554 ........

2011-06-24 16:50 +0000 [r324769]  Jonathan Rose <jrose@digium.com>

	* include/asterisk/logger.h, /: Merged revisions 324768 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r324768 | jrose | 2011-06-24 11:48:06 -0500 (Fri, 24 Jun 2011) |
	  11 lines DTMF wasn't being logged on connected consoles when
	  enabled in logger.conf Previously in order for DTMF to be logged
	  in a connected console session, the user would have to do logger
	  set channel DTMF on. This corrects that so that it is on by
	  default. This issue was caused by an off by one error incurred by
	  a logger level count of 6 in logger.h where it should have been
	  7. (closes issue: ASTERISK-17974) Reported by: Luke H ........

2011-06-23 18:56 +0000 [r324708-324709]  Kinsey Moore <kmoore@digium.com>

	* apps/app_confbridge.c: ConfBridge: redundant code cleanup There
	  is no reason to clean up features twice. Review:
	  https://reviewboard.asterisk.org/r/1279/

	* /, channels/chan_sip.c: Merged revisions 324678 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r324678 | kmoore | 2011-06-23 13:29:17 -0500
	  (Thu, 23 Jun 2011) | 11 lines Merged revisions 324643 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r324643 | kmoore | 2011-06-23 13:21:12 -0500 (Thu, 23 Jun 2011) |
	  4 lines Addresses AST-2011-008, memory corruption and remote
	  crash in SIP driver. AST-2011-008 ........ ................

2011-06-23 18:31 +0000 [r324664-324689]  David Vossel <dvossel@digium.com>

	* /, channels/sip/reqresp_parser.c: Merged revisions 324685 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r324685 | dvossel | 2011-06-23 13:31:00 -0500 (Thu, 23 Jun 2011)
	  | 8 lines Fixes sip crash when calling remove_uri_parameters with
	  NULL AST-2011-009 (closes issue ASTERISK-18017) Reported by:
	  jaredmauch ........

	* /, main/features.c, channels/chan_iax2.c,
	  include/asterisk/frame.h: Merged revisions 324652 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r324652 | dvossel | 2011-06-23 13:23:21 -0500
	  (Thu, 23 Jun 2011) | 20 lines Merged revisions 324634 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r324634 | dvossel | 2011-06-23 13:18:46 -0500
	  (Thu, 23 Jun 2011) | 13 lines Merged revisions 324627 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r324627 | dvossel | 2011-06-23 13:16:52 -0500 (Thu, 23 Jun 2011)
	  | 7 lines Addresses AST-2011-010, remote crash in IAX2 driver
	  Thanks to twilson for identifying the issue and providing the
	  patches. AST-2011-010 ........ ................ ................

2011-06-23 03:16 +0000 [r324558]  Terry Wilson <twilson@digium.com>

	* /, tests/test_netsock2.c: Merged revisions 324557 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r324557 | twilson | 2011-06-22 22:10:38 -0500 (Wed, 22
	  Jun 2011) | 5 lines Remove tests for parsing address with invalid
	  port getaddrinfo on OS X returns with EAI_NONAME error when
	  passed a port greater than 65535. Linux throws no error, so
	  remove the tests for now. ........

2011-06-22 19:17 +0000 [r324495]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/chan_sip.c: Merged revisions 324491 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r324491 | rmudgett | 2011-06-22 14:16:29 -0500 (Wed, 22 Jun 2011)
	  | 1 line Use correct variable for text SRTP media. ........

2011-06-22 19:12 +0000 [r324487]  Terry Wilson <twilson@digium.com>

	* main/netsock2.c, /, channels/chan_sip.c,
	  include/asterisk/netsock2.h, tests/test_netsock2.c (added):
	  Merged revisions 324484 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r324484 | twilson | 2011-06-22 13:52:04 -0500 (Wed, 22 Jun 2011)
	  | 20 lines Stop sending IPv6 link-local scope-ids in SIP messages
	  The idea behind the patch listed below was used, but in a more
	  targeted manner. There are now address stringification functions
	  for addresses that are meant to be sent to a remote party.
	  Link-local scope-ids only make sense on the machine from which
	  they originate and so are stripped in the new functions. There is
	  also a host sanitization function added to chan_sip which is used
	  for when peer and dialog tohost fields or sip_registry hostnames
	  are used to craft a SIP message. Also added are some basic unit
	  tests for netsock2 address parsing. (closes issue ASTERISK-17711)
	  Reported by: ch_djalel Patches:
	  asterisk-1.8.3.2-ipv6_ll_scope.patch uploaded by ch_djalel
	  (license 1251) Review: https://reviewboard.asterisk.org/r/1278/
	  ........

2011-06-22 18:45 +0000 [r324480-324482]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/chan_sip.c: Merged revisions 324481 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 Also fixed a
	  reference leak in an error path in sip_msg_send(). ........
	  r324481 | rmudgett | 2011-06-22 13:41:20 -0500 (Wed, 22 Jun 2011)
	  | 19 lines Timout or error on INFO or MESSAGE transaction causes
	  call to be lost. When exchanging INFO messages within a call, 4xx
	  error causes the call to be disconnected although RFC 2976
	  explicitly states that such transactions do not modify the state
	  of the dialog. When exchanging MESSAGE messages within a call,
	  4xx error causes the call to be disconnected. To provide least
	  surprise, we should not disconnect the call since a MESSAGE is
	  like INFO in this case. (Implied by RFC 3428 Section 2) (closes
	  issue ASTERISK-17901) Reported by: neutrino88 Review:
	  https://reviewboard.asterisk.org/r/1257/ Review:
	  https://reviewboard.asterisk.org/r/1258/ JIRA SWP-3486 ........

	* /, channels/chan_sip.c: Merged revisions 324479 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r324479 | rmudgett | 2011-06-22 13:26:55 -0500 (Wed, 22 Jun 2011)
	  | 1 line Comments and whitespace in chan_sip.c ........

2011-06-21 21:55 +0000 [r324365-324422]  David Vossel <dvossel@digium.com>

	* apps/app_confbridge.c: Fixes issue with channel write format
	  being incorrectly restored when MOH is used in confbridge.

	* main/pbx.c, /, include/asterisk/pbx.h: Merged revisions 324364
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r324364 | dvossel | 2011-06-21 15:11:52 -0500 (Tue, 21 Jun 2011)
	  | 10 lines Fixes locking inversion issue in ast_async_goto()
	  During this function we can not hold the "chan" lock while doing
	  the masquerade, the explicit goto on the tmp chan, or the channel
	  alloc. Instead we need to get the channel lock, store off
	  information about the channel that we need, and then let the
	  channel lock go for the remainder of the function. Review:
	  https://reviewboard.asterisk.org/r/1275/ ........

2011-06-21 16:06 +0000 [r324304]  Kinsey Moore <kmoore@digium.com>

	* apps/app_confbridge.c: ConfBridge does not handle hangup properly
	  When playing back a prompt to a channel, confbridge neglects to
	  check for hangup events causing lockup condititions for hangups
	  that occur before actually joining the conference. This change
	  ensures that the user is removed from the conference in the event
	  of a premature hangup. Review:
	  https://reviewboard.asterisk.org/r/1277/

2011-06-21 15:49 +0000 [r324302]  David Vossel <dvossel@digium.com>

	* channels/chan_sip.c: Fixes issue with finding correct extension
	  when message context is used.

2011-06-20 18:13 +0000 [r324242]  Leif Madsen <lmadsen@digium.com>

	* /, configs/queuerules.conf.sample: Merged revisions 324241 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r324241 | lmadsen | 2011-06-20 13:12:32 -0500 (Mon, 20 Jun 2011)
	  | 2 lines Remove extra 'the'. Reported by Vlad Povorozniuc
	  ........

2011-06-20 17:34 +0000 [r324238]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 324237 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r324237 | twilson | 2011-06-20 12:33:07 -0500 (Mon, 20 Jun 2011)
	  | 12 lines Ignore media offers with a port of 0 Section 5.1 of
	  RFC3264 states: A port number of zero in the offer indicates that
	  the stream is offered but MUST NOT be used. (closes issue
	  ASTERISK-17845) Reported by: jacco Patches: issue19281_2.patch
	  uploaded by jacco (license 1277) Tested by: jacco, twilson
	  ........

2011-06-17 18:52 +0000 [r324177-324179]  Leif Madsen <lmadsen@digium.com>

	* main/manager.c, /: Merged revisions 324178 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r324178 | lmadsen | 2011-06-17 14:51:16 -0400 (Fri, 17 Jun 2011)
	  | 2 lines Add Username and Secret fields to manager Login action.
	  Pointed out by Vlad Povorozniuc ........

	* /, apps/app_meetme.c: Merged revisions 324176 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r324176 | lmadsen | 2011-06-17 14:38:40 -0400 (Fri, 17 Jun 2011)
	  | 2 lines Fix typo in documentation. Pointed out by Vlad
	  Povorozniuc ........

2011-06-17 18:23 +0000 [r324175]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 324174 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r324174 | rmudgett | 2011-06-17 13:23:19 -0500 (Fri, 17
	  Jun 2011) | 5 lines Add header string to libpri debug output. Add
	  header string to libpri debug output so the libpri output can be
	  found/extracted easier from huge debug trace files. ........

2011-06-17 15:32 +0000 [r324131]  Leif Madsen <lmadsen@digium.com>

	* main/pbx.c, /: Merged revisions 324115 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r324115 | lmadsen | 2011-06-17 11:14:54 -0400 (Fri, 17 Jun 2011)
	  | 3 lines Fix grammar in documentation for Goto() and GotoIf()
	  (closes issue ASTERISK-18023) Reported by: Tim Osman ........

2011-06-16 22:49 +0000 [r324050]  Terry Wilson <twilson@digium.com>

	* main/channel.c, channels/chan_local.c, /, channels/chan_sip.c,
	  include/asterisk/channel.h: Merged revisions 324048 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r324048 | twilson | 2011-06-16 17:35:41 -0500 (Thu, 16
	  Jun 2011) | 8 lines Lock the channel before calling the setoption
	  callback The channel needs to be locked before calling these
	  callback functions. Also, sip_setoption needs to lock the pvt and
	  a check p->rtp is non-null before using it. Review:
	  https://reviewboard.asterisk.org/r/1220/ ........

2011-06-16 18:13 +0000 [r323991]  Richard Mudgett <rmudgett@digium.com>

	* /, tests/test_event.c: Merged revisions 323990 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r323990 | rmudgett | 2011-06-16 13:12:32 -0500 (Thu, 16 Jun 2011)
	  | 5 lines The test_event unit test is occasionally failing. Wait
	  for the special posted event to process before adding a new
	  subscription. ........

2011-06-16 15:59 +0000 [r323673-323933]  Terry Wilson <twilson@digium.com>

	* Makefile, /: Merged revisions 323932 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r323932 | twilson | 2011-06-16 10:58:22 -0500 (Thu, 16 Jun 2011)
	  | 4 lines Don't assume ASTDBDIR exists It most likely doesn't on
	  FreeBSD ........

	* /, tests/test_db.c: Merged revisions 323866 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r323866 | twilson | 2011-06-15 15:03:58 -0500 (Wed, 15 Jun 2011)
	  | 2 lines Remove now-useless cast of ARRAY_LEN ........

	* include/asterisk/utils.h, /: Merged revisions 323863 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r323863 | twilson | 2011-06-15 14:58:18 -0500 (Wed, 15
	  Jun 2011) | 2 lines Make ARRAY_LEN() return the same type on x86
	  and x86_64 systems ........

	* /, tests/test_db.c: Merged revisions 323859 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r323859 | twilson | 2011-06-15 14:45:20 -0500 (Wed, 15 Jun 2011)
	  | 2 lines Fix more ARRAY_LEN format string issues ........

	* /, main/features.c: Merged revisions 323754 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r323754 | twilson | 2011-06-15 13:21:52 -0500
	  (Wed, 15 Jun 2011) | 23 lines Merged revisions 323733 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r323733 | twilson | 2011-06-15 13:13:00 -0500
	  (Wed, 15 Jun 2011) | 16 lines Merged revisions 323732 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r323732 | twilson | 2011-06-15 13:06:24 -0500 (Wed, 15 Jun 2011)
	  | 9 lines Fix DYNAMIC_FEATURES DYNAMIC_FEATURES were broken by a
	  recent DTMF change. This patch makes sure that dynamic features
	  are also checked when deciding whether or not to pass DTMF
	  through or store it for interpreting. (closes issue
	  ASTERISK-17914) Reported by: vrban ........ ................
	  ................

	* /, tests/test_db.c: Merged revisions 323672 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r323672 | twilson | 2011-06-15 10:09:51 -0700 (Wed, 15 Jun 2011)
	  | 5 lines Cast ARRAY_LEN to size_t for ast_logging 32-bit and
	  64-bit machines return different types for ARRAY_LEN(), so cast
	  it before using in a format string. ........

2011-06-15 16:49 +0000 [r323671]  Richard Mudgett <rmudgett@digium.com>

	* /, tests/test_event.c, main/event.c: Merged revisions
	  323669-323670 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r323669 | rmudgett | 2011-06-15 11:43:18 -0500 (Wed, 15 Jun 2011)
	  | 21 lines [regression] Voicemail MWI is no longer sent. When
	  leaving a voicemail, the MWI message is never sent. The same
	  thing happens when checking a voicemail and marking it as read.
	  If you restart Asterisk, everything comes up at that state
	  correctly, but changes to the messages in voicemail causes the
	  light to not be set appropriately. Very easy to reproduce. * Made
	  ast_event_check_subscriber() return TRUE if there are ANY
	  subscribers to an event type when there are no restricting ie
	  values passed. This allows an event being queued to be queued.
	  (closes issue ASTERISK-18002) Reported by: lmadsen Tested by:
	  lmadsen, irroot Patches: jira_asterisk_18002_v1.8.patch uploaded
	  by rmudgett (License #5621) (closes issue ASTERISK-18019)
	  ........ r323670 | rmudgett | 2011-06-15 11:43:31 -0500 (Wed, 15
	  Jun 2011) | 7 lines Add a test to the event unit tests to catch
	  ASTERISK-18002. The new tests check to see if there are ANY
	  subscribers to the event type when ast_event_check_subscriber()
	  is not passed any specific ie values. (issue ASTERISK-18002)
	  ........

2011-06-15 16:19 +0000 [r323621]  Jonathan Rose <jrose@digium.com>

	* res/res_config_pgsql.c, /: Merged revisions 323610 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r323610 | jrose | 2011-06-15 11:09:24 -0500 (Wed, 15 Jun
	  2011) | 7 lines Adds PQclear calls on result to various parts of
	  res_conf_pgsql (closes issue ASTERISK-17812) Reported by:
	  byronclark Patches: pgsql_pqclear.patch uploaded by byronclark
	  (license 1200) ........

2011-06-15 15:33 +0000 [r323609]  Sean Bright <sean@malleable.com>

	* main/manager.c, /: Merged revisions 323608 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r323608 | seanbright | 2011-06-15 11:31:53 -0400
	  (Wed, 15 Jun 2011) | 39 lines Merged revisions 323579 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r323579 | seanbright | 2011-06-15 11:22:50 -0400
	  (Wed, 15 Jun 2011) | 32 lines Merged revisions 323559 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r323559 | seanbright | 2011-06-15 11:15:30 -0400 (Wed, 15 Jun
	  2011) | 25 lines Resolve a segfault/bus error when we try to map
	  memory that falls on a page boundary. The fix for ASTERISK-15359
	  was incorrect in that it added 1 to the length of the mmap'd
	  region. The problem with this is that reading/writing to that
	  extra byte outside of the bounds of the underlying fd causes a
	  bus error. The real issue is that we are working with both a FILE
	  * and the raw fd underneath it and not synchronizing between
	  them. The code that was removed in ASTERISK-15359 was correct,
	  but we weren't flushing the FILE * before mapping the fd. Looking
	  at the manager code in 1.4 reveals that the FILE * in 'struct
	  mansession' is never used except to create a temporary file that
	  we immediately fdopen. This means we just need to write a 0 byte
	  to the fd and everything will just work. The other branches
	  require a call to fflush() which, while not a guaranteed fix,
	  should reduce the likelihood of a crash. This all makes sense in
	  my head. (closes issue ASTERISK-16460) Reported by:
	  Ravelomanantsoa Hoby (hoby) Patches:
	  issue17747_1.4_svn_markII.patch uploaded by Sean Bright (license
	  #5060) ........ ................ ................

2011-06-15 13:45 +0000 [r323517]  Kinsey Moore <kmoore@digium.com>

	* apps/app_confbridge.c, CHANGES: CONFBRIDGE_INFO function to get
	  conference data Added the CONFBRIDGE_INFO dialplan function to
	  get information about a conference bridge including locked status
	  and number of parties, admins, and marked users. Review:
	  https://reviewboard.asterisk.org/r/1271/

2011-06-15 00:51 +0000 [r323397-323457]  Richard Mudgett <rmudgett@digium.com>

	* /, main/event.c: Merged revisions 323456 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r323456 | rmudgett | 2011-06-14 19:50:20 -0500 (Tue, 14 Jun 2011)
	  | 1 line Add missing break in ast_event_get_cached(). ........

	* main/netsock2.c, main/dnsmgr.c, /: Merged revisions 323392,323394
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r323392 | rmudgett | 2011-06-14 12:21:24 -0500 (Tue, 14 Jun 2011)
	  | 6 lines Add more strict hostname checking to
	  ast_dnsmgr_lookup(). Change suggested in review. Review:
	  https://reviewboard.asterisk.org/r/1240/ ........ r323394 |
	  rmudgett | 2011-06-14 12:21:39 -0500 (Tue, 14 Jun 2011) | 2 lines
	  Made ast_sockaddr_split_hostport() port warning msgs more
	  meaningful. ........

2011-06-14 17:03 +0000 [r323374]  Terry Wilson <twilson@digium.com>

	* res/res_rtp_asterisk.c, main/rtp_engine.c, /,
	  channels/chan_sip.c, include/asterisk/rtp_engine.h: Merged
	  revisions 323370 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r323370 | twilson | 2011-06-14 09:33:55 -0700 (Tue, 14 Jun 2011)
	  | 10 lines Add rtpkeepalives back to 1.8 The RTP-engine
	  conversion left out support for handling rtpkeepalives. This
	  patch adds them back. (closes issue ASTERISK-17304) Reported by:
	  lmadsen Review: https://reviewboard.asterisk.org/r/1226/ ........

2011-06-14 16:47 +0000 [r323372]  Jonathan Rose <jrose@digium.com>

	* /, channels/chan_sip.c: Merged revisions 323371 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r323371 | jrose | 2011-06-14 11:38:43 -0500 (Tue, 14 Jun 2011) |
	  12 lines Changes contact use in build_peer to use the FORCE_RPORT
	  flag instead of RPORT_PRESENT It turned out that this was causing
	  NAT=Yes to always use rport when present which was against 1.6.2
	  behavior and the check itself was redundant since the only way
	  this segment of code could be reached was if RPORT_PRESENT was
	  already evaluated as true earlier. (closes issue ASTERISK-17789)
	  Reported by: byronclark Patches: use_sip_nat_force_rport.patch
	  uploaded by byronclark (license 1200) ........

2011-06-14 14:37 +0000 [r323325]  David Vossel <dvossel@digium.com>

	* channels/chan_sip.c: Store sip peer name as var data on a
	  outofcall msg.

2011-06-13 20:44 +0000 [r323272]  Kinsey Moore <kmoore@digium.com>

	* apps/confbridge/conf_config_parser.c: Config inheritance doesn't
	  work with ConfBridge() menu definitions Current behavior in
	  ConfBridge menu definitions is that first definition takes
	  precedence, even in templated situations. This change allows
	  inheritance and overriding to work as expected so that the last
	  definition takes precedence. (closes ASTERISK-17986) Review:
	  https://reviewboard.asterisk.org/r/1267/

2011-06-13 19:54 +0000 [r323214]  Leif Madsen <lmadsen@digium.com>

	* main/channel.c, /: Merged revisions 323213 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r323213 | lmadsen | 2011-06-13 15:51:52 -0400 (Mon, 13 Jun 2011)
	  | 6 lines Avoid dividing by zero with L() option to Dial()
	  Reported by: nicolasom Patches: issue-17995.patch - nicolasom
	  (License #5994) ........

2011-06-13 19:43 +0000 [r323212]  David Vossel <dvossel@digium.com>

	* channels/chan_sip.c, configs/sip.conf.sample, CHANGES,
	  channels/sip/include/sip.h: Addition of
	  "outofcall_message_context" sip.conf option. Review:
	  https://reviewboard.asterisk.org/r/1265/

2011-06-13 19:03 +0000 [r323155]  Leif Madsen <lmadsen@digium.com>

	* /, res/res_agi.c: Merged revisions 323154 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r323154 | lmadsen | 2011-06-13 15:00:41 -0400 (Mon, 13 Jun 2011)
	  | 6 lines Tweak documentation for AGI Hangup command. (closes
	  issue ASTERISK-17999) Reported by: Ben Klang Patches:
	  hangup-doc.diff - uploaded by Ben Klang (License #5876) ........

2011-06-13 14:38 +0000 [r323106-323107]  Kinsey Moore <kmoore@digium.com>

	* apps/confbridge/include/confbridge.h, apps/app_confbridge.c: MOH
	  for only user not working with ConfBridge This adds the
	  playing_moh flag to the conference_bridge_user struct that
	  signifies when MOH should be playing so code doesn't have to
	  guess whether MOH is playing. This change also adds the necessary
	  checking to ensure that MOH continues playing for a single user
	  in a conference after the join sound is played when configured to
	  do so. (closes ASTERISK-17988) Review:
	  https://reviewboard.asterisk.org/r/1263/

	* apps/app_confbridge.c: ConfBridge: Use of bridge or user profiles
	  that don't exist Bridge and user profiles are not checked for
	  existence before use. The lack of a fully formed bridge profile
	  can cause a segfault when sounds are accessed. This change
	  ensures that bridge and user profiles exist prior to usage
	  attempts. Review: https://reviewboard.asterisk.org/r/1264/

2011-06-10 19:22 +0000 [r323041]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 323040 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r323040 | mnicholson | 2011-06-10 14:20:41 -0500 (Fri, 10 Jun
	  2011) | 5 lines Unlock the sip channel during fax detection like
	  chan_dahdi does to prevent a deadlock with ast_autoservice_stop.
	  (closes issue ASTERISK-17798) tested by mnicholson ........

2011-06-10 15:30 +0000 [r322866-322982]  Terry Wilson <twilson@digium.com>

	* /, main/db.c: Merged revisions 322981 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r322981 | twilson | 2011-06-10 08:29:00 -0700 (Fri, 10 Jun 2011)
	  | 11 lines Avoid a DB1 infinite loop bug Explicity check the last
	  entry in the DB and make sure that we don't iterate past it.
	  Since there can be no duplicates, this just makes sure that we
	  stop after matching the last key. This patch also refactors the
	  code to get away from some code duplication. A previous patch
	  added many astdb tests and this patch passed them. Review:
	  https://reviewboard.asterisk.org/r/1259/ ........

	* /, tests/test_db.c (added): Merged revisions 322923 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r322923 | twilson | 2011-06-09 19:33:23 -0700 (Thu, 09
	  Jun 2011) | 2 lines Add some astdb unit tests ........

	* /, include/asterisk/astdb.h: Merged revisions 322865 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r322865 | twilson | 2011-06-09 15:29:20 -0700 (Thu, 09
	  Jun 2011) | 4 lines Correct ast_db_deltree documentation
	  ast_db_deltree returns -1 on error, otherwise the number of
	  deletions ........

2011-06-09 17:43 +0000 [r322808]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 322807 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r322807 | mnicholson | 2011-06-09 12:37:07 -0500 (Thu, 09 Jun
	  2011) | 5 lines don't drop any voice frames when checking for
	  T.38 during early media (closes issue ASTERISK-17705) Review:
	  https://reviewboard.asterisk.org/r/1186/ patch by oej reported by
	  oej ........

2011-06-09 16:47 +0000 [r322750]  Richard Mudgett <rmudgett@digium.com>

	* /, apps/app_directed_pickup.c, main/features.c,
	  include/asterisk/features.h: Merged revisions 322749 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r322749 | rmudgett | 2011-06-09 11:31:53 -0500 (Thu, 09
	  Jun 2011) | 15 lines Remove potential deadlock in call pickup
	  race. Deadlock is possible in ast_do_pickup() when holding the
	  target channel lock and trying to get the chan channel lock.
	  Also, holding the target lock when calling
	  ast_channel_masquerade() is not a good idea because that routine
	  does deadlock avoidance. * Removed the need to hold the target
	  lock after marking the target with a datastore and getting the
	  connected line data off of the target channel. * Moved
	  can_pickup() to ast_can_pickup() in features.c. Now all the call
	  pickup methods use the same basic call pickup availability check.
	  Review: https://reviewboard.asterisk.org/r/1234/ ........

2011-06-09 11:05 +0000 [r322544]  Damien Wedhorn <voip@facts.com.au>

	* channels/chan_skinny.c: Add autoanswer to skinny. Autoanswer
	  added to skinny based on incoming chan var SKINNY_AUTOANSWER.
	  Initial value must be the time to autoanswer in ms, then
	  optionally :BEEP to play a tone when answered and :MUTE to mute
	  the mic when answering. eg 3000:MUTE:BEEP will ring for 3 secs,
	  then answer, mute the mic, and play a beep. just 3000 would
	  answer afer 3 secs of ringing with no beep and full two way
	  audio.

2011-06-08 20:48 +0000 [r322426-322485]  Richard Mudgett <rmudgett@digium.com>

	* /, apps/app_queue.c: Merged revisions 322484 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r322484 | rmudgett | 2011-06-08 15:46:55 -0500 (Wed, 08 Jun 2011)
	  | 15 lines Ring all queue with more than 255 agents will cause
	  crash. 1. Create a ring-all queue with 500 permanent agents. 2.
	  Call it. 3. Asterisk will crash. The watchers array in
	  app_queue.c has a hard limit of 255. Bounds checking is not done
	  on this array. No sane person should put 255 people in a ring-all
	  queue, but we should not crash anyway. * Added bounds checking to
	  the watchers array. JIRA AST-464 JIRA SWP-2903 ........

	* main/dnsmgr.c, /: Merged revisions 322425 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r322425 | rmudgett | 2011-06-08 13:46:30 -0500 (Wed, 08 Jun 2011)
	  | 16 lines SRV lookup attempted for SIP peers listed as an IP
	  address. Asterisk attempts to SRV lookup a host name even if the
	  host name is an IP address. Regression introduced when IPv6
	  support was added. * Restored the check in ast_dnsmgr_lookup() to
	  see if the given host name is an IP address. The IP address could
	  be in either IPv4 or IPv6 formats. (closes issue ASTERISK-17815)
	  Reported by: Byron Clark Tested by: Byron Clark, Richard Mudgett
	  Patches: issue19248_v1.8.patch - uploaded by Richard Mudgett
	  (License #5621) Review: https://reviewboard.asterisk.org/r/1240/
	  ........

2011-06-08 11:38 +0000 [r322381]  Damien Wedhorn <voip@facts.com.au>

	* channels/chan_skinny.c: Remove skinny do_monitor and use
	  ast_sched_start instead The do_monitor seemed to be there for
	  task scheduling and network monitoring. However, the network
	  monitoring has a dedicated thread so the ast_io_wait was
	  basically just a usleep as it didn't actually seem to be
	  monitoring anything. Review:
	  https://reviewboard.asterisk.org/r/1256/

2011-06-08 06:45 +0000 [r322323]  Gregory Nietsky <gregory@distrotech.co.za>

	* /, channels/chan_sip.c: Merged revisions 322322 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r322322 | irroot | 2011-06-08 08:18:38 +0200 (Wed, 08 Jun 2011) |
	  18 lines Make handle_request_publish do dialog expiration and
	  destruction. This patch fixes handle_request_publish so that it
	  does dialog expiration and destruction. Without this patch the
	  incoming PUBLISH requests will get stuck in the dialog list.
	  Restarting asterisk is the only way to remove them. Personal
	  observation on one system the server hung up while looping
	  through the channels rendering asterisk unusable and all sip
	  phones unregisterd when they try reregister more requests are
	  added. (closes issue #18898) Reported by: gareth Tested by:
	  loloski, Chainsaw, wimpy, se, kuj, irroot Jira:
	  https://issues.asterisk.org/jira/browse/ASTERISK-17915 Review:
	  https://reviewboard.asterisk.org/r/1253 ........

2011-06-07 23:14 +0000 [r322284]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_sip.c, include/asterisk/message.h: Correct some
	  whitespace and a reference debug message.

2011-06-07 19:17 +0000 [r322244]  Russell Bryant <russell@digium.com>

	* res/res_jabber.c: Actually check the "sendtodialplan" option
	  setting for xmpp. (closes issue ASTERISK-17978) Reported by:
	  elguero Patches: stop_messages_going_to_dialplan.patch (license
	  #5026)

2011-06-07 18:01 +0000 [r322190]  Paul Belanger <pabelanger@digium.com>

	* configs/sip_notify.conf.sample, /: Merged revisions 322189 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r322189 | pabelanger | 2011-06-07 13:59:13 -0400 (Tue, 07 Jun
	  2011) | 4 lines Use correct syntax for 'sip notify snom-reboot'
	  (closes issue ASTERISK-17915) ........

2011-06-06 19:39 +0000 [r322111-322128]  Gregory Nietsky <gregory@distrotech.co.za>

	* apps/app_queue.c: Remove Unused Var Warning
	  rt_handle_member_record

	* apps/app_queue.c: Refactor rt_handle_member_record Review:
	  https://reviewboard.asterisk.org/r/1172

2011-06-06 19:15 +0000 [r322070]  Jonathan Rose <jrose@digium.com>

	* include/asterisk/logger.h, /, main/asterisk.c: Merged revisions
	  322069 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r322069 | jrose | 2011-06-06 14:07:56 -0500 (Mon, 06 Jun 2011) |
	  8 lines Fixes level toggling for logger set levels since it was
	  reversed (closes issue ASTERISK-17850) Reported by: Luke H Tested
	  by: jrose, Luke H Review:
	  https://reviewboard.asterisk.org/r/1244/ ........

2011-06-03 22:15 +0000 [r321814-321927]  Richard Mudgett <rmudgett@digium.com>

	* cel/cel_radius.c, /, cdr/cdr_radius.c: Merged revisions 321926
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r321926 | rmudgett | 2011-06-03 17:09:36 -0500 (Fri, 03 Jun 2011)
	  | 18 lines Asterisk crash when unloading cdr_radius/cel_radius.
	  The rc_openlog() API call is passed a string that is used by
	  openlog() to format log messages. The openlog() does not copy the
	  string it just keeps a pointer to it. When the module is
	  unloaded, the string is gone from memory. Depending upon module
	  load order and if the other module then has an error, a crash
	  happens. * Pass rc_openlog() a strdup'd string with the
	  understanding that there will be a small memory leak if the
	  cdr_radius/cel_radius modules are unloaded. * Call rc_destroy()
	  to free the rc handle memory when the module is unloaded. JIRA
	  AST-483 JIRA SWP-3062 ........

	* /, main/ccss.c: Merged revisions 321924 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r321924 | rmudgett | 2011-06-03 16:49:17 -0500 (Fri, 03 Jun 2011)
	  | 5 lines Be more explicit for CCSS generic device state event
	  subscription. Make CCSS generic device state event subscription
	  specify the AST_EVENT_IE_STATE ie exists to be safe. ........

	* /, tests/test_event.c, main/event.c: Merged revisions 321871 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r321871 | rmudgett | 2011-06-03 15:58:13 -0500 (Fri, 03 Jun 2011)
	  | 27 lines Event subscription fixes. Must commit the subscription
	  fixes together with the integration subscription tests. The
	  subscription fixes cause an erroneously passing test to fail. The
	  new subscription tests detect errors without the subscription
	  fixes. * Added missing event_names[] table entry. * Reworked
	  ast_event_check_subscriber()/match_sub_ie_val_to_event() to
	  correctly detect if a subscriber exists for the proposed event. *
	  Made match_ie_val() and match_sub_ie_val_to_event() check the
	  buffer length for RAW payload types. * Fixed error handling
	  memory leak in ast_event_sub_activate(), ast_event_unsubscribe(),
	  and ast_event_queue(). * Made ast_event_new() and
	  ast_event_check_subscriber() better protect themselves from an
	  invalid payload type. * Added container lock protection between
	  removing old cache events and adding the new cached event in
	  ast_event_queue_and_cache()/event_update_cache(). * Added new
	  event subscription tests. ........

	* include/asterisk/event.h, /, channels/chan_sip.c, main/event.c,
	  channels/chan_iax2.c: Merged revisions 321812-321813 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r321812 | rmudgett | 2011-06-03 14:55:21 -0500 (Fri, 03
	  Jun 2011) | 1 line Correct IAX2 and SIP event subscription
	  description string. ........ r321813 | rmudgett | 2011-06-03
	  14:56:09 -0500 (Fri, 03 Jun 2011) | 1 line Constify subscription
	  description parameter string. ........

2011-06-03 18:25 +0000 [r321752]  Russell Bryant <russell@digium.com>

	* tests/test_astobj2.c, main/astobj2.c: Fix some astobj2 iterator
	  breakage, add another unit test. Review:
	  https://reviewboard.asterisk.org/r/1254/

2011-06-03 13:18 +0000 [r321689]  Leif Madsen <lmadsen@digium.com>

	* /, configs/queues.conf.sample: Merged revisions 321685 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r321685 | lmadsen | 2011-06-03 08:17:50 -0500 (Fri, 03 Jun 2011)
	  | 5 lines Also document the 'queue-minute' option. (closes issue
	  #19386) Reported by: juanmol ........

2011-06-02 22:09 +0000 [r321617]  Russell Bryant <russell@digium.com>

	* channels/chan_sip.c: Fix message destination extension. Don't
	  send all messages to 's'. Get the destination from the request
	  URI. (Found using automated test cases).

2011-06-01 23:12 +0000 [r321548]  Richard Mudgett <rmudgett@digium.com>

	* main/cdr.c, /: Merged revisions 321547 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r321547 | rmudgett | 2011-06-01 18:11:55 -0500 (Wed, 01 Jun 2011)
	  | 1 line CDR comment tweaks. ........

2011-06-01 21:31 +0000 [r321546]  Russell Bryant <russell@digium.com>

	* main/channel.c, channels/chan_sip.c, configs/jabber.conf.sample,
	  include/asterisk/message.h (added), include/asterisk/jabber.h,
	  include/asterisk/channel.h, configs/sip.conf.sample,
	  include/asterisk/_private.h, CHANGES, res/res_jabber.c,
	  main/message.c (added), channels/sip/include/sip.h,
	  main/asterisk.c: Support routing text messages outside of a call.
	  Asterisk now has protocol independent support for processing text
	  messages outside of a call. Messages are routed through the
	  Asterisk dialplan. SIP MESSAGE and XMPP are currently supported.
	  There are options in sip.conf and jabber.conf that enable these
	  features. There is a new application, MessageSend(). There are
	  two new functions, MESSAGE() and MESSAGE_DATA(). Documentation
	  will be available on the project wiki, wiki.asterisk.org. Thanks
	  to Terry Wilson for the assistance with development and to David
	  Vossel for helping with some additional testing. Review:
	  https://reviewboard.asterisk.org/r/1042/

2011-06-01 20:11 +0000 [r321538]  Brett Bryant <bbryant@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 321537 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r321537 | bbryant | 2011-06-01 16:10:02 -0400 (Wed, 01
	  Jun 2011) | 8 lines This patch fixes an issue with using the
	  wrong voicemail folders with greetings. (closes issue #17871)
	  Reported by: edhorton Patches: digium_bug_17871_2 uploaded by
	  fhackenberger (license 592) Tested by: edhorton, fhackenberger
	  ........

2011-06-01 10:45 +0000 [r321529]  Alexandr Anikin <may@telecom-service.ru>

	* addons/chan_ooh323.c, /, addons/ooh323c/src/ooh245.c,
	  addons/ooh323c/src/oochannels.c: Merged revisions 321528 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r321528 | may | 2011-06-01 14:40:19 +0400 (Wed, 01 Jun 2011) | 14
	  lines Fix double alerting, add forced alerting before answer Fix
	  double alerting (it wasn't fixed here by issue #18542) Add forced
	  alerting before connect (if it wasn't before) Try to send all
	  packets from outgoing queue rather than one only Call goes into
	  clearing state when disconnect command is received (closes issue
	  #19361) Reported by: vmikhelson Patches: issue19361-3.patch
	  uploaded by may213 (license 454) Tested by: vmikhelson ........

2011-05-31 20:55 +0000 [r321518]  Richard Mudgett <rmudgett@digium.com>

	* include/asterisk/acl.h, /, include/asterisk/dnsmgr.h: Merged
	  revisions 321517 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r321517 | rmudgett | 2011-05-31 15:54:35 -0500 (Tue, 31 May 2011)
	  | 1 line Update some comments. ........

2011-05-31 19:01 +0000 [r321516]  David Vossel <dvossel@digium.com>

	* channels/chan_local.c, /: Merged revisions 321515 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r321515 | dvossel | 2011-05-31 13:52:54 -0500 (Tue, 31
	  May 2011) | 12 lines Chan_local locking cleanup. This patch
	  removes all of the unnecessary deadlock avoidance loops that
	  occur in chan_local. It also resolves an issue with a deadlock
	  triggered by local channel optimizations. (issue #18028) Review:
	  https://reviewboard.asterisk.org/r/1231/ ........

2011-05-31 16:06 +0000 [r321512]  Leif Madsen <lmadsen@digium.com>

	* /, channels/chan_sip.c: Merged revisions 321511 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r321511 | lmadsen | 2011-05-31 12:04:47 -0400 (Tue, 31 May 2011)
	  | 8 lines Enhance NOTICE message to know who couldn't access the
	  dialplan. (closes issue #19390) Reported by: lmadsen Patches:
	  __20110531-sip-notice-tweak.txt uploaded by lmadsen (license 10)
	  Tested by: russell ........

2011-05-28 00:29 +0000 [r321338-321445]  Richard Mudgett <rmudgett@digium.com>

	* /, res/res_agi.c: Merged revisions 321436 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r321436 | rmudgett | 2011-05-27 19:27:52 -0500 (Fri, 27 May 2011)
	  | 4 lines Some hagi launch cleanup. Inspired by issue 19256. This
	  patch would also fix the crash. ........

	* main/srv.c, /: Merged revisions 321392 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r321392 | rmudgett | 2011-05-27 18:45:41 -0500 (Fri, 27 May 2011)
	  | 12 lines Crash when using hagi and no servers are available.
	  When none of the servers returned by the SRV querey respond,
	  asterisk crashes. The problem is that if the loop over all the
	  SRV entries finishes then the srv_context has already been
	  cleaned up. * Make ast_srv_cleanup() check to see if the context
	  is already cleaned up. (closes issue #19256) Reported by:
	  byronclark ........

	* /, apps/app_privacy.c, UPGRADE.txt, CHANGES: Merged revisions
	  321337 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 Also revert
	  -r321331 and -r321332. ........ r321337 | rmudgett | 2011-05-27
	  17:06:43 -0500 (Fri, 27 May 2011) | 7 lines The app_privacy args
	  have undocumented "options" position, interferes with "context"
	  position. * Add documention for unused "options" position to
	  match existing code. (closes issue #19273) Reported by:
	  mdavenport ........

2011-05-27 21:40 +0000 [r321334]  Leif Madsen <lmadsen@digium.com>

	* /, main/features.c: Merged revisions 321333 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r321333 | lmadsen | 2011-05-27 17:40:23 -0400 (Fri, 27 May 2011)
	  | 7 lines Allow parking lot hints and musicclass to be set.
	  (closes issue #19378) Reported by: sboily_proformatique Patches:
	  pf_parkinghint_music_fix uploaded by sboily proformatique
	  (license 206) Tested by: russell ........

2011-05-27 21:37 +0000 [r321331-321332]  Richard Mudgett <rmudgett@digium.com>

	* UPGRADE.txt: Add note about PrivacyManager to UPGRADE.txt

	* /, apps/app_privacy.c, CHANGES: Merged revisions 321330 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r321330 | rmudgett | 2011-05-27 16:31:25 -0500 (Fri, 27 May 2011)
	  | 8 lines The app_privacy args have undocumented "options"
	  position, interferes with "context" position. * Add documention
	  for unused "options" position to match existing code. The
	  trunk(v1.10) version will remove the unused options position.
	  (closes issue #19273) Reported by: mdavenport ........

2011-05-27 16:35 +0000 [r321289]  Jonathan Rose <jrose@digium.com>

	* /, channels/sip/reqresp_parser.c: Merged revisions 321273 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r321273 | jrose | 2011-05-27 09:59:34 -0500 (Fri, 27 May 2011) |
	  3 lines markm committed a patch I was working on yesterday, this
	  fixes it to mesh up with suggestions by mnicholson. ........

2011-05-27 08:37 +0000 [r321212]  Alec L Davis <sivad.a@paradise.net.nz>

	* /, main/features.c: Merged revisions 321211 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r321211 | alecdavis | 2011-05-27 20:31:15 +1200 (Fri, 27 May
	  2011) | 16 lines Fix *8 directed pickup locks system during
	  pickupsound play out move playout from sip_pickup_thread to
	  bridge using BRIDGE_PLAY_SOUND method, This stop the clash of 2
	  threads trying to write audio to same channel. In addition fixes
	  choppy audio beep in issue 19177. (issue #18654) (issue #19177)
	  Reported by: Docent Patches: review1232-1.8.diff.txt alecdavis
	  (license 585) Tested by: alecdavis Review:
	  https://reviewboard.asterisk.org/r/1232/ ........

2011-05-26 21:50 +0000 [r321101-321156]  Mark Murawki <markm@intellasoft.net>

	* /, channels/chan_sip.c, channels/sip/reqresp_parser.c: Merged
	  revisions 321155 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r321155 | markm | 2011-05-26 17:48:45 -0400 (Thu, 26 May 2011) |
	  10 lines Fixed build problem with dev mode enabled, which was
	  caused by commit 321100. Reformulated patch to be more generic.
	  Moved the sip uri parse variable initalization to parse_uri_full
	  in reqresp_parser.c. This will ensure that any use of parse uri
	  will have null output variables if the parse fails. (closes issue
	  #19346) Reported by: kobaz Tested by: kobaz,JonathanRose Review:
	  [full review board URL with trailing slash] ........

	* main/netsock2.c, /, channels/chan_sip.c: Merged revisions 321100
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r321100 | markm | 2011-05-26 16:09:35 -0400 (Thu, 26 May 2011) |
	  11 lines ast_sockaddr_resolve() in netsock2.c may deref a null
	  pointer Added a null check in netsock2 ast_sockaddr_resolve() as
	  well as added default initalizers in chan_sip
	  parse_uri_legacy_check() to make sure that invalid uris will make
	  null (and not undefined) user,pass,domain,transport variables
	  (closes issue #19346) Reported by: kobaz Patches: netsock2.patch
	  uploaded by kobaz (license 834) Tested by: kobaz, Marquis
	  ........

2011-05-26 18:10 +0000 [r321045]  Richard Mudgett <rmudgett@digium.com>

	* /, include/asterisk/netsock2.h: Merged revisions 321044 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r321044 | rmudgett | 2011-05-26 13:10:17 -0500 (Thu, 26 May 2011)
	  | 1 line Update ast_sockaddr comment with an important note.
	  ........

2011-05-26 17:35 +0000 [r321043]  Terry Wilson <twilson@digium.com>

	* main/rtp_engine.c, /: Merged revisions 321042 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r321042 | twilson | 2011-05-26 10:29:54 -0700 (Thu, 26 May 2011)
	  | 6 lines Initialize stack-allocated ast_sockaddrs before use It
	  is important to always initialize ast_sockaddrs before use--even
	  if they are passed to ast_sockaddr_copy as the underlying storage
	  could be bigger than what ends up being copied--leaving part of
	  the data unitialized. ........

2011-05-26 16:54 +0000 [r321003]  Russell Bryant <russell@digium.com>

	* /, channels/chan_alsa.c: Merged revisions 320947 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r320947 | russell | 2011-05-26 10:57:13 -0500 (Thu, 26
	  May 2011) | 2 lines Remove some variables that were set but
	  unused. ........

2011-05-26 15:55 +0000 [r320946]  Terry Wilson <twilson@digium.com>

	* main/channel.c, main/utils.c, include/asterisk/stringfields.h:
	  Use va_copy for stringfields The ast_string_field_build_va
	  functions were written to take to separate va_lists to work
	  around FreeBSD 4 not having va_copy defined. In the end, we don't
	  support anything using gcc < 3 anyway because we use va_copy all
	  over the place anyway. This patch just simplifies things by
	  removing the second va_list function arguments in favor of
	  va_copy. Review: https://reviewboard.asterisk.org/r/1233/ --This
	  line, and those below, will be ignored-- M
	  include/asterisk/stringfields.h M main/utils.c M main/channel.c

2011-05-25 22:28 +0000 [r320820-320884]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/chan_sip.c: Merged revisions 320883 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r320883 | rmudgett | 2011-05-25 17:25:18 -0500 (Wed, 25 May 2011)
	  | 17 lines Native SIP CCSS sends bad CC cancel SUBSCRIBE message.
	  The SUBSCRIBE message used to cancel a CC request has incorrect
	  To/From SIP headers. They are reversed and the dialog tags are
	  the same when they should not be. If pedantic mode was disabled,
	  then the cancel would have succeeded despite the incorrect
	  message. * The SIP_OUTGOING flag was not set correctly for the
	  dialog and I had to move some CC subscribe handling code as a
	  result. * Initialized the dialog subscribed type to
	  CALL_COMPLETION earlier. If a CC request SUBSCRIBE message comes
	  in and the CC instance is not found, the 404 response was
	  duplicated. JIRA AST-568 JIRA SWP-3493 ........

	* apps/app_dial.c, main/channel.c, main/manager.c, /,
	  apps/app_meetme.c, apps/app_fax.c, main/features.c, CHANGES,
	  apps/app_queue.c, UPGRADE-1.8.txt: Merged revisions 320823 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r320823 | rmudgett | 2011-05-25 12:06:38 -0500 (Wed, 25 May 2011)
	  | 18 lines The AMI Newstate event contains different information
	  between v1.4 and v1.8. The addition of connected line support in
	  v1.8 changes the behavior of the channel caller ID somewhat. The
	  channel caller ID value no longer time shares with the connected
	  line ID on outgoing call legs. The timing of some AMI
	  events/responses output the connected line ID as caller ID. These
	  party ID's are now separate. * The ConnectedLineNum and
	  ConnectedLineName headers were added to many AMI events/responses
	  if the CallerIDNum/CallerIDName headers were also present.
	  (closes issue #18252) Reported by: gje Tested by: rmudgett
	  Review: https://reviewboard.asterisk.org/r/1227/ ........

	* main/channel.c, /, main/format_cap.c, main/features.c,
	  include/asterisk/channel.h: Merged revisions 320796 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r320796 | rmudgett | 2011-05-25 11:23:11 -0500 (Wed, 25
	  May 2011) | 17 lines Give zombies a safe channel driver to use.
	  Recent crashes from zombie channels suggests that they need a
	  safe home to goto. When a masquerade happens, the physical part
	  of the zombie channel is hungup. The hangup normally sets the
	  channel private pointer to NULL. If someone then blindly does a
	  callback to the channel driver, a crash is likely because the
	  private pointer is NULL. The masquerade now sets the channel
	  technology of zombie channels to the kill channel driver. Related
	  to the following issues: (issue #19116) (issue #19310) Review:
	  https://reviewboard.asterisk.org/r/1224/ ........

2011-05-25 15:43 +0000 [r320772]  Gregory Nietsky <gregory@distrotech.co.za>

	* funcs/func_channel.c, CHANGES: CHANNEL(pickupgroup) Allow Setting
	  / Reading the pickupgroup of a channel with func_channel.c
	  (closes issue #19045) Reported by: irroot Review:
	  https://reviewboard.asterisk.org/r/1148/

2011-05-25 00:52 +0000 [r320717]  Terry Wilson <twilson@digium.com>

	* /, addons/chan_mobile.c: Merged revisions 320716 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r320716 | twilson | 2011-05-24 17:49:10 -0700 (Tue, 24
	  May 2011) | 4 lines Cast data as char * before using S_OR This is
	  required for compiling successfully under dev mode ........

2011-05-23 18:00 +0000 [r320651]  Richard Mudgett <rmudgett@digium.com>

	* main/manager.c, /, CHANGES: Merged revisions 320650 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r320650 | rmudgett | 2011-05-23 12:53:44 -0500 (Mon, 23
	  May 2011) | 16 lines Add ConnectedLineNum/Name headers to output
	  of AMI action Status. * Add ConnectedLineNum and
	  ConnectedLineName headers to the output of the AMI action Status.
	  This makes it easier to find out who the channel is connected to
	  without having to lookup BridgedChannel or when they are
	  connected to an application (e.g.: VoiceMail) which has no
	  bridged channel. * Bridged channels with no CallerID had ""
	  instead of "<unknown>" output, that might be a bug as "<unknown>"
	  was what older versions used. (closes issue #18158) Reported by:
	  gareth Patches: svn-292308.diff uploaded by gareth (license 208)
	  ........

2011-05-23 16:28 +0000 [r320606]  David Vossel <dvossel@digium.com>

	* main/tcptls.c, /: Merged revisions 320568 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r320568 | dvossel | 2011-05-23 11:18:33 -0500
	  (Mon, 23 May 2011) | 14 lines Merged revisions 320562 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r320562 | dvossel | 2011-05-23 11:15:18 -0500 (Mon, 23 May 2011)
	  | 9 lines Adds missing part to the ast_tcptls_server_start fails
	  second attempt to bind patch. (closes issue #19289) Reported by:
	  wdoekes Patches:
	  issue19289_delay_old_address_setting_tcptls_2.patch uploaded by
	  wdoekes (license 717) ........ ................

2011-05-23 16:20 +0000 [r320579]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, configure, configure.ac: Merged revisions 320573 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r320573 | tilghman | 2011-05-23 11:19:32 -0500 (Mon, 23
	  May 2011) | 7 lines GNU libiconv uses symbol "libiconv_open"
	  instead of "iconv_open". (closes issue #19344) Reported by:
	  rohanl Patches: iconv-check.patch uploaded by rohanl (license
	  1284) ........

2011-05-23 15:48 +0000 [r320561]  Kevin P. Fleming <kpfleming@digium.com>

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac:
	  Merged revisions 320560 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r320560 | kpfleming | 2011-05-23 10:47:14 -0500 (Mon, 23 May
	  2011) | 4 lines Don't generate spurious "No: command not found"
	  messages when running the configure script on a system that has
	  neither gmime-config nor pkg-config. ........

2011-05-23 14:40 +0000 [r320505]  Jonathan Rose <jrose@digium.com>

	* /, channels/chan_sip.c: Merged revisions 320504 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r320504 | jrose | 2011-05-23 09:33:20 -0500 (Mon, 23 May 2011) |
	  10 lines Fixes segfault occuring in chan_sip.c at
	  __set_address_from_contact Checks to see if domain contains
	  anything before sending it off to ast_sockaddr_resolve which is
	  where the segfault was occuring due to null str. (closes issue
	  #18857) Reported by: sybasesql Review:
	  https://reviewboard.asterisk.org/r/1225/ ........

2011-05-22 23:36 +0000 [r320446]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, res/res_odbc.c: Merged revisions 320445 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r320445 | tilghman | 2011-05-22 18:34:57 -0500
	  (Sun, 22 May 2011) | 15 lines Merged revisions 320444 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r320444 | tilghman | 2011-05-22 18:25:51 -0500 (Sun, 22 May 2011)
	  | 8 lines Don't crash when the connection fails. (closes issue
	  #19250) Reported by: seadweller Patches:
	  20110514__issue19250.diff.txt uploaded by tilghman (license 14)
	  Tested by: seadweller, sum ........ ................

2011-05-20 21:40 +0000 [r320340]  David Vossel <dvossel@digium.com>

	* main/tcptls.c, /: Merged revisions 320338 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r320338 | dvossel | 2011-05-20 16:39:36 -0500
	  (Fri, 20 May 2011) | 14 lines Merged revisions 320271 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r320271 | dvossel | 2011-05-20 16:24:48 -0500 (Fri, 20 May 2011)
	  | 8 lines Fixes issue with ast_tcptls_server_start failing on
	  second attempt to bind. (closes issue #19289) Reported by:
	  wdoekes Patches:
	  issue19289_delay_old_address_setting_tcptls.patch uploaded by
	  wdoekes (license 717) ........ ................

2011-05-20 20:53 +0000 [r320238]  Richard Mudgett <rmudgett@digium.com>

	* /, apps/app_meetme.c: Merged revisions 320237 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r320237 | rmudgett | 2011-05-20 15:49:03 -0500
	  (Fri, 20 May 2011) | 27 lines Merged revisions 320236 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r320236 | rmudgett | 2011-05-20 15:44:54 -0500
	  (Fri, 20 May 2011) | 20 lines Merged revisions 320235 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r320235 | rmudgett | 2011-05-20 15:38:22 -0500 (Fri, 20 May 2011)
	  | 13 lines The meetme CLI command completion leaves conferences
	  mutex locked. When issuing a meetme kick CLI command and an
	  invalid (non-existent) conference number is specified, pressing
	  Tab leaves the conferences mutex locked and, therefore, all
	  conferences deadlock. Add missing unlock. (closes issue #19336)
	  Reported by: zvision Patches: app_meetme.diff uploaded by zvision
	  (license 798) ........ ................ ................

2011-05-20 18:49 +0000 [r320181]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 320180 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r320180 | mnicholson | 2011-05-20 13:48:46 -0500 (Fri, 20 May
	  2011) | 16 lines This commit modifies the way polling is done on
	  TLS sockets. Because of the buffering the TLS layer does, polling
	  is unreliable. If poll is called while there is data waiting to
	  be read in the TLS layer but not at the network layer, the
	  messaging processing engine will not proceed until something else
	  writes data to the socket, which may not occur. This change
	  modifies the logic around TLS sockets to only poll after a failed
	  read on a non-blocking socket. This way we know that there is no
	  data waiting to be read from the buffering layer. (closes issue
	  #19182) Reported by: st Patches: ssl-poll-fix3.diff uploaded by
	  mnicholson (license 96) Tested by: mnicholson ........

2011-05-20 18:29 +0000 [r320178]  Jonathan Rose <jrose@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 320162 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r320162 | jrose | 2011-05-20 13:12:21 -0500 (Fri, 20 May
	  2011) | 15 lines Fixes an imapfolder related crash imapfolders
	  being set in the general section of voicemail would cause the
	  inbox folder name to change. Since sound file names are made
	  based on the names of the folders, this would cause the audio
	  related to that folder name to change and if Asterisk attempted
	  to play it, the channel would instantly hang up when the audio
	  file couldn't be found. This patch searches for the name of the
	  folder first to leave existing behavior in tact and if that
	  fails, it uses the normal inbox name to get the sound file
	  instead. (closes issue #16104) Reported by: blkline Review:
	  https://reviewboard.asterisk.org/r/1215/ ........

2011-05-20 17:04 +0000 [r320058-320060]  Richard Mudgett <rmudgett@digium.com>

	* /, main/features.c: Merged revisions 320059 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r320059 | rmudgett | 2011-05-20 12:03:49 -0500 (Fri, 20 May 2011)
	  | 1 line Misc comment cleanup in features.c. ........

	* main/channel.c, /, main/features.c: Merged revisions 320057 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r320057 | rmudgett | 2011-05-20 11:43:02 -0500 (Fri, 20 May 2011)
	  | 19 lines Crash while transferring a call during DTMF feature
	  timeout. When a call is being attended transferred during the
	  time between AST_FRAME_DTMF_BEGIN and AST_FRAME_DTMF_END, the
	  transferred channel becomes a zombie (so tech data is not
	  available), making ast_dtmf_stream() segfault when it tries to
	  send the DTMF digit (at least with SIP channels). Patch based on
	  feature-end-zombie.patch uploaded by Irontec (license 1256) *
	  Check for zombies when ast_channel_bridge() returns. * Guarantee
	  that the fo parameter value is initialized in
	  ast_channel_bridge() before any returns. (closes issue #19116)
	  Reported by: Irontec Tested by: rmudgett ........

2011-05-20 16:27 +0000 [r320040]  Jonathan Rose <jrose@digium.com>

	* funcs/func_strings.c, CHANGES: Adds STRREPLACE function Adds a
	  new STRREPLACe function to func_strings.c that allows users to
	  search and replace against a variable in the dialplan. (closes
	  issue #18023) Reported by: wdoekes Review:
	  https://reviewboard.asterisk.org/r/1219/

2011-05-20 16:20 +0000 [r319998-320013]  Richard Mudgett <rmudgett@digium.com>

	* /, apps/app_directed_pickup.c, main/features.c: Merged revisions
	  320007 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r320007 | rmudgett | 2011-05-20 11:19:01 -0500 (Fri, 20 May 2011)
	  | 2 lines Change some variable names to make pickup code easier
	  to understand. ........

	* /, apps/app_directed_pickup.c, main/features.c: Merged revisions
	  319997 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r319997 | rmudgett | 2011-05-20 10:48:25 -0500 (Fri, 20 May 2011)
	  | 25 lines Crash when using directed pickup applications. The
	  directed pickup applications can cause a crash if the pickup was
	  successful because the dialplan keeps executing. This patch does
	  the following: * Completes the channel masquerade on a successful
	  pickup before the application returns. The channel is now
	  guaranteed a zombie and must not continue executing the dialplan.
	  * Changes the return value of the directed pickup applications to
	  return zero if the pickup failed and nonzero(-1) if the pickup
	  succeeded. * Made some code optimizations that no longer require
	  re-checking the pickup channel to see if it is still available to
	  pickup. (closes issue #19310) Reported by: remiq Patches:
	  issue19310_v1.8_v2.patch uploaded by rmudgett (license 664)
	  Tested by: alecdavis, remiq, rmudgett Review:
	  https://reviewboard.asterisk.org/r/1221/ ........

2011-05-20 13:42 +0000 [r319867-319939]  Jonathan Rose <jrose@digium.com>

	* /, channels/chan_sip.c, configs/sip.conf.sample,
	  channels/sip/include/sip.h: Merged revisions 319938 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r319938 | jrose | 2011-05-20 08:28:24 -0500 (Fri, 20 May
	  2011) | 12 lines Adds legacy_useroption_parsing to address
	  interoperability concerns. With the new option engaged, Asterisk
	  should interpret user fields with useroptions contained within
	  the userfield of the uri by stripping them out of the original
	  message whenever a semicolon is encountered in the userfield
	  string. (closes issue #18344) Reported by: danimal Tested by:
	  jrose Review: https://reviewboard.asterisk.org/r/1223/ ........

	* /, main/features.c: Merged revisions 319866 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r319866 | jrose | 2011-05-19 13:32:38 -0500 (Thu, 19 May 2011) |
	  11 lines Fix Randomize option on Park() The randomize option was
	  generally not working like it should have at all on Park(). This
	  patch restores intended functionality. (closes issue #18862)
	  Reported by: davidw Tested by: jrose Review:
	  https://reviewboard.asterisk.org/r/1222/ ........

2011-05-19 18:12 +0000 [r319813]  Mark Murawki <markm@intellasoft.net>

	* cel/cel_odbc.c, /: Merged revisions 319812 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r319812 | markm | 2011-05-19 13:59:01 -0400 (Thu, 19 May 2011) |
	  9 lines In cel_odbc, an uninitialized RWLIST is attempted to be
	  locked. Added INIT and DESTROY for the RWLIST odbc_tables (closes
	  issue #19331) Reported by: kobaz Patches: odbc_cel.patch uploaded
	  by kobaz (license 834) ........

2011-05-19 16:52 +0000 [r319759]  Richard Mudgett <rmudgett@digium.com>

	* /, main/ccss.c: Merged revisions 319758 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r319758 | rmudgett | 2011-05-19 11:50:48 -0500 (Thu, 19 May 2011)
	  | 21 lines CCSS generic agent with POTS and ISDN phones fail
	  caller busy call-back test. If the following is true after a CCSS
	  activation: * The generic agent is for an analog phone or ISDN
	  phone. (Caller party) * The called party becomes available. * The
	  caller party is not available. When the caller party becomes
	  available, the caller is not alerted to the called party being
	  available. The generic agent still thinks the caller is busy. *
	  Fixed the generic agent device state event subscription to look
	  for all device states that are considered available. *
	  Encapsulated the device state test for CCSS generic device
	  available in cc_generic_is_device_available(). Made the generic
	  agent and monitor use the new function instead of the manually
	  coded inline equivalent. JIRA AST-559 JIRA SWP-3462 ........

2011-05-18 23:18 +0000 [r319530-319661]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 319654 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r319654 | twilson | 2011-05-18 16:15:58 -0700
	  (Wed, 18 May 2011) | 22 lines Merged revisions 319653 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r319653 | twilson | 2011-05-18 16:11:57 -0700
	  (Wed, 18 May 2011) | 15 lines Merged revisions 319652 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r319652 | twilson | 2011-05-18 16:04:35 -0700 (Wed, 18 May 2011)
	  | 8 lines Make sure everyone gets an unhold when a transfer
	  succeeds Some phones, like the Snom phones, send a hold to the
	  transfer target after before sending the REFER. We need to make
	  sure that we unhold the parties that are being connected after
	  the masquerade. If Local channels with the /nm option are used
	  when dialing the parties, hold music would still be playing on
	  the transfer target, even after being connected with the
	  transferee. ........ ................ ................

	* /, channels/chan_sip.c: Merged revisions 319552 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r319552 | twilson | 2011-05-18 13:22:36 -0700 (Wed, 18 May 2011)
	  | 11 lines Unbreak the storing of registrations for restart The
	  fix for issue 18882 broke retrieving non-realtime peers from the
	  ast_db on restart/reload. This patch tries to unbreak things
	  while leaving the intent of the original fix intact. (closes
	  issue #19318) Reported by: remiq Patches: diff.txt uploaded by
	  twilson (license 396) Tested by: lmadsen, remiq ........

	* apps/app_dial.c, /: Merged revisions 319529 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r319529 | twilson | 2011-05-18 13:05:34 -0700
	  (Wed, 18 May 2011) | 24 lines Merged revisions 319528 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r319528 | twilson | 2011-05-18 13:02:06 -0700
	  (Wed, 18 May 2011) | 17 lines Merged revisions 319527 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r319527 | twilson | 2011-05-18 12:56:08 -0700 (Wed, 18 May 2011)
	  | 10 lines Fix app_dial ring groups Revert part of r315643. We
	  need to remove the datastore here as well. The code in bridging
	  code will catch anything that app_dial might miss. (closes issue
	  #19311) Reported by: mspuhler Patches: issue_19311_no_answer.diff
	  uploaded by elguero (license 37) ........ ................
	  ................

2011-05-17 22:04 +0000 [r319471]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/misdn/isdn_lib.c: Merged revisions 319469 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r319469 | rmudgett | 2011-05-17 16:57:56 -0500
	  (Tue, 17 May 2011) | 22 lines Merged revision 319468 from
	  https://origsvn.digium.com/svn/asterisk/be/branches/C.3-bier
	  .......... r319468 | rmudgett | 2011-05-17 16:49:31 -0500 (Tue,
	  17 May 2011) | 15 lines The mISDN HDLC mode is prevented on
	  dialed channels. The use of mISDN HDLC mode is prevented if the
	  mISDN dial technology option 'h1' is used when config option
	  astdtmf=yes. There is a bug in channels/misdn/isdn_lib.c which
	  prevents the use of HDLC mode. Instead of setting the channel to
	  HDLC mode it is set to transparent(no dsp, no hdlc), although
	  hdlc is not "no hdlc". I.e the logging message is correct, but
	  the if condition is not. Make check the nodsp and hdlc flags.
	  JIRA ABE-2787 JIRA SWP-3437 .......... ................

2011-05-17 21:59 +0000 [r319470]  Damien Wedhorn <voip@facts.com.au>

	* channels/chan_skinny.c: Remove extraneous line variables. The
	  vars were either explicitly or implicitly not used.

2011-05-17 20:13 +0000 [r319427]  Richard Mudgett <rmudgett@digium.com>

	* channels/sig_pri.h, channels/chan_dahdi.c,
	  configs/chan_dahdi.conf.sample, configure,
	  include/asterisk/autoconfig.h.in, configure.ac,
	  channels/sig_pri.c: Option needed for Q931_IE_TIME_DATE to be
	  optional in CONNECT message. The NEC SV8300 rejects the
	  Q931_IE_TIME_DATE for Q.SIG. Add option to specify if and how
	  much of the current time is put in Q931_IE_TIME_DATE. * Send
	  date/time ie never. * Send date/time ie date only. * Send
	  date/time ie date and hour. * Send date/time ie date, hour, and
	  minute. * Send date/time ie date, hour, minute, and second. *
	  Send date/time ie default: Libpri will send date and hhmm only
	  when in NT PTMP mode to support ISDN phones. (closes issue
	  #19221) Reported by: kenner JIRA SWP-3396

2011-05-17 12:54 +0000 [r319366-319368]  Leif Madsen <lmadsen@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 319367 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r319367 | lmadsen | 2011-05-17 07:53:50 -0500 (Tue, 17
	  May 2011) | 10 lines Don't create [general] voicemail context
	  when using users.conf Prior to this patch, app_voicemail would
	  create a [general] context when parsing users.conf. (closes issue
	  #18891) Reported by: pdugas Patches:
	  app_voicemail-ignore-general.patch uploaded by pdugas (license
	  1222) app_voicemail-ignore-general-style-guidelines.patch
	  uploaded by seanbright (license 71) Tested by: pdugas ........

	* contrib/init.d/rc.debian.asterisk, /: Merged revisions 319365 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r319365 | lmadsen | 2011-05-17 07:39:37 -0500 (Tue, 17 May 2011)
	  | 6 lines Make Debian init script lsb compliant (closes issue
	  #18896) Reported by: manwe Patches: debian_init_lsb.patch
	  uploaded by manwe (license 1223) ........

2011-05-16 21:39 +0000 [r319316]  Damien Wedhorn <voip@facts.com.au>

	* channels/chan_skinny.c: Fix up skinny hints. Probably haven't
	  been working for a couple of years. May still need some more
	  love, but they are now working, both as a hint device and
	  monitoring a hint. Changes centre around the long ago change to
	  remove the requirement for a device name in a skinny line, and
	  changes to the transmit_* functions.

2011-05-16 21:08 +0000 [r319262]  Jonathan Rose <jrose@digium.com>

	* main/dsp.c: Merged revisions 319261 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r319261 | jrose | 2011-05-16 16:00:55 -0500 (Mon, 16 May 2011) |
	  2 lines Makes busy detection in dsp.c always allow for at least
	  one frame (20ms) of error so that 200ms tone lengths don't get
	  ignored by single frame error lengths. ........

2011-05-16 20:41 +0000 [r319260]  Richard Mudgett <rmudgett@digium.com>

	* /, main/ccss.c: Merged revisions 319259 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r319259 | rmudgett | 2011-05-16 15:33:37 -0500 (Mon, 16 May 2011)
	  | 13 lines Deadlock between generic CCSS agent and native ISDN
	  CCSS. Deadlock can occur when the generic CCSS agent is deleting
	  duplicate CC offers and the native ISDN CC driver is processing
	  an incoming CC message. The cc_core_instances container lock
	  cannot be held when an agent or monitor callback is invoked
	  without the possibility of a deadlock. * Make
	  kill_duplicate_offers() remove the reference in cc_core_instances
	  outside of the container lock. JIRA AST-566 JIRA SWP-3469
	  ........

2011-05-16 18:21 +0000 [r319212]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 319204 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r319204 | twilson | 2011-05-16 13:17:43 -0500
	  (Mon, 16 May 2011) | 11 lines Merged revisions 319202 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r319202 | twilson | 2011-05-16 11:00:21 -0700 (Mon, 16 May 2011)
	  | 4 lines Unlink a peer from peers_by_ip when expiring a
	  registration Review: https://reviewboard.asterisk.org/r/1218/
	  ........ ................

2011-05-16 15:58 +0000 [r319146]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 319145 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r319145 | dvossel | 2011-05-16 10:57:26 -0500
	  (Mon, 16 May 2011) | 9 lines Merged revisions 319144 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r319144 | dvossel | 2011-05-16 10:56:16 -0500 (Mon, 16
	  May 2011) | 2 lines Fixes issue with peer ref-counting during
	  handle_request_subscribe. (closes issue #19293) Reported by:
	  irroot ........ ................

2011-05-16 15:54 +0000 [r319143]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 319142 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r319142 | mnicholson | 2011-05-16 10:53:26 -0500 (Mon, 16 May
	  2011) | 8 lines Make sure tcptls_session exists before
	  dereferencing it. (closes issue #19192) Reported by: stknob
	  Patches: 10-tcptls-unreachable-peer-segfault.patch uploaded by
	  Chainsaw (license 723) Tested by: vois, Chainsaw ........

2011-05-16 14:56 +0000 [r319087]  Gregory Nietsky <gregory@distrotech.co.za>

	* channels/chan_sip.c, res/res_fax.c, CHANGES,
	  channels/sip/include/sip.h: When a error in T.38 negotiation
	  happens or its rejected on a channel the state of the channel
	  reverts to unknown this should be rejected. this is important for
	  negotiating T.38 gateway see #13405 This patch adds a option
	  T38_REJECTED that behaves as T38_DISABLED except it reports state
	  rejected. Trivial Change to res_fax to honnor UNAVAILABLE and
	  REJECTED states. (closes issue #18889) Reported by: irroot Tested
	  by: irroot, darkbasic, mnicholson Review:
	  https://reviewboard.asterisk.org/r/1115

2011-05-16 14:38 +0000 [r319086]  Paul Belanger <pabelanger@digium.com>

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac,
	  res/res_http_post.c: Merged revisions 319085 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r319085 | pabelanger | 2011-05-16 10:35:21 -0400 (Mon, 16 May
	  2011) | 10 lines Support gmime-2.4 (closes issue #18863) Reported
	  by: tzafrir Patches: gmime-2.4-18.diff uploaded by tzafrir
	  (license 46) Tested by: tzafrir Review:
	  https://reviewboard.asterisk.org/r/1213/ ........

2011-05-16 14:29 +0000 [r319084]  David Vossel <dvossel@digium.com>

	* /, formats/format_wav.c: Merged revisions 319083 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r319083 | dvossel | 2011-05-16 09:26:33 -0500 (Mon, 16
	  May 2011) | 5 lines Fixes Big Endian build issue. (closes issue
	  #19298) Reported by: tzafrir ........

2011-05-15 23:17 +0000 [r319024]  Damien Wedhorn <voip@facts.com.au>

	* channels/chan_skinny.c: Add activatesub and dialandactivate sub.
	  When called, activatesub first cleans up the active sub and then
	  handles the sub passed. dialandactivatesub first sets sub->exten
	  and then calls activatesub. Revise handle_offhook to utilise the
	  callid sent to chan_skinny. Some other minor fixes especially
	  around d->hookstate (which still needs some more work).

2011-05-13 18:10 +0000 [r318918-318922]  Brett Bryant <bbryant@digium.com>

	* main/channel.c, /: Merged revisions 318921 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r318921 | bbryant | 2011-05-13 14:09:34 -0400 (Fri, 13 May 2011)
	  | 8 lines Fixes a segmentation fault in dynamic hints when a
	  channel technology isn't loaded for a hint. (closes issue #18495)
	  Reported by: bertrand Tested by: bertrand ........

	* /, res/res_srtp.c: Merged revisions 318919 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r318919 | bbryant | 2011-05-13 14:04:50 -0400 (Fri, 13 May 2011)
	  | 10 lines This patch fixes an issue with SRTP which makes
	  HOLD/UNHOLD impossible when too much time has passed between
	  sending audio. (closes issue #18206) Reported by: bernhardsi
	  Patches: res_srtp_unhold.patch uploaded by bernhards (license
	  1138) Tested by: bernhards, notthematrix ........

	* /, channels/chan_sip.c: Merged revisions 318917 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r318917 | bbryant | 2011-05-13 13:56:04 -0400 (Fri, 13 May 2011)
	  | 11 lines This patch allows TCP peers into the ast_db where they
	  were previously restricted. (closes issue #18882) Reported by:
	  cmaj Patches:
	  patch-chan_sip-1.8.3-rc2-allow-tcp-peer-store-db-and-readonly-rt-backend.diff.txt
	  uploaded by cmaj (license 830) Tested by: cmaj ........

2011-05-13 16:30 +0000 [r318869]  Richard Mudgett <rmudgett@digium.com>

	* /, main/features.c: Merged revisions 318868 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r318868 | rmudgett | 2011-05-13 11:28:26 -0500 (Fri, 13 May 2011)
	  | 19 lines CDR's are being written immediately on caller hangup.
	  CDR's are being written immediately on caller hangup. The
	  dialplan is not able to modify it in the h exten. The h exten in
	  the initial context is not run before closing CDR's when the
	  bridge is unlinked if a macro is active and does not have an h
	  exten. * Make ast_bridge_call() check for an h exten in the
	  current context and if a macro is active then the initial
	  context. The first h exten found is then run before closing the
	  CDR. (closes issue #18212) Reported by: leearcher Patches:
	  issue18212_v1.8.patch uploaded by rmudgett (license 664) Tested
	  by: rmudgett Review: https://reviewboard.asterisk.org/r/1206/
	  ........

2011-05-13 08:33 +0000 [r318833]  Damien Wedhorn <voip@facts.com.au>

	* channels/chan_skinny.c: Move exten used for dialing from device
	  to subchannel. There were some issues where if a simple switch
	  was cancelled and a new switch started before the first had timed
	  out where the d->exten would be used for both subchannels. This
	  was bad leading to possible invalid extensions if some digits had
	  been entered in the abandoned simple switch and the second one
	  was completed before the first timed out, or the second would be
	  cancelled because d->exten would be set to nothing on the time
	  out of the first.

2011-05-13 01:55 +0000 [r318785]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/sip/reqresp_parser.c: Merged revisions 318720 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r318720 | mnicholson | 2011-05-12 18:35:51 -0500 (Thu, 12 May
	  2011) | 4 lines Handle ipv6 addresses in the sent-by Via: field.
	  This change fixes a regression in via header parsing and ipv6
	  handling. (closes issue #18951) ........

2011-05-13 01:50 +0000 [r318784]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/sig_pri.c: Merged revisions 318783 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r318783 | rmudgett | 2011-05-12 20:47:05 -0500 (Thu, 12 May 2011)
	  | 14 lines PRI early media won't ring. And another way to pass
	  early media. Don't indicate that there is inband information
	  present, just assume that the B channel is connected. * Restore
	  clearing the dialing flag Rx squelch unconditionally when a
	  PROCEEDING message comes in. (closes issue #19268) Reported by:
	  tbsky Patches: issue19268_v1.8.patch uploaded by rmudgett
	  (license 664) Tested by: tbsky ........

2011-05-12 22:56 +0000 [r318672]  Alec L Davis <sivad.a@paradise.net.nz>

	* /, channels/chan_sip.c, apps/app_directed_pickup.c,
	  main/features.c, include/asterisk/features.h: Merged revisions
	  318671 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r318671 | alecdavis | 2011-05-13 10:52:08 +1200 (Fri, 13 May
	  2011) | 30 lines Fix directed group pickup feature code *8 with
	  pickupsounds enabled Since 1.6.2, the new pickupsound and
	  pickupfailsound in features.conf cause many issues. 1).
	  chan_sip:handle_request_invite() shouldn't be playing out the
	  fail/success audio, as it has 'netlock' locked. 2). dialplan
	  applications for directed_pickups shouldn't beep. 3). feature
	  code for directed pickup should beep on success/failure if
	  configured. Created a sip_pickup() thread to handle the pickup
	  and playout the audio, spawned from handle_request_invite. Moved
	  app_directed:pickup_do() to features:ast_do_pickup(). Functions
	  below, all now use the new ast_do_pickup() app_directed_pickup.c:
	  pickup_by_channel() pickup_by_exten() pickup_by_mark()
	  pickup_by_part() features.c: ast_pickup_call() (closes issue
	  #18654) Reported by: Docent Patches:
	  ast_do_pickup_1.8_trunk.diff.txt uploaded by alecdavis (license
	  585) Tested by: lmadsen, francesco_r, amilcar, isis242,
	  alecdavis, irroot, rymkus, loloski, rmudgett Review:
	  https://reviewboard.asterisk.org/r/1185/ ........

2011-05-12 20:44 +0000 [r318600-318635]  Damien Wedhorn <voip@facts.com.au>

	* channels/chan_skinny.c: Consolidate setsubstate_* into
	  setsubstate and use a switch. Consolidate the functions and add
	  some debugging info. Allows to be able to set a substate without
	  explicitly knowing what the state is.

	* channels/chan_skinny.c: Add setsubstate_onhook. Add the
	  setsubstate_onhook to complete the initial substate handling
	  procedures. Added dumpsub(sub, forcehangup) which is the common
	  way of calling setsubstate_onhook. Dumpsub attempts to activate
	  another sub after setting the current one onhook.

2011-05-11 18:52 +0000 [r318551-318552]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 318550 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r318550 | twilson | 2011-05-11 13:47:33 -0500 (Wed, 11 May 2011)
	  | 2 lines Comment out the REF_DEBUG that slipped in during
	  debugging ........

	* /, channels/chan_sip.c: Merged revisions 318549 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r318549 | twilson | 2011-05-11 13:39:48 -0500
	  (Wed, 11 May 2011) | 27 lines Merged revisions 318548 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r318548 | twilson | 2011-05-11 12:15:39 -0500 (Wed, 11 May 2011)
	  | 19 lines Clean up several chan_sip reference leaks Several
	  situations in the code could lead to peers or sip_pvt references
	  being leaked. This would cause RTP ports to never be destroyed
	  (leading to exhaustion of all available RTP ports) and memory
	  leaks. The original patch for this issue from rgagnon was the
	  result of an obscene amount of testing and hard work, for which I
	  am very grateful. I did some cleanup and added a few additional
	  refcount fixes that I found. (closes issue #17255) Reported by:
	  kvveltho Patches: tag-1.6.2.17-r309252-sip-dos-mem-leak-fix.diff
	  uploaded by rgagnon (license 1202) Tested by: rgagnon, twilson,
	  wdoekes, loloski Review: https://reviewboard.asterisk.org/r/1101/
	  Review: https://reviewboard.asterisk.org/r/1207/ Review:
	  https://reviewboard.asterisk.org/r/1210/ ........
	  ................

2011-05-10 23:42 +0000 [r318500]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/sig_pri.c, channels/sig_ss7.c: Merged revisions
	  318499 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r318499 | rmudgett | 2011-05-10 18:41:08 -0500 (Tue, 10 May 2011)
	  | 15 lines Unable to pickup DAHDI/PRI call because call state is
	  reported as DIALING. The channel state is not updated to RINGING
	  when an ALERTING message is received. Regression caused when
	  sig_pri.c (also sig_ss7.c) extracted from chan_dahdi.c. * Added
	  missing channel state update to RINGING when the
	  AST_CONTROL_RINGING frame is queued for ISDN and SS7. (closes
	  issue #19257) Reported by: alecdavis Patches:
	  issue19257_v1.8_v2.patch uploaded by rmudgett (license 664)
	  Tested by: alecdavis, rmudgett ........

2011-05-10 15:16 +0000 [r318437]  Russell Bryant <russell@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 318436 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r318436 | russell | 2011-05-10 10:13:16 -0500 (Tue, 10
	  May 2011) | 2 lines chan_iax2: change LOG_NOTICE to LOG_DEBUG in
	  iax2_read(). ........

2011-05-10 00:22 +0000 [r318400]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 318337 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r318337 | twilson | 2011-05-09 15:23:15 -0500
	  (Mon, 09 May 2011) | 18 lines Merged revisions 318331 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r318331 | twilson | 2011-05-09 15:04:41 -0500 (Mon, 09 May 2011)
	  | 12 lines Don't offer video to directmedia callee unless caller
	  offered it as well Make sure that when directmedia is enabled,
	  that video is not offered to the callee even if it supports it.
	  p->vrtp will not exist since the caller didn't offer video.
	  (closes issue #19195) Reported by: one47 Patches:
	  sip_cant_add_video_rtp uploaded by one47 (license 23) ........
	  ................

2011-05-09 23:16 +0000 [r318283-318352]  Richard Mudgett <rmudgett@digium.com>

	* /, res/Makefile, res/res_features.exports.in (removed): Merged
	  revisions 318351 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r318351 | rmudgett | 2011-05-09 18:15:32 -0500 (Mon, 09 May 2011)
	  | 6 lines Remove references to res_features and its export file.
	  The contents of res/res_features.c was moved to into
	  main/features.c awhile ago. There is no longer any need for the
	  res/Makefile to reference res_features or the res_features linker
	  exports file to exist. ........

	* /, main/features.c: Merged revisions 318282 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r318282 | rmudgett | 2011-05-09 14:07:01 -0500 (Mon, 09 May 2011)
	  | 24 lines Hangup extension executed twice. When a user hangs up
	  a call, in certain circumstances, the hangup extension can end up
	  being executed twice: 1) If a call is bridged and the 'h'
	  extension executes the Hangup application, then the 'h' extension
	  will be executed twice. 2) If a call is bridged within a macro
	  (Dial or Queue), it has its own 'h' extension, the main context
	  also has an 'h' extension, and the macro 'h' extension executes
	  the Hangup application, then both 'h' extensions will be
	  executed. * Revert originally commited fix for #16106 and just
	  set AST_FLAG_BRIDGE_HANGUP_RUN unconditionally in
	  ast_bridge_call(). The bridge code just executed an 'h' extension
	  so the main PBX loop does not need to execute one as well. (issue
	  #16106) Reported by: ajohnson (issue #16548) Reported by: hajekd
	  ........

2011-05-09 17:13 +0000 [r318234]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 318233 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r318233 | dvossel | 2011-05-09 12:09:55 -0500
	  (Mon, 09 May 2011) | 14 lines Merged revisions 318230 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r318230 | dvossel | 2011-05-09 11:51:45 -0500 (Mon, 09 May 2011)
	  | 7 lines Fixes cases where sip_set_rtp_peer can return too early
	  during media path reset. (closes issue #19225) Reported by: one47
	  Patches: sip_set_rtp_peer.patch uploaded by one47 (license 23)
	  ........ ................

2011-05-09 17:00 +0000 [r318232]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/sig_pri.c: Merged revisions 318231 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r318231 | rmudgett | 2011-05-09 11:57:18 -0500
	  (Mon, 09 May 2011) | 41 lines Don't get early media for ISDN on
	  outgoing calls. It looks to be a long-standing misinterpretation
	  of the progress indicator ie values: 1 - Call is not end-to-end
	  ISDN; further call progress information may be available in-band.
	  8 - In-band information or an appropriate pattern is now
	  available. Only value 8 is handled by chan_dahdi/sig_pri. The 1
	  value is not handled as early media probably because the meaning
	  of the second half of it's description was overlooked. * Test to
	  see if either PRI_PROG_CALL_NOT_E2E_ISDN(1) or
	  PRI_PROG_INBAND_AVAILABLE(8) bits are set to open the media path.
	  (closes issue #18868) Reported by: isrl Patches:
	  issue18868_19246_v1.8.patch uploaded by rmudgett (license 664)
	  Tested by: satish_lx .......... No inband progress on
	  PRI_EVENT_RINGING even if inband flag set. My ISDN-PRI provider
	  sends an ALERTING with "Inband information or appropriate pattern
	  now available", but Asterisk only generates and passes the RING
	  to the SIP extension, not the inband message. Unfortunately, the
	  inband message is not a ringback tone but a prompt that says the
	  number is not in service. The SIP extension then hears two rings
	  and the call is hungup which confuses the caller. * Post an
	  AST_CONTROL_PROGRESS as well as opening the media path if inband
	  audio is indicated with an ALERTING message. (closes issue
	  #19246) Reported by: cristiandimache Patches:
	  issue19246_v1.8.patch uploaded by rmudgett (license 664) Tested
	  by: cristiandimache ................

2011-05-09 14:41 +0000 [r318194]  Leif Madsen <lmadsen@digium.com>

	* main/app.c: Increase prepend filename length. (closes issue
	  #19238) Reported by: byronclark Patches:
	  increase_prepend_filename_length.patch uploaded by byronclark
	  (license 1200)

2011-05-09 14:37 +0000 [r318162-318193]  Jonathan Rose <jrose@digium.com>

	* main/features.c: Minor change to 318141 to improve parsing
	  behavior.

	* /, configs/features.conf.sample: Merged revisions 318148 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r318148 | jrose | 2011-05-09 09:18:14 -0500 (Mon, 09 May 2011) |
	  4 lines Documenting an observed behavior of features in
	  features.conf. Since parkinglots use an integer for the
	  parkinglot extensions, leading zeros specified in the
	  configuration file are ignored. ........

2011-05-09 14:11 +0000 [r318143]  Matthew Nicholson <mnicholson@digium.com>

	* main/channel.c, /: Merged revisions 318142 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r318142 | mnicholson | 2011-05-09 09:09:38 -0500 (Mon, 09 May
	  2011) | 9 lines Make indicate/control frames WRITE events on
	  framehooks. Also, if a framehook returns a non-control frame,
	  don't forward it to the channel. (closes issue #19251) Reported
	  by: irroot Patches: (modified) framehook_indicate.patch2 uploaded
	  by irroot (license 52) Tested by: irroot ........

2011-05-09 13:56 +0000 [r318141]  Jonathan Rose <jrose@digium.com>

	* main/features.c, CHANGES: Allows ParkedCall application to
	  specify a parkinglot. When invoking the app parkedcall, the
	  argument can now include '@parkinglot' after the extension.
	  (closes issue #18777) Reported by: cartama Patches: 0018777.diff
	  uploaded by cartama (license 1157) Review:
	  https://reviewboard.asterisk.org/r/1209/

2011-05-09 07:40 +0000 [r318106]  Damien Wedhorn <voip@facts.com.au>

	* channels/chan_skinny.c: Add setsubstate_callwait. If a call is
	  made to a line that already has a call and the device is offhook
	  (ie activeish call), the call is set to CALLWAIT rather than
	  RINGIN.

2011-05-07 23:36 +0000 [r318056-318058]  Russell Bryant <russell@digium.com>

	* res/res_config_curl.c, /: Merged revisions 318057 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r318057 | russell | 2011-05-07 18:35:37 -0500 (Sat, 07
	  May 2011) | 8 lines res_config_curl: fix a crash with static
	  realtime. (closes issue #18413) Reported by: jmls Patches:
	  20101202__issue18413.diff.txt uploaded by tilghman (license 14)
	  Tested by: jmls ........

	* /, channels/chan_iax2.c: Merged revisions 318055 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r318055 | russell | 2011-05-07 18:24:18 -0500 (Sat, 07
	  May 2011) | 7 lines chan_iax2: Don't overwrite port found with an
	  SRV lookup. (closes issue #17291) Reported by: jcovert Patches:
	  chan_iax2.c.1.8.3-srvlookup-corrected.patch uploaded by jcovert
	  (license 551) ........

2011-05-06 23:07 +0000 [r317996-318019]  Damien Wedhorn <voip@facts.com.au>

	* channels/chan_skinny.c: Only allow voicemail if substate is
	  OFFHOOK or no channel active (UNSET). (closes issue #17901)
	  Reported by: salecha

	* channels/chan_skinny.c: Rename sub->parent to sub->line. Improve
	  readability of code, eg, (sub->parent == d->activeline) becomes
	  (sub->line == d->activeline).

	* channels/chan_skinny.c: Move the hookstate from line to device.
	  Long time coming, finally moving the hookstate from line to
	  device. This may fix some issues where a device has multiple
	  lines. Previously we had to run through all lines on a device to
	  see if it was actually onhook or not.

2011-05-06 21:49 +0000 [r317968-317970]  Russell Bryant <russell@digium.com>

	* /, apps/app_meetme.c: Merged revisions 317969 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r317969 | russell | 2011-05-06 16:49:01 -0500 (Fri, 06 May 2011)
	  | 10 lines Use the right variable to print the time in a debug
	  message. The original patch also increased some buffer sizes, but
	  that was already done in this version. (closes issue #17034)
	  Reported by: sysreq Patches: asterisk-issue-17034.patch uploaded
	  by sysreq (license 1009) ........

	* /, apps/app_meetme.c: Merged revisions 317967 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r317967 | russell | 2011-05-06 16:38:54 -0500 (Fri, 06 May 2011)
	  | 2 lines Fix some more "set but unused" compiler warnings.
	  ........

2011-05-06 21:10 +0000 [r317920]  David Vossel <dvossel@digium.com>

	* res/res_rtp_asterisk.c, /: Merged revisions 317918 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r317918 | dvossel | 2011-05-06 16:06:55 -0500 (Fri, 06
	  May 2011) | 7 lines Fixes missing colon from To/From headers in
	  RTCP manager events. (closes issue #18221) Reported by:
	  clegall_proformatique Patches: 18221_1.patch uploaded by ebroad
	  (license 878) ........

2011-05-06 21:07 +0000 [r317843-317919]  Russell Bryant <russell@digium.com>

	* main/pbx.c, /: Merged revisions 317917 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r317917 | russell | 2011-05-06 16:06:33 -0500 (Fri, 06 May 2011)
	  | 7 lines Fix calculation of free RAM to make minmemfree option
	  work. (closes issue #17124) Reported by: loic Patches: pbx_c.diff
	  uploaded by loic (license 1020) ........

	* contrib/scripts/import-cdr-csv-mysql.pl (added): Add a cdr_csv to
	  MySQL import script to contrib/scripts. (closes issue #17036)
	  Reported by: precisenetworks Patches: import-cdr-csv-mysql.pl
	  uploaded by precisenetworks (license 1010)

	* apps/app_userevent.c, CHANGES: Add the Uniqueid header to
	  Userevent. (closes issue #16962) Reported by: jlpedrosa Patches:
	  patch.diff uploaded by jlpedrosa (license 1002)

	* /, channels/chan_sip.c: Merged revisions 317867 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r317867 | russell | 2011-05-06 15:01:16 -0500 (Fri, 06 May 2011)
	  | 10 lines chan_sip: Destroy variables on a sip_pvt before
	  copying vars from the sip_peer. Don't duplicate variables on the
	  sip_pvt. Just reset the variable list each time. (closes issue
	  #19202) Reported by: wdoekes Patches:
	  issue19202_destroy_challenged_invite_chanvars.patch uploaded by
	  wdoekes (license 717) ........

	* /, channels/chan_sip.c: Merged revisions 317865 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r317865 | russell | 2011-05-06 14:46:49 -0500 (Fri, 06 May 2011)
	  | 11 lines chan_sip: fix a deadlock in check_rtp_timeout. Don't
	  block doing silly deadlock avoidance. Just return and try again
	  later. The funciton gets called often enough that it's fine.
	  Also, this change was already made in trunk. (closes issue
	  #18791) Reported by: irroot Patches: chan_sip.rtptimeout.patch
	  uploaded by irroot (license 52) ........

	* addons/app_mysql.c, /: Merged revisions 317837 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r317837 | russell | 2011-05-06 14:24:11 -0500 (Fri, 06 May 2011)
	  | 11 lines Fix a crash in the MySQL() application. This code was
	  not handling channel datastores safely. The channel must be
	  locked. (closes issue #17964) Reported by: wuwu Patches:
	  issue17964_addon_1.6.2_svn.patch uploaded by seanbright (license
	  71) Tested by: wuwu ........

2011-05-06 19:23 +0000 [r317818-317833]  Matthew Nicholson <mnicholson@digium.com>

	* CHANGES: Updated CHANGES to note the autoservice changes for
	  pbx_lua

	* configs/extensions.lua.sample: Updated the sample pbx_lua config
	  file to reflect autoservice changes.

2011-05-06 19:15 +0000 [r317807]  Russell Bryant <russell@digium.com>

	* /, contrib/realtime/mysql/sipfriends.sql: Merged revisions 317805
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r317805 | russell | 2011-05-06 14:14:39 -0500 (Fri, 06 May 2011)
	  | 7 lines Add a new sipfriends.sql for MySQL that has more fields
	  in it. (closes issue #16399) Reported by: pabelanger Patches:
	  sipfriends.sql.v3 uploaded by pabelanger (license 224) ........

2011-05-06 19:14 +0000 [r317721-317806]  Matthew Nicholson <mnicholson@digium.com>

	* pbx/pbx_lua.c, UPGRADE.txt: Default to starting an autoservice in
	  pbx_lua. The autoservice is automatically stopped when
	  applications are executed, so this shouldn't cause any problems.

	* pbx/pbx_lua.c, UPGRADE.txt: Make pbx_lua handle managing the
	  autoservice better. Make autoservice_start() and
	  autoservice_stop() return nothing. Also check if the autoservice
	  flag is set before starting or stopping the autoservice and stop
	  and start the autoservice when returning control to and getting
	  control from the pbx engine.

	* UPGRADE.txt: Added note about changes in pbx_lua's behavior when
	  applications do dialplan jumps

	* CHANGES: Use two spaces after periods for the recent pbx_lua
	  change descriptions

	* CHANGES: Updated CHANGES for hints support in pbx_lua

	* pbx/pbx_lua.c, CHANGES: Detect Goto in pbx_lua. This code will
	  actually detect any dialplan jump from any application that calls
	  ast_explicit_goto(). This change is only being done in trunk as
	  it may change the way some dialplans execute.

2011-05-06 16:23 +0000 [r317671]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/chan_sip.c: Merged revisions 317670 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r317670 | rmudgett | 2011-05-06 11:19:18 -0500 (Fri, 06 May 2011)
	  | 22 lines Fix SIP connected line updates. This patch fixes a
	  couple SIP connected line update problems: 1) The connected line
	  needs to be updated when the initial INVITE is sent if there is a
	  peer callerid configured. Previously, the connected line
	  information did not get reported until the call was connected so
	  SIP could not report connected line information in ringing or
	  progress messages. 2) The connected line should not be updated on
	  initial connect if there is no connected line information.
	  Previously, all it did was wipe out any default preset
	  CONNECTEDLINE information set by the dialplan with empty strings.
	  (closes issue #18367) Reported by: GeorgeKonopacki Patches:
	  issue18367_v1.8.patch uploaded by rmudgett (license 664) Tested
	  by: rmudgett Review: https://reviewboard.asterisk.org/r/1199/
	  ........

2011-05-06 08:21 +0000 [r317596]  Terry Wilson <twilson@digium.com>

	* /, apps/app_queue.c: Merged revisions 317584 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r317584 | twilson | 2011-05-06 01:18:53 -0700
	  (Fri, 06 May 2011) | 20 lines Merged revisions 317575 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r317575 | twilson | 2011-05-06 01:04:17 -0700
	  (Fri, 06 May 2011) | 13 lines Merged revisions 317574 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r317574 | twilson | 2011-05-06 00:55:21 -0700 (Fri, 06 May 2011)
	  | 6 lines Re-fix queue round-robin This part of the change for
	  r315596 was incorrect. No bridge occurs when doing a roundrobin
	  dial and no one answers, so this code shouldn't have been
	  removed. ........ ................ ................

2011-05-05 23:47 +0000 [r317426-317531]  Russell Bryant <russell@digium.com>

	* Makefile, /: Merged revisions 317530 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r317530 | russell | 2011-05-05 18:46:54 -0500 (Thu, 05 May 2011)
	  | 10 lines If the configure script runs, force a rebuild of
	  menuselect-tree. Some contents in the menuselect tree are
	  dependent on configure script parameters, namely
	  --enable-dev-mode. (closes issue #17219) Reported by: Nick_Lewis
	  Patches: issue_17219.rev1.txt uploaded by russell (license 2)
	  ........

	* /, contrib/realtime/mysql/queue_log.sql,
	  contrib/realtime/mysql/sipfriends.sql: Merged revisions 317486
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r317486 | russell | 2011-05-05 18:15:53 -0500 (Thu, 05 May 2011)
	  | 9 lines Fix some more realtime MySQL schema issues. (closes
	  issue #18537) Reported by: denzs Patches: sipfriends.sql.svndiff
	  uploaded by denzs (license 1182) queue_log.sql.svndiff uploaded
	  by denzs (license 1182) meetme.sql.svndiff uploaded by denzs
	  (license 1182) ........

	* /, contrib/realtime/mysql/meetme.sql,
	  contrib/realtime/mysql/sipfriends.sql: Merged revisions 317484
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r317484 | russell | 2011-05-05 18:12:35 -0500 (Thu, 05 May 2011)
	  | 8 lines Fix some errors in sample MySQL realtime schema files.
	  (closes issue #18915) Reported by: Dovid Patches:
	  sipfriends.patch uploaded by Dovid (license 652) meetme.patch
	  uploaded by Dovid (license 652) ........

	* CHANGES, res/res_calendar.c: Add "calendar show types" CLI
	  command. (closes issue #18246) Reported by: junky Patches:
	  calendar_types.diff uploaded by junky (license 177)

	* cel/cel_pgsql.c, UPGRADE.txt, configs/cel_pgsql.conf.sample,
	  CHANGES: Add CEL extra field to cel_pgsql. (closes issue #18462)
	  Reported by: joscas Patches: bug_18462.diff uploaded by snuffy
	  (license 35) cel_pgsql.conf.sample.issue18462.patch uploaded by
	  joscas (license 1180)

	* /, cdr/cdr_syslog.c: Merged revisions 317480 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r317480 | russell | 2011-05-05 18:00:55 -0500 (Thu, 05 May 2011)
	  | 8 lines Don't lose cdr_syslog config on a reload. (closes issue
	  #18679) Reported by: enegaard Patches:
	  issue18679_seanbright.patch uploaded by seanbright (license 71)
	  Tested by: enegaard ........

	* channels/chan_unistim.c, channels/chan_usbradio.c,
	  channels/chan_dahdi.c, /, channels/chan_sip.c,
	  channels/chan_skinny.c, channels/chan_h323.c,
	  channels/chan_alsa.c, channels/chan_console.c,
	  channels/chan_oss.c, channels/chan_mgcp.c,
	  channels/misdn_config.c: Merged revisions 317478 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r317478 | russell | 2011-05-05 17:53:45 -0500 (Thu, 05
	  May 2011) | 12 lines Fix some consistency issues with
	  jitterbuffer config. Store the defaults noted in the sample
	  config files in the jitterbuffer config data structure. This
	  makes the CLI commands that output these settings show the right
	  thing. Also only show the settings that are relevant in the
	  settings CLI commands, based on which jitterbuffer is selected
	  and whether it's enabled. (closes issue #19083) Reported by:
	  rgagnon Patches: issue-19083-trunk-r313139.diff uploaded by
	  rgagnon (license 1202) ........

	* /, pbx/pbx_lua.c: Merged revisions 317476 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r317476 | russell | 2011-05-05 17:47:57 -0500 (Thu, 05 May 2011)
	  | 8 lines Add a datastore fixup to fix a pbx_lua crash. (closes
	  issue #19055) Reported by: jamhed Patches:
	  lua_datastore_fixup1.diff uploaded by mnicholson (license 96)
	  Tested by: mnicholson, jamhed ........

	* cel/cel_pgsql.c, channels/chan_jingle.c,
	  channels/sip/sdp_crypto.c, res/res_config_odbc.c, /,
	  channels/chan_sip.c, res/res_crypto.c, pbx/pbx_lua.c,
	  channels/iax2-provision.c, pbx/pbx_dundi.c,
	  channels/chan_console.c, cdr/cdr_radius.c, channels/chan_iax2.c,
	  res/res_jabber.c, res/res_config_sqlite.c: Merged revisions
	  317474 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r317474 | russell | 2011-05-05 17:36:33 -0500 (Thu, 05 May 2011)
	  | 2 lines Fix more "set but unused" warnings. ........

	* /, main/dsp.c: Merged revisions 317429 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r317429 | russell | 2011-05-05 17:11:19 -0500 (Thu, 05 May 2011)
	  | 5 lines Only display inband DTMF warning if inband DTMF
	  detection is enabled. (closes issue #18901) Reported by: irroot
	  ........

	* /, apps/app_rpt.c: Merged revisions 317427 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r317427 | russell | 2011-05-05 16:58:45 -0500 (Thu, 05 May 2011)
	  | 7 lines Fix potential memory leak, and use of uninitialized
	  memory. (closes issue #16476) Reported by: junky Patches:
	  M16476.diff uploaded by junky (license 177) ........

	* main/manager.c, /: Merged revisions 317425 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r317425 | russell | 2011-05-05 16:53:13 -0500 (Thu, 05 May 2011)
	  | 7 lines Add missing ActioID handling to Events action. (closes
	  issue #18949) Reported by: edersohe Patches: 0018949.patch
	  uploaded by edersohe (license 1228) ........

2011-05-05 21:20 +0000 [r317395]  Sean Bright <sean@malleable.com>

	* main/asterisk.c: Add some new editline bindings by default, and
	  allow for user specified configuration. I excluded the part of
	  this patch that used the HOME environment variable since the
	  built-in editline library goes to great lengths to disallow that.
	  Instead only settings the EDITRC environment variable will use a
	  user specified file. Also, the default environment variable use
	  to determine the edit more is AST_EDITMODE instead of AST_EDITOR
	  (although the latter is still supported). (closes issue #15929)
	  Reported by: kkm Patches: astcli-editrc-v2.diff uploaded by kkm
	  (license 888) 015929-astcli-editrc-trunk.240324.diff uploaded by
	  kkm (license 888) Tested by: seanbright

2011-05-05 20:46 +0000 [r317382]  Damien Wedhorn <voip@facts.com.au>

	* channels/chan_skinny.c: Move hold stuff to the setsubstate
	  arrangement. skinny_hold moved to setsubstate_hold and
	  skinny_unhold integrated into setsubstate_connected. Removed
	  sub->onhold and replaced with SUBSTATE_HOLD. Also fixed inbound
	  call answering by queueing an AST_CONTROL_ANSWER on answering a
	  SUBSTATE_RINGIN sub (was a typo).

2011-05-05 20:27 +0000 [r317377]  Sean Bright <sean@malleable.com>

	* /, addons/res_config_mysql.c: Merged revisions 317370 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r317370 | seanbright | 2011-05-05 16:25:52 -0400 (Thu, 05 May
	  2011) | 10 lines Don't duplicate our data on the stack and just
	  use the MYSQL_ROW directly. With large result sets we were
	  blowing out the stack. (closes issue #19090) Reported by:
	  mickecarlsson Patches: issue19090_trunk_svn.patch uploaded by
	  seanbright (license 71) Tested by: mickecarlsson ........

2011-05-05 19:56 +0000 [r317337]  Russell Bryant <russell@digium.com>

	* /, apps/app_queue.c: Merged revisions 317336 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r317336 | russell | 2011-05-05 14:55:58 -0500 (Thu, 05 May 2011)
	  | 7 lines Increase buffer size to be PATH_MAX for a path. (closes
	  issue #19239) Reported by: byronclark Patches:
	  queue_announce_length.patch uploaded by byronclark (license 1200)
	  ........

2011-05-05 19:33 +0000 [r317334]  Jonathan Rose <jrose@digium.com>

	* /, channels/chan_sip.c: Merged revisions 317283 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r317283 | jrose | 2011-05-05 14:09:13 -0500 (Thu, 05 May 2011) |
	  10 lines Resolves a deadlock that occurs during sip_new This is
	  based on an uncommitted patch by jpeeler for the issue. Instead
	  of relocking and then unlocking the channel though, we keep the
	  lock on the channel until we are finished doing what we need to
	  the channel. (closes issue #18441) Reported by: Alric ........

2011-05-05 18:46 +0000 [r317282]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 317281 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r317281 | russell | 2011-05-05 13:39:44 -0500
	  (Thu, 05 May 2011) | 29 lines Merged revisions 317255 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r317255 | russell | 2011-05-05 13:29:53 -0500
	  (Thu, 05 May 2011) | 22 lines Merged revisions 317211 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r317211 | russell | 2011-05-05 13:20:29 -0500 (Thu, 05 May 2011)
	  | 15 lines chan_sip: fix broken realtime peer count, fix memory
	  leak This patch addresses two bugs in chan_sip: 1) The count of
	  realtime peers and users was off. The increment checked the value
	  of the caching option, while the decrement did not. 2) Add a
	  missing regfree() for a regex. (closes issue #19108) Reported by:
	  vrban Patches: missing_regfree.patch uploaded by vrban (license
	  756) sip_object_counter.patch uploaded by vrban (license 756)
	  ........ ................ ................

2011-05-05 18:09 +0000 [r317198]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 317196 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r317196 | mnicholson | 2011-05-05 13:02:52 -0500 (Thu, 05 May
	  2011) | 8 lines Set SO_KEEPALIVE on SIP TCP sockets so that they
	  eventually go away when a peer abruptly disappears. This mostly
	  occurs after a successful registration. (closes issue #17544)
	  Reported by: marcelloceschia Patches: (modified) tcptls.patch
	  uploaded by st (license 907) ........

2011-05-05 18:08 +0000 [r317197]  David Vossel <dvossel@digium.com>

	* bridges/bridge_softmix.c, funcs/func_jitterbuffer.c: Fixes
	  reliability issues with func_jitterbuffer's usage in the new
	  ConfBridge application.

2011-05-05 15:06 +0000 [r317059-317105]  Leif Madsen <lmadsen@digium.com>

	* /, contrib/scripts/safe_asterisk: Merged revisions 317104 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r317104 | lmadsen | 2011-05-05 11:04:24 -0400
	  (Thu, 05 May 2011) | 15 lines Merged revisions 317102 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r317102 | lmadsen | 2011-05-05 10:54:46 -0400 (Thu, 05 May 2011)
	  | 8 lines Disable console colourization inside safe_asterisk
	  checks. (closes issue #19213) Reported by: lefoyer Patches:
	  issue19213_strip_color_in_safe_asterisk-svn.patch uploaded by
	  wdoekes (license 717) Tested by: wdoekes, lefoyer ........
	  ................

	* Makefile, configs/cel.conf.sample, /: Merged revisions 317058 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r317058 | lmadsen | 2011-05-05 08:27:56 -0400 (Thu, 05 May 2011)
	  | 7 lines Remove unused directory and clear up some
	  documentation. (closes issue #19193) Reported by: bchia Patches:
	  cel-csv.diff uploaded by lathama (license 1028) Tested by:
	  lathama, Marquis42 ........

2011-05-05 09:03 +0000 [r316994-317026]  Damien Wedhorn <voip@facts.com.au>

	* channels/chan_skinny.c: Add setsubstate_congestion and
	  setsubstate_progress. Move handling of both state handling from
	  skinny_indicate to it's own sub. Also, modified behaviour to not
	  hangup the sub and let the dialplan have a chance in doing what
	  it wants for congestion. Added various states to substate2str and
	  added these states where applicable for other set_substate_
	  procs.

	* channels/chan_skinny.c: Add setsubstate_busy. Move handling of
	  setting busy state from skinny_indicate to it's own sub. Also,
	  modified behaviour to not hangup the sub and let the dialplan
	  have a chance in doing what it wants (eg busy(10); hangup() in
	  the dialplan now gives a busy indication for 10 secs and then
	  hangs up.

2011-05-05 07:09 +0000 [r316962]  Stefan Schmidt <sst@sil.at>

	* main/astobj2.c: Adding the Move to Front Hash functionality
	  Moving a found object to the front of its bucket to reduce the
	  necessary traversal steps to find an object. This change improves
	  the search time on large system with many data or in link lists.
	  (closes issue #19233) Reported by: schmidts Review:
	  https://reviewboard.asterisk.org/r/1201/

2011-05-05 02:34 +0000 [r316920]  Sean Bright <sean@malleable.com>

	* main/manager.c, /, main/http.c, main/utils.c: Merged revisions
	  316917-316919 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r316917 | seanbright | 2011-05-04 22:23:28 -0400 (Wed, 04 May
	  2011) | 5 lines Make sure that tcptls_session is properly
	  initialized. (issue #18598) Reported by: ksn ........ r316918 |
	  seanbright | 2011-05-04 22:25:20 -0400 (Wed, 04 May 2011) | 5
	  lines Look at the correct buffer for our digest info instead of
	  an empty one. (issue #18598) Reported by: ksn ........ r316919 |
	  seanbright | 2011-05-04 22:30:45 -0400 (Wed, 04 May 2011) | 10
	  lines Use the correct HTTP method when generating our digest,
	  otherwise we always fail. When calculating the 'A2' portion of
	  our digest for verification, we need the HTTP method that is
	  currently in use. Unfortunately our mapping function was
	  incorrect, resulting in invalid hashes being generated and, in
	  turn, failures in authentication. (closes issue #18598) Reported
	  by: ksn ........

2011-05-04 21:44 +0000 [r316885]  Damien Wedhorn <voip@facts.com.au>

	* channels/chan_skinny.c: Add setsubstate_ringout (equivalent to
	  AST_STATE ringing). Renamed previous setsubstate_ringout to
	  setsubstate_dialing for a state when attempting to dial a number,
	  substate ringout now for when core has indicated that the channel
	  is actually ringing on the other end. Also added substate2str for
	  debugging purposes.

2011-05-04 18:57 +0000 [r316832]  Richard Mudgett <rmudgett@digium.com>

	* /, apps/app_meetme.c: Merged revisions 316831 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r316831 | rmudgett | 2011-05-04 13:51:40 -0500 (Wed, 04 May 2011)
	  | 9 lines Wait for leader with Music On Hold allows crosstalk
	  between participants. Parenthesis in the wrong position.
	  Regression from issue #14365 when expanding conference flags to
	  use 64 bits. (closes issue #18418) Reported by: MrHanMan Tested
	  by: rmudgett ........

2011-05-04 16:42 +0000 [r316798]  David Vossel <dvossel@digium.com>

	* channels/chan_sip.c, CHANGES: Reverts rev 316218 as it breaks
	  parsing the [general] section of sip.conf. The functionality this
	  patch attempts to achieve should already be possible using
	  [general](+) in the config file. issue #17957

2011-05-04 16:17 +0000 [r316664-316711]  Sean Bright <sean@malleable.com>

	* /, apps/app_voicemail.c: Merged revisions 316709 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r316709 | seanbright | 2011-05-04 12:15:32 -0400
	  (Wed, 04 May 2011) | 22 lines Merged revisions 316708 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r316708 | seanbright | 2011-05-04 12:10:59 -0400
	  (Wed, 04 May 2011) | 15 lines Merged revisions 316707 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r316707 | seanbright | 2011-05-04 12:08:50 -0400 (Wed, 04 May
	  2011) | 8 lines If sox fails when processing a voicemail, don't
	  delete the original file. (closes issue #18111) Reported by:
	  sysreq Patches: issue18111_trunk.patch uploaded by seanbright
	  (license 71) Tested by: seanbright ........ ................
	  ................

	* main/manager.c, /: Merged revisions 316663 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r316663 | seanbright | 2011-05-04 10:35:05 -0400 (Wed, 04 May
	  2011) | 8 lines Only return a single error via AMI when
	  requesting a forbidden action. (closes issue #19216) Reported by:
	  oej Patches: issue19216-1.8-r316204.patch uploaded by seanbright
	  (license 71) Tested by: seanbright ........

2011-05-04 14:26 +0000 [r316618-316657]  David Vossel <dvossel@digium.com>

	* /, apps/app_chanspy.c: Merged revisions 316650 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r316650 | dvossel | 2011-05-04 09:25:03 -0500
	  (Wed, 04 May 2011) | 15 lines Merged revisions 316644 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r316644 | dvossel | 2011-05-04 09:23:39 -0500 (Wed, 04 May 2011)
	  | 9 lines Fixes one-way-audio when chanspy activated with the 'o'
	  option (closes issue #18382) Reported by: jkister Patches:
	  0001-Bugfix-18382-one-way-audio-when-chanspy-activated.patch.txt
	  uploaded by malin (license ) Tested by: firstsip, Greenlightcrm,
	  malin, wdoekes, boroda, dvossel ........ ................

	* /, channels/chan_sip.c: Merged revisions 316617 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r316617 | dvossel | 2011-05-04 08:44:41 -0500
	  (Wed, 04 May 2011) | 19 lines Merged revisions 316616 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r316616 | dvossel | 2011-05-04 08:40:41 -0500 (Wed, 04 May 2011)
	  | 12 lines Fixes session-timers=refuse not being enforced for
	  *caller* During handle_request_invite, the session timer mode was
	  retrieved from a cached variable. This patch forces a peer lookup
	  of the session timer mode in the case of an incoming invite.
	  (closes issue #18804) Reported by: wdoekes Patches:
	  issue18804_session_timer_refuse_caller.patch uploaded by wdoekes
	  (license 717) issue_18804_v2.diff uploaded by dvossel (license
	  671) ........ ................

2011-05-04 08:25 +0000 [r316552-316584]  Damien Wedhorn <voip@facts.com.au>

	* channels/chan_skinny.c: Add setsubstate_ringin. Added
	  setsubstate_ringin. skinny_call now calls sss_ringin rather than
	  inline. Fixed previous issue so that setsubstate_connected now
	  use SUBSTATE_RINGIN to determine is an AST_CONTROL_ANSWER should
	  be queued.

	* channels/chan_skinny.c: Make skinny_answer use
	  setsubsate_connected. Cosolidated the code so that skinny_answer
	  now uses the setsubstate procedures rather than doing the
	  handling inline.

2011-05-04 07:13 +0000 [r316520]  Tzafrir Cohen <tzafrir.cohen@xorcom.com>

	* autoconf/ast_check_pwlib.m4, /, configure: Merged revisions
	  316193 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r316193 | tzafrir | 2011-05-03 13:57:16 +0300 (◊í', 03 ◊û◊ê◊ô 2011) |
	  8 lines Re-fix bashism in ./configure: s/let/$(( ))/ A
	  forward-port in r278985 accidentally re-introduced issue 17485.
	  Fixing it. Thanks to Jilles Tjoelker for the good report. (closes
	  issue #17485) ........

2011-05-04 07:10 +0000 [r316519]  Damien Wedhorn <voip@facts.com.au>

	* channels/chan_skinny.c: Cleanup skinny callinfo. Cosolidated the
	  working out of the callinfo to be sent into transmit_callinfo.
	  Replaced ambiguous sub->outgoing with calldirection which can be
	  SKINNY_INCOMING or SKINNY_OUTGOING (same value as the skinny
	  protocol).

2011-05-04 02:39 +0000 [r316477]  Sean Bright <sean@malleable.com>

	* /, apps/app_meetme.c: Merged revisions 316476 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r316476 | seanbright | 2011-05-03 22:34:01 -0400
	  (Tue, 03 May 2011) | 17 lines Merged revisions 316475 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r316475 | seanbright | 2011-05-03 22:23:01 -0400 (Tue, 03 May
	  2011) | 10 lines Honor the C option to MeetMe when L is passed.
	  This fixes a case that r304773 and friends missed. (closes issue
	  #17317) Reported by: var Patches: meetme-continue-on-l_16218.diff
	  uploaded by var (license 1227) Tested by: seanbright ........
	  ................

2011-05-04 00:13 +0000 [r316428-316430]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, addons/cdr_mysql.c, addons/res_config_mysql.c: Merged
	  revisions 316429 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r316429 | tilghman | 2011-05-03 19:12:25 -0500 (Tue, 03 May 2011)
	  | 7 lines Escape column names in case they contain illegal
	  characters ('-') or reserved words. (closes issue #19063)
	  Reported by: festr Patches: patch uploaded by festr (license 443)
	  ........

	* channels/chan_sip.c, CHANGES: If multiple [general] contexts
	  occur from sip.conf (usually due to external includes), merge
	  them. The original implementation of this did the merging of all
	  contexts with the same name in the realtime layer, but that
	  implementation severely breaks drivers which use the same context
	  name (e.g. iax.conf, type={peer,user}). Therefore, the
	  implementation needs to do the merging for particular entries
	  only, based upon what contexts would allow that in the channel
	  driver itself. This implementation is for chan_sip only, but
	  others could be added in the future. (closes issue #17957)
	  Reported by: marcelloceschia Patches:
	  chan-sip_parsing-general_branch162.patch uploaded by
	  marcelloceschia (license 1079) Tested by: tilghman

2011-05-03 22:16 +0000 [r316337]  Russell Bryant <russell@digium.com>

	* /, channels/chan_skinny.c, pbx/pbx_dundi.c, channels/chan_mgcp.c:
	  Merged revisions 316336 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r316336 | russell | 2011-05-03 17:13:31 -0500 (Tue, 03 May 2011)
	  | 8 lines Use htons() instead of ntohs() in some places. (closes
	  issue #19200) Reported by: wdoekes Patches:
	  issue19200-trunk.patch uploaded by wdoekes (license 717)
	  issue19200-1.8.x.patch uploaded by wdoekes (license 717) ........

2011-05-03 22:07 +0000 [r316335]  David Vossel <dvossel@digium.com>

	* main/channel.c, /: Merged revisions 316334 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r316334 | dvossel | 2011-05-03 17:05:59 -0500 (Tue, 03 May 2011)
	  | 8 lines Fixes framehook segfault on indicate (closes issue
	  #19215) Reported by: irroot Patches: framehook_indicate.patch
	  uploaded by irroot (license 52) ........

2011-05-03 21:48 +0000 [r316333]  Russell Bryant <russell@digium.com>

	* /, apps/app_minivm.c: Merged revisions 316331 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r316331 | russell | 2011-05-03 16:41:11 -0500 (Tue, 03 May 2011)
	  | 2 lines Resolve another warning. ........

2011-05-03 21:45 +0000 [r316332]  David Vossel <dvossel@digium.com>

	* channels/chan_local.c, /: Merged revisions 316330 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r316330 | dvossel | 2011-05-03 16:37:59 -0500
	  (Tue, 03 May 2011) | 24 lines Merged revisions 316329 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r316329 | dvossel | 2011-05-03 16:29:55 -0500
	  (Tue, 03 May 2011) | 17 lines Merged revisions 316328 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r316328 | dvossel | 2011-05-03 16:27:59 -0500 (Tue, 03 May 2011)
	  | 10 lines Fixes chan_local crashs in local_fixup() Thanks OEJ
	  for tracking down the issue and submitting the patch. (closes
	  issue #19053) Reported by: oej Tested by: oej Review:
	  https://reviewboard.asterisk.org/r/1158/ ........
	  ................ ................

2011-05-03 20:45 +0000 [r316293]  Russell Bryant <russell@digium.com>

	* channels/chan_unistim.c, main/udptl.c, main/fskmodem_float.c,
	  main/rtp_engine.c, /, res/res_musiconhold.c, apps/app_ices.c,
	  apps/app_followme.c, main/config.c, main/channel.c, main/cdr.c,
	  channels/chan_phone.c, funcs/func_enum.c, main/manager.c,
	  channels/chan_skinny.c, apps/app_minivm.c, main/features.c,
	  main/plc.c, res/res_agi.c, apps/app_amd.c, main/pbx.c,
	  res/res_fax.c, formats/format_wav.c, apps/app_festival.c,
	  channels/chan_agent.c, apps/app_originate.c, apps/app_queue.c,
	  codecs/lpc10/dyptrk.c, include/asterisk/linkedlists.h,
	  main/file.c, main/audiohook.c, pbx/pbx_config.c, main/asterisk.c,
	  main/dsp.c, res/res_calendar.c, apps/app_voicemail.c: Merged
	  revisions 316265 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r316265 | russell | 2011-05-03 14:55:49 -0500 (Tue, 03 May 2011)
	  | 5 lines Fix a bunch of compiler warnings generated by gcc
	  4.6.0. Most of these are -Wunused-but-set-variable, but there
	  were a few others mixed in here, as well. ........

2011-05-03 19:22 +0000 [r316240]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, channels/sig_analog.c, /,
	  channels/sig_pri.c: Merged revisions 316224 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r316224 | rmudgett | 2011-05-03 14:18:30 -0500 (Tue, 03 May 2011)
	  | 16 lines The dahdi_hangup() call does not clean up the channel
	  fully. After dahdi_hangup() has supposedly hungup an ISDN channel
	  there is still traffic on the S0-bus because the channel was not
	  cleaned up fully. Shuffled the hangup code to include some
	  missing cleanup. Also fixed some code formatting in the area. I
	  think the primary missing clean up code was the call to
	  tone_zone_play_tone() to turn off any active tones on the
	  channel. (closes issue #19188) Reported by: jg1234 Patches:
	  issue19188_v1.8.patch uploaded by rmudgett (license 664) Tested
	  by: jg1234 ........

2011-05-03 19:00 +0000 [r316216-316218]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 316217 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r316217 | dvossel | 2011-05-03 13:59:06 -0500 (Tue, 03 May 2011)
	  | 9 lines Never put the Require: timer header in an Invite. This
	  has already been discussed and should have been resolved earlier.
	  View revsion 285565's log for more information about why it is
	  important to not put timer in the Require header. (closes issue
	  #18704) Reported by: mfrager ........

	* /, res/res_odbc.c: Merged revisions 316215 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r316215 | dvossel | 2011-05-03 13:49:48 -0500 (Tue, 03 May 2011)
	  | 9 lines Fixes a random crash (NULL reference) in res_odbc.c.
	  (closes issue #19180) Reported by: pruiz Patches: tmp.diff
	  uploaded by pruiz (license 1152) Tested by: pruiz, seanbright
	  ........

2011-05-03 18:23 +0000 [r316213]  Sean Bright <sean@malleable.com>

	* main/manager.c, /: Merged revisions 316206 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r316206 | seanbright | 2011-05-03 14:17:36 -0400 (Tue, 03 May
	  2011) | 8 lines If we aren't interested in events, don't generate
	  the FullyBooted event on AMI login. (closes issue #19089)
	  Reported by: bklang Patches: issue19089-1.8-r316204.patch
	  uploaded by seanbright (license 71) Tested by: seanbright
	  ........

2011-05-02 19:15 +0000 [r316095]  Tilghman Lesher <tilghman@meg.abyt.es>

	* funcs/func_curl.c, /: Merged revisions 316094 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r316094 | tilghman | 2011-05-02 14:09:55 -0500
	  (Mon, 02 May 2011) | 15 lines Merged revisions 316093 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r316093 | tilghman | 2011-05-02 14:04:36 -0500 (Mon, 02 May 2011)
	  | 8 lines More possible crashes based upon invalid inputs.
	  (closes issue #18161) Reported by: wdoekes Patches:
	  20110301__issue18161.diff.txt uploaded by tilghman (license 14)
	  Tested by: wdoekes ........ ................

2011-05-02 15:58 +0000 [r316054]  Paul Belanger <pabelanger@digium.com>

	* apps/app_meetme.c: Formatting change, remove red blobs

2011-04-27 19:15 +0000 [r315895]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/chan_sip.c, channels/sip/reqresp_parser.c: Merged
	  revisions 315894 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r315894 | mnicholson | 2011-04-27 14:14:27 -0500
	  (Wed, 27 Apr 2011) | 28 lines Merged revisions 315893 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r315893 | mnicholson | 2011-04-27 14:03:05 -0500
	  (Wed, 27 Apr 2011) | 21 lines Merged revisions 315891 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r315891 | mnicholson | 2011-04-27 13:57:56 -0500 (Wed, 27 Apr
	  2011) | 14 lines Fix our compliance with RFC 3261 section 18.2.2.
	  This change optimizes the free_via() function and removes some
	  redundant null checking. It also fixes compliance with RFC 3261
	  section 18.2.2 by always using the port specified in the Via
	  header for routing responses (even when maddr is not set). Also
	  the htons() function is now used when setting the port.
	  Additional documentation comments have been added in various
	  places to make the logic in the code clearer. (closes issue
	  #18951) Reported by: jmls Patches:
	  issue18951_set_proper_port_from_via.patch uploaded by wdoekes
	  (license 717) (modified) ........ ................
	  ................

2011-04-27 17:51 +0000 [r315855-315856]  David Vossel <dvossel@digium.com>

	* apps/app_confbridge.c: Makes the new ConfBridge join and leave
	  sounds be used by default rather than beep and beeperr.

	* main/channel.c: Clears exception flag during ast_read when
	  func_jitterbuffer is enabled

2011-04-27 15:56 +0000 [r315811]  Russell Bryant <russell@digium.com>

	* /, main/asterisk.c: Merged revisions 315810 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r315810 | russell | 2011-04-27 10:55:48 -0500 (Wed, 27 Apr 2011)
	  | 2 lines Set the copyright year to 2011 in the startup message.
	  ........

2011-04-27 12:37 +0000 [r315766]  Leif Madsen <lmadsen@digium.com>

	* /, sounds/sounds.xml, sounds/Makefile: Merged revisions 315765
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r315765 | lmadsen | 2011-04-27 07:36:17 -0500 (Wed, 27 Apr 2011)
	  | 4 lines Enable Russian core sound selection in menuselect.
	  (closes issue #18724) Reported by: pbxware ........

2011-04-26 23:10 +0000 [r315670-315675]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 315673 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r315673 | twilson | 2011-04-26 15:56:19 -0700
	  (Tue, 26 Apr 2011) | 25 lines Merged revisions 315672 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r315672 | twilson | 2011-04-26 15:52:25 -0700
	  (Tue, 26 Apr 2011) | 18 lines Merged revisions 315671 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r315671 | twilson | 2011-04-26 15:47:56 -0700 (Tue, 26 Apr 2011)
	  | 11 lines Make sure unregistering a peer unlinks it from the
	  peer container Instead of mostly copying the code from
	  expire_register, just use the function that "does the right
	  thing". (closes issue #16033) Reported by: kkm Patches:
	  016033-tilgman-fixed-refcount.diff uploaded by kkm (license 888)
	  Tested by: kkm, tilghman, twilson ........ ................
	  ................

	* channels/chan_sip.c: Make sure to create the caps structure for
	  autocreated peers Because crashing is bad.

	* apps/app_dial.c, main/features.c, apps/app_queue.c: Merged
	  revisions 315644 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r315644 | twilson | 2011-04-26 14:39:01 -0700
	  (Tue, 26 Apr 2011) | 32 lines Merged revisions 315643 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r315643 | twilson | 2011-04-26 14:27:44 -0700
	  (Tue, 26 Apr 2011) | 25 lines Merged revisions 315596 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r315596 | twilson | 2011-04-26 14:16:10 -0700 (Tue, 26 Apr 2011)
	  | 18 lines Allow transfer loops without allowing forwarding loops
	  We try to avoid the situation where two phones may be forwarded
	  to each other causing an infinite loop by storing each dialed
	  interface in a channel datastore and checking the list before
	  dialing out. This works, but currently breaks situations like A
	  calls B, A transfers B to C, B transfers C to A, and A transfers
	  C to B. Since human interaction is happening here and not an
	  automated forwarding loop, it should be allowed. This patch
	  removes the dialed_interfaces datastore when a call is bridged (a
	  suggestion from the brilliant mmichelson). If a call is being
	  bridged, it should be safe to assume that we aren't stuck in a
	  loop. Since we are now handling this is the bridge code, the
	  previous attempts at handling it in app_dial and app_queue are
	  removed. Review: https://reviewboard.asterisk.org/r/1195/
	  ........ ................ ................

2011-04-26 22:18 +0000 [r315649]  Richard Mudgett <rmudgett@digium.com>

	* main/pbx.c, /: Merged revisions 315645 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r315645 | rmudgett | 2011-04-26 17:14:31 -0500 (Tue, 26 Apr 2011)
	  | 21 lines The 'e' special extension fails to trigger in at least
	  two cases. The 'e' extension is a fall back for the 'i', 't', or
	  'T' extensions if any of them do not exist. Many of the places
	  the 'e' extension was supposed to be invoked fail because the
	  priority was set wrong. There were two places where the 'e'
	  extension was not even checked for fall back. * Made invoke the
	  'e' extension similarly to the previous 'i', 't', or 'T'
	  extension check and added the 'e' extension as a fall back to the
	  two missing locations. * Prioritized and optimized some hangup
	  tests associated with the 'e' extension. (closes issue #19136)
	  Reported by: kshumard Tested by: rmudgett Review:
	  https://reviewboard.asterisk.org/r/1196/ ........

2011-04-26 19:38 +0000 [r315504]  Tilghman Lesher <tilghman@meg.abyt.es>

	* include/asterisk/select.h, /: Merged revisions 315503 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r315503 | tilghman | 2011-04-26 14:32:50 -0500
	  (Tue, 26 Apr 2011) | 28 lines Merged revisions 315502 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r315502 | tilghman | 2011-04-26 14:22:52 -0500
	  (Tue, 26 Apr 2011) | 21 lines Merged revisions 315501 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r315501 | tilghman | 2011-04-26 14:18:46 -0500 (Tue, 26 Apr 2011)
	  | 14 lines Fix the bounds-checking code. The code that set the
	  bit within the select bitfield was correct, but the
	  bounds-checking code was not. The change to that line uses the
	  new _bitsize macro for clarity. Also, FD_ZERO macro did not
	  zero-out anything but the first word of the bitfield, so this
	  could have caused problems with modules using that macro with the
	  expanded bitfield. (closes issue #18773) Reported by: jamicque
	  Patches: 20110423__issue18773.diff.txt uploaded by tilghman
	  (license 14) Tested by: chris-mac ........ ................
	  ................

2011-04-26 18:02 +0000 [r315453]  Richard Mudgett <rmudgett@digium.com>

	* apps/app_dial.c, /: Merged revisions 315452 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r315452 | rmudgett | 2011-04-26 13:00:34 -0500 (Tue, 26 Apr 2011)
	  | 1 line Add missing set of name valid flag when dialing.
	  ........

2011-04-26 17:41 +0000 [r315447]  Russell Bryant <russell@digium.com>

	* channels/chan_local.c, /: Merged revisions 315446 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r315446 | russell | 2011-04-26 12:40:23 -0500 (Tue, 26
	  Apr 2011) | 14 lines chan_local: resolve a deadlock. This patch
	  resolves a fairly complex deadlock that can occur with the
	  combination of chan_local and a dialplan switch, such as dynamic
	  realtime extensions, which pulls autoservice into the picture
	  when doing a dialplan lookup. (closes issue #18818) Reported by:
	  nic Patches: issue18818.patch uploaded by jthurman (license 614)
	  18818.v1.txt uploaded by russell (license 2) Tested by: nic,
	  jthurman, kterzi, steve-howes, sysreq, IshMalik ........

2011-04-26 02:21 +0000 [r315395]  Paul Belanger <pabelanger@digium.com>

	* /, pbx/pbx_config.c: Merged revisions 315394 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r315394 | pabelanger | 2011-04-25 22:18:50 -0400
	  (Mon, 25 Apr 2011) | 14 lines Merged revisions 315393 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r315393 | pabelanger | 2011-04-25 22:17:43 -0400 (Mon, 25 Apr
	  2011) | 7 lines Add back CLI command 'dialplan save' (closes
	  issue #19140) Reported by: lmadsen Patches:
	  __20110419_dialplan_save.patch.txt uploaded by lmadsen (license
	  10) ........ ................

2011-04-25 21:55 +0000 [r315350]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/chan_mgcp.c: Merged revisions 315349 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r315349 | rmudgett | 2011-04-25 16:49:00 -0500 (Mon, 25
	  Apr 2011) | 9 lines When using MGCP realtime gateway definitions,
	  random crashes occur. Fixed incorrect linked list node removal
	  for realtime gateways. (closes issue #18291) Reported by:
	  nahuelgreco Patches: dangling-pointers-when-pruning.patch
	  uploaded by nahuelgreco (license 162) ........

2011-04-25 19:40 +0000 [r315214-315260]  Russell Bryant <russell@digium.com>

	* /, formats/format_wav.c: Merged revisions 315259 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r315259 | russell | 2011-04-25 14:37:32 -0500
	  (Mon, 25 Apr 2011) | 24 lines Merged revisions 315258 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r315258 | russell | 2011-04-25 14:31:44 -0500
	  (Mon, 25 Apr 2011) | 17 lines Merged revisions 315257 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r315257 | russell | 2011-04-25 14:28:41 -0500 (Mon, 25 Apr 2011)
	  | 10 lines Be more flexible with unknown chunks in wav files.
	  This patch makes format_wav ignore unknown chunks instead of
	  erroring out on them. (closes issue #18306) Reported by: jhirsch
	  Patches: wav_skip_unknown_blocks.diff uploaded by jhirsch
	  (license 1156) ........ ................ ................

	* /, channels/chan_sip.c: Merged revisions 315213 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r315213 | russell | 2011-04-25 14:04:28 -0500
	  (Mon, 25 Apr 2011) | 14 lines Merged revisions 315212 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r315212 | russell | 2011-04-25 14:00:24 -0500 (Mon, 25 Apr 2011)
	  | 7 lines Don't link non-cached realtime peers into the
	  peers_by_ip container. (closes issue #18924) Reported by: wdoekes
	  Patches: issue18924_uncached_realtime_peers_leak-1.6.2.17.patch
	  uploaded by wdoekes (license 717) ........ ................

2011-04-25 07:17 +0000 [r315054]  Alec L Davis <sivad.a@paradise.net.nz>

	* channels/chan_local.c, /: Merged revisions 315053 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r315053 | alecdavis | 2011-04-25 19:14:32 +1200
	  (Mon, 25 Apr 2011) | 23 lines Merged revisions 315052 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r315052 | alecdavis | 2011-04-25 19:11:12 +1200
	  (Mon, 25 Apr 2011) | 16 lines Merged revisions 315051 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r315051 | alecdavis | 2011-04-25 19:06:29 +1200 (Mon, 25 Apr
	  2011) | 11 lines chan_local:check_bridge() misplaced misplaced
	  ast_mutex_unlock if !p->chan->_bridge->_softhangup path isn't
	  followed, brigde remains locked. (closes issue #19176) Reported
	  by: alecdavis Patches: bug19176.diff.txt uploaded by alecdavis
	  (license 585) ........ ................ ................

2011-04-22 23:01 +0000 [r315002]  Alec L Davis <sivad.a@paradise.net.nz>

	* channels/chan_dahdi.c, /: Merged revisions 315001 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r315001 | alecdavis | 2011-04-23 10:59:18 +1200 (Sat, 23
	  Apr 2011) | 12 lines chan_dahdi: Can't return to normal ring
	  after distinctive ring on FXS clear a previous distinctivering
	  pattern before each new call (closes issue #18985) Reported by:
	  bromont Patches: bug18985.diff.txt uploaded by alecdavis (license
	  585) Tested by: alecdavis, bromont ........

2011-04-22 21:33 +0000 [r314960]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/chan_agent.c: Merged revisions 314959 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r314959 | mnicholson | 2011-04-22 16:20:08 -0500
	  (Fri, 22 Apr 2011) | 24 lines Merged revisions 314958 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r314958 | mnicholson | 2011-04-22 15:49:45 -0500
	  (Fri, 22 Apr 2011) | 17 lines Merged revisions 311203,314908 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r311203 | mnicholson | 2011-03-17 14:14:37 -0500 (Thu, 17 Mar
	  2011) | 4 lines Don't hold the pvt lock while streaming a file.
	  ABE-2756 ........ r314908 | mnicholson | 2011-04-22 15:01:48
	  -0500 (Fri, 22 Apr 2011) | 4 lines Prevent the login thread and
	  the app threads from using the asterisk channel at the same time.
	  ABE-2756 ........ ................ ................

2011-04-22 14:49 +0000 [r314824]  Tzafrir Cohen <tzafrir.cohen@xorcom.com>

	* channels/chan_unistim.c, /, res/res_fax_spandsp.c: Merged
	  revisions 314779 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r314779 | tzafrir | 2011-04-22 16:59:43 +0300 (◊ï', 22 ◊ê◊§◊® 2011) |
	  2 lines Fix a few typos (shown by Lintian) ........

2011-04-22 14:08 +0000 [r314781]  Russell Bryant <russell@digium.com>

	* /, res/res_agi.c: Merged revisions 314780 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r314780 | russell | 2011-04-22 09:02:23 -0500
	  (Fri, 22 Apr 2011) | 18 lines Merged revisions 314778 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r314778 | russell | 2011-04-22 08:58:03 -0500 (Fri, 22 Apr 2011)
	  | 11 lines Initialize buffers in getvar and getvarfull.
	  Initialize the buffers used to hold the result from GET VARIABLE
	  or GET VARIABLE FULL. The bug report shows func_read returning
	  garbage in the result. It assumed that the buffer passed in was
	  initialized, like many other functions do. In the more common
	  code path (through the dialplan), it is initialized, so just
	  initialize it here too. (closes issue #19050) Reported by: johnz
	  ........ ................

2011-04-21 22:53 +0000 [r314733-314735]  Richard Mudgett <rmudgett@digium.com>

	* channels/sig_pri.h, channels/chan_dahdi.c, channels/sig_pri.c:
	  Implement AMI action PRIShowSpans. PRIShowSpans works like the
	  AMI action DAHDIShowChannels but for PRI spans. It is similar to
	  the CLI command "pri show spans". (closes issue #15980) Reported
	  by: dwery

	* channels/sig_pri.c: Simplify sig_pri.c:build_status().

	* channels/chan_dahdi.c, /: Merged revisions 314732 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r314732 | rmudgett | 2011-04-21 17:38:44 -0500 (Thu, 21
	  Apr 2011) | 1 line Correct DAHDIShowChannels XML documentation.
	  ........

2011-04-21 18:32 +0000 [r314666]  Matthew Nicholson <mnicholson@digium.com>

	* main/manager.c, /, channels/chan_sip.c, channels/chan_skinny.c,
	  main/http.c, configs/sip.conf.sample, configs/skinny.conf.sample,
	  channels/sip/include/sip.h, configs/http.conf.sample: Merged
	  revisions 314628 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r314628 | mnicholson | 2011-04-21 13:24:05 -0500
	  (Thu, 21 Apr 2011) | 27 lines Merged revisions 314620 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r314620 | mnicholson | 2011-04-21 13:22:19 -0500
	  (Thu, 21 Apr 2011) | 20 lines Merged revisions 314607 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r314607 | mnicholson | 2011-04-21 13:19:21 -0500 (Thu, 21 Apr
	  2011) | 14 lines Added limits to the number of unauthenticated
	  sessions TCP based protocols are allowed to have open
	  simultaneously. Also added timeouts for unauthenticated sessions
	  where it made sense to do so. Unrelated, the manager interface
	  now properly checks if the user has the "system" privilege before
	  executing shell commands via the Originate action. AST-2011-005
	  AST-2011-006 (closes issue #18787) Reported by: kobaz (related to
	  issue #18996) Reported by: tzafrir ........ ................
	  ................

2011-04-21 18:11 +0000 [r314598]  David Vossel <dvossel@digium.com>

	* configs/confbridge.conf.sample (added), apps/confbridge (added),
	  bridges/bridge_softmix.c, UPGRADE.txt,
	  include/asterisk/channel.h, res/res_musiconhold.c, CHANGES,
	  apps/confbridge/conf_config_parser.c (added), main/channel.c,
	  include/asterisk/bridging_technology.h,
	  bridges/bridge_builtin_features.c,
	  apps/confbridge/include/confbridge.h (added), apps/Makefile,
	  include/asterisk/bridging_features.h,
	  include/asterisk/bridging.h, include/asterisk/dsp.h,
	  apps/app_confbridge.c, apps/confbridge/include (added),
	  main/bridging.c, main/dsp.c: New HD ConfBridge conferencing
	  application. Includes a new highly optimized and customizable
	  ConfBridge application capable of mixing audio at sample rates
	  ranging from 8khz-192khz. Review:
	  https://reviewboard.asterisk.org/r/1147/

2011-04-21 00:29 +0000 [r314551]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 314550 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r314550 | twilson | 2011-04-20 17:23:04 -0700
	  (Wed, 20 Apr 2011) | 13 lines Merged revisions 314549 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r314549 | twilson | 2011-04-20 17:17:34 -0700 (Wed, 20 Apr 2011)
	  | 6 lines Don't allocate more space than necessary for a sip_pkt
	  This extra allocation is a hold-over from when pkt->data was a
	  character array. Now that it is an allocated string, just
	  allocate enough for the sip_pkt. ........ ................

2011-04-20 20:52 +0000 [r314509]  David Vossel <dvossel@digium.com>

	* main/channel.c, main/abstract_jb.c, funcs/func_jitterbuffer.c
	  (added), include/asterisk/channel.h, CHANGES,
	  include/asterisk/abstract_jb.h: Introduction of the JITTERBUFFER
	  dialplan function. Review:
	  https://reviewboard.asterisk.org/r/1157/

2011-04-20 19:56 +0000 [r314471]  Shaun Ruffell <sruffell@digium.com>

	* codecs/codec_dahdi.c: codec_dahdi: DAHDI still advertises formats
	  using the old bitfields. Previously, the DAHDI format bit fields
	  matched up with the Asterisk bitfields. Since the Asterisk codec
	  bit fields were replaced in r306010, codec_dahdi needs to contain
	  the formats itself. In the future, the DAHDI formats should
	  either change to something other than bitfields, or the bitfields
	  need to move from include/dahdi/kernel.h to include/dahdi/user.h.
	  Signed-off-by: Shaun Ruffell <sruffell@digium.com>

2011-04-20 16:55 +0000 [r314418]  Richard Mudgett <rmudgett@digium.com>

	* /, include/asterisk/frame.h: Merged revisions 314417 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r314417 | rmudgett | 2011-04-20 11:54:02 -0500 (Wed, 20
	  Apr 2011) | 1 line AST_CONTROL_XXX comment changes. ........

2011-04-20 16:37 +0000 [r314415]  David Vossel <dvossel@digium.com>

	* codecs/codec_resample.c: Fixes error with frame datalen being
	  calculated from samples when this is not allwaya accurate.

2011-04-20 05:28 +0000 [r314359]  Terry Wilson <twilson@digium.com>

	* main/lock.c, /: Merged revisions 314358 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r314358 | twilson | 2011-04-19 22:25:15 -0700 (Tue, 19 Apr 2011)
	  | 4 lines Initialize track pointer ast_reentrancy_init checks to
	  see if it is NULL before initializing with calloc ........

2011-04-19 15:42 +0000 [r314204-314252]  Leif Madsen <lmadsen@digium.com>

	* main/tcptls.c, /: Merged revisions 314251 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r314251 | lmadsen | 2011-04-19 10:42:10 -0500 (Tue, 19 Apr 2011)
	  | 8 lines Use SSLv23_client_method instead of old SSLv2 only.
	  (closes issue #19095) (closes issue #19138) Reported by: tzafrir
	  Patches: no_ssl2.diff uploaded by tzafrir (license 46) Tested by:
	  russell, chazzam ........

	* /, funcs/func_channel.c: Merged revisions 314206 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r314206 | lmadsen | 2011-04-19 09:28:15 -0500
	  (Tue, 19 Apr 2011) | 14 lines Merged revisions 314205 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r314205 | lmadsen | 2011-04-19 09:27:50 -0500 (Tue, 19 Apr 2011)
	  | 6 lines Remove duplicate documentation from func_channel.c
	  (closes issue #18970) Reported by: IgorG Patches:
	  func_channel.c.doc.diff uploaded by IgorG (license 20) ........
	  ................

	* apps/app_dial.c, /: Merged revisions 314203 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r314203 | lmadsen | 2011-04-19 09:24:25 -0500
	  (Tue, 19 Apr 2011) | 15 lines Merged revisions 314202 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r314202 | lmadsen | 2011-04-19 09:23:39 -0500 (Tue, 19 Apr 2011)
	  | 7 lines Update seconds to milliseconds in ast_verb output.
	  (closes issue #19084) Reported by: smurfix Patches:
	  app_dial.patch uploaded by smurfix (license 547) Tested by:
	  lmadsen, smurfix ........ ................

2011-04-19 08:22 +0000 [r314158]  Olle Johansson <oej@edvina.net>

	* apps/app_meetme.c: Add explanation of strange flag setup in
	  app_meetme (stolen from Mark's message to asterisk-dev)

2011-04-18 19:48 +0000 [r314079-314116]  Richard Mudgett <rmudgett@digium.com>

	* channels/sig_pri.h, channels/chan_dahdi.c,
	  configs/chan_dahdi.conf.sample, configure,
	  include/asterisk/autoconfig.h.in, configure.ac,
	  channels/sig_pri.c: Problems with ISDN MWI to phones. The
	  "controlling user number" is always the number of the voice mail
	  box which is identical with the subscriber number itself. This
	  number which is listed in the ISDN phone MWI menu cannot be
	  called back to contact the voice mail box. The controlling user
	  number should be made configurable. JIRA ABE-2738 JIRA SWP-2846

	* /, res/res_agi.c: Merged revisions 314069 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r314069 | rmudgett | 2011-04-18 11:10:10 -0500 (Mon, 18 Apr 2011)
	  | 22 lines The AsyncAGI command loop is lax in the value it
	  returns for the return status. * Return correct status:
	  SUCCESS/FAILED/HANGUP. Previously, abnormal exits from the
	  command loop such as hangup would return SUCCESS. * The "asyncagi
	  break" command now returns SUCCESS and is now the only way to
	  break the command loop with that status. Previously, it returned
	  FAILED. * The AMI event AsyncAGI End is no longer sent if the
	  AsyncAGI Start event is not sent. Previously, this happened
	  because of an error setting up the AGI pipes. * All executed AGI
	  commands now get an AsyncAGI Exec result event. Previously, if
	  the command returned failure (because of hangup), the command
	  loop just exited with FAILURE and did not send the AsyncAGI Exec
	  result event. * Makes sure that the channel frame queue is empty
	  on hangup. Review: https://reviewboard.asterisk.org/r/1183/
	  ........

	* apps/app_dial.c, /: Merged revisions 314068 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r314068 | rmudgett | 2011-04-18 11:02:12 -0500 (Mon, 18 Apr 2011)
	  | 7 lines Unclear code in app_dial.c. Make code formatting clear.
	  (closes issue #19134) Reported by: oej ........

2011-04-18 16:22 +0000 [r314018-314078]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 314067 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r314067 | dvossel | 2011-04-18 10:23:45 -0500 (Mon, 18 Apr 2011)
	  | 22 lines Remove the need for deadlock avoidance in chan_sip
	  do_monitor. Deadlock avoidance between the sip pvt and the
	  pvt->owner is very difficult. Now that channel's are ao2 objects,
	  this complication is no longer necessary. It turns out the pvt's
	  msg queue only exists because of deadlock avoidance (when
	  deadlock avoidance fails msgs were added to a queue to be
	  processed later), so this goes away as well. The technique used
	  in the new sip_lock_pvt_full() function should be used as a
	  template for replacing all locations where deadlock avoidance
	  occurs between a channel tech_pvt and the pvt's owner. My hope is
	  that this will begin a reversal of the invalid channel driver
	  locking architecture we have been using for so long. This patch
	  also resolves an issue where the pvt->owner gets unlocked during
	  processing the msg queue. (closes issue #18690) Reported by:
	  dvossel Review: https://reviewboard.asterisk.org/r/1182/ ........

	* main/rtp_engine.c, /, channels/chan_sip.c,
	  include/asterisk/rtp_engine.h: Merged revisions 314017 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r314017 | dvossel | 2011-04-18 08:41:06 -0500 (Mon, 18 Apr 2011)
	  | 17 lines sip codec negotiation of dynamic rtp payloads error
	  fix This patch fixes how chan_sip handles dynamic rtp payload
	  types it does not understand. At the moment if a dynamic
	  payload's mime type does not match one we understand, the payload
	  does not get removed from our payload table. As a result of this,
	  the payload is set to whatever dynamic codec we use internally
	  for that payload number on outgoing INVITES. This is incorrect.
	  This patch fixes this by properly checking the rtpmap set
	  function's return code to make sure it was found. The function
	  can return both -1 and -2 depending on the source of the
	  mismatch. We were just checking -1 explicitly. Review:
	  https://reviewboard.asterisk.org/r/1169/ ........

2011-04-17 09:28 +0000 [r313980]  Damien Wedhorn <voip@facts.com.au>

	* channels/chan_skinny.c: Consolidate all new call calls to run
	  through new setsubstate_ringout. (closes issue #17907) Reported
	  by: wedhorn Patches: cleanup.stateringout.diff uploaded by
	  wedhorn (license 30) Tested by: salecha, wedhorn

2011-04-17 01:28 +0000 [r313907-313944]  Alexandr Anikin <may@telecom-service.ru>

	* addons/chan_ooh323.c: fix compile error from r313907

	* addons/chan_ooh323.c: fix trivial error with set_max_datagram on
	  pvt->udptl

2011-04-15 15:20 +0000 [r313867]  Jonathan Rose <jrose@digium.com>

	* /, main/cli.c: Merged revisions 313860 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r313860 | jrose | 2011-04-15 10:08:05 -0500
	  (Fri, 15 Apr 2011) | 17 lines Merged revisions 313859 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r313859 | jrose | 2011-04-15 09:58:37 -0500 (Fri, 15 Apr 2011) |
	  10 lines Fix a Tab Completion bug that occurs due to multiple
	  matches on a substring. Makes word_match function in cli.c repeat
	  a search for a command string until a proper match is found or
	  the string is searched to the last point. (closes issue #17494)
	  Reported by: ffossard Review:
	  https://reviewboard.asterisk.org/r/1180/ ........
	  ................

2011-04-14 21:53 +0000 [r313822]  Terry Wilson <twilson@digium.com>

	* res/res_rtp_asterisk.c: Sets video mark bit on format field
	  correctly This fixes a regression in the media architecture
	  change where video frames did not have their video mark set
	  correctly. dvossel wrote this. twilson kindly committed this,
	  mmichelson found the bug.

2011-04-14 21:02 +0000 [r313606-313781]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 313780 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r313780 | rmudgett | 2011-04-14 15:59:56 -0500 (Thu, 14
	  Apr 2011) | 20 lines Leftover debug messages unconditionally sent
	  to the console. Executing Dial(DAHDI/1/18475551212,300,) with the
	  echotraining config option enabled outputs the following debug
	  messages unconditionally: Dialing T1847555121 on 1 Dialing www2w
	  on 1 * Made debug messages in my_dial_digits() normal debug
	  messages that do not get output unless enabled. * Reworded some
	  debug messages in my_dial_digits() to be clearer. * Replace
	  strncpy() with ast_copy_string() in my_dial_digits() which does
	  the same job better. (closes issue #18847) Reported by:
	  vmikhelson Tested by: rmudgett ........

	* CREDITS, main/ccss.c, configs/ccss.conf.sample: Add Device State
	  Information CCSS for Generic Devices. Add Asterisk Device State
	  information and callbacks to the Call Completion Supplemental
	  Services for generic agents. There are currently not many devices
	  that have native support for CCSS. Even as the devices become
	  available there may be other reasons why one may choose to not
	  take advantage of the native abilities and stick with the generic
	  implementation. The generic implementation is quite capable and
	  could be greatly enhanced by adding device state capabilities. A
	  phone could then subscribe to the device state with a BLF key in
	  conjunction with Asterisk hints. The advantages of the device
	  state information would allow a single button to: request CCSS,
	  cancel a CCSS request, and display the current state of a CCSS
	  request. For example, you may have a single button that when not
	  lit, there is no active CCSS request. When you press that button,
	  the dialplan can query the DEVICE_STATE() associated with that
	  caller to determine whether they should be calling
	  CallCompletionRequest() or CallCompletionCancel(). If there is
	  currently a pending request, then the dialplan would cancel it.
	  This also has the advantage of showing the true state of a
	  request, which is an asynchronous call, even when
	  CallCompletionRequest() thinks it was successful. The actual
	  request could ultimately fail. Once lit, further feedback can be
	  provided to the caller about the current state of their request
	  since it will be updated by the CCSS State Machine as
	  appropriate. The DEVICE_STATE mapping is configurable since the
	  BLF being used on a given phone type may vary. The idea is to
	  allow some level of customization as to the phone's behavior. As
	  an example, you may want the BLF key to go solid once you have
	  requested a callback. You may then want the LED to blink
	  (typically ringing) when either the callback is in process, which
	  is a visual indication that the incoming call is the desired
	  callback. You may want it to blink when the callee is ready but
	  you are busy, giving you a visual indication that the target is
	  available as you may want to get off the line so that the
	  callback can be successful. Device state information is sent back
	  via the ast_devstate_prov_add() callback for any generic CCSS
	  device as it traverses through the state machine. You simply
	  provide a map between CC_STATE values and the corresponding
	  AST_DEVICE state values. You could then generate hints against
	  these states similar to what is possible today with Custom
	  Devstates or MeetMe states. For example, you may have an
	  extension 3000 that is currently associated with device SIP/3000.
	  You could then create a feature code for that extension that may
	  look something like: exten => *823000,hint,ccss:sip/3000 You
	  would then subscribe a BLF button to *823000 which would point to
	  the dialplan that handled CCSS requests/cancels using the
	  available DEVICE_STATE() information about ccss:sip/3000 to make
	  the decision about what to do. (closes issue #18788) Reported by:
	  p_lindheimer Patches: ccss.trunk.18788.patch uploaded by p
	  lindheimer (license 558) Modified with final reviewboard
	  comments. Tested by: p_lindheimer, loloski Review:
	  https://reviewboard.asterisk.org/r/1105/

	* /, res/res_agi.c: Merged revisions 313700 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r313700 | rmudgett | 2011-04-13 17:52:47 -0500 (Wed, 13 Apr 2011)
	  | 5 lines Revert flushing stale AsyncAGI commands from -r313615.
	  It looks like it was intentional to leave any commands or
	  in-flight commands in the queue in case Async AGI is run again on
	  the call. ........

	* /, res/res_agi.c: Merged revisions 313658 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r313658 | rmudgett | 2011-04-13 12:47:43 -0500 (Wed, 13 Apr 2011)
	  | 2 lines Miscellaneous AGI diagnostic message cleanup and code
	  optimization. ........

	* /, res/res_agi.c: Merged revisions 313615 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r313615 | rmudgett | 2011-04-13 12:18:49 -0500 (Wed, 13 Apr 2011)
	  | 5 lines * Add missing channel lock to handle_cli_agi_add_cmd().
	  * Flush any Async AGI commands left over from earlier Async AGI
	  control of the call. ........

	* main/channel.c, /, res/res_agi.c: Merged revisions 313588 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r313588 | rmudgett | 2011-04-13 11:31:50 -0500
	  (Wed, 13 Apr 2011) | 55 lines Merged revisions 313579 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r313579 | rmudgett | 2011-04-13 11:29:49 -0500
	  (Wed, 13 Apr 2011) | 48 lines Merged revisions 313545 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r313545 | rmudgett | 2011-04-13 11:21:24 -0500 (Wed, 13 Apr 2011)
	  | 41 lines Asterisk does not hangup a channel after endpoint
	  hangs up. If the call that the dialplan started an AGI script for
	  is hungup while the AGI script is in the middle of a command then
	  the AGI script is not notified of the hangup. There are many AGI
	  Exec commands that this can happen with. The reported
	  applications have been: Background, Wait, Read, and Dial. Also
	  the AGI Get Data command. * Don't wait on the Asterisk channel
	  after it has hung up. The channel is likely to never need
	  servicing again. * Restored the AGI script's ability to return
	  the AGI_RESULT_HANGUP value in run_agi(). It previously only
	  could return AGI_RESULT_SUCCESS or AGI_RESULT_FAILURE after the
	  DeadAGI and AGI applications were merged. (closes issue #17954)
	  Reported by: mn3250 Patches: issue17954_v1.8.patch uploaded by
	  rmudgett (license 664) issue17954_v1.6.2.patch uploaded by
	  rmudgett (license 664) issue17954_v1.4.patch uploaded by rmudgett
	  (license 664) Tested by: rmudgett JIRA SWP-2171 (closes issue
	  #18492) Reported by: devmod Tested by: rmudgett JIRA SWP-2761
	  (closes issue #18935) Reported by: nvitaly Tested by: astmiv,
	  rmudgett JIRA SWP-3216 (closes issue #17393) Reported by: siby
	  Tested by: rmudgett JIRA SWP-2727 Review:
	  https://reviewboard.asterisk.org/r/1165/ ........
	  ................ ................

2011-04-13 15:49 +0000 [r313528]  Leif Madsen <lmadsen@digium.com>

	* configs/iax.conf.sample, configs/users.conf.sample,
	  channels/chan_dahdi.c, configs/chan_dahdi.conf.sample,
	  channels/chan_sip.c, configs/sip.conf.sample, CHANGES,
	  channels/chan_iax2.c, channels/sip/include/sip.h: Add
	  'description' field for CLI and Manager output (closes issue
	  #19076) Reported by: lmadsen Patches:
	  __20110408-channel-description.txt uploaded by lmadsen (license
	  10) Tested by: lmadsen Review:
	  https://reviewboard.asterisk.org/r/1163/

2011-04-13 15:23 +0000 [r313527]  Richard Mudgett <rmudgett@digium.com>

	* /, apps/app_dumpchan.c: Merged revisions 313517 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r313517 | rmudgett | 2011-04-12 17:35:53 -0500 (Tue, 12 Apr 2011)
	  | 12 lines Bring the dumpchan application inline with "core show
	  channel". * Added fields that are in "core show channel" to
	  dumpchan output. * Fixed reuse of formatbuf before the previous
	  string stored there was used by snprintf. All output strings now
	  have their own buffer. * Adjusted the buffer sizes to not be so
	  abusive of the stack now that there are more buffers. Change
	  requested by oej. ........

2011-04-12 21:59 +0000 [r313482]  Alexandr Anikin <may@telecom-service.ru>

	* addons/ooh323c/src/ooh323.c, addons/ooh323c/src/ooGkClient.c,
	  addons/ooh323c/src/ooLogChan.h, addons/chan_ooh323.c,
	  addons/ooh323c/src/ooh245.c, addons/ooh323c/src/ooCalls.h,
	  addons/ooh323c/src/ooGkClient.h, addons/ooh323c/src/ooports.c,
	  addons/ooh323c/src/ooSocket.c, addons/ooh323c/src/ooh323ep.h,
	  addons/ooh323c/src/ootypes.h, addons/ooh323c/src/ooLogChan.c,
	  addons/ooh323c/src/oochannels.c, addons/ooh323c/src/ooSocket.h,
	  addons/ooh323c/src/ooq931.c: IPv6 support for chan_ooh323 IPv6
	  support for ooh323, bindaddr, peers and users ip can be IPv4 or
	  IPv6 addr correction for multi-homed mode (0.0.0.0 or ::
	  bindaddr) can work in dual 6/4 mode with :: bindaddr gatekeeper
	  mode isn't supported in v6 mode while (issue #18278) Reported by:
	  may213 Patches: ipv6-ooh323.patch uploaded by may213 (license
	  454) Review: https://reviewboard.asterisk.org/r/1004/

2011-04-12 18:53 +0000 [r313437-313438]  Jonathan Rose <jrose@digium.com>

	* /: blocking fix from 313436 that was already made in this commit

	* channels/chan_dahdi.c, /: Merged revisions 313435 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2 also
	  went ahead and fixed the problem it introduces before committing.
	  ........ r313435 | jrose | 2011-04-12 13:44:44 -0500 (Tue, 12 Apr
	  2011) | 1 line fixing stupid mistake with putting code before
	  variable declaration ........ Merged revisions 313433 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r313432 | jrose | 2011-04-12 13:12:29 -0500 (Tue, 12 Apr 2011) |
	  14 lines reload Chan_dahdi memory leak caused by variables
	  chan_dahdi reloading with variables set via setvar in
	  chan_dahdi.conf would stay in the dahdi_pvt structs for
	  individual channels (causing them to just continue adding the new
	  ones to the list) and also there was a memory leak causes by the
	  conf objects. This patch resolves both of these by using
	  ast_variables_destroy during the loading process. (closes issue
	  #17450) Reported by: nahuelgreco Patches: patch.diff uploaded by
	  jrose (license 1225) Tested by: tilghman, jrose Review:
	  https://reviewboard.asterisk.org/r/1170/ ........ ........
	  ........

2011-04-11 23:20 +0000 [r313367-313383]  Richard Mudgett <rmudgett@digium.com>

	* apps/app_dial.c, /: Merged revisions 313368-313369 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r313368 | rmudgett | 2011-04-11 18:03:02 -0500 (Mon, 11
	  Apr 2011) | 2 lines Backport a restructuring change from trunk to
	  make the next change stand out. ........ r313369 | rmudgett |
	  2011-04-11 18:08:02 -0500 (Mon, 11 Apr 2011) | 13 lines Frames
	  from the inbound channel should go to all outbound channels in
	  app_dial.c. In app_dial.c:wait_for_answer() frames from the
	  inbound channel should be sent to all outbound channels instead
	  of only if there is just one outbound channel. Control frames
	  like AST_CONTROL_CONNECTED_LINE need to be passed to all of the
	  the outbound channels. This can happen if a blond transfer is
	  done by a remote switch on the inbound channel. JIRA AST-443 JIRA
	  SWP-2730 ........

	* /, main/cli.c: Merged revisions 313366 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r313366 | rmudgett | 2011-04-11 17:27:25 -0500 (Mon, 11 Apr 2011)
	  | 2 lines Added "Connected Line ID" and "Connected Line ID Name"
	  to "core show channel" output. ........

2011-04-11 19:39 +0000 [r313280]  Leif Madsen <lmadsen@digium.com>

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac:
	  Merged revisions 313279 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r313279 | lmadsen | 2011-04-11 14:36:40 -0500
	  (Mon, 11 Apr 2011) | 21 lines Merged revisions 313278 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r313278 | lmadsen | 2011-04-11 14:33:03 -0500
	  (Mon, 11 Apr 2011) | 14 lines Merged revisions 313277 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r313277 | lmadsen | 2011-04-11 14:30:20 -0500 (Mon, 11 Apr 2011)
	  | 6 lines Fix detection of OpenSSL 1.0 (closes issue #19093)
	  Reported by: tzafrir Patches: detect_openssl_10.diff uploaded by
	  tzafrir (license 46) ........ ................ ................

2011-04-11 15:47 +0000 [r313191]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, channels/sig_analog.c, /: Merged revisions
	  313190 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r313190 | rmudgett | 2011-04-11 10:40:30 -0500
	  (Mon, 11 Apr 2011) | 39 lines Merged revisions 313189 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r313189 | rmudgett | 2011-04-11 10:32:53 -0500
	  (Mon, 11 Apr 2011) | 32 lines Merged revisions 313188 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r313188 | rmudgett | 2011-04-11 10:27:52 -0500 (Mon, 11 Apr 2011)
	  | 25 lines Stuck channel using FEATD_MF if caller hangs up at the
	  right time. The cause was actually a caller hanging up just at
	  the end of the Feature Group D DTMF tones that setup the call.
	  The reason for this is a "guard timer" that's implemented using
	  ast_safe_sleep(100). If the caller happens to hang up AFTER the
	  final tone of the DTMF string but BEFORE the end of that
	  ast_safe_sleep(), then ast_safe_sleep() will return non-zero.
	  This causes the code to bounce to the end of ss_thread(), but it
	  does NOT tear down the call properly. This should be a rare
	  occurrence because the caller has to hang up at EXACTLY the right
	  time. Nonetheless, it was happening quite regularly on the
	  reporter's system. It's not easily reproducible, unless you
	  purposely increase the guard-time to 2000 or more. Once you do
	  that, you can reproduce it every time by watching the DTMF debug
	  and hanging up just as it ends. Simply add an ast_hangup() before
	  goto quit. (closes issue #15671) Reported by: jcromes Patches:
	  issue15671.patch uploaded by pabelanger (license 224) Tested by:
	  jcromes ........ ................ ................

2011-04-09 21:00 +0000 [r313143]  Alexandr Anikin <may@telecom-service.ru>

	* addons/chan_ooh323.c, /: Merged revisions 313142 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r313142 | may | 2011-04-10 00:56:17 +0400 (Sun, 10 Apr
	  2011) | 3 lines fix trivial bug in ooh323_indicate on
	  AST_CONTROL_SRC... check p->rtp is not null ........

2011-04-08 16:17 +0000 [r313100]  Richard Mudgett <rmudgett@digium.com>

	* channels/sig_pri.h, channels/chan_dahdi.c, channels/sig_analog.c,
	  channels/sig_ss7.h, channels/sig_pri.c, channels/sig_ss7.c: Add
	  private lock deadlock avoidance callback to PRI and SS7. Factor
	  out the equivalent function for analog.

2011-04-07 13:42 +0000 [r313049]  Jonathan Rose <jrose@digium.com>

	* /, main/features.c: Merged revisions 313048 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r313048 | jrose | 2011-04-07 08:35:33 -0500
	  (Thu, 07 Apr 2011) | 16 lines Merged revisions 313047 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r313047 | jrose | 2011-04-07 08:23:01 -0500 (Thu, 07 Apr 2011) |
	  9 lines Makes parking lots clear and rebuild properly when
	  features reload is invoked from CLI Before, default parkinglot in
	  context parkedcalls with ext 700 would always be present and when
	  reload was invoked, the previous parkinglots would not be
	  cleared. (closes issue #18801) Reported by: mickecarlsson Review:
	  https://reviewboard.asterisk.org/r/1161/ ........
	  ................

2011-04-07 10:30 +0000 [r313003-313005]  Alec L Davis <sivad.a@paradise.net.nz>

	* /, channels/sig_pri.c: Merged revisions 313001 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r313001 | alecdavis | 2011-04-07 22:19:31 +1200 (Thu, 07 Apr
	  2011) | 13 lines Fix ISDN calling subaddr User Specified Odd/Even
	  Flag Calculation of the Odd/Even flag was wrong. Implement
	  correct algo, and set odd/even=0 if data would be truncated. Only
	  allow automatic calculation of the O/E flag, don't let dialplan
	  influence. (closes issue #19062) Reported by: festr Patches:
	  bug19062.diff2.txt uploaded by alecdavis (license 585) Tested by:
	  festr, alecdavis, rmudgett ........

	* apps/app_voicemail.c: app_voicemail: close_mailbox change
	  LOG_WARNING to LOG_NOTICE

2011-04-05 18:47 +0000 [r312868-312950]  Richard Mudgett <rmudgett@digium.com>

	* channels/sig_pri.h, channels/chan_dahdi.c, /, channels/sig_pri.c:
	  Merged revisions 312949 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r312949 | rmudgett | 2011-04-05 13:45:24 -0500 (Tue, 05 Apr 2011)
	  | 6 lines Crash if ISDN span layer 1 is down on initial load.
	  Regression from -r312575 B channel shifting during negotiation. *
	  Also combine updating the alarm flag with clearing the resetting
	  flag. ........

	* /, channels/chan_sip.c: Merged revisions 312889 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r312889 | rmudgett | 2011-04-05 11:19:35 -0500 (Tue, 05 Apr 2011)
	  | 5 lines Add 416 response to OPTIONS packet. RFC3261 Section
	  11.2 says the response code to an OPTIONS packet needs to be the
	  same as if it were an INVITE. ........

	* /, channels/chan_sip.c: Merged revisions 312866 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r312866 | rmudgett | 2011-04-05 10:38:14 -0500 (Tue, 05 Apr 2011)
	  | 15 lines Responding to OPTIONS packet with 404 because Asterisk
	  not looking for "s" extension. The get_destination() function was
	  not using the "s" extension when the request URI did not specify
	  an extension. This is a regression caused when the URI parsing
	  code was extracted into parse_uri(). Made get_destination()
	  substitute the "s" extension when the parsed URI results in an
	  empty string. (closes issue #18348) Reported by: shmaize Patches:
	  issue18348_v1.8.patch uploaded by rmudgett (license 664) Tested
	  by: shmaize ........

2011-04-05 14:16 +0000 [r312767]  Matthew Nicholson <mnicholson@digium.com>

	* main/manager.c, /, configs/manager.conf.sample: Merged revisions
	  312766 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r312766 | mnicholson | 2011-04-05 09:14:50 -0500
	  (Tue, 05 Apr 2011) | 22 lines Merged revisions 312764 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r312764 | mnicholson | 2011-04-05 09:13:07 -0500
	  (Tue, 05 Apr 2011) | 15 lines Merged revisions 312761 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r312761 | mnicholson | 2011-04-05 09:10:34 -0500 (Tue, 05 Apr
	  2011) | 8 lines Limit the number of unauthenticated manager
	  sessions and also limit the time they have to authenticate.
	  AST-2011-005 (closes issue #18996) Reported by: tzafrir Tested
	  by: mnicholson ........ ................ ................

2011-04-05 13:55 +0000 [r312756]  Jonathan Rose <jrose@digium.com>

	* apps/app_meetme.c: Minor change to 'L' option for meetme to
	  include some verb statements for the option.

2011-04-04 19:31 +0000 [r312716]  Richard Mudgett <rmudgett@digium.com>

	* channels/sig_pri.c: Remove the channel parameter from
	  sig_pri_handle_subcmds(). It was only used in a debug message and
	  may not be correct anyway.

2011-04-04 17:37 +0000 [r312678-312680]  Jonathan Rose <jrose@digium.com>

	* pbx/pbx_config.c: In handle_cli_dialplan_add_extension, const
	  char pointer *into_context is used instead of a->argv[5] to
	  improve readability.

	* CHANGES, pbx/pbx_config.c: Makes 'dialplan add extension' create
	  the specified context if it does not already exist. If the user
	  invokes 'dialplan add extension' into a non-existing context, the
	  context will be created and a message informing the user of the
	  context being created will be issued in cli. (closes issue
	  #17431) Reported by: leearcher Patches: context_auto_create.diff
	  uploaded by kobaz (license 834) Tested by: leearcher, kobaz,
	  jrose

2011-04-04 16:17 +0000 [r312579]  Richard Mudgett <rmudgett@digium.com>

	* channels/sig_pri.h, channels/chan_dahdi.c, /, channels/sig_pri.c:
	  Merged revisions 312575 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r312575 | rmudgett | 2011-04-04 11:10:50 -0500
	  (Mon, 04 Apr 2011) | 52 lines Merged revisions 312574 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r312574 | rmudgett | 2011-04-04 11:00:02 -0500
	  (Mon, 04 Apr 2011) | 45 lines Merged revisions 312573 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r312573 | rmudgett | 2011-04-04 10:49:30 -0500 (Mon, 04 Apr 2011)
	  | 38 lines Issues with ISDN calls changing B channels during call
	  negotiations. The handling of the PROCEEDING message was not
	  using the correct call structure if the B channel was changed.
	  (The same for PROGRESS.) The call was also not hungup if the new
	  B channel is not provisioned or is busy. * Made all call
	  connection messages (SETUP_ACKNOWLEDGE, PROCEEDING, PROGRESS,
	  ALERTING, CONNECT, CONNECT_ACKNOWLEDGE) ensure that they are
	  using the correct structure and B channel. If there is any
	  problem with the operations then the call is now hungup with an
	  appropriate cause code. * Made miscellaneous messages
	  (INFORMATION, FACILITY, NOTIFY) find the correct structure by
	  looking for the call and not using the channel ID. NOTIFY is an
	  exception with versions of libpri before v1.4.11 because a call
	  pointer is not available for Asterisk to use. * Made all hangup
	  messages (DISCONNECT, RELEASE, RELEASE_COMPLETE) find the correct
	  structure by looking for the call and not using the channel ID.
	  (closes issue #18313) Reported by: destiny6628 Tested by:
	  rmudgett JIRA SWP-2620 (closes issue #18231) Reported by:
	  destiny6628 Tested by: rmudgett JIRA SWP-2924 (closes issue
	  #18488) Reported by: jpokorny JIRA SWP-2929 JIRA AST-437 (The
	  issues fixed here are most likely causing this JIRA issue.) JIRA
	  DAHDI-406 JIRA LIBPRI-33 (Stuck resetting flag likely fixed)
	  ........ ................ ................

2011-04-01 23:17 +0000 [r312462-312510]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_misdn.c, /: Merged revisions 312509 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r312509 | rmudgett | 2011-04-01 18:15:42 -0500 (Fri, 01
	  Apr 2011) | 22 lines When a call going out an NT-PTMP port gets
	  rejected, Asterisk crashes. If a call is sent to an ISDN phone
	  that rejects the call with RELEASE_COMPLETE(cause: call
	  reject(21), or busy(17)) Asterisk crashes. I could not get my
	  setup to crash. However, I could see the possibility from a race
	  condition between queuing an AST_CONTROL_BUSY to the core and
	  then queueing an AST_CONTROL_HANGUP. If the AST_CONTROL_BUSY is
	  processed before the AST_CONTROL_HANGUP is queued, the
	  ast_channel could be destroyed out from under chan_misdn. Avoid
	  this particular crash scenario by not queueing the
	  AST_CONTROL_HANGUP if the AST_CONTROL_BUSY was queued. (closes
	  issue #18408) Reported by: wimpy Patches: issue18408_v1.8.patch
	  uploaded by rmudgett (license 664) Tested by: rmudgett, wimpy
	  JIRA SWP-2679 ........

	* /, main/ccss.c: Merged revisions 312461 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r312461 | rmudgett | 2011-04-01 16:31:39 -0500 (Fri, 01 Apr 2011)
	  | 25 lines CallCompletionRequest()/CallCompletionCancel() exit
	  non-zero if fail. The
	  CallCompletionRequest()/CallCompletionCancel() dialplan
	  applications exit nonzero on normal failure conditions. The
	  nonzero exit causes the dialplan to hangup immediately. The
	  dialplan author has no opportunity to report success/failure to
	  the user. * Made always return zero so the dialplan can continue.
	  * Made set CC_REQUEST_RESULT/CC_REQUEST_REASON and
	  CC_CANCEL_RESULT/CC_CANCEL_REASON channel variables respectively.
	  Also documented the values set. * Reduced the warning about no
	  core instance in CallCompletionCancel() to a debug message. It is
	  a normal event and should not be output at the WARNING level.
	  (closes issue #18763) Reported by: p_lindheimer Patches:
	  ccss.patch uploaded by p lindheimer (license 558) Modified Tested
	  by: p_lindheimer, rmudgett JIRA SWP-3042 ........

2011-04-01 17:28 +0000 [r312384-312423]  Jonathan Rose <jrose@digium.com>

	* channels/chan_dahdi.c: Fixing bad line break from 312384

	* channels/chan_dahdi.c, include/asterisk/dsp.h, CHANGES,
	  main/dsp.c: New Feature for chan_dahdi. 4 length pattern
	  matching. In chan_dahdi.conf, the user can now use length 4
	  patterns in addition to the usual length 2 patterns. The s ntax
	  remains the same and the method used to track the pattern history
	  will only change when using the length 4 patterns. (closes issue
	  SWP-3250) Code: jrose rmudgett

2011-04-01 10:59 +0000 [r312289]  Tilghman Lesher <tilghman@meg.abyt.es>

	* include/asterisk/select.h, /, addons/cdr_mysql.c,
	  main/asterisk.c: Merged revisions 312286,312288 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r312286 | tilghman | 2011-04-01 05:44:33 -0500
	  (Fri, 01 Apr 2011) | 2 lines Reload must react correctly against
	  a possibly changed table, so dropping the conditional reload
	  flag. ................ r312288 | tilghman | 2011-04-01 05:58:45
	  -0500 (Fri, 01 Apr 2011) | 21 lines Merged revisions 312287 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r312287 | tilghman | 2011-04-01 05:51:24 -0500
	  (Fri, 01 Apr 2011) | 14 lines Merged revisions 312285 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r312285 | tilghman | 2011-04-01 05:36:42 -0500 (Fri, 01 Apr 2011)
	  | 7 lines Found some leaking file descriptors while looking at
	  ast_FD_SETSIZE dead code. (issue #18969) Reported by: oej
	  Patches: 20110315__issue18969__14.diff.txt uploaded by tilghman
	  (license 14) ........ ................ ................

2011-04-01 09:08 +0000 [r312118-312212]  Alec L Davis <sivad.a@paradise.net.nz>

	* /, apps/app_voicemail.c: Merged revisions 312211 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r312211 | alecdavis | 2011-04-01 22:03:11 +1300
	  (Fri, 01 Apr 2011) | 36 lines Merged revisions 312210 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r312210 | alecdavis | 2011-04-01 21:47:29 +1300
	  (Fri, 01 Apr 2011) | 29 lines Merged revisions 312174 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r312174 | alecdavis | 2011-04-01 21:29:49 +1300 (Fri, 01 Apr
	  2011) | 23 lines voicemail: get real last_message_index and
	  count_messages, ODBC resequence change last_message_index to read
	  the max msgnum stored in the database change count_messages to
	  actually count the number of messages. last_message_index change:
	  This fixed overwriting of the last message if msgnum=0 was
	  missing. Previously every incoming message would overwrite
	  msgnum=1. count_messages change: allows us to detect when
	  requencing is required in opneA_mailbox. resequence enabled for
	  ODBC storage: Assists with fixing up corrupt databases with gaps,
	  but only when a user actively opens there mailboxes. (closes
	  issue #18692,#18582,#19032) Reported by: elguero Patches: based
	  on odbc_resequence_mailbox2.1.diff uploaded by elguero (license
	  37) Tested by: elguero, nivek, alecdavis Review:
	  https://reviewboard.asterisk.org/r/1153/ ........
	  ................ ................

	* /, apps/app_voicemail.c: Merged revisions 312117 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r312117 | alecdavis | 2011-04-01 20:32:12 +1300
	  (Fri, 01 Apr 2011) | 29 lines Merged revisions 312103 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r312103 | alecdavis | 2011-04-01 20:25:54 +1300
	  (Fri, 01 Apr 2011) | 22 lines Merged revisions 312070 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r312070 | alecdavis | 2011-04-01 19:46:56 +1300 (Fri, 01 Apr
	  2011) | 16 lines app_voicemail: close_mailbox needs to respect
	  additional messages while mailbox is open. close_mailbox leave
	  gaps in message sequence if messages are deleted and new messages
	  arrive during this time, this is because the shuffle down to slot
	  0, only shuffles the number of pre-existing messages when mailbox
	  is opened, ignoring new arrivals. Fix: in close_mailbox
	  re-evaluate number of messages before the shuffle, this then
	  includes new arrivals. Happens on filebased or ODBC storage.
	  (issues #19032,#18582,#18692,#18998) Reported by:
	  alecdavis,tootai,afosorio Review:
	  https://reviewboard.asterisk.org/r/1153/ ........
	  ................ ................

2011-03-31 20:12 +0000 [r311981-312023]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_misdn.c, /: Merged revisions 312022 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r312022 | rmudgett | 2011-03-31 15:11:40 -0500 (Thu, 31
	  Mar 2011) | 14 lines chan_misdn segfaults when DEBUG_THREADS is
	  enabled. The segfault happens because jb->mutexjb is
	  uninitialized from the ast_malloc(). The internals of
	  ast_mutex_init() were assuming a nonzero value meant mutex
	  tracking initialization had already happened. Recent changes to
	  mutex tracking code to reduce excessive memory consumption
	  exposed this uninitialized value. Converted misdn_jb_init() to
	  use ast_calloc() instead of ast_malloc(). Also eliminated
	  redundant zero initialization code in the routine. (closes issue
	  #18975) Reported by: irroot ........

	* include/asterisk/channel.h: Fix function reference in comment.

2011-03-31 06:44 +0000 [r311931]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, configs/cdr_mysql.conf.sample: Merged revisions 311930 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r311930 | tilghman | 2011-03-31 01:43:18 -0500 (Thu, 31 Mar 2011)
	  | 6 lines Incorrect default example; the field is actually
	  internally named "clid", not "callerid". (closes issue #19040)
	  Reported by: wcselby Tested by: tilghman ........

2011-03-30 01:57 +0000 [r311875]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 311874 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r311874 | rmudgett | 2011-03-29 20:56:05 -0500 (Tue, 29
	  Mar 2011) | 1 line Update some setup_dahdi_int() comments.
	  ........

2011-03-29 08:33 +0000 [r311806]  Tilghman Lesher <tilghman@meg.abyt.es>

	* cel/cel_odbc.c, /: Merged revisions 311799 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r311799 | tilghman | 2011-03-29 02:08:39 -0500 (Tue, 29 Mar 2011)
	  | 7 lines Remove extraneous check from integer-type fields.
	  (closes issue #19027) Reported by: mlehner Review:
	  https://reviewboard.asterisk.org/r/1149/ ........

2011-03-28 22:00 +0000 [r311752]  Russell Bryant <russell@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 311751 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r311751 | russell | 2011-03-28 17:00:01 -0500 (Mon, 28
	  Mar 2011) | 2 lines Cross-reference VoiceMail() and
	  VoiceMailMain() in the xml docs. ........

2011-03-27 21:49 +0000 [r311688]  Alexandr Anikin <may@telecom-service.ru>

	* addons/chan_ooh323.c, /: Merged revisions 311687 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r311687 | may | 2011-03-28 01:47:13 +0400 (Mon, 28 Mar
	  2011) | 2 lines correct return values in ooh323_indicate for
	  AST_CONTROL_T38_PARAMETERS ........

2011-03-23 21:55 +0000 [r311613-311616]  Brett Bryant <bbryant@digium.com>

	* /, apps/app_meetme.c: Merged revisions 311615 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r311615 | bbryant | 2011-03-23 17:54:11 -0400 (Wed, 23 Mar 2011)
	  | 8 lines This patch fixes a bug with MeetMe behavior where the
	  'P' option for always prompting for a pin is ignored for the
	  first caller. (closes issue #18070) Reported by: mav3rick Review:
	  https://reviewboard.asterisk.org/r/1132/ ........

	* /, channels/sip/reqresp_parser.c: Merged revisions 311612 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r311612 | bbryant | 2011-03-23 17:45:46 -0400 (Wed, 23 Mar 2011)
	  | 9 lines Fix a possible crash in sip/reqresp_parser.c that is
	  caused by a possible null value. (closes issue #18821) Reported
	  by: cmaj Patches:
	  patch-reqresp_parser_sip_uri_domain_cmp_c_locale-crash-1.8.3-rc2.diff.tx
	  uploaded by cmaj (license 830) ........

2011-03-23 02:51 +0000 [r311559]  Terry Wilson <twilson@digium.com>

	* /, channels/sip/reqresp_parser.c: Merged revisions 311558 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r311558 | twilson | 2011-03-22 19:24:53 -0700 (Tue, 22 Mar 2011)
	  | 5 lines Don't use static declared buf in parse_name_andor_addr
	  This function isn't used anywhere yet, but we definitely don't
	  want to keep the same value for buf between calls to the
	  function. ........

2011-03-22 15:26 +0000 [r311498]  David Vossel <dvossel@digium.com>

	* /, apps/app_meetme.c: Merged revisions 311497 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r311497 | dvossel | 2011-03-22 10:25:24 -0500
	  (Tue, 22 Mar 2011) | 9 lines Merged revisions 311496 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r311496 | dvossel | 2011-03-22 10:24:45 -0500 (Tue, 22
	  Mar 2011) | 2 lines Fixes memory leak in MeetMe AMI action
	  ........ ................

2011-03-18 19:05 +0000 [r311427]  Jonathan Rose <jrose@digium.com>

	* CHANGES, apps/app_followme.c: Adds an option to FollowMe that
	  isn't useful for the bug it was made to solve. Still, due to the
	  nature of FollowMe, it makes sense to have this option since it
	  keeps apps bound to channels that would otherwise go away from
	  being lost.

2011-03-18 16:27 +0000 [r311385]  David Vossel <dvossel@digium.com>

	* codecs/codec_resample.c: Remove libresample dependency from
	  codec_resample.c

2011-03-18 16:24 +0000 [r311373]  Jonathan Rose <jrose@digium.com>

	* /, channels/chan_sip.c, res/res_fax.c, res/res_jabber.c: Merged
	  revisions 311352 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r311352 | jrose | 2011-03-18 11:19:05 -0500 (Fri, 18 Mar 2011) |
	  10 lines Changes some print statements/events to use a blank
	  string in place of NULL if the string in question is NULL. This
	  is supposed to improve Solaris compatibility since Solaris goes
	  berserk when trying to output NULL strings. (closes issue #18759)
	  Reported by: bklang Patches: null-strings.patch uploaded by
	  bklang (license 919) ........

2011-03-18 16:03 +0000 [r311343]  Matthew Nicholson <mnicholson@digium.com>

	* /, res/res_fax.c: Merged revisions 311342 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r311342 | mnicholson | 2011-03-18 11:02:50 -0500 (Fri, 18 Mar
	  2011) | 2 lines Properly populate the LOCALSTATIONID channel
	  variable. ........

2011-03-18 03:00 +0000 [r311296-311298]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/sig_pri.c: Merged revisions 311297 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r311297 | rmudgett | 2011-03-17 21:59:05 -0500 (Thu, 17 Mar 2011)
	  | 12 lines Race condition when ISDN CallRerouting/CallDeflection
	  invoked. The queued AST_CONTROL_BUSY could sometimes be processed
	  before the call_forward dial string is recognized. * Moved
	  setting the call_forwarding dial string after sending a response
	  to the initiator and just queue an empty frame to wake up the
	  media thread instead of an AST_CONTROL_BUSY. * Added check for
	  empty rerouting/deflection number and respond with an error.
	  ........

	* apps/app_dial.c, /: Merged revisions 311295 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r311295 | rmudgett | 2011-03-17 21:22:07 -0500
	  (Thu, 17 Mar 2011) | 35 lines Merged revision 310986 from
	  https://origsvn.digium.com/svn/asterisk/be/branches/C.3-bier
	  .......... r310986 | rmudgett | 2011-03-16 13:56:28 -0500 (Wed,
	  16 Mar 2011) | 28 lines Dial() o option broke when connected line
	  feature added. The patch restores the o option behavior and adds
	  the ability to specify the CallerID. The Dial o and f options are
	  complementary to each other. The o option stores the CallerID on
	  the outgoing channel as the channel's CallerID. The f option
	  forces the CallerID sent by the outgoing channel. o(x) - The
	  argument 'x' is optional. If not present, then specify that the
	  CallerID that was present on the *calling* channel be stored as
	  the CallerID on the *called* channel. This was the behavior of
	  Asterisk 1.0 and earlier. If present, then specify the CallerID
	  stored on the *called* channel. Note that o(${CALLERID(all)}) is
	  similar to option o without parameters. f(x) - The argument 'x'
	  is optional and its presence changes the behavior of this option.
	  If not present, then force the outgoing CallerID on a
	  call-forward or deflection to the dialplan extension for this
	  Dial() using a dialplan 'hint'. For example, some PSTNs do not
	  allow CallerID to be set to anything other than the numbers
	  assigned to you. If present, then force the outgoing CallerID to
	  'x'. Patches: jira_abe_2752_dial_fo_options.patch uploaded by
	  rmudgett (license 664) Tested by: rmudgett JIRA ABE-2752 JIRA
	  SWP-3096 .......... ................

2011-03-17 19:05 +0000 [r311198]  Jonathan Rose <jrose@digium.com>

	* /, apps/app_chanspy.c: Merged revisions 311197 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r311197 | jrose | 2011-03-17 14:03:34 -0500 (Thu, 17 Mar 2011) |
	  11 lines This fixes a nasty chanspy bug which was causing a
	  channel leak every time a spied on channel made a call. In
	  addition to the above, it makes certain channel destruction
	  occurs so that applications don't get stuck waiting for datastore
	  destruction while monitored by chanspy. (closes issue #18742)
	  Reported by: jkister Tested by: jkister, jcovert, jrose Review:
	  http://reviewboard.digium.internal/r/106/ ........

2011-03-17 15:02 +0000 [r311142]  Matthew Nicholson <mnicholson@digium.com>

	* main/manager.c, /: Merged revisions 311141 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r311141 | mnicholson | 2011-03-17 10:00:33 -0500
	  (Thu, 17 Mar 2011) | 11 lines Merged revisions 311140 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r311140 | mnicholson | 2011-03-17 09:58:52 -0500 (Thu, 17 Mar
	  2011) | 4 lines Don't write items to the manager socket twice.
	  AST-2011-003 (closes issue 0018987) Reported by: ks-steven
	  ........ ................

2011-03-17 10:51 +0000 [r311051]  Alec L Davis <sivad.a@paradise.net.nz>

	* /, configs/indications.conf.sample: Merged revisions 311050 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r311050 | alecdavis | 2011-03-17 23:49:41 +1300
	  (Thu, 17 Mar 2011) | 24 lines Merged revisions 311049 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r311049 | alecdavis | 2011-03-17 23:45:47 +1300
	  (Thu, 17 Mar 2011) | 17 lines Merged revisions 311048 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r311048 | alecdavis | 2011-03-17 23:43:35 +1300 (Thu, 17 Mar
	  2011) | 12 lines Remove extra quote in indications.conf Picking
	  low hanging fruit. (closes issue #18971) Reported by: IgorG
	  Patches: based on indications.conf.sample.diff uploaded by IgorG
	  (license 20) Tested by: IgorG ........ ................
	  ................

2011-03-16 19:51 +0000 [r310941-311001]  Terry Wilson <twilson@digium.com>

	* main/tcptls.c, /: Merged revisions 310999 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r310999 | twilson | 2011-03-16 14:47:59 -0500
	  (Wed, 16 Mar 2011) | 18 lines Merged revisions 310998 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r310998 | twilson | 2011-03-16 14:46:36 -0500 (Wed, 16 Mar 2011)
	  | 11 lines Fix crash on fdopen failure See security advisory
	  AST-2011-004 (closes issue #18845) Reported by: cmaj Patches:
	  patch-main-tcptls-1.8.3-rc2-open-session-crash-take2.diff.txt
	  uploaded by cmaj (license 830)
	  patch-main-tcptls-1.8.3-rc2-open-session-crash-take3.diff.txt
	  uploaded by cmaj (license 830) Tested by: cmaj, twilson ........
	  ................

	* main/manager.c, /: Merged revisions 310993 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r310993 | twilson | 2011-03-16 14:26:57 -0500
	  (Wed, 16 Mar 2011) | 11 lines Merged revisions 310992 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r310992 | twilson | 2011-03-16 14:23:03 -0500 (Wed, 16 Mar 2011)
	  | 4 lines Don't keep trying to write to a closed connection See
	  security advisory AST-2011-003. ........ ................

	* /, main/features.c: Merged revisions 310902 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r310902 | twilson | 2011-03-16 12:19:57 -0500
	  (Wed, 16 Mar 2011) | 43 lines Merged revisions 310889 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r310889 | twilson | 2011-03-16 12:03:27 -0500
	  (Wed, 16 Mar 2011) | 36 lines Merged revisions 310888 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r310888 | twilson | 2011-03-16 11:58:42 -0500 (Wed, 16 Mar 2011)
	  | 29 lines Don't delay DTMF in core bridge while listening for
	  DTMF features This patch is mostly the work of Olle Johansson. I
	  did some cleanup and added the silence generating code if
	  transmit_silence is set. When a channel listens for DTMF in the
	  core bridge, the outbound DTMF is not sent until we have received
	  DTMF_END. For a long DTMF, this is a disaster. We send 4 seconds
	  of DTMF to Asterisk, which sends no audio for those 4 seconds.
	  Some products see this delay and the time skew on RTP packets
	  that results and start ignoring the audio that is sent afterward.
	  With this change, the DTMF_BEGIN frame is inspected and checked.
	  If it matches a feature code, we wait for DTMF_END and activate
	  the feature as before. If transmit_silence=yes in asterisk.conf,
	  silence is sent if we paritally match a multi-digit feature. If
	  it doesn't match a feature, the frame is forwarded along with the
	  DTMF_END without delay. By doing it this way, DTMF is not
	  delayed. (closes issue #15642) Reported by: jasonshugart Patches:
	  issue_15652_dtmf_ast-1.4.patch.txt uploaded by twilson (license
	  396) Tested by: globalnetinc, jde (closes issue #16625) Reported
	  by: sharvanek Review: https://reviewboard.asterisk.org/r/1092/
	  Review: https://reviewboard.asterisk.org/r/1125/ ........
	  ................ ................

2011-03-15 01:49 +0000 [r310835]  Tilghman Lesher <tilghman@meg.abyt.es>

	* addons/chan_ooh323.c, /: Merged revisions 310834 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r310834 | tilghman | 2011-03-14 20:48:25 -0500 (Mon, 14
	  Mar 2011) | 2 lines Fix branch compile. ........

2011-03-15 01:36 +0000 [r310833]  Alec L Davis <sivad.a@paradise.net.nz>

	* /, main/utils.c: Merged revisions 310781 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r310781 | alecdavis | 2011-03-15 14:00:55 +1300 (Tue, 15 Mar
	  2011) | 10 lines core show locks: display ThreadID in hexadecimal
	  Allow easier cross referencing of thread ID's with GDB backtraces
	  (closes issue #18968) Reported by: alecdavis Patches:
	  bug18968.diff.txt uploaded by alecdavis (license 585) ........

2011-03-14 21:51 +0000 [r310735]  Alexandr Anikin <may@telecom-service.ru>

	* addons/chan_ooh323.c, addons/ooh323c/src/ooCapability.c, /,
	  addons/ooh323c/src/ooCalls.h: Merged revisions 310734 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 (closes
	  issue #18693) ........ r310734 | may | 2011-03-15 00:45:53 +0300
	  (Tue, 15 Mar 2011) | 12 lines Introduce t.38 parameters control
	  functionality not full but enough for Send/RcvFax support
	  Introduce t.38 controls between asterisk core and channel/proto
	  layers. Not all parameters are transferred from proto layers but
	  *Fax apps tested and work ok. (issue #18693) Reported by:
	  benngard2 Patches: issue-18693.patch uploaded by may213 (license
	  454) ........

2011-03-14 16:55 +0000 [r310637]  Richard Mudgett <rmudgett@digium.com>

	* /, main/callerid.c: Merged revisions 310636 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r310636 | rmudgett | 2011-03-14 11:50:59 -0500
	  (Mon, 14 Mar 2011) | 39 lines Merged revisions 310635 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r310635 | rmudgett | 2011-03-14 11:47:54 -0500
	  (Mon, 14 Mar 2011) | 32 lines Merged revisions 310633 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r310633 | rmudgett | 2011-03-14 11:38:24 -0500 (Mon, 14 Mar 2011)
	  | 25 lines "Caller*ID failed checksum" on Wildcard TDM2400P and
	  TDM410 The last character in the caller id message is getting a
	  framing error. The checksum is the last character in the message.
	  A framing error in the checksum could be because: 1) The sender
	  did not send a full stop bit. 2) The sender cut off the FSK
	  carrier too soon. 3) The sender opted to send zero of the
	  specified zero to 10 trailing mark bits and round-off errors in
	  the code resulted in the code not being where it thought it was
	  in the demodulated bit stream. Bit 8 of 'b' is set when parity
	  error. Bit 9 of 'b' is set when framing error. Made ignore the
	  framing and parity error bits if the errored character is the
	  checksum. We can tolerate a framing/parity error there. The
	  checksum character validates the message. (closes issue #18474)
	  Reported by: nivek Patches: callerid.c.1.patch uploaded by nivek
	  (license 636) (with modifications) Tested by: nivek ........
	  ................ ................

2011-03-14 15:40 +0000 [r310547-310588]  Jonathan Rose <jrose@digium.com>

	* /, funcs/func_volume.c: Merged revisions 310587 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r310587 | jrose | 2011-03-14 10:27:57 -0500
	  (Mon, 14 Mar 2011) | 15 lines Merged revisions 310585 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r310585 | jrose | 2011-03-14 08:56:22 -0500 (Mon, 14 Mar 2011) |
	  8 lines Adds 'p' as an option to func_volume. When it is on, the
	  old behavior with DTMF controlling volume adjustment will be
	  enforced. When it is off, DTMF will not be processed by the
	  function. Programmed by Jonathan Rose Reviewed by David Vossel,
	  Leif Madsen, and Russell Bryant
	  http://reviewboard.digium.internal/r/93/ ........
	  ................

	* main/audiohook.c: Fixes null reference bug introduced by audio
	  hook changes that affects various OS distributions. Thanks David.

2011-03-12 20:42 +0000 [r310416-310500]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, pbx/pbx_ael.c: Merged revisions 310462 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r310462 | tilghman | 2011-03-12 14:27:54 -0600
	  (Sat, 12 Mar 2011) | 45 lines Merged revisions 310448 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r310448 | tilghman | 2011-03-12 14:24:54 -0600
	  (Sat, 12 Mar 2011) | 38 lines Recorded merge of revisions 310435
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r310435 | tilghman | 2011-03-12 14:22:07 -0600 (Sat, 12 Mar 2011)
	  | 31 lines Add AELSub, which provides a stable entry point into
	  AEL subroutines. This commit needs some explanation, given that
	  we're adding a new application into an existing release branch.
	  This is generally a violation of our release policy, except in
	  very limited circumstances, and I believe this is one of those
	  circumstances. The problem that this solves is one of the sanity
	  of using multiple dialplan languages to define a dialplan. In the
	  case of the reporter, he or she is using AEL is define
	  subroutines, while using Realtime extensions to invoke those
	  subroutines. While you can do this, it's based upon the reality
	  of AEL using actual dialplan extensions; however, there is no
	  guarantee that the details of _how_ AEL is compiled into
	  extensions will remain stable. In fact, at the time of this
	  commit, it has already changed twice, once in a fundamental way.
	  Now normally, a new application would only be added to trunk.
	  However, this application is explicitly to create a stable
	  user-level API between versions, and adding it to trunk only will
	  not solve the user's problem of switching between 1.6.2 and 1.8,
	  nor will it help anybody switching from 1.8 to 1.10. Therefore,
	  it needs to go into existing release branches. For the sake of
	  consistency, and also because one of the changes was between 1.4
	  and 1.6.x, I am also electing to commit this to 1.4. (closes
	  issue #18910) Reported by: alexandrekeller Patches:
	  20110304__issue18919__1.6.2.diff.txt uploaded by tilghman
	  (license 14) 20110304__issue18919__1.4.diff.txt uploaded by
	  tilghman (license 14) Tested by: alexandrekeller ........
	  ................ ................

	* /, funcs/func_odbc.c: Merged revisions 310415 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r310415 | tilghman | 2011-03-12 14:05:46 -0600
	  (Sat, 12 Mar 2011) | 14 lines Merged revisions 310414 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r310414 | tilghman | 2011-03-12 13:51:23 -0600 (Sat, 12 Mar 2011)
	  | 7 lines Transactional handles should be used for the insertbuf,
	  if available. Also, fix a possible resource leak. (closes issue
	  #18943) Reported by: irroot ........ ................

2011-03-11 18:54 +0000 [r310373]  Jonathan Rose <jrose@digium.com>

	* include/asterisk/audiohook.h, main/audiohook.c, CHANGES,
	  apps/app_mixmonitor.c: Mix Monitor: Now with r and t options.

2011-03-11 15:09 +0000 [r310332]  Kevin P. Fleming <kpfleming@digium.com>

	* Makefile, configure, codecs/gsm/Makefile, configure.ac,
	  makeopts.in, codecs/lpc10/Makefile: Use "-march=native" when
	  possible. Recent versions of GCC have a tuning option value of
	  'native', which causes the compiler to optimize the build for the
	  CPU the compile is performed on. Since most people are building
	  Asterisk on the machine they plan to run it on, the configure
	  script and build system will now use this value unless a
	  different value is specified by the user in CFLAGS when the
	  configure script is executed. In addition, this value will be
	  used for building the GSM and LPC10 codecs as well, in preference
	  to the logic that has been in their Makefiles forever to optimize
	  for certain types of CPUs.

2011-03-11 06:56 +0000 [r310288]  Alec L Davis <sivad.a@paradise.net.nz>

	* main/rtp_engine.c, /: Merged revisions 310287 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r310287 | alecdavis | 2011-03-11 19:47:44 +1300 (Fri, 11 Mar
	  2011) | 17 lines remote_bridge_loop: prevent segfault when after
	  transfer of IAX2 of DAHDI call If the channel condition is one of
	  the following after breaking out of the loop, don't try to
	  update_peer (where x = 0/1) 1). ZOMBIE 2). cx->tech_pvt != pvtx
	  3). gluex != ast_rtp_instance_get_glue(cx->tech->type)) (closes
	  issue #18781) Reported by: alecdavis Patches: bug18781.diff3.txt
	  uploaded by alecdavis (license 585) Tested by: alecdavis, ZX81
	  Review: https://reviewboard.asterisk.org/r/1128/ ........

2011-03-10 16:09 +0000 [r310241]  Terry Wilson <twilson@digium.com>

	* main/manager.c, /, res/res_phoneprov.c: Merged revisions 310240
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r310240 | twilson | 2011-03-10 10:05:45 -0600 (Thu, 10 Mar 2011)
	  | 13 lines Add \r\n to remaining http headers passed to
	  ast_http_send r309204 changed the behavior of ast_http_send. It
	  now requires headers to be passed with trailing \r\n. This change
	  updates the remaining instances in the code that did not pass the
	  \r\n. (closes issue #18186) Reported by: nivaldomjunior Patches:
	  res_phoneprov.c.diff uploaded by lathama (license 1028)
	  manager.diff.txt uploaded by twilson (license 396) Tested by:
	  lathama ........

2011-03-10 15:28 +0000 [r310238]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 310231 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r310231 | mmichelson | 2011-03-10 09:17:04 -0600 (Thu, 10 Mar
	  2011) | 9 lines Be more tolerant of what URI we accept for call
	  completion PUBLISH requests. (closes issue #18946) Reported by:
	  GeorgeKonopacki Patches: 18946.patch uploaded by mmichelson
	  (license 60) Tested by: GeorgeKonopacki ........

2011-03-10 05:54 +0000 [r310143]  Tilghman Lesher <tilghman@meg.abyt.es>

	* res/res_config_odbc.c, /, funcs/func_odbc.c,
	  apps/app_voicemail.c: Merged revisions 310142 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r310142 | tilghman | 2011-03-09 23:53:29 -0600
	  (Wed, 09 Mar 2011) | 19 lines Merged revisions 310141 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r310141 | tilghman | 2011-03-09 23:51:37 -0600
	  (Wed, 09 Mar 2011) | 12 lines Merged revisions 310140 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r310140 | tilghman | 2011-03-09 23:38:44 -0600 (Wed, 09 Mar 2011)
	  | 5 lines Initialize column size to 0 to deal with a potential
	  UnixODBC bug on 64-bit systems. (closes issue #18295) Reported
	  by: pruiz ........ ................ ................

2011-03-08 20:34 +0000 [r310089]  Jonathan Rose <jrose@digium.com>

	* /, channels/sip/dialplan_functions.c: Merged revisions 310088 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r310088 | jrose | 2011-03-08 14:19:32 -0600 (Tue, 08 Mar 2011) |
	  9 lines Returns with an error notice if CHANNEL function of SIP
	  channel is read without arguments. (Closes issue #18653) Reported
	  by: wuwu Patches: diff.patch uploaded by jrose (license 1225)
	  Tested by: jrose ........

2011-03-08 18:19 +0000 [r310045]  Terry Wilson <twilson@digium.com>

	* /, res/res_calendar.c: Merged revisions 310039 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r310039 | twilson | 2011-03-08 10:10:50 -0800 (Tue, 08 Mar 2011)
	  | 11 lines Spelling fix in "calendar show calendar"
	  s/Cartegories/Catagories/ (closes issue #18931) Reported by:
	  pdugas Patches: res_calendar.c.patch uploaded by pdugas (license
	  1222) Review: [full review board URL with trailing slash]
	  ........

2011-03-08 16:46 +0000 [r309996]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/sig_pri.c: Merged revisions 309994 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r309994 | rmudgett | 2011-03-08 10:37:02 -0600 (Tue, 08 Mar 2011)
	  | 1 line Make pri parameter description consistent. ........

2011-03-07 22:16 +0000 [r309859]  Jonathan Rose <jrose@digium.com>

	* /, apps/app_mixmonitor.c: Merged revisions 309858 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r309858 | jrose | 2011-03-07 16:07:25 -0600
	  (Mon, 07 Mar 2011) | 22 lines Merged revisions 309857 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r309857 | jrose | 2011-03-07 16:04:44 -0600
	  (Mon, 07 Mar 2011) | 15 lines Merged revisions 309856 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r309856 | jrose | 2011-03-07 16:02:12 -0600 (Mon, 07 Mar 2011) |
	  8 lines Bug fix for MixMonitor involving filenames with '.' not
	  in the extension Closes issue #18391) Reported by: pabelanger
	  Patches: bugfix.patch uploaded by jrose (license 1225) Tested by:
	  jrose ........ ................ ................

2011-03-07 01:01 +0000 [r309809]  Tilghman Lesher <tilghman@meg.abyt.es>

	* channels/chan_dahdi.c, /, configure,
	  include/asterisk/autoconfig.h.in, main/ast_expr2f.c,
	  configure.ac, main/ast_expr2.fl: Merged revisions 309808 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r309808 | tilghman | 2011-03-06 18:54:42 -0600
	  (Sun, 06 Mar 2011) | 14 lines Merged revisions 309251 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r309251 | tilghman | 2011-03-01 19:06:02 -0600 (Tue, 01 Mar 2011)
	  | 7 lines Revert previous 2 commits, and instead conditionally
	  redefine the same macro used in flex 2.5.35 that clashed with our
	  workaround. Not surprisingly, the workaround was exactly the same
	  code as was provided by the Flex maintainers, albeit in two
	  different places, in different macros. This should fix the
	  FreeBSD builds, which have an older version of Flex. ........
	  ................

2011-03-07 00:14 +0000 [r309766]  Mark Michelson <mmichelson@digium.com>

	* /, configs/sip.conf.sample: Merged revisions 309765 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r309765 | mmichelson | 2011-03-06 18:13:36 -0600 (Sun,
	  06 Mar 2011) | 3 lines Indicate that Asterisk uses the Allow
	  header to determine if MESSAGE requests should be sent. ........

2011-03-05 17:53 +0000 [r309721]  Moises Silva <moises.silva@gmail.com>

	* channels/chan_dahdi.c, /: Merged revisions 309720 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r309720 | moy | 2011-03-05 12:44:30 -0500 (Sat, 05 Mar
	  2011) | 6 lines Fix caller id passed to openr2_chan_make_call
	  (closes issue #18894) Reported by: malufrj Tested by: moy
	  ........

2011-03-05 10:30 +0000 [r309679]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, main/asterisk.c: Merged revisions 309678 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r309678 | tilghman | 2011-03-05 04:29:30 -0600
	  (Sat, 05 Mar 2011) | 14 lines Merged revisions 309677 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r309677 | tilghman | 2011-03-05 04:28:24 -0600 (Sat, 05 Mar 2011)
	  | 7 lines Missed part of the conversion when we started passing
	  ppid to astcanary. (closes issue #18850) Reported by: viraptor
	  Patches: canary_ppid.patch uploaded by viraptor (license 543)
	  ........ ................

2011-03-04 23:22 +0000 [r309640]  Terry Wilson <twilson@digium.com>

	* configs/calendar.conf.sample, include/asterisk/calendar.h,
	  CHANGES, res/res_calendar.c: Add setvar option to calendaring
	  Adding the setvar option with variable substitution on the value
	  allows things like setting the outbound caller id name to the
	  summary of a calendar event, etc. Values could be chained
	  together as they are appended in order to do some scripting if
	  necessary. Review: https://reviewboard.asterisk.org/r/1134/

2011-03-04 19:38 +0000 [r309493-309587]  Matthew Nicholson <mnicholson@digium.com>

	* /, pbx/pbx_lua.c: Merged revisions 309585 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r309585 | mnicholson | 2011-03-04 13:38:25 -0600
	  (Fri, 04 Mar 2011) | 9 lines Merged revisions 309584 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r309584 | mnicholson | 2011-03-04 13:37:13 -0600 (Fri,
	  04 Mar 2011) | 2 lines Restore mysterious lua_pushvalue() call
	  removed in r309494. The mystery has been solved. ........
	  ................

	* /, pbx/pbx_lua.c: Merged revisions 309542 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r309542 | mnicholson | 2011-03-04 13:00:33 -0600
	  (Fri, 04 Mar 2011) | 11 lines Merged revisions 309541 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r309541 | mnicholson | 2011-03-04 12:59:20 -0600 (Fri, 04 Mar
	  2011) | 4 lines Check for errors from fseek() when loading config
	  file, properly abort on errors from fread(), and supply a
	  traceback for errors generated when loading the config file.
	  Also, prepend a newline to traceback output so that the main
	  error message is on it's own line. ........ ................

	* /, pbx/pbx_lua.c: Merged revisions 309495 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r309495 | mnicholson | 2011-03-04 12:10:23 -0600
	  (Fri, 04 Mar 2011) | 9 lines Merged revisions 309494 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r309494 | mnicholson | 2011-03-04 11:55:57 -0600 (Fri,
	  04 Mar 2011) | 2 lines remove mysterious lua_pushvalue() that is
	  never used ........ ................

	* pbx/pbx_lua.c, configs/extensions.lua.sample: Add support for
	  defining hints from pbx_lua (closes issue #16024) Reported by:
	  mnicholson

2011-03-04 17:40 +0000 [r309491]  Russell Bryant <russell@digium.com>

	* channels/chan_nbs.c: Fix a buglet that prevented chan_nbs from
	  loading (and subsequently stopped Asterisk). In passing, convert
	  the return codes to be the proper AST_MODULE_LOAD_* constants.

2011-03-04 16:00 +0000 [r309449]  Matthew Nicholson <mnicholson@digium.com>

	* /, pbx/pbx_lua.c: Merged revisions 309448 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r309448 | mnicholson | 2011-03-04 09:59:25 -0600 (Fri, 04 Mar
	  2011) | 8 lines Export global symbols from pbx_lua to allow
	  modules to be loaded. Fixes a regression introduced in r278132.
	  (closes issue #18671) Reported by: Igels Patches:
	  pbx_lua_global_symbols1.diff uploaded by mnicholson (license 96)
	  Tested by: Igels ........

2011-03-04 15:28 +0000 [r309446]  Richard Mudgett <rmudgett@digium.com>

	* channels/sig_pri.h, channels/chan_dahdi.c, /,
	  funcs/func_channel.c, channels/sig_pri.c, UPGRADE-1.8.txt: Merged
	  revisions 309445 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r309445 | rmudgett | 2011-03-04 09:22:04 -0600 (Fri, 04 Mar 2011)
	  | 46 lines Get real channel of a DAHDI call. Starting with
	  Asterisk v1.8, the DAHDI channel name format was changed for ISDN
	  calls to: DAHDI/i<span>/<number>[:<subaddress>]-<sequence-number>
	  There were several reasons that the channel name had to change.
	  1) Call completion requires a device state for ISDN phones. The
	  generic device state uses the channel name. 2) Calls do not
	  necessarily have B channels. Calls placed on hold by an ISDN
	  phone do not have B channels. 3) The B channel a call initially
	  requests may not be the B channel the call ultimately uses.
	  Changes to the internal implementation of the Asterisk master
	  channel list caused deadlock problems for chan_dahdi if it needed
	  to change the channel name. Chan_dahdi no longer changes the
	  channel name. 4) DTMF attended transfers now work with ISDN
	  phones because the channel name is "dialable" like the chan_sip
	  channel names. For various reasons, some people need to know
	  which B channel a DAHDI call is using. * Added
	  CHANNEL(dahdi_span), CHANNEL(dahdi_channel), and
	  CHANNEL(dahdi_type) so the dialplan can determine the B channel
	  currently in use by the channel. Use CHANNEL(no_media_path) to
	  determine if the channel even has a B channel. * Added AMI event
	  DAHDIChannel to associate a DAHDI channel with an Asterisk
	  channel so AMI applications can passively determine the B channel
	  currently in use. Calls with "no-media" as the DAHDIChannel do
	  not have an associated B channel. No-media calls are either on
	  hold or call-waiting. (closes issue #17683) Reported by: mrwho
	  Tested by: rmudgett (closes issue #18603) Reported by: arjankroon
	  Patches: issue17683_18603_v1.8_v2.patch uploaded by rmudgett
	  (license 664) Tested by: stever28, rmudgett ........

2011-03-04 01:52 +0000 [r309404]  David Ruggles <thedavidfactor@gmail.com>

	* /, apps/app_externalivr.c: Merged revisions 309403 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r309403 | diruggles | 2011-03-03 20:50:44 -0500
	  (Thu, 03 Mar 2011) | 23 lines Merged revisions 309356 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r309356 | diruggles | 2011-03-03 19:42:28 -0500
	  (Thu, 03 Mar 2011) | 16 lines Merged revisions 309355 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r309355 | diruggles | 2011-03-03 19:34:13 -0500 (Thu, 03 Mar
	  2011) | 9 lines fix small memory leak fix small memory leak
	  caused by a string allocation that wasn't freed (closes issue
	  #18907) Reported by: andy11 Patches:
	  asterisk_trunk-app_externalivr-leak.patch uploaded by andy11
	  (license 1224) ........ ................ ................

2011-03-02 21:08 +0000 [r309209-309300]  Jason Parker <jparker@digium.com>

	* main/channel.c: Add HangupRequest manager event, to specify
	  when/where a channel gets hung up. (closes issue #18226) Reported
	  by: clegall_proformatique Patches:
	  asterisk_1.8_293157_hanguprequests.svn.patch uploaded by clegall
	  proformatique (license 1139)

	* /, channels/chan_sip.c: Merged revisions 309256 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r309256 | qwell | 2011-03-02 13:54:20 -0600
	  (Wed, 02 Mar 2011) | 15 lines Merged revisions 309255 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r309255 | qwell | 2011-03-02 13:53:47 -0600 (Wed, 02 Mar 2011) |
	  8 lines Fix usage of "hasvoicemail=yes" and "mailbox=" in
	  users.conf for SIP. Since it's a duplicate, nothing is going to
	  be done, so delme doesn't need to be set at all. Strangely, when
	  this was added, this was being set to 1 in 1.6, and 0 in trunk.
	  (issue AST-439) ........ ................

	* /, main/http.c: Merged revisions 309204 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r309204 | qwell | 2011-03-01 16:25:44 -0600 (Tue, 01 Mar 2011) |
	  7 lines Fix consistency of CRLFs on HTTP headers that get sent
	  out. (closes issue #18186) Reported by: nivaldomjunior Patches:
	  18186-httpheadernewline.diff uploaded by qwell (license 4)
	  ........

2011-03-01 21:57 +0000 [r309127-309171]  Richard Mudgett <rmudgett@digium.com>

	* /, funcs/func_channel.c: Merged revisions 309170 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r309170 | rmudgett | 2011-03-01 15:57:26 -0600 (Tue, 01
	  Mar 2011) | 7 lines Document CHANNEL(keypad_digits) and
	  CHANNEL(no_media_path). * Added XML documentation for
	  CHANNEL(keypad_digits) and CHANNEL(no_media_path). * Tweaked XML
	  documentation for CHANNEL(reversecharge). ........

	* channels/sig_analog.c, /: Merged revisions 309126 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r309126 | rmudgett | 2011-03-01 12:44:05 -0600 (Tue, 01
	  Mar 2011) | 16 lines Chan_dahdi does not retain CID when
	  detecting DTMF CID without polarity reversal. Looks like an
	  unintended change when sig_analog.c was extracted from
	  chan_dahdi.c. Removed useless conditional around needed code and
	  fixed resulting compiler warning. (closes issue #18667) Reported
	  by: enegaard Patches: issue18667.patch uploaded by enegaard
	  (license 1197) Tested by: enegaard JIRA SWP-2965 ........

2011-03-01 16:22 +0000 [r309090]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 309084 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r309084 | dvossel | 2011-03-01 10:09:11 -0600
	  (Tue, 01 Mar 2011) | 15 lines Merged revisions 309083 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r309083 | dvossel | 2011-03-01 10:05:25 -0600 (Tue, 01 Mar 2011)
	  | 9 lines Fixes thread blocking issue in the sip TCP/TLS
	  implementation. (closes issue #18497) Reported by: vois Patches:
	  issues_18497.diff uploaded by dvossel (license 671) Tested by:
	  vois, rossbeer, kowalma, Freddi_Fonet ........ ................

2011-02-28 11:16 +0000 [r308992-309036]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, configure, include/asterisk/autoconfig.h.in,
	  main/ast_expr2f.c, configure.ac, main/ast_expr2.fl: Merged
	  revisions 309035 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r309035 | tilghman | 2011-02-28 05:10:28 -0600
	  (Mon, 28 Feb 2011) | 15 lines Merged revisions 309033-309034 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r309033 | tilghman | 2011-02-28 04:43:12 -0600 (Mon, 28 Feb 2011)
	  | 4 lines A later version of flex already includes the fwrite
	  workaround code, which if used twice causes a compilation error.
	  Detect whether Flex will compile without the workaround; if so,
	  suppress our workaround code. ........ r309034 | tilghman |
	  2011-02-28 05:07:52 -0600 (Mon, 28 Feb 2011) | 2 lines Clarify
	  meaning, removing double negative (stupid!) ........
	  ................

	* /, funcs/func_odbc.c: Merged revisions 308991 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r308991 | tilghman | 2011-02-28 03:33:22 -0600
	  (Mon, 28 Feb 2011) | 14 lines Merged revisions 308990 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r308990 | tilghman | 2011-02-28 03:32:22 -0600 (Mon, 28 Feb 2011)
	  | 7 lines Statements updating zero rows may return SQL_NO_DATA.
	  This is fine; it's handled. (closes issue #18815) Reported by:
	  irroot Patches: func_odbc.insert_nodata.patch uploaded by irroot
	  (license 52) ........ ................

2011-02-25 18:58 +0000 [r308946]  Alec L Davis <sivad.a@paradise.net.nz>

	* /, channels/chan_sip.c: Merged revisions 308945 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r308945 | alecdavis | 2011-02-26 07:52:53 +1300 (Sat, 26 Feb
	  2011) | 21 lines Fix Deadlock with attended transfer of SIP call
	  Call path sip_set_rtp_peer (locks chan then pvt)
	  transmit_reinvite_with_sdp try_suggested_sip_codec
	  pbx_builtin_getvar_helper (locks p->owner) But by the time
	  p->owner lock was attempted, seems as though chan and p->owner
	  were different. So in sip_set_rtp_peer, lock pvt first then lock
	  p->owner using deadlocking methods. (closes issue #18837)
	  Reported by: alecdavis Patches: bug18837-trunk.diff3.txt uploaded
	  by alecdavis (license 585) Tested by: alecdavis, Irontec, ZX81,
	  cmaj Review: [https://reviewboard.asterisk.org/r/1126/] ........

2011-02-24 21:43 +0000 [r308904]  Richard Mudgett <rmudgett@digium.com>

	* main/channel.c, /: Merged revisions 308903 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r308903 | rmudgett | 2011-02-24 15:38:41 -0600 (Thu, 24 Feb 2011)
	  | 9 lines Invalid read in ast_channel_set_caller_event().
	  Valgrind reported that ast_channel_set_caller_event() was reading
	  data from a freed buffer when using the pre_set structure.
	  Rearange things to pre-calculate the name and number pointer
	  before updating the caller party structure to see if the name or
	  number was changed. ........

2011-02-24 17:59 +0000 [r308816]  Terry Wilson <twilson@digium.com>

	* main/manager.c, /: Merged revisions 308815 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r308815 | twilson | 2011-02-24 11:57:18 -0600
	  (Thu, 24 Feb 2011) | 26 lines Merged revisions 308814 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r308814 | twilson | 2011-02-24 11:54:49 -0600
	  (Thu, 24 Feb 2011) | 19 lines Merged revisions 308813 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r308813 | twilson | 2011-02-24 11:42:16 -0600 (Thu, 24 Feb 2011)
	  | 12 lines Don't broadcast FullyBooted to every AMI connection
	  The FullyBooted event should not be sent to every AMI connection
	  every time someone connects via AMI. It should only be sent to
	  the user who just connected. (closes issue #18168) Reported by:
	  FeyFre Patches: bug0018168.patch uploaded by FeyFre (license
	  1142) Tested by: FeyFre, twilson ........ ................
	  ................

2011-02-24 15:10 +0000 [r308724]  Matthew Nicholson <mnicholson@digium.com>

	* main/udptl.c, /: Merged revisions 308723 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r308723 | mnicholson | 2011-02-24 09:06:14 -0600
	  (Thu, 24 Feb 2011) | 16 lines Merged revisions 308722 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r308722 | mnicholson | 2011-02-24 08:59:41 -0600
	  (Thu, 24 Feb 2011) | 9 lines Merged revisions 308721 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r308721 | mnicholson | 2011-02-24 08:54:56 -0600 (Thu,
	  24 Feb 2011) | 2 lines silence gcc 4.2 compiler warning ........
	  ................ ................

2011-02-24 03:49 +0000 [r308680]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c, configs/sip.conf.sample: Merged revisions
	  308679 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r308679 | twilson | 2011-02-23 21:41:34 -0600
	  (Wed, 23 Feb 2011) | 15 lines Merged revisions 308678 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r308678 | twilson | 2011-02-23 21:38:22 -0600 (Wed, 23 Feb 2011)
	  | 8 lines Use remotesecret to authenticate with a remote party
	  The remotesecret option was only being used for outbound
	  registration and not for placing calls. This patch uses
	  remotesecret on outbound calls if it is set, otherwise secret is
	  still used. Review: https://reviewboard.asterisk.org/r/1107/
	  ........ ................

2011-02-23 23:55 +0000 [r308623-308624]  Richard Mudgett <rmudgett@digium.com>

	* main/translate.c: Fix compiler warning.

	* /, channels/sig_pri.c: Merged revisions 308622 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r308622 | rmudgett | 2011-02-23 17:38:04 -0600 (Wed, 23 Feb 2011)
	  | 9 lines sig_pri_new_ast_channel() should return NULL when
	  new_ast_channel() fails. (closes issue #18874) Reported by: cmaj
	  Patches:
	  patch-sig_pri-crash-possible-null-channel-pointer.diff.txt
	  uploaded by cmaj (license 830) JIRA SWP-3172 ........

2011-02-22 23:04 +0000 [r308582]  David Vossel <dvossel@digium.com>

	* main/format.c, funcs/func_speex.c, main/frame.c,
	  main/rtp_engine.c, include/asterisk/silk.h (added),
	  codecs/speex/fixed_generic.h (added), bridges/bridge_softmix.c,
	  channels/chan_gtalk.c, bridges/bridge_multiplexed.c,
	  channels/chan_iax2.c, main/format_pref.c, codecs/speex/resample.c
	  (added), main/channel.c, funcs/func_pitchshift.c,
	  include/asterisk/audiohook.h, channels/chan_skinny.c,
	  main/format_cap.c, funcs/func_volume.c, codecs/speex (added),
	  codecs/codec_resample.c, include/asterisk/format.h,
	  codecs/speex/arch.h (added), include/asterisk/frame.h,
	  include/asterisk/rtp_engine.h, codecs/speex/stack_alloc.h
	  (added), main/bridging.c, apps/app_jack.c,
	  configs/codecs.conf.sample, res/res_rtp_asterisk.c,
	  formats/format_attr_silk.c (added), channels/chan_sip.c,
	  main/translate.c, main/slinfactory.c, codecs/codec_speex.c,
	  include/asterisk/_private.h, CHANGES,
	  codecs/speex/speex_resampler.h (added), res/res_mutestream.c,
	  include/asterisk/format_cap.h, codecs/Makefile,
	  channels/chan_jingle.c, main/data.c, channels/iax2.h,
	  main/audiohook.c, apps/app_chanspy.c, apps/app_mixmonitor.c,
	  main/asterisk.c, include/asterisk/slinfactory.h,
	  include/asterisk/translate.h, codecs/speex/resample_sse.h
	  (added), include/asterisk/time.h: Media Project Phase2: SILK
	  8khz-24khz, SLINEAR 8khz-192khz, SPEEX 32khz, hd audio
	  ConfBridge, and other stuff -Functional changes 1. Dynamic global
	  format list build by codecs defined in codecs.conf 2. SILK 8khz,
	  12khz, 16khz, and 24khz with custom attributes defined in
	  codecs.conf 3. Negotiation of SILK attributes in chan_sip. 4.
	  SPEEX 32khz with translation 5. SLINEAR 8khz, 12khz, 24khz,
	  32khz, 44.1khz, 48khz, 96khz, 192khz with translation using
	  codec_resample.c 6. Various changes to RTP code required to
	  properly handle the dynamic format list and formats with
	  attributes. 7. ConfBridge now dynamically jumps to the best
	  possible sample rate. This allows for conferences to take
	  advantage of HD audio (Which sounds awesome) 8. Audiohooks are no
	  longer limited to 8khz audio, and most effects have been updated
	  to take advantage of this such as Volume, DENOISE, PITCH_SHIFT.
	  9. codec_resample now uses its own code rather than depending on
	  libresample. -Organizational changes Global format list is moved
	  from frame.c to format.c Various format specific functions moved
	  from frame.c to format.c Review:
	  https://reviewboard.asterisk.org/r/1104/

2011-02-22 15:33 +0000 [r308527]  Andrew Latham <lathama@gmail.com>

	* main/http.c: Use ast_debug for console logging Guessed the log
	  levels based on info that level 3 is the soft roof. Can we create
	  a page / document to define the levels?

2011-02-21 15:04 +0000 [r308417]  Matthew Nicholson <mnicholson@digium.com>

	* main/udptl.c, /: Merged revisions 308416 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r308416 | mnicholson | 2011-02-21 09:02:20 -0600
	  (Mon, 21 Feb 2011) | 19 lines Merged revisions 308414 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r308414 | mnicholson | 2011-02-21 09:00:22 -0600
	  (Mon, 21 Feb 2011) | 12 lines Merged revisions 308413 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r308413 | mnicholson | 2011-02-21 08:57:15 -0600 (Mon, 21 Feb
	  2011) | 5 lines Properly check the bounds of arrays when decoding
	  UDPTL packets. Also, remove broken support for receiving UDPTL
	  packets larger than 16k. That shouldn't ever happen anyway.
	  AST-2011-002 FAX-281 ........ ................ ................

2011-02-21 14:14 +0000 [r308372]  Andrew Latham <lathama@gmail.com>

	* main/http.c: Add HTTP URI Debug logging and update notice enable
	  reporting of the request URI / URL in debugging change funny
	  debug note to a serious note.

2011-02-21 13:58 +0000 [r308371]  Tzafrir Cohen <tzafrir.cohen@xorcom.com>

	* main/pbx.c: fix a memory leak in device state The callback
	  handle_statechange (pbx.c) fails to release its data pointer,
	  leaking memory in the process. Reported by: tzafrir Patches:
	  18735_pbx_free_callback.diff uploaded by tzafrir (license 46)
	  Review: https://reviewboard.asterisk.org/r/1110/

2011-02-19 14:07 +0000 [r308331]  Andrew Latham <lathama@gmail.com>

	* main/http.c: Add CSS MIME Type Modern browsers are checking for
	  the MIME Type of pages and in some cases will not load a file if
	  the type is wrong.

2011-02-19 11:03 +0000 [r308289]  Tilghman Lesher <tilghman@meg.abyt.es>

	* utils, /: Merged revisions 308288 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r308288 | tilghman | 2011-02-19 05:02:49 -0600 (Sat, 19 Feb 2011)
	  | 2 lines A few more (copies of) files to ignore in this
	  directory. ........

2011-02-18 00:11 +0000 [r308243]  Alexandr Anikin <may@telecom-service.ru>

	* addons/chan_ooh323.c, /, addons/ooh323cDriver.c,
	  addons/ooh323cDriver.h: Merged revisions 308242 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r308242 | may | 2011-02-18 03:07:20 +0300 (Fri, 18 Feb 2011) | 3
	  lines added g729onlyA option for announce only AnnexA g.729 codec
	  in h.323 capabilities. Option can be global or per user/peer.
	  ........

2011-02-17 20:21 +0000 [r308205]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c: Add more verbage to CLI command 'pri show
	  channels' usage.

2011-02-16 22:02 +0000 [r308157]  Paul Belanger <pabelanger@digium.com>

	* /, addons/ooh323c/src/ooSocket.c: Merged revisions 308150 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r308150 | pabelanger | 2011-02-16 15:21:17 -0500 (Wed, 16 Feb
	  2011) | 2 lines Fix FreeBSD builds. ........

2011-02-16 08:06 +0000 [r308099]  Alexandr Anikin <may@telecom-service.ru>

	* /, addons/ooh323c/src/ooSocket.c: Merged revisions 308098 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r308098 | may | 2011-02-16 10:57:22 +0300 (Wed, 16 Feb 2011) | 2
	  lines ifdef __linux__ keepalive variables also ........

2011-02-15 23:34 +0000 [r308013]  Jason Parker <jparker@digium.com>

	* /, apps/app_queue.c: Merged revisions 308010 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r308010 | qwell | 2011-02-15 17:34:03 -0600
	  (Tue, 15 Feb 2011) | 24 lines Merged revisions 308007 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r308007 | qwell | 2011-02-15 17:33:24 -0600
	  (Tue, 15 Feb 2011) | 17 lines Merged revisions 308002 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r308002 | qwell | 2011-02-15 17:32:20 -0600 (Tue, 15 Feb 2011) |
	  10 lines Fix regression that changed behavior of queues when
	  ringing a queue member. This reverts r298596, which was to fix a
	  highly bizarre and contrived issue with a queue member that
	  called into his own queue being transferred back into his own
	  queue. I couldn't reproduce that issue in any way. I think one of
	  the other recent transfer fixes actually fixed this. (closes
	  issue #18747) Reported by: vrban ........ ................
	  ................

2011-02-15 23:07 +0000 [r307969]  Alexandr Anikin <may@telecom-service.ru>

	* addons/ooh323c/src/ooSocket.c: include tcp keepalive socket calls
	  only on linux, freebsd and others don't have these options on
	  sockets.

2011-02-15 21:42 +0000 [r307963-307964]  Richard Mudgett <rmudgett@digium.com>

	* channels/sig_pri.h, channels/chan_dahdi.c, channels/sig_pri.c:
	  Add CLI "pri show channels" command. List the current mapping of
	  DAHDI B channels to Asterisk channel names and which calls are on
	  hold or call-waiting. Calls on hold or call-waiting are not
	  associated with any B channel. JIRA LIBPRI-27 JIRA SWP-2547

	* apps/app_dial.c, /: Merged revisions 307962 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r307962 | rmudgett | 2011-02-15 13:52:45 -0600 (Tue, 15 Feb 2011)
	  | 1 line Don't crash when forcing caller id. ........

2011-02-15 18:09 +0000 [r307927]  David Vossel <dvossel@digium.com>

	* channels/chan_phone.c: Fixes compile error in chan_phone for big
	  endian

2011-02-15 16:18 +0000 [r307883]  Richard Mudgett <rmudgett@digium.com>

	* channels/sig_pri.h, channels/chan_dahdi.c, /,
	  channels/chan_sip.c, main/ccss.c, channels/sig_pri.c,
	  include/asterisk/ccss.h: Merged revisions 307879 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r307879 | rmudgett | 2011-02-15 10:13:55 -0600 (Tue, 15
	  Feb 2011) | 37 lines No response sent for SIP CC
	  subscribe/resubscribe request. Asterisk does not send a response
	  if we try to subscribe for call completion after we have received
	  a 180 Ringing. You can only subscribe for call completion when
	  the call has been cleared. When we receive the 180 Ringing, for
	  this call, its call-completion state is 'CC_AVAILABLE'. If we
	  then send a subscribe message to Asterisk, it trys to change the
	  call-completion state to 'CC_CALLER_REQUESTED'. Because this is
	  an invalid state change, it just ignores the message. The only
	  state Asterisk will accept our subscribe message is in the
	  'CC_CALLER_OFFERED' state. Asterisk will go into the
	  'CC_CALLER_OFFERED' when the SIP client clears the call by
	  sending a CANCEL. Asterisk should always send a response. Even if
	  its a negative one. The fix is to allow for the CCSS core to
	  notify a CC agent that a failure has occurred when CC is
	  requested. The "ack" callback is replaced with a "respond"
	  callback. The "respond" callback has a parameter indicating
	  either a successful response or a specific type of failure that
	  may need to be communicated to the requester. (closes issue
	  #18336) Reported by: GeorgeKonopacki Tested by: mmichelson,
	  rmudgett JIRA SWP-2633 (closes issue #18337) Reported by:
	  GeorgeKonopacki Tested by: mmichelson JIRA SWP-2634 ........

2011-02-15 07:03 +0000 [r307751-307838]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, funcs/func_odbc.c: Merged revisions 307837 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r307837 | tilghman | 2011-02-15 01:02:45 -0600
	  (Tue, 15 Feb 2011) | 15 lines Merged revisions 307836 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r307836 | tilghman | 2011-02-15 01:01:37 -0600 (Tue, 15 Feb 2011)
	  | 8 lines Need to retrieve the rows affected before using the
	  associated variable. (closes issue #18795) Reported by: irroot
	  Patches: 20110211__issue18795.diff.txt uploaded by tilghman
	  (license 14) Tested by: tilghman ........ ................

	* /, res/res_odbc.c: Merged revisions 307793 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r307793 | tilghman | 2011-02-14 14:16:55 -0600
	  (Mon, 14 Feb 2011) | 15 lines Merged revisions 307792 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r307792 | tilghman | 2011-02-14 14:10:28 -0600 (Mon, 14 Feb 2011)
	  | 8 lines Increment usage count at first reference, to avoid a
	  race condition with many threads creating connections all at
	  once. (issue #18156) Reported by: asgaroth Patches:
	  20110214__issue18156.diff.txt uploaded by tilghman (license 14)
	  Tested by: tilghman ........ ................

	* addons/chan_ooh323.c, addons/ooh323c/src/ooCmdChannel.c: Making
	  trunk compile again.

	* apps/app_dial.c, /, apps/app_queue.c: Merged revisions 307750 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r307750 | tilghman | 2011-02-14 00:50:23 -0600 (Mon, 14 Feb 2011)
	  | 23 lines Calling a gosub routine defined in AEL from Dial/Queue
	  ceased to work. A bug in AEL did not distinguish between the "s"
	  extension generated by AEL and an "s" extension that was required
	  to exist by the chan_dahdi (or another channel) that was not
	  supplied with a starting extension. Therefore, AEL made incorrect
	  assumptions about what commands were permissable in the context.
	  This was fixed by making AEL generate a different extension name.
	  However, Dial and Queue make additional assumptions about the
	  name of the default gosub extension. Therefore, they needed to be
	  brought into line with a "macro" rendered by AEL (as a gosub),
	  without breaking traditional dialplans written without the aid of
	  AEL. Related to (issue #18480) Reported by: nivek (closes issue
	  #18729) Reported by: kkm Patches: 20110209__issue18729.diff.txt
	  uploaded by tilghman (license 14)
	  018729-dial-queue-gosub-try3.patch uploaded by kkm (license 888)
	  Tested by: kkm ........

2011-02-13 10:50 +0000 [r307677-307713]  Alexandr Anikin <may@telecom-service.ru>

	* addons/ooh323c/src/ooLogChan.c,
	  addons/ooh323c/src/ooCmdChannel.c: lc not found - it's warning,
	  not error, change malloc to ast_calloc again

	* addons/chan_ooh323.c, addons/ooh323cDriver.c: change malloc to
	  ast_calloc calls to prevent crash of asterisk

2011-02-10 22:43 +0000 [r307537]  Jason Parker <jparker@digium.com>

	* contrib/init.d/rc.debian.asterisk, /, main/asterisk.c: Merged
	  revisions 307536 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r307536 | qwell | 2011-02-10 16:39:30 -0600
	  (Thu, 10 Feb 2011) | 22 lines Merged revisions 307535 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r307535 | qwell | 2011-02-10 16:35:49 -0600
	  (Thu, 10 Feb 2011) | 15 lines Merged revisions 307534 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r307534 | qwell | 2011-02-10 16:33:09 -0600 (Thu, 10 Feb 2011) |
	  8 lines Remove color when executing commands via a remote
	  console. Essentially this makes '-x' imply '-n' on rasterisk.
	  This was done in a different and incomplete way previously, which
	  I'm reverting here. (issue #18776) Reported by: alecdavis
	  ........ ................ ................

2011-02-10 17:45 +0000 [r307468]  Mark Michelson <mmichelson@digium.com>

	* /, configs/ccss.conf.sample: Merged revisions 307467 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r307467 | mmichelson | 2011-02-10 11:44:42 -0600 (Thu,
	  10 Feb 2011) | 5 lines Fix a gaffe in the CCSS sample
	  configuration. Discovered by Philippe Lindheimer and pointed out
	  on #asterisk-dev ........

2011-02-10 17:12 +0000 [r307433]  David Vossel <dvossel@digium.com>

	* channels/chan_sip.c, main/format_cap.c,
	  include/asterisk/format_cap.h: Fixes bug in chan_sip where
	  nativeformats are not set correctly. The nativeformats field was
	  being overwritten when it should have been appended too. This
	  caused some format capabilities to be lost briefly and some log
	  warnings to be output.

2011-02-10 13:29 +0000 [r307396]  Alexandr Anikin <may@telecom-service.ru>

	* addons/ooh323c/src/ooh323.c, addons/chan_ooh323.c,
	  addons/ooh323c/src/ooh245.c, addons/ooh323c/src/ooCalls.h,
	  addons/ooh323c/src/ooSocket.c, addons/ooh323c/src/oochannels.c,
	  addons/ooh323c/src/ooStackCmds.c, addons/ooh323c/src/ooq931.c:
	  Corrections for properly work with H.323v2 (older) endpoints and
	  other small fixes. Interpret remote side H.225 version.
	  Corrections for H.323v2 endpoints: don't start TCS and MSD before
	  connect, don't start TCS and MSD by accepting H.245 connection,
	  start TCS and MSD by StartH245 facility message. Other fixes: fix
	  non zeroended remoteDisplayName issue, small fixes in call
	  clearing by closing H.245 connection, tcp keepalive introduced on
	  TCP connections (now is hardcoded, will be configurable in the
	  future), don't force H.245tunneling if FastStart is active, don't
	  send Alerting singal more than once per call. (closes issue
	  #18542) Reported by: vmikhelson Patches: issue18542-final-3.patch
	  uploaded by may213 (license 454) Tested by: vmikhelson

2011-02-09 22:48 +0000 [r307359]  Jeff Peeler <jpeeler@digium.com>

	* apps/app_meetme.c, CHANGES: Add new manager action
	  MeetmeListRooms. From the submitter: I've added a new manager
	  action to list only the active conferences on an Asterisk system.
	  It shows the same data displayed when you run a 'meetme list' on
	  the Asterisk CLI. (closes issue #17905) Reported by: rcasas
	  Patches: app_meetme.c.patch uploaded by rcasas (license 641)
	  Review: https://reviewboard.asterisk.org/r/874/

2011-02-09 21:46 +0000 [r307315]  Andrew Latham <lathama@gmail.com>

	* contrib/init.d/rc.debian.asterisk: Disable color during running
	  test (closes issue #18776) Reported by: alecdavis Patches:
	  ast_deb_init.diff uploaded by lathama (license 1028) Tested by:
	  andrel, lathama

2011-02-09 21:08 +0000 [r307229-307274]  Jeff Peeler <jpeeler@digium.com>

	* /, main/astobj2.c: Merged revisions 307273 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r307273 | jpeeler | 2011-02-09 15:06:33 -0600 (Wed, 09 Feb 2011)
	  | 8 lines Add missing debug info for ao2_link for use with
	  REF_DEBUG in ao2 callback. (closes issue #18758) Reported by:
	  rgagnon Patches: branch-1.8-r306540-astobj-fix.diff uploaded by
	  rgagnon (license 1202) trunk-r306540-astobj-fix.diff uploaded by
	  rgagnon (license 1202) ........

	* main/features.c, CHANGES: Allow parkedmusicclass to be settable
	  for non-default parking lots. (closes issue #17946) Reported by:
	  bluecrow76 Patches:
	  asterisk-1.8.0-beta4-multipark-fixes-2010SEP02.diff

	* /, main/features.c: Merged revisions 307228 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r307228 | jpeeler | 2011-02-09 13:52:51 -0600
	  (Wed, 09 Feb 2011) | 17 lines Merged revisions 307227 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r307227 | jpeeler | 2011-02-09 13:52:12 -0600 (Wed, 09 Feb 2011)
	  | 11 lines Make sure to set parking dial context for non-default
	  parking lots. Since parking_con_dial isn't settable, set all
	  parking lots to "park-dial". (closes issue #17946) Reported by:
	  bluecrow76 Patches:
	  asterisk-1.8.0-beta4-multipark-fixes-2010SEP02.diff uploaded by
	  bluecrow76 (license 270) modified by me ........ ................

2011-02-09 19:17 +0000 [r307192]  Tzafrir Cohen <tzafrir.cohen@xorcom.com>

	* main/loader.c: clarify warning when no loadable module support
	  Clarify warning message when LOADABLE_MODULES is disabled but we
	  still try to load a module.

2011-02-09 05:53 +0000 [r307143]  Tilghman Lesher <tilghman@meg.abyt.es>

	* main/lock.c, /: Merged revisions 307142 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r307142 | tilghman | 2011-02-08 23:39:39 -0600 (Tue, 08 Feb 2011)
	  | 3 lines Initialize tracking variable in structure properly.
	  Fixes a memory leak. (Reported by The_Boy_Wonder on IRC, fixed by
	  me.) ........

2011-02-08 21:24 +0000 [r307097]  Jason Parker <jparker@digium.com>

	* /, main/logger.c: Merged revisions 307092 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r307092 | qwell | 2011-02-08 15:24:01 -0600 (Tue, 08 Feb 2011) |
	  9 lines Fix issue with verbose messages not showing on remote
	  console. This code was reworked recently, and since the
	  logchannel list hadn't been created yet at this point, and it was
	  a verbose message, it was being dropped on the floor. Now it'll
	  continue on to where it should be handled. (closes issue #18580)
	  Reported by: pabelanger ........

2011-02-08 21:18 +0000 [r307071]  Mark Michelson <mmichelson@digium.com>

	* /, main/ccss.c: Merged revisions 307065 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r307065 | mmichelson | 2011-02-08 15:13:08 -0600 (Tue, 08 Feb
	  2011) | 6 lines Add a couple of useful channel variables for the
	  CC recall macro. CC_EXTEN and CC_CONTEXT will allow you to
	  determine the channel and context that will be called when the
	  recall occurs. ........

2011-02-08 20:42 +0000 [r307061]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 306979 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r306979 | twilson | 2011-02-08 12:18:08 -0800
	  (Tue, 08 Feb 2011) | 16 lines Merged revisions 306973 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r306973 | twilson | 2011-02-08 12:14:09 -0800
	  (Tue, 08 Feb 2011) | 9 lines Merged revisions 306972 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r306972 | twilson | 2011-02-08 12:05:13 -0800 (Tue, 08
	  Feb 2011) | 2 lines Fix comparison for REFER Replaces tags with
	  pedantic=yes ........ ................ ................

2011-02-08 20:31 +0000 [r307041]  Andrew Latham <lathama@gmail.com>

	* /, doc/asterisk.8, configs/asterisk.conf.sample,
	  configs/voicemail.conf.sample, doc/asterisk.sgml: Documentation
	  Updates Note default polling setting in voicemail.conf Add
	  missing config to asterisk.conf Update manpage (issue #16505)
	  Reported by: tzafrir Patches: asterisk_sgml_fixes_demo.diff
	  uploaded by tzafrir (license 46) Tested by: lathama, tzafrir

2011-02-08 19:42 +0000 [r306867-306968]  Jeff Peeler <jpeeler@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 306967 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r306967 | jpeeler | 2011-02-08 13:41:42 -0600
	  (Tue, 08 Feb 2011) | 16 lines Merged revisions 306966 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r306966 | jpeeler | 2011-02-08 13:41:21 -0600
	  (Tue, 08 Feb 2011) | 9 lines Merged revisions 306965 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r306965 | jpeeler | 2011-02-08 13:40:58 -0600 (Tue, 08
	  Feb 2011) | 1 line fix this line again ........ ................
	  ................

	* /, apps/app_voicemail.c: Merged revisions 306962 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r306962 | jpeeler | 2011-02-08 13:25:38 -0600
	  (Tue, 08 Feb 2011) | 22 lines Merged revisions 306961 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r306961 | jpeeler | 2011-02-08 13:25:10 -0600
	  (Tue, 08 Feb 2011) | 15 lines Merged revisions 306960 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r306960 | jpeeler | 2011-02-08 13:18:50 -0600 (Tue, 08 Feb 2011)
	  | 9 lines Backup file storing message duration is not used with
	  IMAP_STORAGE, remove code. The message duration is stored in the
	  body of the email when using IMAP_STORAGE, so nothing needs to
	  happen with the backup file. (closes issue #18718) Reported by:
	  kerframil ........ ................ ................

	* /, apps/app_voicemail.c: Merged revisions 306866 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r306866 | jpeeler | 2011-02-08 10:21:45 -0600
	  (Tue, 08 Feb 2011) | 16 lines Merged revisions 306865 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r306865 | jpeeler | 2011-02-08 10:21:25 -0600
	  (Tue, 08 Feb 2011) | 9 lines Merged revisions 306864 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r306864 | jpeeler | 2011-02-08 10:19:17 -0600 (Tue, 08
	  Feb 2011) | 1 line make this safer and fully correct, pointed out
	  by Steve Davis ........ ................ ................

2011-02-08 02:05 +0000 [r306827]  Andrew Latham <lathama@gmail.com>

	* doc/asterisk.sgml: Documentation Updates. Start updates to the
	  man pages. (issue #16505) Reported by: tzafrir Tested by: lathama

2011-02-08 00:43 +0000 [r306755-306793]  Richard Mudgett <rmudgett@digium.com>

	* configs/chan_dahdi.conf.sample: Define the MCID acronym in
	  chan_dahdi.conf.sample.

	* channels/sig_pri.h: Use correct conditional for MCID send.

	* channels/sig_pri.h, main/channel.c, channels/chan_dahdi.c,
	  configs/chan_dahdi.conf.sample, funcs/func_frame_trace.c,
	  main/features.c, CHANGES, channels/sig_pri.c,
	  include/asterisk/frame.h: Pass a MCID request to the bridged
	  channel. Pass a MCID request to the bridged channel so the
	  bridged channel can send it to the network. The ability to send
	  the MCID request on an ISDN span is enabled with the new
	  chan_dahdi.conf mcid_send option. JIRA SWP-2845 JIRA ABE-2736

2011-02-07 22:46 +0000 [r306670-306675]  Terry Wilson <twilson@digium.com>

	* /, main/features.c: Merged revisions 306674 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r306674 | twilson | 2011-02-07 14:43:22 -0800
	  (Mon, 07 Feb 2011) | 24 lines Merged revisions 306673 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r306673 | twilson | 2011-02-07 14:40:20 -0800
	  (Mon, 07 Feb 2011) | 17 lines Merged revisions 306672 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r306672 | twilson | 2011-02-07 14:35:20 -0800 (Mon, 07 Feb 2011)
	  | 10 lines Don't try to pickup a call in the middle of a
	  masquerade If A calls B which doesn't answer and C & D both try
	  to do a call pickup, it is possible for ast_pickup_call to answer
	  the call, then fail to masquerade one of the calls because the
	  other one is already in the process of masquerading. This patch
	  checks to see if the channel is in the process of masquerading
	  before call before selecting it for a pickup. Review:
	  https://reviewboard.asterisk.org/r/1094/ ........
	  ................ ................

	* /, channels/chan_sip.c: Merged revisions 306619 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r306619 | twilson | 2011-02-07 14:15:27 -0800
	  (Mon, 07 Feb 2011) | 24 lines Merged revisions 306618 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r306618 | twilson | 2011-02-07 13:59:54 -0800
	  (Mon, 07 Feb 2011) | 17 lines Merged revisions 306617 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r306617 | twilson | 2011-02-07 13:51:43 -0800 (Mon, 07 Feb 2011)
	  | 10 lines Don't allow a REFER w/replaces to replace its own
	  dialog Asterisk currently accepts a REFER with a Refer-To with an
	  embedded Replaces header that matches the dialog of the REFER.
	  This would be a situation like A calls B, A calls C, A transfers
	  B to A, which is just silly. This patch makes the transfer fail
	  instead of making Asterisk freak out and forget to hang other
	  channels up. Review: https://reviewboard.asterisk.org/r/1093/
	  ........ ................ ................

2011-02-07 17:55 +0000 [r306576]  Mark Michelson <mmichelson@digium.com>

	* /, main/ccss.c: Merged revisions 306575 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r306575 | mmichelson | 2011-02-07 11:36:56 -0600 (Mon, 07 Feb
	  2011) | 9 lines Rearrange a bit of code in the generic CC recall
	  operation. By waiting to call the callback macro after the
	  CC_INTERFACES, extension, priority, and context have been set,
	  this information can be accessed more easily within the callback
	  macro. Reported by Philippe Lindheimer. ........

2011-02-07 16:33 +0000 [r306541]  David Vossel <dvossel@digium.com>

	* channels/chan_sip.c: Fixes use of ast_format_cap_append where
	  ast_format_cap_copy is necessary.

2011-02-05 22:16 +0000 [r306499]  Alexandr Anikin <may@telecom-service.ru>

	* addons/chan_ooh323.c: fix trivial issue after dvossel patch,
	  initial zero fill user and peer structure before cap structure
	  allocated.

2011-02-05 02:55 +0000 [r306464]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c: Ignore voice frames in chan_dahdi native
	  bridging. Hardware is handling them.

2011-02-04 22:37 +0000 [r306432]  Jeff Peeler <jpeeler@digium.com>

	* main/manager.c: Send manager event for blackfilter only if it
	  DOES NOT match. The logic got reversed, oops. Works properly now
	  when multiple blackfilters are present. (closes issue #18283)
	  Reported by: telecos82 Patches: ast_managereventfilter.patch
	  uploaded by telecos82 (license 687)

2011-02-04 20:30 +0000 [r306396]  Richard Mudgett <rmudgett@digium.com>

	* apps/app_dial.c, channels/sig_pri.h, channels/chan_dahdi.c,
	  configs/chan_dahdi.conf.sample, configure,
	  include/asterisk/autoconfig.h.in, configure.ac, CHANGES,
	  channels/sig_pri.c: Add ISDN display ie text handling options to
	  chan_dahdi.conf. The display ie handling can be controlled
	  independently in the send and receive directions with the
	  following options: * Block display text data. * Use display text
	  in SETUP/CONNECT messages for name. * Use display text for COLP
	  name updates (FACILITY/NOTIFY as appropriate). * Pass arbitrary
	  display text during a call. Sent in INFORMATION messages.
	  Received from any message that the display text was not used as a
	  name. If the display options are not set then the options default
	  to legacy behavior. The arbitrary display text is exchanged
	  between bridged channels using the AST_FRAME_TEXT frame type. To
	  send display text from the dialplan use the SendText()
	  application when the arbitrary display text option is enabled.
	  JIRA SWP-2688 JIRA ABE-2693

2011-02-04 19:24 +0000 [r306359]  Jason Parker <jparker@digium.com>

	* /, apps/app_queue.c: Merged revisions 306356 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r306356 | qwell | 2011-02-04 13:24:29 -0600
	  (Fri, 04 Feb 2011) | 16 lines Merged revisions 306346 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r306346 | qwell | 2011-02-04 13:21:43 -0600 (Fri, 04 Feb 2011) |
	  9 lines Don't fallthrough to 'unknown' in the 'ringing' case.
	  This could cause improper exits from the queue. (closes issue
	  #18499) Reported by: zaltar Patches: app_queue.patch uploaded by
	  zaltar (license 1148) ........ ................

2011-02-04 19:09 +0000 [r306325-306326]  Richard Mudgett <rmudgett@digium.com>

	* tests/test_format_api.c: Fix compiler warning.

	* apps/app_dial.c, /, apps/app_queue.c: Merged revisions 306324 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r306324 | rmudgett | 2011-02-04 12:53:06 -0600 (Fri, 04 Feb 2011)
	  | 9 lines Don't send redirecting updates to the caller if the
	  dialplan forked the call. Each fork in the dial could be
	  redirected and confuse the caller. For ISDN the DivLeg1 and
	  DivLeg3 messages would get confused because ISDN redirects calls
	  in sequence not in parallel. * Also fixed a formatting
	  inconsistency in app_dial.c and make a warning message more
	  useful about what frame type could not be written. ........

2011-02-04 18:16 +0000 [r306258-306292]  Paul Belanger <pabelanger@digium.com>

	* utils/extconf.c: Revert changes to extconf.c It seems extconf.c
	  already defines some local ast_debug() functions. Theses should
	  be removed and replaced with logger.h. A patch will be added to
	  reviewboard shortly.

	* cel/cel_radius.c, addons/chan_ooh323.c, apps/app_meetme.c,
	  main/say.c, channels/chan_gtalk.c, main/taskprocessor.c,
	  res/res_http_post.c, res/res_musiconhold.c, channels/chan_iax2.c,
	  res/res_jabber.c, pbx/pbx_loopback.c, main/channel.c,
	  channels/chan_dahdi.c, pbx/pbx_spool.c, main/manager.c,
	  res/res_smdi.c, channels/chan_skinny.c, main/features.c,
	  res/res_agi.c, main/http.c, main/logger.c, res/ais/evt.c,
	  main/app.c, res/res_config_ldap.c, apps/app_rpt.c,
	  res/res_rtp_asterisk.c, main/pbx.c, channels/chan_sip.c,
	  apps/app_fax.c, include/asterisk/channel.h, channels/sig_pri.c,
	  channels/chan_misdn.c, include/asterisk/sched.h, utils/extconf.c,
	  codecs/codec_ilbc.c, main/audiohook.c, res/res_odbc.c,
	  main/xmldoc.c, apps/app_voicemail.c: Replace ast_log(LOG_DEBUG,
	  ...) with ast_debug() (closes issue #18556) Reported by: kkm
	  Review: https://reviewboard.asterisk.org/r/1071/

2011-02-04 16:42 +0000 [r306257]  David Vossel <dvossel@digium.com>

	* codecs/codec_ilbc.c, codecs/ex_ilbc.h: Fix compile error in codec
	  ilbc translator.

2011-02-03 23:50 +0000 [r306216]  Jeff Peeler <jpeeler@digium.com>

	* /, channels/chan_sip.c: Merged revisions 306215 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r306215 | jpeeler | 2011-02-03 17:49:28 -0600 (Thu, 03 Feb 2011)
	  | 20 lines Fix SIP deadlock involving state changes. Once again a
	  call to pbx_builtin_getvar_helper (and pbx_builtin_setvar_helper)
	  has caused locking problems. Both of these functions lock the
	  channel when the channel argument is passed in! In this case, the
	  suspected problem (the backtrace makes it impossible to tell) was
	  the private being locked in sip_set_rtp_peer and then:
	  transmit_reinvite_with_sdp try_suggested_sip_codec
	  pbx_builtin_getvar_helper (Traced to verify that the fix was only
	  required in 1.8 and later.) (closes issue #18491) Reported by:
	  cmaj Patches: chan_sip_fix_deadlocks_bug_18491.txt uploaded by
	  cmaj (license 830) Tested by: cmaj ........

2011-02-03 21:13 +0000 [r306128]  Terry Wilson <twilson@digium.com>

	* channels/chan_local.c, /: Merged revisions 306127 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r306127 | twilson | 2011-02-03 13:03:26 -0800
	  (Thu, 03 Feb 2011) | 23 lines Merged revisions 306126 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r306126 | twilson | 2011-02-03 12:56:00 -0800
	  (Thu, 03 Feb 2011) | 16 lines Merged revisions 306119 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r306119 | twilson | 2011-02-03 12:36:34 -0800 (Thu, 03 Feb 2011)
	  | 9 lines Set hangup cause in local_hangup When a call involves a
	  local channel (like SIP -> Local -> SIP), the hangup cause was
	  not being set. This resulted in SIP channels sometimes getting a
	  503 error instead of a 486 when the far side sent a busy. In
	  Asterisk 1.8+ this also can cause issues with CCSS that involve a
	  local channel. This patch sets the hangupcause for one side of
	  the local channel to the other in local_hangup for outbound
	  calls. ........ ................ ................

2011-02-03 20:51 +0000 [r306125]  Jeff Peeler <jpeeler@digium.com>

	* /, main/features.c: Merged revisions 306124 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r306124 | jpeeler | 2011-02-03 14:50:48 -0600
	  (Thu, 03 Feb 2011) | 17 lines Merged revisions 306123 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r306123 | jpeeler | 2011-02-03 14:49:48 -0600 (Thu, 03 Feb 2011)
	  | 10 lines Set exception on channel in parking thread when
	  POLLPRI event detected. This is done just to make the code be
	  equivalent to the old select code. As noted in 303106 the same
	  issue was already fixed in this branch, but the exception was not
	  set on the channel in the case of POLLPRI. The reason that this
	  did not cause a problem here is because in 122923 the check in
	  __ast_read to check the exception flag was removed. (related to
	  #18637) ........ ................

2011-02-03 18:37 +0000 [r306086]  Jason Parker <jparker@digium.com>

	* main/frame.c: Modify alignment of 'core show codecs', since the
	  ID is no longer a huge int.

2011-02-03 18:12 +0000 [r306010-306053]  David Vossel <dvossel@digium.com>

	* main/frame.c: Fixes output of "core show codecs" to display image
	  types correctly.

	* apps/app_dahdibarge.c, channels/chan_local.c, main/frame.c,
	  apps/app_record.c, apps/app_alarmreceiver.c,
	  bridges/bridge_softmix.c, formats/format_sln16.c,
	  apps/app_ices.c, bridges/bridge_multiplexed.c,
	  channels/chan_iax2.c, main/astobj2.c, res/res_rtp_multicast.c,
	  channels/chan_dahdi.c, include/asterisk/bridging_technology.h,
	  funcs/func_pitchshift.c, pbx/pbx_spool.c,
	  include/asterisk/audiohook.h, channels/chan_skinny.c,
	  channels/sip/include/globals.h, apps/app_dumpchan.c,
	  formats/format_pcm.c, formats/format_h263.c, main/bridging.c,
	  codecs/ex_ulaw.h, channels/sip/include/sip.h, main/pbx.c,
	  codecs/codec_g722.c, formats/format_wav.c, codecs/codec_g726.c,
	  formats/format_ogg_vorbis.c, bridges/bridge_simple.c,
	  include/asterisk/channel.h, apps/app_talkdetect.c,
	  channels/iax2-parser.c, include/asterisk/format_cap.h (added),
	  apps/app_speech_utils.c, channels/iax2-parser.h, main/data.c,
	  funcs/func_channel.c, main/audiohook.c, codecs/codec_dahdi.c,
	  include/asterisk/frame_defs.h, formats/format_g726.c,
	  apps/app_mixmonitor.c, main/asterisk.c, res/res_calendar.c,
	  apps/app_voicemail.c, channels/chan_vpb.cc, addons/format_mp3.c,
	  formats/format_sln.c, apps/app_dictate.c, codecs/ex_g722.h,
	  codecs/codec_gsm.c, codecs/ex_g726.h, channels/chan_gtalk.c,
	  include/asterisk/abstract_jb.h, main/channel.c, apps/app_mp3.c,
	  codecs/codec_resample.c, formats/format_h264.c,
	  formats/format_siren14.c, apps/app_rpt.c, channels/chan_mgcp.c,
	  codecs/codec_lpc10.c, channels/chan_sip.c, codecs/ex_lpc10.h,
	  include/asterisk/format_pref.h (added), codecs/codec_alaw.c,
	  res/res_adsi.c, tests/test_format_api.c (added),
	  apps/app_originate.c, channels/chan_jingle.c,
	  formats/format_vox.c, main/abstract_jb.c,
	  include/asterisk/bridging.h, main/callerid.c, main/file.c,
	  apps/app_sms.c, formats/format_g723.c, main/dsp.c, main/format.c
	  (added), main/udptl.c, main/rtp_engine.c, addons/chan_ooh323.c,
	  codecs/codec_adpcm.c, apps/app_test.c, addons/chan_ooh323.h,
	  include/asterisk/speech.h, codecs/ex_adpcm.h, codecs/ex_alaw.h,
	  formats/format_wav_gsm.c, include/asterisk/data.h,
	  codecs/ex_gsm.h, main/indications.c, main/format_pref.c (added),
	  main/cli.c, main/features.c, include/asterisk/mod_format.h,
	  apps/app_amd.c, addons/ooh323cDriver.c, channels/chan_alsa.c,
	  formats/format_jpeg.c, addons/ooh323cDriver.h,
	  formats/format_gsm.c, apps/app_milliwatt.c, res/res_speech.c,
	  formats/format_g719.c, channels/h323/ast_h323.cxx,
	  channels/chan_bridge.c, apps/app_echo.c, apps/app_fax.c,
	  codecs/codec_speex.c, include/asterisk/slin.h,
	  channels/chan_agent.c, channels/iax2-provision.c,
	  codecs/ex_speex.h, channels/chan_misdn.c,
	  include/asterisk/image.h, channels/iax2.h, codecs/codec_ilbc.c,
	  apps/app_chanspy.c, res/res_fax_spandsp.c,
	  include/asterisk/slinfactory.h, include/asterisk/translate.h,
	  channels/chan_unistim.c, channels/chan_multicast_rtp.c,
	  main/ccss.c, apps/app_meetme.c, res/res_musiconhold.c,
	  apps/app_followme.c, formats/format_siren7.c,
	  formats/format_ilbc.c, include/asterisk/file.h,
	  include/asterisk/callerid.h, channels/chan_phone.c, main/dial.c,
	  main/manager.c, main/format_cap.c (added),
	  funcs/func_frame_trace.c, res/res_agi.c, main/app.c,
	  apps/app_confbridge.c, include/asterisk/format.h (added),
	  main/image.c, include/asterisk/rtp_engine.h,
	  include/asterisk/frame.h, addons/chan_mobile.c,
	  apps/app_parkandannounce.c, apps/app_jack.c,
	  res/res_clioriginate.c, res/res_rtp_asterisk.c,
	  apps/app_nbscat.c, codecs/codec_a_mu.c, res/res_fax.c,
	  apps/app_festival.c, apps/app_waitforsilence.c,
	  include/asterisk/astobj2.h, main/slinfactory.c, main/translate.c,
	  channels/chan_console.c, channels/h323/chan_h323.h,
	  channels/chan_oss.c, channels/chan_usbradio.c,
	  channels/chan_h323.c, codecs/codec_ulaw.c,
	  include/asterisk/pbx.h, channels/chan_nbs.c,
	  formats/format_g729.c: Asterisk media architecture conversion -
	  no more format bitfields This patch is the foundation of an
	  entire new way of looking at media in Asterisk. The code present
	  in this patch is everything required to complete phase1 of my
	  Media Architecture proposal. For more information about this
	  project visit the link below.
	  https://wiki.asterisk.org/wiki/display/AST/Media+Architecture+Proposal
	  The primary function of this patch is to convert all the usages
	  of format bitfields in Asterisk to use the new format and
	  format_cap APIs. Functionally no change in behavior should be
	  present in this patch. Thanks to twilson and russell for all the
	  time they spent reviewing these changes. Review:
	  https://reviewboard.asterisk.org/r/1083/

2011-02-03 16:13 +0000 [r305988]  Andrew Latham <lathama@gmail.com>

	* phoneprov/snom-mac.xml (added), configs/phoneprov.conf.sample:
	  res_phoneprov add snom 300, 320, 360, 370, 820, 821, 870 support
	  (issue #18713) Reported by: lathama Patches: snom_dir.diff
	  uploaded by lathama (license 1028) Tested by: lathama

2011-02-03 00:29 +0000 [r305939]  Richard Mudgett <rmudgett@digium.com>

	* main/channel.c, main/manager.c, /, channels/chan_sip.c,
	  apps/app_sendtext.c: Merged revisions 305923 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r305923 | rmudgett | 2011-02-02 18:24:40 -0600
	  (Wed, 02 Feb 2011) | 24 lines Merged revisions 305889 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r305889 | rmudgett | 2011-02-02 18:15:07 -0600
	  (Wed, 02 Feb 2011) | 17 lines Merged revisions 305888 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r305888 | rmudgett | 2011-02-02 18:02:43 -0600 (Wed, 02 Feb 2011)
	  | 8 lines Minor AST_FRAME_TEXT related issues. * Include the null
	  terminator in the buffer length. When the frame is queued it is
	  copied. If the null terminator is not part of the frame buffer
	  length, the receiver could see garbage appended onto it. * Add
	  channel lock protection with ast_sendtext(). * Fixed AMI SendText
	  action ast_sendtext() return value check. ........
	  ................ ................

2011-02-02 20:06 +0000 [r305845]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, funcs/func_env.c: Merged revisions 305844 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r305844 | tilghman | 2011-02-02 14:05:43 -0600 (Wed, 02 Feb 2011)
	  | 5 lines Eliminate a file descriptor leak when using the FILE()
	  dialplan function. (closes issue #18731) Reported by: marioabajo
	  ........

2011-02-02 19:30 +0000 [r305759-305843]  Andrew Latham <lathama@gmail.com>

	* configs/iax.conf.sample, funcs/func_enum.c,
	  configs/dundi.conf.sample, funcs/func_callcompletion.c, /,
	  configs/mgcp.conf.sample, configs/iaxprov.conf.sample,
	  configs/unistim.conf.sample, apps/app_externalivr.c,
	  configs/sip.conf.sample, configs/skinny.conf.sample,
	  configs/h323.conf.sample, configs/sla.conf.sample,
	  apps/app_voicemail.c: Replacing doc/* and asterisk.pdf with wiki
	  links Adding links to http(s)://wiki.asterisk.org

	* configs/chan_dahdi.conf.sample, /, configs/extconfig.conf.sample,
	  configs/res_snmp.conf.sample, main/ast_expr2f.c,
	  res/res_timing_dahdi.c, configs/ccss.conf.sample,
	  configs/sip.conf.sample, configs/skinny.conf.sample,
	  main/config.c, configs/h323.conf.sample, configs/sla.conf.sample,
	  main/ast_expr2.fl, res/res_srtp.c: Replacing doc/* with wiki
	  links Adding links to http(s)://wiki.asterisk.org

	* /, channels/chan_sip.c: Replace link to old doc with new wiki
	  page. Link to
	  https://wiki.asterisk.org/wiki/display/AST/SIP+Retransmissions

2011-02-01 22:48 +0000 [r305693]  Jason Parker <jparker@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 305692 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r305692 | qwell | 2011-02-01 16:48:16 -0600 (Tue, 01 Feb
	  2011) | 7 lines Reverse sense of an error test when reading from
	  astdb. (closes issue #18545) Reported by: jcovert Patches:
	  chan_iax2.c.patch uploaded by jcovert (license 551) ........

2011-02-01 21:16 +0000 [r305650]  Andrew Latham <lathama@gmail.com>

	* configs/sip.conf.sample: SIP Configuration Documentation sip show
	  settings reports qualifyfreq in milliseconds. sip.conf configures
	  qualifyfreg in seconds.

2011-02-01 19:27 +0000 [r305604]  Brett Bryant <bbryant@digium.com>

	* cel/cel_pgsql.c, /: Merged revisions 305603 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r305603 | bbryant | 2011-02-01 14:23:20 -0500 (Tue, 01 Feb 2011)
	  | 4 lines Add a possible solution to a customer problem with
	  reloading cel_pgsql.so quickly. ........

2011-02-01 18:03 +0000 [r305561]  Andrew Latham <lathama@gmail.com>

	* /: doc/tex dir removed, but corresponding entries still exists
	  Update README, CHANGES, and Makefile. Direct users to
	  http://wiki.asterisk.org for documentation or to the AST.txt and
	  AST.pdf included in the tarball. (closes issue #18443) Reported
	  by: bas Patches: changes.diff uploaded by lathama (license 1028)
	  readme.diff uploaded by lathama (license 1028) Tested by: lathama
	  bas

2011-02-01 17:05 +0000 [r305474]  Jason Parker <jparker@digium.com>

	* /, res/res_musiconhold.c: Merged revisions 305473 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r305473 | qwell | 2011-02-01 11:04:23 -0600
	  (Tue, 01 Feb 2011) | 23 lines Merged revisions 305472 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r305472 | qwell | 2011-02-01 11:02:09 -0600
	  (Tue, 01 Feb 2011) | 16 lines Merged revisions 305471 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r305471 | qwell | 2011-02-01 11:00:55 -0600 (Tue, 01 Feb 2011) |
	  9 lines Close file descriptor for timing source when a MOH class
	  gets destroyed. (closes issue #18457) Reported by: mcallist
	  Patches: 18457-closetimer.diff uploaded by qwell (license 4)
	  18457-closetimer_trunk.diff uploaded by qwell (license 4) Tested
	  by: qwell, loloski ........ ................ ................

2011-02-01 16:05 +0000 [r305433]  Brett Bryant <bbryant@digium.com>

	* apps/app_confbridge.c: Add's two features to confbridge:
	  confbridge kick, and confbridge list. (closes issue #14389)
	  (closes issue #18007) Reported by: jcollie Patches:
	  0001-Fix-up-bridging-module-so-that-menuselect-works.patch
	  uploaded by jcollie (license 412)
	  0002-Add-confbridge-list-and-confbridge-kick-CLI-comm.patch
	  uploaded by jcollie (license 412) Tested by: file Review:
	  https://reviewboard.asterisk.org/r/1084/

2011-02-01 00:07 +0000 [r305344]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/sig_pri.c: Merged revisions 305343 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r305343 | rmudgett | 2011-01-31 18:01:09 -0600
	  (Mon, 31 Jan 2011) | 21 lines Merged revisions 305342 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r305342 | rmudgett | 2011-01-31 17:50:10 -0600
	  (Mon, 31 Jan 2011) | 14 lines Merged revisions 305341 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r305341 | rmudgett | 2011-01-31 17:45:58 -0600 (Mon, 31 Jan 2011)
	  | 7 lines Obtain the pri lock for PRI queue counters. Need to
	  obtain the pri lock when calling pri_dump_info_str() to avoid a
	  reentrancy problem when calculating the Q.921 Q count statistic.
	  JIRA AST-484 ........ ................ ................

2011-01-31 23:08 +0000 [r305132-305255]  Jason Parker <jparker@digium.com>

	* apps/app_dial.c, /, channels/chan_sip.c: Merged revisions 305254
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r305254 | qwell | 2011-01-31 17:07:00 -0600
	  (Mon, 31 Jan 2011) | 24 lines Merged revisions 305253 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r305253 | qwell | 2011-01-31 16:59:34 -0600
	  (Mon, 31 Jan 2011) | 17 lines Merged revisions 305252 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r305252 | qwell | 2011-01-31 16:56:54 -0600 (Mon, 31 Jan 2011) |
	  10 lines Prevent a crash when dialing a technology with no
	  destination (ex: Dial(SIP/)) chan_iax2 and other channel drivers
	  already had code to prevent this. The attempt that app_dial was
	  making to prevent it was not correct, so I fixed that. (closes
	  issue #18371) Reported by: gbour Patches: 18371.patch uploaded by
	  gbour (license 1162) ........ ................ ................

	* main/tcptls.c, /, configs/sip.conf.sample: Merged revisions
	  305247 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r305247 | qwell | 2011-01-31 16:25:23 -0600 (Mon, 31 Jan 2011) |
	  7 lines Add alternative name for config option. The SIP sample
	  configuration had "tlscadir" as the option name, but chan_sip
	  used the more correct "tlscapath". Now both are accepted.
	  Discovered (sort of) by a user on IRC in #asterisk ........

	* /, res/res_musiconhold.c: Merged revisions 305198 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r305198 | qwell | 2011-01-31 15:30:44 -0600 (Mon, 31 Jan
	  2011) | 2 lines Fix compile error. pseudofd no longer exists.
	  ........

	* /, res/res_musiconhold.c: Merged revisions 305131 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r305131 | qwell | 2011-01-31 15:00:25 -0600
	  (Mon, 31 Jan 2011) | 16 lines Merged revisions 305130 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r305130 | qwell | 2011-01-31 14:59:37 -0600
	  (Mon, 31 Jan 2011) | 9 lines Merged revisions 305129 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r305129 | qwell | 2011-01-31 14:56:25 -0600 (Mon, 31 Jan
	  2011) | 2 lines Set file descriptors to -1 on creation, so that
	  we don't see weirdness later. ........ ................
	  ................

2011-01-31 13:57 +0000 [r305084]  Andrew Latham <lathama@gmail.com>

	* main/http.c: Asterisk HTTP response Content-type Address content
	  type for BSD and other platforms (closes issue #18456) Reported
	  by: alexo Patches: asterisk18_http.patch uploaded by alexo
	  (license 1175) Tested by: alexo

2011-01-31 07:52 +0000 [r304951-305041]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, include/asterisk/lock.h: Merged revisions 305040 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r305040 | tilghman | 2011-01-31 01:51:40 -0600 (Mon, 31
	  Jan 2011) | 2 lines Use the non-specific API aliases, to avoid a
	  problem with building the utils directory. ........

	* /, apps/app_voicemail.c: Merged revisions 304985 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r304985 | tilghman | 2011-01-31 01:27:13 -0600
	  (Mon, 31 Jan 2011) | 16 lines Merged revisions 304978 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r304978 | tilghman | 2011-01-31 01:25:14 -0600
	  (Mon, 31 Jan 2011) | 9 lines Merged revisions 304952 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r304952 | tilghman | 2011-01-31 00:54:45 -0600 (Mon, 31
	  Jan 2011) | 2 lines Fix compilation when ODBC_STORAGE is defined.
	  ........ ................ ................

	* main/lock.c, /, main/heap.c, main/utils.c,
	  include/asterisk/lock.h, .cleancount: Merged revisions 304950 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r304950 | tilghman | 2011-01-31 00:41:36 -0600 (Mon, 31 Jan 2011)
	  | 18 lines Change mutex tracking so that it only consumes memory
	  in the core mutex object when it's actually being used. This
	  reduces the overall size of a mutex which was 3016 bytes before
	  this back down to 216 bytes (this is on 64-bit Linux with a
	  glibc-implemented mutex). The exactness of the numbers here may
	  vary slightly based upon how mutexes are implemented on a
	  platform, but the long and short of it is that prior to this
	  commit, chan_iax2 held down 98MB of memory on a 64-bit system for
	  nothing more than a table of 32767 locks. After this commit, the
	  same table occupies a mere 7MB of memory. (closes issue #18194)
	  Reported by: job Patches: 20110124__issue18194.diff.txt uploaded
	  by tilghman (license 14) Tested by: tilghman Review:
	  https://reviewboard.asterisk.org/r/1066 ........

2011-01-30 00:22 +0000 [r304913]  Andrew Latham <lathama@gmail.com>

	* funcs/func_callcompletion.c, /, apps/app_externalivr.c,
	  apps/app_queue.c, apps/app_voicemail.c, funcs/func_realtime.c,
	  res/res_calendar.c: Add Function and Application Relationships to
	  documentation Add and extend the see-also sections to the
	  documentation for applications and functions in an effort to
	  expand the online documentation of the wiki. Also check for and
	  update any links to moved documentation in the doc folder.

2011-01-29 23:10 +0000 [r304639-304867]  Sean Bright <sean@malleable.com>

	* /, res/res_config_ldap.c: Merged revisions 304866 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r304866 | seanbright | 2011-01-29 18:07:18 -0500
	  (Sat, 29 Jan 2011) | 14 lines Merged revisions 304865 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r304865 | seanbright | 2011-01-29 18:05:25 -0500 (Sat, 29 Jan
	  2011) | 7 lines Plug some memory leaks in the LDAP realtime
	  driver. (closes issue #18435) Reported by: zaltar Patches:
	  res_config_ldap.patch uploaded by zaltar (license 1148) ........
	  ................

	* /, apps/app_meetme.c: Merged revisions 304777 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r304777 | seanbright | 2011-01-29 13:09:37 -0500
	  (Sat, 29 Jan 2011) | 22 lines Merged revisions 304776 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r304776 | seanbright | 2011-01-29 13:08:14 -0500 (Sat, 29 Jan
	  2011) | 15 lines If we fail to allocate our announcement objects,
	  make sure we don't leak objects. The majority of this patch was
	  committed already in r304726 and r304729. (issue #18225) Reported
	  by: kenji (issue #18444) Reported by: junky (closes issue #18343)
	  Reported by: kobaz Patches: meetme-refs.diff uploaded by kobaz
	  (license 834) ........ ................

	* /, apps/app_meetme.c: Merged revisions 304774 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r304774 | seanbright | 2011-01-29 12:54:43 -0500
	  (Sat, 29 Jan 2011) | 16 lines Merged revisions 304773 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r304773 | seanbright | 2011-01-29 12:51:28 -0500 (Sat, 29 Jan
	  2011) | 9 lines When we pass the S() or L() options to MeetMe,
	  make sure that we honor C as well. Without this patch, if the
	  user was kicked from the conference via the S() or L() mechanism,
	  we would just hang up on them even if we also passed C (continue
	  in dialplan when kicked). With this patch we honor the C flag in
	  those cases. (closes issue #17317) Reported by: var ........
	  ................

	* /, apps/app_meetme.c: Merged revisions 304730 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r304730 | seanbright | 2011-01-29 12:15:27 -0500
	  (Sat, 29 Jan 2011) | 22 lines Merged revisions 304729 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r304729 | seanbright | 2011-01-29 12:01:51 -0500 (Sat, 29 Jan
	  2011) | 15 lines Make sure that we unref the correct object when
	  ejecting the most recent caller. Currently, when we kick the last
	  user to enter, we decrement our own reference count which results
	  in a crash when we kick another user or when we exit the
	  conference ourselves. This will fix #18225 in 1.8 and trunk, but
	  that particular bug does not exist in 1.6.2. (closes issue
	  #18225) Reported by: kenji Patches: issue18225.patch uploaded by
	  seanbright (license 71) Tested by: seanbright ........
	  ................

	* /, apps/app_meetme.c: Merged revisions 304727 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r304727 | seanbright | 2011-01-29 11:28:27 -0500
	  (Sat, 29 Jan 2011) | 16 lines Merged revisions 304726 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r304726 | seanbright | 2011-01-29 11:26:57 -0500 (Sat, 29 Jan
	  2011) | 9 lines Fix user reference leak in MeetMe. We were
	  unlinking the user from the conferences user container, but not
	  decrementing the reference count of the user as well, resulting
	  in a leak. (closes issue #18444) Reported by: junky Tested by:
	  seanbright ........ ................

	* /, apps/app_meetme.c: Merged revisions 304683 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r304683 | seanbright | 2011-01-28 17:54:23 -0500
	  (Fri, 28 Jan 2011) | 16 lines Merged revisions 304659,304682 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r304659 | seanbright | 2011-01-28 16:22:09 -0500 (Fri, 28 Jan
	  2011) | 5 lines Don't leak references if we can't create a pseudo
	  channel for mixing in MeetMe. If there was a problem allocating a
	  pseudo channel when building our meetme, we weren't destroying
	  our user container or destroying the mutexes that we created.
	  ........ r304682 | seanbright | 2011-01-28 17:38:05 -0500 (Fri,
	  28 Jan 2011) | 2 lines Revert part of the previous commit that
	  snuck in. ........ ................

	* /, main/acl.c: Merged revisions 304638 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r304638 | seanbright | 2011-01-28 15:19:08 -0500 (Fri, 28 Jan
	  2011) | 11 lines Restore some conditionals that we lost in
	  r277814. There are some cases where ast_append_ha() is called
	  with a NULL instead of a valid int pointer. So if we get a NULL,
	  don't try to dereference it. (closes issue #18162) Reported by:
	  imcdona Patches: issue0018162.patch uploaded by pabelanger
	  (license 224) Tested by: enegaard ........

2011-01-27 20:09 +0000 [r304600]  Brett Bryant <bbryant@digium.com>

	* res/res_config_pgsql.c: Patch that fixes the "realtime show pgsql
	  cache" command crash when giving a table name, because of the use
	  of an uninitialized variable. Fixes an error introduced in
	  r300882. (closes issue #18605) Reported by: romain_proformatique
	  Patches: res_config_pgsql_fix.patch uploaded by romain
	  proformatique (license 975) Tested by: romain_proformatique

2011-01-27 20:07 +0000 [r304599]  Kevin P. Fleming <kpfleming@digium.com>

	* res/res_fax.c: Fix bug with 'F' option for ReceiveFAX and
	  SendFAX. Skipping the call to set_t38_fax_caps() caused the FAX
	  session details to not be marked as supporting audio FAX
	  either... the function's name is a bit misleading. This patch
	  restores the single bit of non-T.38 behavior from that function
	  when audio mode is forced.

2011-01-27 19:12 +0000 [r304555]  Richard Mudgett <rmudgett@digium.com>

	* /, main/ccss.c: Merged revisions 304554 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r304554 | rmudgett | 2011-01-27 13:08:14 -0600 (Thu, 27 Jan 2011)
	  | 4 lines Warning message if CALLCOMPLETION(cc_callback_macro or
	  cc_agent_dialstring) are empty. Test if the value pointer is not
	  NULL instead of not ast_strlen_zero(). ........

2011-01-27 17:03 +0000 [r304463-304467]  Jason Parker <jparker@digium.com>

	* /, configure, configure.ac: Merged revisions 304466 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r304466 | qwell | 2011-01-27 11:03:01 -0600
	  (Thu, 27 Jan 2011) | 23 lines Merged revisions 304465 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r304465 | qwell | 2011-01-27 11:01:24 -0600
	  (Thu, 27 Jan 2011) | 16 lines Merged revisions 304464 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r304464 | qwell | 2011-01-27 10:57:46 -0600 (Thu, 27 Jan 2011) |
	  9 lines Fix default prefix=/usr regression on non-Linux systems.
	  This partially reverts a change made in branches/1.4/ r267759,
	  which will cause issue #17013 to be reopened. This issue was
	  pointed out by a user on #asterisk, who helpfully discovered that
	  paths were being set incorrectly. To truly understand what was
	  wrong, one should run: svn diff --force -c<this revision>
	  configure ........ ................ ................

	* /, configure: Merged revisions 304462 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r304462 | qwell | 2011-01-27 10:48:44 -0600
	  (Thu, 27 Jan 2011) | 16 lines Merged revisions 304461 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r304461 | qwell | 2011-01-27 10:48:00 -0600
	  (Thu, 27 Jan 2011) | 9 lines Merged revisions 304460 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r304460 | qwell | 2011-01-27 10:47:03 -0600 (Thu, 27 Jan
	  2011) | 1 line Rerun bootstrap.sh with no changes, so that it is
	  more obvious what my next commit changes. ........
	  ................ ................

2011-01-27 15:57 +0000 [r304422]  Kevin P. Fleming <kpfleming@digium.com>

	* res/res_fax.c: Rename the SendFAX/ReceiveFAX 'force audio'
	  option. The recently added option to disable usage of T.38 for a
	  single session should have been named 'F' for 'force audio',
	  since that is really what the user is asking to happen (and it's
	  a positive option instead of a negative option that way).

2011-01-27 00:06 +0000 [r304385]  Richard Mudgett <rmudgett@digium.com>

	* channels/sig_pri.h, channels/chan_dahdi.c,
	  configs/chan_dahdi.conf.sample, channels/sig_pri.c: Merged from
	  revision 304341
	  https://origsvn.digium.com/svn/asterisk/be/branches/C.3-bier
	  .......... r304341 | rmudgett | 2011-01-26 16:38:39 -0600 (Wed,
	  26 Jan 2011) | 7 lines Add connected line chan_dahdi.conf
	  pricpndialplan option. * Added from_channel value to
	  prilocaldialplan option. JIRA ABE-2731 JIRA SWP-2842 ..........

2011-01-26 23:41 +0000 [r304384]  Jeff Peeler <jpeeler@digium.com>

	* apps/app_followme.c: Add option to followme to delay answer until
	  ready to bridge call. Followme answers an incoming call if it
	  hasn't already been answered and starts MOH. Some poorly designed
	  autodialers see the answer and start playing their message to the
	  hold music. The 'N' option has been added to indicate ringing and
	  not answer until the call is accepted. (closes issue #18479)
	  Reported by: ianc Patches: trunk_followme.diff uploaded by ianc
	  (license 998)

2011-01-26 22:39 +0000 [r304342]  Kevin P. Fleming <kpfleming@digium.com>

	* res/res_fax.c: Add ability to disable T.38 usage for specific
	  SendFAX/ReceiveFAX sessions. Sometimes during troubleshooting it
	  can be useful to disable T.38 usage in order to narrow down a
	  problem. This patch adds an 'n' option to SendFAX and ReceiveFAX
	  so that can be done without having to disable T.38 usage entirely
	  for the peer that Asterisk is communicating with. (inspired by
	  trying to assist Bryant Zimmerman on asterisk-users)

2011-01-26 22:27 +0000 [r304340]  Jeff Peeler <jpeeler@digium.com>

	* /, main/features.c: Merged revisions 304339 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r304339 | jpeeler | 2011-01-26 16:27:30 -0600
	  (Wed, 26 Jan 2011) | 9 lines Merged revisions 304338 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r304338 | jpeeler | 2011-01-26 16:26:37 -0600 (Wed, 26
	  Jan 2011) | 2 lines Change delimiter used internally for
	  GOTO_ON_BLINDXFR to commas to match 76703. ........
	  ................

2011-01-26 21:03 +0000 [r304252]  Mark Michelson <mmichelson@digium.com>

	* main/udptl.c, /: Merged revisions 304250 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r304250 | mmichelson | 2011-01-26 15:02:10 -0600
	  (Wed, 26 Jan 2011) | 9 lines Merged revisions 304242 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r304242 | mmichelson | 2011-01-26 14:38:37 -0600 (Wed,
	  26 Jan 2011) | 3 lines Get rid of unused 'verbose' field in
	  ast_udptl ........ ................

2011-01-26 20:44 +0000 [r304246]  Matthew Nicholson <mnicholson@digium.com>

	* main/netsock2.c, /, channels/chan_sip.c,
	  channels/sip/reqresp_parser.c, include/asterisk/netsock2.h,
	  channels/sip/include/sip.h,
	  channels/sip/include/reqresp_parser.h: Merged revisions 304245
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r304245 | mnicholson | 2011-01-26 14:43:27 -0600
	  (Wed, 26 Jan 2011) | 20 lines Merged revisions 304244 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r304244 | mnicholson | 2011-01-26 14:42:16 -0600
	  (Wed, 26 Jan 2011) | 13 lines Merged revisions 304241 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r304241 | mnicholson | 2011-01-26 14:38:22 -0600 (Wed, 26 Jan
	  2011) | 6 lines This patch modifies chan_sip to route responses
	  to the address the request came from. It also modifies chan_sip
	  to respect the maddr parameter in the Via header. ABE-2664
	  Review: https://reviewboard.asterisk.org/r/1059/ ........
	  ................ ................

2011-01-26 20:25 +0000 [r304195]  Sean Bright <sean@malleable.com>

	* /, configs/queues.conf.sample: Merged revisions 304186 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r304186 | seanbright | 2011-01-26 15:23:48 -0500
	  (Wed, 26 Jan 2011) | 16 lines Merged revisions 304181 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r304181 | seanbright | 2011-01-26 15:22:47 -0500
	  (Wed, 26 Jan 2011) | 9 lines Merged revisions 304159 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r304159 | seanbright | 2011-01-26 15:18:29 -0500 (Wed,
	  26 Jan 2011) | 1 line Make sure the sample queues.conf is
	  properly commented. ........ ................ ................

2011-01-26 19:58 +0000 [r304152]  Matthew Nicholson <mnicholson@digium.com>

	* /, res/res_fax.c, include/asterisk/res_fax.h: Merged revisions
	  303907 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r303907 | mnicholson | 2011-01-25 14:56:12 -0600 (Tue, 25 Jan
	  2011) | 2 lines Reimplemented fax session reservation to reverse
	  the ABI breakage introduced in r297486. ........

2011-01-26 19:40 +0000 [r304151]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 304150 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r304150 | rmudgett | 2011-01-26 13:39:35 -0600
	  (Wed, 26 Jan 2011) | 16 lines Merged revisions 304149 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r304149 | rmudgett | 2011-01-26 13:38:38 -0600
	  (Wed, 26 Jan 2011) | 9 lines Merged revisions 304148 from
	  https://origsvn.digium.com/svn/asterisk/be/branches/C.3-bier
	  .......... r304148 | rmudgett | 2011-01-26 13:23:46 -0600 (Wed,
	  26 Jan 2011) | 2 lines Update documentation for
	  DAHDISendCallreroutingFacility() application. ..........
	  ................ ................

2011-01-26 01:27 +0000 [r304098]  Sean Bright <sean@malleable.com>

	* /, main/file.c: Merged revisions 304097 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r304097 | seanbright | 2011-01-25 20:26:26 -0500
	  (Tue, 25 Jan 2011) | 19 lines Merged revisions 304096 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r304096 | seanbright | 2011-01-25 20:24:58 -0500 (Tue, 25 Jan
	  2011) | 12 lines Per the man page, setvbuf() must be called
	  before any other operation on an open file. We use setvbuf() to
	  associate a buffer with a stream, but we have already written to
	  the open file. This works (by chance) on Linux, but fails on
	  other platforms, such as OpenSolaris. (closes issue #16610)
	  Reported by: bklang Patches: setvbuf.patch uploaded by crjw
	  (license 963) Tested by: bklang, asgaroth, efutch ........
	  ................

2011-01-25 23:31 +0000 [r304008]  Richard Mudgett <rmudgett@digium.com>

	* /, main/features.c: Merged revisions 304007 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r304007 | rmudgett | 2011-01-25 17:28:25 -0600
	  (Tue, 25 Jan 2011) | 22 lines Merged revisions 304006 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r304006 | rmudgett | 2011-01-25 17:25:32 -0600
	  (Tue, 25 Jan 2011) | 15 lines Merged revisions 304005 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r304005 | rmudgett | 2011-01-25 17:21:09 -0600 (Tue, 25 Jan 2011)
	  | 8 lines DTMF attended transfers sometimes fail for no apparent
	  reason. The loop in feature_request_and_dial() can exit when
	  Party C has answered without processing an AST_CONTROL_ANSWER.
	  Also sometimes an AST_CONTROL_ANSWER never happens even though
	  Party C has answered. Don't hangup Party C if he is up or we
	  receive an AST_CONTROL_ANSWER. ........ ................
	  ................

2011-01-25 22:15 +0000 [r303963]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 303962 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r303962 | twilson | 2011-01-25 16:09:01 -0600
	  (Tue, 25 Jan 2011) | 30 lines Merged revisions 303960 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r303960 | twilson | 2011-01-25 16:02:42 -0600
	  (Tue, 25 Jan 2011) | 23 lines Merged revisions 303906 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r303906 | twilson | 2011-01-25 14:50:59 -0600 (Tue, 25 Jan 2011)
	  | 16 lines Guard against retransmitting BYEs indefinitely In the
	  case of an attended transfer (A calls B, A atxfers to C) where A
	  becomes unreachable before replying to Asterisk's BYE, Asterisk
	  can sometimes retransmit the BYE indefinitely. This is because
	  __sip_autodestruct tests p->refer && !ast_test_flag(&p->flags[0],
	  SIP_ALREADYGONE and will then transmit a BYE. When this BYE times
	  out, it will not ever be marked as ALREADYGONE, so when
	  __sip_autodestruct is called again, we end up starting the cycle
	  over. This patch adds a call to sip_alreadygone(pkt->owner) in
	  retrans_pkt in the case of a BYE that has timed out. This should
	  prevent Asterisk from trying to transmit new BYE messages in the
	  future. Review: https://reviewboard.asterisk.org/r/1077/ ........
	  ................ ................

2011-01-25 18:56 +0000 [r303861]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, channels/chan_sip.c: Merged revisions 303860 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r303860 | tilghman | 2011-01-25 12:55:27 -0600
	  (Tue, 25 Jan 2011) | 12 lines Merged revisions 303858 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r303858 | tilghman | 2011-01-25 12:41:26 -0600 (Tue, 25 Jan 2011)
	  | 5 lines Fix "sip show user <tab>", so that it actually shows
	  results, instead of just completing the last entry. (closes issue
	  #16675) Reported by: pj ........ ................

2011-01-25 17:58 +0000 [r303772]  Richard Mudgett <rmudgett@digium.com>

	* channels/sig_pri.h, channels/chan_dahdi.c, channels/sig_ss7.h, /,
	  channels/sig_pri.c, channels/sig_ss7.c: Merged revisions 303771
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r303771 | rmudgett | 2011-01-25 11:49:20 -0600
	  (Tue, 25 Jan 2011) | 54 lines Merged revisions 303769 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r303769 | rmudgett | 2011-01-25 11:42:42 -0600
	  (Tue, 25 Jan 2011) | 47 lines Merged revisions 303765 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r303765 | rmudgett | 2011-01-25 11:36:50 -0600 (Tue, 25 Jan 2011)
	  | 40 lines Sending out unnecessary PROCEEDING messages breaks
	  overlap dialing. Issue #16789 was a good idea. Unfortunately, it
	  breaks overlap dialing through Asterisk. There is not enough
	  information available at this point to know if dialing is
	  complete. The ast_exists_extension(), ast_matchmore_extension(),
	  and ast_canmatch_extension() calls are not adequate to detect a
	  dial through extension pattern of "_9!". Workaround is to use the
	  dialplan Proceeding() application early in non-dial through
	  extensions. * Effectively revert issue #16789. * Allow outgoing
	  overlap dialing to hear dialtone and other early media. A
	  PROGRESS "inband-information is now available" message is now
	  sent after the SETUP_ACKNOWLEDGE message for non-digital calls.
	  An AST_CONTROL_PROGRESS is now generated for incoming
	  SETUP_ACKNOWLEDGE messages for non-digital calls. * Handling of
	  the AST_CONTROL_CONGESTION in chan_dahdi/sig_pri was inconsistent
	  with the cause codes. * Added better protection from sending out
	  of sequence messages by combining several flags into a single
	  enum value representing call progress level. * Added diagnostic
	  messages for deferred overlap digits handling corner cases.
	  (closes issue #17085) Reported by: shawkris (closes issue #18509)
	  Reported by: wimpy Patches: issue18509_early_media_v1.8_v3.patch
	  uploaded by rmudgett (license 664) Expanded upon
	  issue18509_early_media_v1.8_v3.patch to include analog and SS7
	  because of backporting requirements. Tested by: wimpy, rmudgett
	  ........ ................ ................

2011-01-25 17:05 +0000 [r303679]  Jeff Peeler <jpeeler@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 303678 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r303678 | jpeeler | 2011-01-25 11:02:38 -0600
	  (Tue, 25 Jan 2011) | 33 lines Merged revisions 303677 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r303677 | jpeeler | 2011-01-25 10:59:28 -0600
	  (Tue, 25 Jan 2011) | 26 lines Merged revisions 303676 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r303676 | jpeeler | 2011-01-25 10:58:29 -0600 (Tue, 25 Jan 2011)
	  | 20 lines Fix voicemail sequencing for file based storage. A
	  previous change was made to account for when the number of
	  voicemail messages exceeds the max limit to be handled properly,
	  but it caused gaps in the messages to not be properly handled.
	  This has now been resolved. In later non 1.4 branches, it appears
	  that resequencing wasn't even occurring due from what appears and
	  accidental code removal. (closes issue #18498) Reported by:
	  JJCinAZ Patches: bug18498v2.patch uploaded by jpeeler (license
	  325) (closes issue #18486) Reported by: bluefox Patches:
	  bug18486.patch uploaded by jpeeler (license 325) ........
	  ................ ................

2011-01-25 15:52 +0000 [r303638]  Matthew Nicholson <mnicholson@digium.com>

	* main/utils.c: Use unsigned char in comparison for UTF8 check to
	  quiet a compiler warning.

2011-01-24 20:57 +0000 [r303547-303551]  Russell Bryant <russell@digium.com>

	* main/channel.c, main/pbx.c, /, apps/app_meetme.c,
	  main/features.c, include/asterisk/channel.h: Merged revisions
	  303549 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r303549 | russell | 2011-01-24 14:51:37 -0600
	  (Mon, 24 Jan 2011) | 45 lines Merged revisions 303548 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r303548 | russell | 2011-01-24 14:49:53 -0600
	  (Mon, 24 Jan 2011) | 38 lines Merged revisions 303546 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r303546 | russell | 2011-01-24 14:32:21 -0600 (Mon, 24 Jan 2011)
	  | 31 lines Fix channel redirect out of MeetMe() and other issues
	  with channel softhangup. Mantis issue #18585 reports that a
	  channel redirect out of MeetMe() stopped working properly. This
	  issue includes a patch that resolves the issue by removing a call
	  to ast_check_hangup() from app_meetme.c. I left that in my patch,
	  as it doesn't need to be there. However, the rest of the patch
	  fixes this problem with or without the change to app_meetme. The
	  key difference between what happens before and after this patch
	  is the effect of the END_OF_Q control frame. After END_OF_Q is
	  hit in ast_read(), ast_read() will return NULL. With the
	  ast_check_hangup() removed, app_meetme sees this which causes it
	  to exit as intended. Checking ast_check_hangup() caused
	  app_meetme to exit earlier in the process, and the target of the
	  redirect saw the condition where ast_read() returned NULL.
	  Removing ast_check_hangup() works around the issue in app_meetme,
	  but doesn't solve the issue if another application did the same
	  thing. There are also other edge cases where if an application
	  finishes at the same time that a redirect happens, the target of
	  the redirect will think that the channel hung up. So, I made some
	  changes in pbx.c to resolve it at a deeper level. There are
	  already places that unset the SOFTHANGUP_ASYNCGOTO flag in an
	  attempt to abort the hangup process. My patch extends this to
	  remove the END_OF_Q frame from the channel's read queue, making
	  the "abort hangup" more complete. This same technique was used in
	  every place where a softhangup flag was cleared. (closes issue
	  #18585) Reported by: oej Tested by: oej, wedhorn, russell Review:
	  https://reviewboard.asterisk.org/r/1082/ ........
	  ................ ................

	* contrib/scripts/install_prereq: Add gsm-devel as a package to
	  install on redhat based systems.

2011-01-24 18:59 +0000 [r303509]  Matthew Nicholson <mnicholson@digium.com>

	* res/res_config_curl.c, include/asterisk/utils.h,
	  funcs/func_curl.c, channels/chan_sip.c, tests/test_utils.c,
	  res/res_agi.c, channels/sip/reqresp_parser.c, main/http.c,
	  main/utils.c, funcs/func_uri.c: According to section 19.1.2 of
	  RFC 3261: For each component, the set of valid BNF expansions
	  defines exactly which characters may appear unescaped. All other
	  characters MUST be escaped. This patch modifies ast_uri_encode()
	  to encode strings in line with this recommendation. This patch
	  also adds an ast_escape_quoted() function which escapes '"' and
	  '\' characters in quoted strings in accordance with section 25.1
	  of RFC 3261. The ast_uri_encode() function has also been modified
	  to take an ast_flags struct describing the set of rules it should
	  use when escaping characters to allow for it to escape SIP URIs
	  in addition to HTTP URIs and other types of URIs or variations of
	  those two URI types in the future. The ast_uri_decode() function
	  has also been modified to accept an ast_flags struct describing
	  the set of rules to use when decoding to enable decoding '+' as '
	  ' in legacy http URLs. The unit tests for these functions have
	  also been updated. ABE-2705 Review:
	  https://reviewboard.asterisk.org/r/1081/

2011-01-24 17:21 +0000 [r303468]  Jason Parker <jparker@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 303467 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r303467 | qwell | 2011-01-24 11:20:03 -0600
	  (Mon, 24 Jan 2011) | 22 lines Merged revisions 303285 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r303285 | qwell | 2011-01-21 15:48:09 -0600
	  (Fri, 21 Jan 2011) | 15 lines Merged revisions 303284 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r303284 | qwell | 2011-01-21 15:45:34 -0600 (Fri, 21 Jan 2011) |
	  8 lines Reset configuration before parsing users.conf. Some
	  values configured in chan_dahdi.conf were able to leak in to
	  users.conf configuration. This was surprising users, and
	  potentially setting non-sane "defaults". ASTNOW-125 ........
	  ................ ................

2011-01-22 04:13 +0000 [r303418]  Russell Bryant <russell@digium.com>

	* configure, configure.ac: Revert default compiler change. If
	  someone wishes to do so, it is trivial to set your own default
	  when running the configure script.

2011-01-21 23:11 +0000 [r303288-303376]  Jason Parker <jparker@digium.com>

	* channels/chan_dahdi.c, /: Temporarily revert r303288

	* channels/chan_dahdi.c, /: Merged revisions 303286 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r303286 | qwell | 2011-01-21 15:50:11 -0600
	  (Fri, 21 Jan 2011) | 22 lines Merged revisions 303285 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r303285 | qwell | 2011-01-21 15:48:09 -0600
	  (Fri, 21 Jan 2011) | 15 lines Merged revisions 303284 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r303284 | qwell | 2011-01-21 15:45:34 -0600 (Fri, 21 Jan 2011) |
	  8 lines Reset configuration before parsing users.conf. Some
	  values configured in chan_dahdi.conf were able to leak in to
	  users.conf configuration. This was surprising users, and
	  potentially setting non-sane "defaults". ASTNOW-125 ........
	  ................ ................

2011-01-21 09:09 +0000 [r303198-303235]  Tilghman Lesher <tilghman@meg.abyt.es>

	* configure, configure.ac: Really use llvm-gcc, when available.

	* funcs/func_db.c, CHANGES: Add DB_KEYS. Discussion on #asterisk on
	  2011-01-19: (02:07:03 PM) boch: i wonder how to cycle all entries
	  in a tree (02:07:11 PM) leifmadsen: use While() (02:07:17 PM)
	  leifmadsen: you need to know the tree structure already though
	  (02:07:36 PM) boch: what you mean? (02:09:02 PM) leifmadsen: you
	  need to know the structure prior to looping, because you can't
	  just return the structure from the dialplan (02:09:43 PM)
	  leifmadsen: the only way I can think of doing that is via
	  something like writing the output of: asterisk -rx "database
	  show" to a file, then looping through that to know the structure
	  of the database and check everything (02:09:59 PM) leifmadsen:
	  but at that point you're better off just using either a
	  relational database or an external script (02:10:13 PM) boch: for
	  example i need to know all entries in the tree (02:10:15 PM)
	  boch: got it (02:10:20 PM) leifmadsen: exactly (02:10:22 PM)
	  leifmadsen: that's the problem (02:10:22 PM) boch: thank you
	  (02:13:09 PM) mateu: yeah, i'm surprised there isn't something
	  from the dialplan like 'database show family' so one can get all
	  keys in a family to loop over. (02:15:35 PM) leifmadsen: database
	  shows everything (02:16:22 PM) mateu: i mean something from the
	  dial plan that mimics 'database show <family>' (02:16:41 PM)
	  leifmadsen: guess no one has found that important enough to
	  program :) (02:16:52 PM) leifmadsen: at that point you should
	  probably just use a relational database... (02:17:10 PM) mateu: i
	  dunno (02:17:16 PM) mateu: seems pretty basic to me. (02:17:16
	  PM) leifmadsen: me either (02:17:19 PM) leifmadsen: sure does
	  (02:17:24 PM) leifmadsen: no one has programmed it though
	  (02:17:28 PM) ***leifmadsen shrugs (02:17:43 PM) mateu: ok, well
	  at least we know how it currently stands. thanks leifmadsen
	  (02:28:52 PM) Corydon76-home: leifmadsen: something like
	  HASHKEYS() ? (02:30:11 PM) leifmadsen: Corydon76-home: ummm, I
	  was thinking more like DUNDI_QUERY() and DUNDI_RESULT() (02:30:31
	  PM) leifmadsen: although HASHKEYS() might work (02:30:58 PM)
	  leifmadsen: actually ya, looking at it, similar to HASHKEYS()
	  (02:31:01 PM) leifmadsen: DBKEYS() I guess? (02:31:45 PM)
	  Corydon76-home: So with no argument, retrieves families, with an
	  argument, retrieves keys of that family? (02:34:02 PM)
	  leifmadsen: ya (02:34:16 PM) leifmadsen: how would you iterate
	  through layers of them? (02:34:30 PM) leifmadsen: i.e.
	  family/key/key/key ? (02:34:43 PM) Corydon76-home: Essentially,
	  yes

2011-01-20 20:35 +0000 [r303154]  Richard Mudgett <rmudgett@digium.com>

	* /, main/ccss.c: Merged revisions 303153 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r303153 | rmudgett | 2011-01-20 14:31:20 -0600
	  (Thu, 20 Jan 2011) | 22 lines Merged revision 303098 from
	  https://origsvn.digium.com/svn/asterisk/be/branches/C.3-bier
	  .......... r303098 | rmudgett | 2011-01-20 12:11:45 -0600 (Thu,
	  20 Jan 2011) | 15 lines CC_INTERFACES does not get built
	  correctly with local channels. If local channels are used with
	  CCSS, CC_INTERFACES gets garbage prepended to it so the CC recall
	  fails. Also CC_INTERFACES gets "&(null)" appended to it. *
	  Initialize the buffer to eliminate the prepended garbage. *
	  Filter out the empty interface strings to eliminate the latter. *
	  Added a diagnostic message if the CC_INTERFACES is ever empty.
	  JIRA ABE-2740 JIRA SWP-2848 .......... ................

2011-01-20 19:58 +0000 [r303108]  Shaun Ruffell <sruffell@digium.com>

	* /, main/features.c: Merged revisions 303107 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r303107 | sruffell | 2011-01-20 13:57:31 -0600
	  (Thu, 20 Jan 2011) | 23 lines Merged revisions 303106 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r303106 | sruffell | 2011-01-20 13:56:34 -0600 (Thu, 20 Jan 2011)
	  | 15 lines main/features: Use POLLPRI when waiting for events on
	  parked channels. This change resolves a regression in the 1.6.2
	  when converting from select to poll. The DAHDI timers use POLLPRI
	  to indicate that the timer fired, but features was not waiting
	  for that flag. The result was no audio for MOH when a call was
	  parked and res_timing_dahdi was in use. This patch is slightly
	  modified from the one on the mantis issue. It does not set an
	  exception on the channel if the POLLPRI flag is set. (closes
	  issue #18262) Reported by: francesco_r Patches:
	  patch_park_moh-trunk-2.txt uploaded by cjacobsen (license 1029)
	  Tested by: francesco_r, rfrantik, one47 ........ ................

2011-01-20 17:14 +0000 [r303011]  Jeff Peeler <jpeeler@digium.com>

	* /, configs/queues.conf.sample, apps/app_queue.c: Merged revisions
	  303009 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r303009 | jpeeler | 2011-01-20 11:10:32 -0600
	  (Thu, 20 Jan 2011) | 21 lines Merged revisions 303008 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r303008 | jpeeler | 2011-01-20 11:07:44 -0600
	  (Thu, 20 Jan 2011) | 14 lines Merged revisions 303007 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r303007 | jpeeler | 2011-01-20 11:04:08 -0600 (Thu, 20 Jan 2011)
	  | 8 lines Add new queue strategy to preserve behavior for when
	  queue members moved to ao2. Add queue strategy called "rrordered"
	  to mimic old behavior from when queue members were stored in a
	  linked list. ABE-2707 ........ ................ ................

2011-01-20 16:12 +0000 [r302922]  Russell Bryant <russell@digium.com>

	* /, apps/app_privacy.c: Merged revisions 302921 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r302921 | russell | 2011-01-20 10:12:15 -0600
	  (Thu, 20 Jan 2011) | 9 lines Merged revisions 302920 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r302920 | russell | 2011-01-20 10:11:58 -0600 (Thu, 20
	  Jan 2011) | 2 lines Resolve a compiler warning. ........
	  ................

2011-01-20 15:46 +0000 [r302919]  Leif Madsen <lmadsen@digium.com>

	* apps/app_dial.c, /: Merged revisions 302918 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r302918 | lmadsen | 2011-01-20 09:45:39 -0600
	  (Thu, 20 Jan 2011) | 16 lines Merged revisions 302917 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r302917 | lmadsen | 2011-01-20 09:42:05 -0600 (Thu, 20 Jan 2011)
	  | 8 lines Option L() is milliseconds, not seconds. > Change the
	  verbose output of option L() to say milliseconds and not seconds
	  > as the value is in milliseconds. > > (closes issue #18264) >
	  Reported by: jacco > Patches: > app_dial_patch.txt uploaded by
	  lmadsen (license 10) ........ ................

2011-01-20 09:07 +0000 [r302879]  Tilghman Lesher <tilghman@meg.abyt.es>

	* configure, configure.ac: On systems which have LLVM, use that
	  compiler. Should result in a massive speed increase.

2011-01-19 23:57 +0000 [r302838]  Russell Bryant <russell@digium.com>

	* main/manager.c, /: Merged revisions 302837 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r302837 | russell | 2011-01-19 17:56:48 -0600 (Wed, 19 Jan 2011)
	  | 2 lines Only check container count if it exists. ........

2011-01-19 23:53 +0000 [r302835-302836]  Sean Bright <sean@malleable.com>

	* main/config.c: Clarify a source comment about configuration
	  template categories. (closes issue #18578) Reported by: astmiv
	  Patches: asterisk.main.config.2.patch uploaded by astmiv (license
	  1189)

	* /, apps/app_voicemail.c: Merged revisions 302834 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r302834 | seanbright | 2011-01-19 18:49:00 -0500
	  (Wed, 19 Jan 2011) | 14 lines Merged revisions 302833 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r302833 | seanbright | 2011-01-19 18:47:22 -0500 (Wed, 19 Jan
	  2011) | 7 lines Support greetingsfolder as documented in
	  voicemail.conf.sample. (closes issue #17870) Reported by:
	  edhorton Patches:
	  __20100816-app_voicemail-greetingsfolder-support.txt uploaded by
	  lmadsen (license 10) ........ ................

2011-01-19 23:33 +0000 [r302832]  Paul Belanger <pabelanger@digium.com>

	* /, contrib/scripts/install_prereq: Merged revisions 302831 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r302831 | pabelanger | 2011-01-19 18:29:45 -0500 (Wed, 19 Jan
	  2011) | 2 lines Add binutils-dev for BETTER_BACKTRACES ........

2011-01-19 23:07 +0000 [r302786-302790]  Russell Bryant <russell@digium.com>

	* main/manager.c, /: Merged revisions 302789 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r302789 | russell | 2011-01-19 17:06:46 -0600
	  (Wed, 19 Jan 2011) | 11 lines Merged revisions 302788 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r302788 | russell | 2011-01-19 17:06:14 -0600 (Wed, 19 Jan 2011)
	  | 4 lines Turn a noisy verbose message into a debug message. This
	  can drown your console if you're using the AMI over HTTP.
	  ........ ................

	* main/manager.c, /: Merged revisions 302785 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r302785 | russell | 2011-01-19 16:35:15 -0600 (Wed, 19 Jan 2011)
	  | 15 lines Resolve a memory leak with the manager interface is
	  disabled. The intent of this check as it stands in previous
	  versions of Asterisk was to check if there are any active
	  sessions. If there were no sessions, then the function would
	  return immediately and not bother with queueing up the manager
	  event to be processed. Since the conversion of storing sessions
	  in an astobj2 container, this check will always pass. I changed
	  it to go back to checking what was intended. The side effect of
	  this was that if the AMI is disabled, the manager event queue is
	  populated anyway, but the code that runs to clear out the queue
	  never runs. A producer with no consumer is a bad thing. Reported
	  internally by kmorgan. ........

2011-01-19 21:35 +0000 [r302732]  Richard Mudgett <rmudgett@digium.com>

	* /, main/features.c: Merged revisions 302713 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r302713 | rmudgett | 2011-01-19 15:29:22 -0600
	  (Wed, 19 Jan 2011) | 29 lines Merged revisions 302693 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r302693 | rmudgett | 2011-01-19 15:25:41 -0600
	  (Wed, 19 Jan 2011) | 22 lines Merged revisions 302671 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r302671 | rmudgett | 2011-01-19 15:21:56 -0600 (Wed, 19 Jan 2011)
	  | 15 lines DTMF transfer plays the wrong sounds for wrong number
	  or other call failure. * Set the default for features.conf.sample
	  xferfailsound option to "beeperr" as documented instead of
	  "pbx-invalid" and corrected the use of it in DTMF blind transfer
	  (#1). * Improved DTMF blind transfer handling of wrong numbers.
	  Most of the concerns in this issue were taken care of by the
	  patch for issue 17999: Issues with DTMF triggered attended
	  transfers. (closes issue #18379) Reported by: gincantalupo Tested
	  by: rmudgett ........ ................ ................

2011-01-19 21:24 +0000 [r302644-302686]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, include/asterisk/astdb.h: Merged revisions 302680 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r302680 | tilghman | 2011-01-19 15:23:31 -0600
	  (Wed, 19 Jan 2011) | 16 lines Merged revisions 302675 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r302675 | tilghman | 2011-01-19 15:22:45 -0600
	  (Wed, 19 Jan 2011) | 9 lines Merged revisions 302663 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r302663 | tilghman | 2011-01-19 15:20:28 -0600 (Wed, 19
	  Jan 2011) | 2 lines Add some API documentation ........
	  ................ ................

	* /, main/app.c: Merged revisions 302634 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r302634 | tilghman | 2011-01-19 14:24:57 -0600
	  (Wed, 19 Jan 2011) | 22 lines Merged revisions 302599 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r302599 | tilghman | 2011-01-19 14:13:24 -0600 (Wed, 19 Jan 2011)
	  | 15 lines Kill zombies. When we ast_safe_fork() with a non-zero
	  argument, we're expected to reap our own zombies. On a zero
	  argument, however, the zombies are only reaped when there aren't
	  any non-zero forked children alive. At other times, we accumulate
	  zombies. This code is forward ported from res_agi in 1.4, so that
	  forked children are always reaped, thus preventing an
	  accumulation of zombie processes. (closes issue #18515) Reported
	  by: ernied Patches: 20101221__issue18515.diff.txt uploaded by
	  tilghman (license 14) Tested by: ernied ........ ................

2011-01-19 20:15 +0000 [r302601]  Jason Parker <jparker@digium.com>

	* /, res/res_fax.c: Merged revisions 302600 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r302600 | qwell | 2011-01-19 14:14:40 -0600 (Wed, 19 Jan 2011) |
	  1 line Fix typo pointed out on asterisk-users list. ........

2011-01-19 19:04 +0000 [r302507-302556]  Sean Bright <sean@malleable.com>

	* /, main/utils.c: Merged revisions 302555 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r302555 | seanbright | 2011-01-19 14:03:32 -0500
	  (Wed, 19 Jan 2011) | 14 lines Merged revisions 302554 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r302554 | seanbright | 2011-01-19 14:02:29 -0500 (Wed, 19 Jan
	  2011) | 7 lines Don't call strlen() when we only need to look at
	  the next character or two. (closes issue #18042) Reported by:
	  wdoekes Patches: astsvn-inefficient-ast-uri-decode.patch uploaded
	  by wdoekes (license 717) ........ ................

	* /, main/features.c: Merged revisions 302552 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r302552 | seanbright | 2011-01-19 13:54:47 -0500
	  (Wed, 19 Jan 2011) | 14 lines Merged revisions 302551 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r302551 | seanbright | 2011-01-19 13:54:03 -0500 (Wed, 19 Jan
	  2011) | 7 lines Remove an extraneous \r\n at the end of a parking
	  manager events. (closes issue #18363) Reported by:
	  clegall_proformatique Patches:
	  asterisk_1.8_295998_parking_manager_events_format.patch uploaded
	  by clegall proformatique (license 1139) ........ ................

	* /, res/res_agi.c: Merged revisions 302549 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r302549 | seanbright | 2011-01-19 13:43:11 -0500
	  (Wed, 19 Jan 2011) | 17 lines Merged revisions 302548 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r302548 | seanbright | 2011-01-19 13:37:09 -0500 (Wed, 19 Jan
	  2011) | 10 lines Properly handle partial reads from fgets() when
	  handling AGIs. When fgets() failed with EAGAIN, we were
	  continually decrementing the available space left in our buffer,
	  resulting in botched command handling. (closes issue #16032)
	  Reported by: notahat Patches: agi_buffer_patch2.diff uploaded by
	  fnordian (license 110) ........ ................

	* /, main/utils.c: Merged revisions 302505 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r302505 | seanbright | 2011-01-19 12:58:11 -0500
	  (Wed, 19 Jan 2011) | 14 lines Merged revisions 302504 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r302504 | seanbright | 2011-01-19 12:56:32 -0500 (Wed, 19 Jan
	  2011) | 7 lines Make sure that h_length is set when we
	  short-circuit out of ast_gethostbyname. (closes issue #16135)
	  Reported by: thedavidfactor Patches: utils.patch uploaded by
	  thedavidfactor (license 903) ........ ................

2011-01-19 17:15 +0000 [r302463]  Paul Belanger <pabelanger@digium.com>

	* /, res/res_timing_timerfd.c: Merged revisions 302462 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r302462 | pabelanger | 2011-01-19 12:09:35 -0500
	  (Wed, 19 Jan 2011) | 9 lines Merged revisions 302461 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r302461 | pabelanger | 2011-01-19 12:08:01 -0500 (Wed,
	  19 Jan 2011) | 2 lines Handle 'Resource temporarily unavailable'
	  error more gracefully. ........ ................

2011-01-19 15:54 +0000 [r302413-302418]  Sean Bright <sean@malleable.com>

	* /, configs/extensions.conf.sample: Merged revisions 302417 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r302417 | seanbright | 2011-01-19 10:53:20 -0500
	  (Wed, 19 Jan 2011) | 16 lines Merged revisions 302416 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r302416 | seanbright | 2011-01-19 10:52:44 -0500 (Wed, 19 Jan
	  2011) | 9 lines Remove references to priorityjumping from the
	  sample extensions.conf. Priority jumping was removed from
	  pbx_config in r68970. (closes issue #18622) Reported by: kshumard
	  Patches: extensions.conf.sample.patch uploaded by kshumard
	  (license 92) ........ ................

	* /, channels/chan_sip.c: Merged revisions 302414 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r302414 | seanbright | 2011-01-19 10:45:17 -0500 (Wed, 19 Jan
	  2011) | 7 lines Initialize an uninitialized variable. (closes
	  issue #18640) Reported by: jcovert Patches: chan_sip.c.patch
	  uploaded by jcovert (license 551) ........

	* channels/chan_local.c, /: Merged revisions 302412 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r302412 | seanbright | 2011-01-19 10:31:39 -0500 (Wed,
	  19 Jan 2011) | 10 lines Use appropriate type for requested format
	  in chan_local. We were passing and storing the requested format
	  as an int instead of format_t resulting in truncation. (closes
	  issue #18238) Reported by: whizemen Patches:
	  0018238_speex16.patch uploaded by whizemen (license 1143)
	  ........

2011-01-18 22:06 +0000 [r302319]  Richard Mudgett <rmudgett@digium.com>

	* /, main/features.c: Merged revisions 302318 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r302318 | rmudgett | 2011-01-18 16:04:14 -0600 (Tue, 18 Jan 2011)
	  | 1 line Use the expanded format type instead of plain int.
	  ........

2011-01-18 21:44 +0000 [r302315]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 302314 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r302314 | mnicholson | 2011-01-18 15:43:21 -0600
	  (Tue, 18 Jan 2011) | 18 lines Merged revisions 302313 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r302313 | mnicholson | 2011-01-18 15:40:03 -0600
	  (Tue, 18 Jan 2011) | 11 lines Merged revisions 302311 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r302311 | mnicholson | 2011-01-18 15:35:03 -0600 (Tue, 18 Jan
	  2011) | 4 lines URI encode the user part of the contact header.
	  ABE-2705 ........ ................ ................

2011-01-18 20:40 +0000 [r302270]  Jeff Peeler <jpeeler@digium.com>

	* main/pbx.c, /: Merged revisions 302266 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r302266 | jpeeler | 2011-01-18 14:19:57 -0600
	  (Tue, 18 Jan 2011) | 34 lines Merged revisions 302265 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r302265 | jpeeler | 2011-01-18 14:13:52 -0600 (Tue, 18 Jan 2011)
	  | 27 lines Convert device state callbacks to ao2 objects to fix a
	  deadlock in chan_sip. Lock scenario presented here: Thread 1
	  holds ast_rdlock_contexts &conlock holds handle_statechange hints
	  holds handle_statechange hint waiting for cb_extensionstate
	  Locked Here: chan_sip.c line 7428 (find_call) Thread 2 holds
	  handle_request_do &netlock holds find_call sip_pvt_ptr waiting
	  for ast_rdlock_contexts &conlock Locked Here: pbx.c line 9911
	  (ast_rdlock_contexts) Chan_sip has an established locking order
	  of locking the sip_pvt and then getting the context lock. So the
	  as stated by the summary, the operations in thread 2 have been
	  modified to no longer require the context lock. (closes issue
	  #18310) Reported by: one47 Patches: statecbs_ao2.mk2.patch
	  uploaded by one47 (license 23), modified by me Review:
	  https://reviewboard.asterisk.org/r/1072/ ........
	  ................

2011-01-18 20:21 +0000 [r302268]  Russell Bryant <russell@digium.com>

	* /, main/astobj2.c: Merged revisions 302267 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r302267 | russell | 2011-01-18 14:19:57 -0600 (Tue, 18 Jan 2011)
	  | 5 lines Don't enable AO2_DEBUG by default if AST_DEVMODE is on.
	  AO2_DEBUG is not important and is causing a false compiler
	  warning to be generated on my Ubuntu Natty dev box. ........

2011-01-18 18:17 +0000 [r302178]  Richard Mudgett <rmudgett@digium.com>

	* /, main/features.c: Merged revisions 302174 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r302174 | rmudgett | 2011-01-18 12:11:43 -0600
	  (Tue, 18 Jan 2011) | 102 lines Merged revisions 302173 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r302173 | rmudgett | 2011-01-18 12:07:15 -0600
	  (Tue, 18 Jan 2011) | 95 lines Merged revisions 302172 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r302172 | rmudgett | 2011-01-18 12:04:36 -0600 (Tue, 18 Jan 2011)
	  | 88 lines Issues with DTMF triggered attended transfers. Issue
	  #17999 1) A calls B. B answers. 2) B using DTMF dial *2 (code in
	  features.conf for attended transfer). 3) A hears MOH. B dial
	  number C 4) C ringing. A hears MOH. 5) B hangup. A still hears
	  MOH. C ringing. 6) A hangup. C still ringing until
	  "atxfernoanswertimeout" expires. For v1.4 C will ring forever
	  until C answers the dead line. (Issue #17096) Problem: When A and
	  B hangup, C is still ringing. Issue #18395 SIP call limit of B is
	  1 1. A call B, B answered 2. B *2(atxfer) call C 3. B hangup, C
	  ringing 4. Timeout waiting for C to answer 5. Recall to B fails
	  because B has reached its call limit. Because B reached its call
	  limit, it cannot do anything until the transfer it started
	  completes. Issue #17273 Same scenario as issue 18395 but party B
	  is an FXS port. Party B cannot do anything until the transfer it
	  started completes. If B goes back off hook before C answers, B
	  hears ringback instead of the expected dialtone. ********** Note
	  for the issue #17273 and #18395 fix: DTMF attended transfer works
	  within the channel bridge. Unfortunately, when either party A or
	  B in the channel bridge hangs up, that channel is not completely
	  hung up until the transfer completes. This is a real problem
	  depending upon the channel technology involved. For chan_dahdi,
	  the channel is crippled until the hangup is complete. Either the
	  channel is not useable (analog) or the protocol disconnect
	  messages are held up (PRI/BRI/SS7) and the media is not released.
	  For chan_sip, a call limit of one is going to block that endpoint
	  from any further calls until the hangup is complete. For party A
	  this is a minor problem. The party A channel will only be in this
	  condition while party B is dialing and when party B and C are
	  conferring. The conversation between party B and C is expected to
	  be a short one. Party B is either asking a question of party C or
	  announcing party A. Also party A does not have much incentive to
	  hangup at this point. For party B this can be a major problem
	  during a blonde transfer. (A blonde transfer is our term for an
	  attended transfer that is converted into a blind transfer. :))
	  Party B could be the operator. When party B hangs up, he assumes
	  that he is out of the original call entirely. The party B channel
	  will be in this condition while party C is ringing, while
	  attempting to recall party B, and while waiting between call
	  attempts. WARNING: The ATXFER_NULL_TECH conditional is a hack to
	  fix the problem. It will replace the party B channel technology
	  with a NULL channel driver to complete hanging up the party B
	  channel technology. The consequences of this code is that the 'h'
	  extension will not be able to access any channel technology
	  specific information like SIP statistics for the call.
	  ATXFER_NULL_TECH is not defined by default. ********** (closes
	  issue #17999) Reported by: iskatel Tested by: rmudgett JIRA
	  SWP-2246 (closes issue #17096) Reported by: gelo Tested by:
	  rmudgett JIRA SWP-1192 (closes issue #18395) Reported by:
	  shihchuan Tested by: rmudgett (closes issue #17273) Reported by:
	  grecco Tested by: rmudgett Review:
	  https://reviewboard.asterisk.org/r/1047/ ........
	  ................ ................

2011-01-17 16:38 +0000 [r302006-302048]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 293493 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r293493 | twilson | 2010-11-01 09:58:00 -0500 (Mon, 01 Nov 2010)
	  | 14 lines Only offer codecs both sides support for directmedia
	  When using directmedia, Asterisk needs to limit the codecs
	  offered to just the ones that both sides recognize, otherwise
	  they may end up sending audio that the other side doesn't
	  understand. (closes issue #17403) Reported by: one47 Patches:
	  sip_codecs_simplified4 uploaded by one47 (license 23) Tested by:
	  one47, falves11 Review: https://reviewboard.asterisk.org/r/967/
	  ........

	* /, configs/sip.conf.sample: Merged revisions 302005 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r302005 | twilson | 2011-01-17 09:04:59 -0600 (Mon, 17
	  Jan 2011) | 2 lines Document "encryption" option in
	  sip.conf.sample ........

2011-01-14 21:13 +0000 [r301947]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/sig_pri.c: Merged revisions 301946 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r301946 | rmudgett | 2011-01-14 15:09:57 -0600 (Fri, 14 Jan 2011)
	  | 13 lines Deadlock between dahdi_request() and pri_dchannel()
	  processing an incomming call. The sig_pri_new_ast_channel() is
	  called with the channel private lock held when pri_dchannel()
	  calls it and no channel private lock held when dahdi_request()
	  calls it. The use of pri_grab() in sig_pri_new_ast_channel()
	  could leave the channel private lock held when it returns if the
	  lock was not held before calling it. Make
	  sig_pri_new_ast_channel() just lock the PRI span lock instead of
	  using pri_grab(). It is safe to do this because dahdi_request()
	  does not have the channel private lock and the deadlock potential
	  with the PRI span lock is only between pri_dchannel() and other
	  threads. ........

2011-01-14 20:18 +0000 [r301858]  Brett Bryant <bbryant@digium.com>

	* channels/chan_multicast_rtp.c, /: Merged revisions 301851 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r301851 | bbryant | 2011-01-14 15:11:55 -0500 (Fri, 14 Jan 2011)
	  | 6 lines Changing previous revisions 301845/301847 to use
	  ast_sockaddr_setnull() instead of setting the field manually to
	  avoid uninitialized data. Review:
	  https://reviewboard.asterisk.org/r/1076/ ........

2011-01-14 20:07 +0000 [r301850]  Andrew Latham <lathama@gmail.com>

	* funcs/func_base64.c, /, funcs/func_aes.c: Add relationships to
	  function documentation. Fix amatuer type mistake

2011-01-14 19:44 +0000 [r301847]  Brett Bryant <bbryant@digium.com>

	* channels/chan_multicast_rtp.c, /: Merged revisions 301845 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r301845 | bbryant | 2011-01-14 14:35:23 -0500 (Fri, 14 Jan 2011)
	  | 9 lines Fix for a consistent MulticastRTP channel driver crash
	  due to use of unitilized data. (closes issue #18290) (closes
	  issue #18602) Reported by: voipgate, wybecom Review:
	  https://reviewboard.asterisk.org/r/1076/ ........

2011-01-14 19:39 +0000 [r301846]  Andrew Latham <lathama@gmail.com>

	* funcs/func_base64.c, /, funcs/func_aes.c: Add relationships to
	  function documentation.

2011-01-14 17:34 +0000 [r301791]  Jeff Peeler <jpeeler@digium.com>

	* /, channels/chan_sip.c: Merged revisions 301790 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r301790 | jpeeler | 2011-01-14 11:32:52 -0600 (Fri, 14 Jan 2011)
	  | 42 lines Resolve deadlock involving REFER. Two fixes: 1) One
	  must always have the private unlocked before calling
	  pbx_builtin_setvar_helper to not invalidate locking order since
	  it locks the channel. 2) Unlock the channel before calling
	  pbx_find_extension, which starts and stops autoservice during the
	  lookup. The problem scenario as illustrated by the reporter:
	  Thread: do_monitor ----------------------- handle_request_do
	  handle_incoming handle_request_refer ast_parking_ext_valid
	  pbx_find_extension ast_autoservice_stop while (chan_list_state ==
	  as_chan_list_state) { usleep(1000); } Thread: autoservice_run
	  ----------------------- autoservice_run chan = ast_waitfor_n
	  ast_waitfor_nandfds ast_waitfor_nandfds_classic / simple /
	  complex (depending on your system) ast_channel_lock(c[x]);
	  handle_request_do and schedule_process_request_queue locks the
	  owner if it exists. The autoservice thread is waiting for the
	  channel lock, which wasn't ever released since the do_monitor
	  thread was waiting for autoservice operations to complete. Solved
	  by unlocking the channel but keeping a reference to guarantee
	  safety. (closes issue #18403) Reported by: jthurman Patches:
	  20110103-blind_deadlock.diff uploaded by jthurman (license 614)
	  issue18403.patch uploaded by jpeeler (license 325) Tested by:
	  jthurman ........

2011-01-13 17:02 +0000 [r301732]  Leif Madsen <lmadsen@digium.com>

	* /, configs/phoneprov.conf.sample: Merged revisions 301731 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r301731 | lmadsen | 2011-01-13 11:01:43 -0600
	  (Thu, 13 Jan 2011) | 15 lines Merged revisions 301730 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r301730 | lmadsen | 2011-01-13 11:01:11 -0600 (Thu, 13 Jan 2011)
	  | 7 lines Add static entry for split Polycom 332 firmware.
	  (closes issue #18607) Reported by: cjacobsen Patches:
	  polycom_331.diff uploaded by cjacobsen (license 1029) Tested by:
	  lathama ........ ................

2011-01-13 16:27 +0000 [r301729]  Paul Belanger <pabelanger@digium.com>

	* main/pbx.c, CHANGES: Add dialplan variables for asterisk.conf
	  directories Review: https://reviewboard.asterisk.org/r/1075/

2011-01-12 21:24 +0000 [r301684]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 301683 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r301683 | twilson | 2011-01-12 15:19:48 -0600
	  (Wed, 12 Jan 2011) | 15 lines Merged revisions 301682 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r301682 | twilson | 2011-01-12 15:05:02 -0600 (Wed, 12 Jan 2011)
	  | 9 lines Don't reject all SUBSCRIBE auth requests When merging
	  another SUBSCRIBE fix from 1.4, some braces were put in the wrong
	  place. This patch fixes that. (closes issue #18597) Reported by:
	  thsgmbh ........ ................

2011-01-12 18:52 +0000 [r301596]  Matthew Nicholson <mnicholson@digium.com>

	* main/manager.c, /: Merged revisions 301595 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r301595 | mnicholson | 2011-01-12 12:51:37 -0600
	  (Wed, 12 Jan 2011) | 22 lines Merged revisions 301594 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r301594 | mnicholson | 2011-01-12 12:50:31 -0600
	  (Wed, 12 Jan 2011) | 15 lines Removed a usleep(1) that shouldn't
	  be necessary in session_do, and removed the ms_t member from the
	  mansession_session structure. Merged revisions 301591 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r301591 | mnicholson | 2011-01-12 12:39:03 -0600 (Wed, 12 Jan
	  2011) | 5 lines Don't store the thread id for the manager session
	  in the structure we pass to the thread for the manager session.
	  ABE-2543 ........ ................ ................

2011-01-12 18:12 +0000 [r301505]  Jeff Peeler <jpeeler@digium.com>

	* main/channel.c, /: Merged revisions 301504 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r301504 | jpeeler | 2011-01-12 12:12:08 -0600
	  (Wed, 12 Jan 2011) | 26 lines Merged revisions 301503 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r301503 | jpeeler | 2011-01-12 12:11:49 -0600
	  (Wed, 12 Jan 2011) | 19 lines Merged revisions 301502 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r301502 | jpeeler | 2011-01-12 12:10:42 -0600 (Wed, 12 Jan 2011)
	  | 12 lines Fix CPU spike when pressing DTMF after agent login.
	  The problem here is that DTMF was being continuously deferred and
	  requeued since ast_safe_sleep is called in a loop. There are
	  serveral other places in the code that sleeps and then loops in a
	  similar fashion. Because of this fact I opted to not defer DTMF
	  any more, which will not affect the original fix:
	  https://reviewboard.asterisk.org/r/674 (closes issue #18130)
	  Reported by: rgj ........ ................ ................

2011-01-12 16:05 +0000 [r301447]  David Vossel <dvossel@digium.com>

	* /, main/file.c: Merged revisions 301446 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r301446 | dvossel | 2011-01-12 10:05:12 -0600 (Wed, 12 Jan 2011)
	  | 2 lines Removal of unused variables so Asterisk will compile.
	  ........

2011-01-12 15:59 +0000 [r301445]  Stefan Schmidt <sst@sil.at>

	* Makefile: fix wrong text of rerun menuselect after user interface
	  warning the warning, if no user interface for menuselect warning
	  was found is not right. you have to rerun configure before make
	  menuselect after installing a proper user interface. (closes
	  issue 0018594) Reported by: Dovid

2011-01-12 00:27 +0000 [r301403]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, main/file.c: Merged revisions 301402 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r301402 | tilghman | 2011-01-11 18:26:39 -0600 (Tue, 11 Jan 2011)
	  | 7 lines Call execl() directly for a better solution for paths
	  with spaces. (closes issue #18600) Reported by: ebroad Patches:
	  20110111__issue18600__2.diff.txt uploaded by tilghman (license
	  14) ........

2011-01-11 19:19 +0000 [r301319]  Paul Belanger <pabelanger@digium.com>

	* /, configs/extensions.conf.sample: Merged revisions 301311 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r301311 | pabelanger | 2011-01-11 14:16:06 -0500
	  (Tue, 11 Jan 2011) | 9 lines Merged revisions 301310 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r301310 | pabelanger | 2011-01-11 14:14:31 -0500 (Tue,
	  11 Jan 2011) | 2 lines Fix a logic issue when passing context ARG
	  ........ ................

2011-01-11 18:55 +0000 [r301309]  Matthew Nicholson <mnicholson@digium.com>

	* /, main/utils.c: Merged revisions 301308 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r301308 | mnicholson | 2011-01-11 12:51:40 -0600
	  (Tue, 11 Jan 2011) | 18 lines Merged revisions 301307 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r301307 | mnicholson | 2011-01-11 12:42:05 -0600
	  (Tue, 11 Jan 2011) | 11 lines Merged revisions 301305 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r301305 | mnicholson | 2011-01-11 12:34:40 -0600 (Tue, 11 Jan
	  2011) | 4 lines Prevent buffer overflows in ast_uri_encode()
	  ABE-2705 ........ ................ ................

2011-01-10 22:40 +0000 [r301264]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, main/strcompat.c: Merged revisions 301263 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r301263 | tilghman | 2011-01-10 16:39:31 -0600 (Mon, 10 Jan 2011)
	  | 8 lines Little endian machines were not converted properly.
	  (closes issue #18583) Reported by: jcovert Patches:
	  20110110__issue18583.diff.txt uploaded by tilghman (license 14)
	  Tested by: jcovert ........

2011-01-09 21:42 +0000 [r301178-301222]  Paul Belanger <pabelanger@digium.com>

	* /, configure, configure.ac, autoconf/ast_ext_lib.m4: Merged
	  revisions 301221 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r301221 | pabelanger | 2011-01-09 16:40:34 -0500
	  (Sun, 09 Jan 2011) | 21 lines Merged revisions 301220 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r301220 | pabelanger | 2011-01-09 16:38:24 -0500 (Sun, 09 Jan
	  2011) | 14 lines SOUND_CACHE_DIR now defaults to empty Sounds
	  files included in the Asterisk tarball were being ignored and
	  re-downloaded. Users wanting to cache the files can still
	  override the setting using the --with-sounds-cache option.
	  (closes issue #18589) Reported by: pabelanger Patches:
	  issue18589.patch uploaded by pabelanger (license 224) Tested by:
	  pabelanger Review: https://reviewboard.asterisk.org/r/1074/
	  ........ ................

	* /, apps/app_verbose.c: Merged revisions 301177 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r301177 | pabelanger | 2011-01-08 17:00:12 -0500
	  (Sat, 08 Jan 2011) | 14 lines Merged revisions 301176 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r301176 | pabelanger | 2011-01-08 16:58:24 -0500 (Sat, 08 Jan
	  2011) | 7 lines Indicate log level argument for Log() is not
	  optional (closes issue #18586) Reported by: kshumard Patches:
	  app_verbose.c.patch uploaded by kshumard (license 92) ........
	  ................

2011-01-08 01:13 +0000 [r301135]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 301134 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r301134 | rmudgett | 2011-01-07 19:11:31 -0600 (Fri, 07
	  Jan 2011) | 7 lines The DTMF attended transfer feature cannot
	  callback a chan_dahdi BRI phone. The DAHDI ISDN channel name is
	  not dialable. Make a channel name like DAHDI/i3/400-12 dialable
	  when the sequence number is stripped off of the name. ........

2011-01-07 20:53 +0000 [r301091]  Jason Parker <jparker@digium.com>

	* /, apps/app_meetme.c: Merged revisions 301090 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r301090 | qwell | 2011-01-07 14:53:02 -0600
	  (Fri, 07 Jan 2011) | 15 lines Merged revisions 301089 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r301089 | qwell | 2011-01-07 14:52:00 -0600 (Fri, 07 Jan 2011) |
	  8 lines Initialize useropts/adminopts in case there is no column
	  in the realtime DB. (closes issue #18182) Reported by: dimas
	  Patches: v1-18182.patch uploaded by dimas (license 88) Tested by:
	  dimas ........ ................

2011-01-07 19:58 +0000 [r301048]  Jeff Peeler <jpeeler@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 301047 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r301047 | jpeeler | 2011-01-07 13:58:30 -0600
	  (Fri, 07 Jan 2011) | 15 lines Merged revisions 301046 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r301046 | jpeeler | 2011-01-07 13:57:42 -0600 (Fri, 07 Jan 2011)
	  | 8 lines Fix regression causing forwarding voicemails to not
	  work with file storage. I had actually already fixed this in
	  295200 in 1.4 and thought it wasn't missing in the other branches
	  for some reason. (closes issue #18358) Reported by: cabal95
	  ........ ................

2011-01-07 18:23 +0000 [r301008]  Tilghman Lesher <tilghman@meg.abyt.es>

	* funcs/func_curl.c: Oops, missed the actual decoding part. (closes
	  issue #18046) Reported by: wdoekes

2011-01-07 17:24 +0000 [r300959]  Jeff Peeler <jpeeler@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 300955 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r300955 | jpeeler | 2011-01-07 11:24:14 -0600
	  (Fri, 07 Jan 2011) | 21 lines Merged revisions 300951 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r300951 | jpeeler | 2011-01-07 11:23:37 -0600
	  (Fri, 07 Jan 2011) | 14 lines Merged revisions 300918 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r300918 | jpeeler | 2011-01-07 11:13:21 -0600 (Fri, 07 Jan 2011)
	  | 7 lines Ensure good bye prompt in voicemail is played at the
	  correct time. Specifically in the case of timing out but not
	  leaving voicemail nothing should be heard. And when leaving
	  voicemail it should be heard. ABE-2647 ........ ................
	  ................

2011-01-07 07:47 +0000 [r300882]  Mark Murawki <markm@intellasoft.net>

	* res/res_config_pgsql.c: Added support for postgres database retry
	  query on disconnection to res_config_pgsql If your postgres
	  connection died suddenly in between res_config_pgsql queries, the
	  next query will fail because the query is executed on a
	  disconnected/disconnecting handle. The query is abandoned and is
	  returned from in error. Now we will reconnect and try again if a
	  query was run on a disconnected connection. (closes issue #18071)

2011-01-06 17:50 +0000 [r300799-300841]  Tilghman Lesher <tilghman@meg.abyt.es>

	* Makefile, funcs/func_curl.c: XML validation

	* funcs/func_curl.c: Add a hashcompat mode called "legacy", which
	  translates a literal plus sign to a space. (closes issue #18046)
	  Reported by: wdoekes Patches: 20100930__issue18046.diff.txt
	  uploaded by tilghman (license 14)

	* /, addons/res_config_mysql.c: Merged revisions 300798 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r300798 | tilghman | 2011-01-06 00:28:18 -0600 (Thu, 06 Jan 2011)
	  | 8 lines Don't destroy handle not created by use (because the
	  caller will). (closes issue #18526) Reported by: makoto Patches:
	  res-config-mysql-include.patch uploaded by makoto (license 38)
	  Tested by: makoto ........

2011-01-06 01:41 +0000 [r300761]  David Ruggles <thedavidfactor@gmail.com>

	* Makefile, contrib/scripts/safe_asterisk: update safe_asterisk
	  script change defaults to make a little more sense. Default log
	  location is now asterisk log location and default email
	  notification has been changed to root on the local machine
	  Review: https://reviewboard.asterisk.org/r/1067/

2011-01-05 21:07 +0000 [r300716]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/sig_pri.c: Merged revisions 300714 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r300714 | rmudgett | 2011-01-05 14:54:21 -0600
	  (Wed, 05 Jan 2011) | 21 lines Merged revision 300711 from
	  https://origsvn.digium.com/svn/asterisk/be/branches/C.3-bier
	  .......... r300711 | rmudgett | 2011-01-05 13:43:55 -0600 (Wed,
	  05 Jan 2011) | 14 lines A call retrieved from hold may wind up
	  with no audio. If the retrieved call is natively bridged then the
	  call may not have any audio path. The following warning message
	  is given: "Failed to add <dfd> to conference <chan>/<chan>:
	  Invalid argument". * Open the media on a B channel when
	  pri_fixup_principle() moves the call from a no_b_channel channel
	  to a real channel. * Added lock protection while
	  pri_fixup_principle() moves a call from one private structure to
	  another. * Made some pri_fixup_principle() messages more
	  meaningful. .......... ................

2011-01-05 18:57 +0000 [r300624]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, res/res_odbc.c: Merged revisions 300623 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r300623 | tilghman | 2011-01-05 12:56:12 -0600
	  (Wed, 05 Jan 2011) | 24 lines Merged revisions 300622 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r300622 | tilghman | 2011-01-05 12:54:58 -0600
	  (Wed, 05 Jan 2011) | 17 lines Merged revisions 300621 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r300621 | tilghman | 2011-01-05 12:47:46 -0600 (Wed, 05 Jan 2011)
	  | 10 lines Use the sanity check in place of the
	  disconnect/connect cycle. The disconnect/connect cycle has the
	  potential to cause random crashes. (closes issue #18243) Reported
	  by: ks3 Patches: res_odbc.patch uploaded by ks3 (license 1147)
	  Tested by: ks3 ........ ................ ................

2011-01-05 16:30 +0000 [r300576]  Paul Belanger <pabelanger@digium.com>

	* /, cdr/cdr_sqlite.c: Merged revisions 300575 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r300575 | pabelanger | 2011-01-05 11:29:19 -0500
	  (Wed, 05 Jan 2011) | 13 lines Merged revisions 300574 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r300574 | pabelanger | 2011-01-05 11:28:07 -0500 (Wed, 05 Jan
	  2011) | 6 lines Change deprecated message to LOG_WARNING Also
	  removed latter part of message Discussed on #asterisk-dev
	  ........ ................

2011-01-04 21:54 +0000 [r300434-300522]  Leif Madsen <lmadsen@digium.com>

	* /, channels/chan_sip.c, channels/chan_agent.c,
	  channels/chan_iax2.c, main/xmldoc.c: Merged revisions 300521 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r300521 | lmadsen | 2011-01-04 15:53:27 -0600
	  (Tue, 04 Jan 2011) | 17 lines Merged revisions 300520 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r300520 | lmadsen | 2011-01-04 15:52:41 -0600 (Tue, 04 Jan 2011)
	  | 9 lines Fix backwards and broken XML documentation. (closes
	  issue #18547) Reported by: jcovert Patches: xmldoc.c.patch
	  uploaded by jcovert (license 551) chan_iax2.c.doc.patch uploaded
	  by jcovert (license 551) chan_sip.c.patch uploaded by jcovert
	  (license 551) chan_agent.c.patch uploaded by jcovert (license
	  551) ........ ................

	* configs/users.conf.sample, /: Merged revisions 300433 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r300433 | lmadsen | 2011-01-04 15:00:55 -0600
	  (Tue, 04 Jan 2011) | 15 lines Merged revisions 300431 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r300431 | lmadsen | 2011-01-04 15:00:29 -0600 (Tue, 04 Jan 2011)
	  | 7 lines Add some documentation to users.conf.sample. (closes
	  issue #18531) Reported by: lathama Patches:
	  users.conf.sample2.diff uploaded by lathama (license 1028) Tested
	  by: lathama ........ ................

2011-01-04 21:00 +0000 [r300432]  Russell Bryant <russell@digium.com>

	* /, contrib/scripts/autosupport.8, contrib/scripts/autosupport:
	  Merged revisions 300430 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r300430 | russell | 2011-01-04 15:00:16 -0600
	  (Tue, 04 Jan 2011) | 18 lines Merged revisions 300429 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r300429 | russell | 2011-01-04 14:59:56 -0600
	  (Tue, 04 Jan 2011) | 11 lines Merged revisions 300428 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r300428 | russell | 2011-01-04 14:56:04 -0600 (Tue, 04 Jan 2011)
	  | 4 lines Update the autosupport script from Digium support.
	  (closes AST-395) ........ ................ ................

2011-01-04 19:45 +0000 [r300385]  Leif Madsen <lmadsen@digium.com>

	* phoneprov/000000000000.cfg, /: Merged revisions 300384 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r300384 | lmadsen | 2011-01-04 13:45:22 -0600 (Tue, 04 Jan 2011)
	  | 7 lines Update STAT() to use the comma instead of the pipe.
	  (closes issue #18503) Reported by: cjacobsen Patches:
	  old_separator.diff uploaded by cjacobsen (license 1029) Tested
	  by: lathama ........

2011-01-04 18:51 +0000 [r300345]  Moises Silva <moises.silva@gmail.com>

	* channels/chan_dahdi.c: Update MFC-R2 code to use new DTMF-R2
	  functionality in OpenR2 (closes issue #18576)

2011-01-04 18:06 +0000 [r300302]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 300301 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r300301 | twilson | 2011-01-04 11:54:41 -0600
	  (Tue, 04 Jan 2011) | 29 lines Merged revisions 300298 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r300298 | twilson | 2011-01-04 11:37:26 -0600
	  (Tue, 04 Jan 2011) | 22 lines Merged revisions 300216 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r300216 | twilson | 2011-01-04 11:11:48 -0600 (Tue, 04 Jan 2011)
	  | 15 lines Don't authenticate SUBSCRIBE re-transmissions This
	  only skips authentication on retransmissions that are already
	  authenticated. A similar method is already used for INVITES. This
	  is the kind of thing we end up having to do when we don't have a
	  transaction layer... (closes issue #18075) Reported by: mdu113
	  Patches: diff.txt uploaded by twilson (license 396) Tested by:
	  twilson, mdu113 Review: https://reviewboard.asterisk.org/r/1005/
	  ........ ................ ................

2011-01-04 17:04 +0000 [r300215]  Jan Kalab <pitlicek@gmail.com>

	* res/res_calendar_exchange.c, res/res_calendar_icalendar.c, /:
	  Merged revisions 300214 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r300214 | pitel | 2011-01-04 18:01:52 +0100 (√öt, 04 led 2011) | 7
	  lines Memory leaking in calendars ne_request_destroy() was
	  missing in icalendar and exchange calendar modules, causing
	  memory leak. (closes issue #18521) Review:
	  https://reviewboard.asterisk.org/r/1068/ ........

2011-01-04 16:38 +0000 [r300168-300212]  Richard Mudgett <rmudgett@digium.com>

	* channels/sig_pri.h, channels/chan_dahdi.c,
	  configs/chan_dahdi.conf.sample, UPGRADE.txt, CHANGES,
	  channels/sig_pri.c: Optional HOLD/RETRIEVE signaling for PTMP TE
	  when the bridge goes on and off hold. Added the moh_signaling
	  option to specify what to do when the channel's bridged peer puts
	  the ISDN channel on and off of hold. Implemented as a FSM to
	  control libpri ISDN signaling when the bridged peer places the
	  channel on and off of hold with the AST_CONTROL_HOLD and
	  AST_CONTROL_UNHOLD control frames. JIRA SWP-2687 JIRA ABE-2691
	  Review: https://reviewboard.asterisk.org/r/1063/

	* /, main/features.c: Merged revisions 300166 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r300166 | rmudgett | 2011-01-03 17:14:55 -0600
	  (Mon, 03 Jan 2011) | 11 lines Merged revisions 300165 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r300165 | rmudgett | 2011-01-03 17:02:13 -0600 (Mon, 03 Jan 2011)
	  | 4 lines Use correct variable for atxfercallbackretries config
	  option. * Misc formatting changes. ........ ................

2011-01-03 14:09 +0000 [r300121]  David Ruggles <thedavidfactor@gmail.com>

	* apps/app_externalivr.c: initialize playing_silence in struct
	  initialization playing_silence was not initialized with the
	  struct was initialized, it was being set after the fact which
	  caused problems if something that relied on playing_silence being
	  set was called too quickly (closes issue #18430) Reported by:
	  stevebrandli Patches: externalivr.patch uploaded by
	  thedavidfactor (license 903) Tested by: thedavidfactor,
	  stevebrandli

2011-01-03 13:15 +0000 [r300083]  Leif Madsen <lmadsen@digium.com>

	* /, pbx/pbx_dundi.c: Merged revisions 300082 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r300082 | lmadsen | 2011-01-03 07:14:25 -0600 (Mon, 03 Jan 2011)
	  | 11 lines Increase side of mapping response field. I've
	  increased the size of the response field in a DUNDi mapping
	  because of some documentation I'm writing. Previously it was set
	  to AST_MAX_EXTENSION which is only 80 characters, which is far
	  too small when you're using some dialplan functions to craft a
	  response. The example I'm using is: extensions =>
	  RegisteredDevices,0,SIP,dundi:very_awesome_password/${IF($[${DB_EXISTS(phones/${NUMBER}/device)}]?${DB(phones/${NUMBER}/device)}:None)},nopartial
	  ........

2010-12-31 09:29 +0000 [r300044-300045]  Tilghman Lesher <tilghman@meg.abyt.es>

	* cdr/cdr_adaptive_odbc.c, CHANGES,
	  configs/cdr_adaptive_odbc.conf.sample: Support negative filters.
	  (closes issue #17979) Reported by: tilghman Patches:
	  20100911__for_blitzrage.diff.txt uploaded by tilghman (license
	  14) Tested by: lmadsen

	* main/logger.c, CHANGES: Support an alternate configuration file
	  for the 'logger reload' command. (closes issue #17668) Reported
	  by: tilghman Patches: 20100718__logger_reload_altconf__2.diff.txt
	  uploaded by tilghman (license 14) Review: (by lmadsen, russell
	  within comments on issue tracker)

2010-12-29 22:19 +0000 [r300000]  Sean Bright <sean@malleable.com>

	* main/asterisk.c: Remove some trailing whitespace and steal
	  revision 300000.

2010-12-29 22:03 +0000 [r299990]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, main/file.c, apps/app_voicemail.c: Merged revisions 299989 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r299989 | tilghman | 2010-12-29 16:02:59 -0600 (Wed, 29 Dec 2010)
	  | 4 lines Quote arguments, just in case there's a space in a
	  pathname. (Diagnosed by pabelanger on #asterisk-dev, fixed by
	  me.) ........

2010-12-29 19:29 +0000 [r299866-299949]  Paul Belanger <pabelanger@digium.com>

	* /, sounds/Makefile: Merged revisions 299948 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r299948 | pabelanger | 2010-12-29 14:28:36 -0500 (Wed, 29 Dec
	  2010) | 2 lines Only remove /tmp/astdatadir, not
	  /var/lib/asterisk ........

	* Makefile, /, build_tools/make_sample_voicemail, sounds/Makefile:
	  Merged revisions 299907 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r299907 | pabelanger | 2010-12-29 13:22:23 -0500 (Wed, 29 Dec
	  2010) | 2 lines Properly quote varibles for MAC OS X ........

	* /, apps/app_chanspy.c: Merged revisions 299865 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r299865 | pabelanger | 2010-12-28 13:53:37 -0500
	  (Tue, 28 Dec 2010) | 9 lines Merged revisions 299864 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r299864 | pabelanger | 2010-12-28 13:51:13 -0500 (Tue,
	  28 Dec 2010) | 2 lines Documentation typo ........
	  ................

2010-12-27 21:23 +0000 [r299754-299824]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, sounds/Makefile: Merged revisions 299820 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r299820 | tilghman | 2010-12-27 15:23:10 -0600 (Mon, 27 Dec 2010)
	  | 2 lines More space-in-pathname issues. ........

	* Makefile, /, Makefile.moddir_rules, sounds/Makefile: Merged
	  revisions 299794 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r299794 | tilghman | 2010-12-27 14:41:04 -0600 (Mon, 27 Dec 2010)
	  | 2 lines Mac OS X spaces-in-pathnames fix. ........

	* /, configure, configure.ac: Merged revisions 299752 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r299752 | tilghman | 2010-12-26 15:15:58 -0600 (Sun, 26
	  Dec 2010) | 2 lines Properly quote path on Darwin. ........

2010-12-25 16:35 +0000 [r299715]  Alexandr Anikin <may@telecom-service.ru>

	* addons/ooh323c/src/ooh323.c, addons/ooh323c/src/ooh245.c,
	  addons/ooh323c/src/oochannels.c, addons/ooh323c/src/ooq931.c:
	  Change order of sending TCS and MSD packets Change order of
	  sending Terminal Capability Set and MasterSlave Determination
	  packets, MSD send when TCS exchange procedure is done (we send
	  tcs ack to remote and we have remote tcs ack already or we
	  receive tcs ack from remote and we have send our tcs ack to
	  remote already). Some endpoints can work in this sequence only, i
	  suggest they can't work with both (tcs and msd) exchange
	  procedures simultaneously. Also changed StartH245 facility
	  message sending. It send on incoming calls only due to some
	  endpoints can't proccess properly this facility messages on their
	  incoming calls. (closes issue #18433) Reported by: MrHanMan
	  Patches: tcs-msd-h245-3.patch uploaded by may213 (license 454)
	  Tested by: MrHanMan, may213

2010-12-25 10:08 +0000 [r299584-299627]  Tilghman Lesher <tilghman@meg.abyt.es>

	* channels/chan_local.c, /: Merged revisions 299626 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r299626 | tilghman | 2010-12-25 04:07:15 -0600
	  (Sat, 25 Dec 2010) | 19 lines Merged revisions 299625 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r299625 | tilghman | 2010-12-25 04:05:00 -0600
	  (Sat, 25 Dec 2010) | 12 lines Merged revisions 299624 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r299624 | tilghman | 2010-12-25 04:04:06 -0600 (Sat, 25 Dec 2010)
	  | 5 lines Move check for extension existence below variable
	  inheritance, due to the possible use of an eswitch. (closes issue
	  #16228) Reported by: jlaguilar ........ ................
	  ................

	* /, addons/res_config_mysql.c: Merged revisions 299583 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r299583 | tilghman | 2010-12-24 11:58:30 -0600 (Fri, 24 Dec 2010)
	  | 7 lines Reset 'first' variable after usage. (closes issue
	  #18525) Reported by: makoto Patches:
	  res-config-mysql-update2.patch uploaded by makoto (license 38)
	  ........

2010-12-23 01:46 +0000 [r299493]  Moises Silva <moises.silva@gmail.com>

	* channels/chan_dahdi.c: Enqueue AST_CONTROL_PROGRESS after
	  AST_CONTROL_RINGING when MFC-R2 calls are accepted (closes issue
	  #18438) Reported by: mariner7 Tested by: moy

2010-12-22 20:10 +0000 [r299450]  Tilghman Lesher <tilghman@meg.abyt.es>

	* res/ael/pval.c, pbx/ael/ael-test/ref.ael-vtest25,
	  pbx/ael/ael-test/ref.ael-vtest17, /,
	  pbx/ael/ael-test/ref.ael-test3, pbx/ael/ael-test/ref.ael-test19,
	  pbx/ael/ael-test/ref.ael-vtest13: Merged revisions 299449 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r299449 | tilghman | 2010-12-22 14:05:02 -0600
	  (Wed, 22 Dec 2010) | 15 lines Merged revisions 299448 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r299448 | tilghman | 2010-12-22 14:03:30 -0600 (Wed, 22 Dec 2010)
	  | 8 lines Resolve warnings by disambiguating the "s" extension as
	  used by chan_dahdi from the "s" extension as used by the AEL
	  macros. (closes issue #18480) Reported by: nivek Patches:
	  20101215__issue18480__2.diff.txt uploaded by tilghman (license
	  14) Tested by: nivek ........ ................

2010-12-22 02:12 +0000 [r299406]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/sig_pri.c: Merged revisions 299405 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r299405 | rmudgett | 2010-12-21 20:10:39 -0600 (Tue, 21 Dec 2010)
	  | 17 lines Chan_dahdi sends an empty COLP on the bridged channel.
	  Chan_dahdi always inserts a connected party IE when you call from
	  one dahdi channel to another dahdi channel, even if no such
	  information was received on the 2nd channel. This clears the
	  display of many phones. * Removed leftover artifact from before
	  the valid flag was added. * Updated all of the channel's caller
	  id information with the new connected line information instead of
	  just the string parts. (closes issue #18508) Reported by: wimpy
	  Patches: issue18508_trunk.patch uploaded by rmudgett (license
	  664) Tested by: wimpy, rmudgett ........

2010-12-21 16:02 +0000 [r299355]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 299353 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r299353 | mnicholson | 2010-12-21 09:25:03 -0600
	  (Tue, 21 Dec 2010) | 30 lines Merged revisions 299242 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r299242 | mnicholson | 2010-12-20 15:25:35 -0600
	  (Mon, 20 Dec 2010) | 23 lines Merged revisions
	  299194,299198,299220 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r299194 | mnicholson | 2010-12-20 14:45:38 -0600 (Mon, 20 Dec
	  2010) | 6 lines Respond as soon as possible with a 202 Accepted
	  to refer requests. This change also plugs a few memory leaks that
	  can occur when parking sip calls. ABE-2656 ........ r299198 |
	  mnicholson | 2010-12-20 15:00:44 -0600 (Mon, 20 Dec 2010) | 2
	  lines Remove changes to via processing that were not supposed to
	  go into the last commit. ........ r299220 | mnicholson |
	  2010-12-20 15:21:39 -0600 (Mon, 20 Dec 2010) | 4 lines Use
	  ast_free() instead of free() ABE-2656 ........ ................
	  ................

2010-12-21 00:45 +0000 [r299313]  Paul Belanger <pabelanger@digium.com>

	* configs/cel.conf.sample, /: Merged revisions 299312 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r299312 | pabelanger | 2010-12-20 19:44:08 -0500 (Mon,
	  20 Dec 2010) | 8 lines Correct typo with USER_DEFINED event.
	  (closes issue #18461) Reported by: joscas Patches:
	  cel.conf.sample.diff uploaded by lathama (license 1028) Tested
	  by: lathama, joscas ........

2010-12-20 21:40 +0000 [r299249]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 299248 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r299248 | mmichelson | 2010-12-20 15:38:30 -0600 (Mon, 20 Dec
	  2010) | 20 lines Fix a couple of CCSS issues. * Make sure to
	  allocate a cc_params structure when creating autopeers. * Use
	  sip_uri_cmp when retrieving SIP CC agents and monitors in case
	  parameters appear in the URI. (closes issue #18504) Reported by:
	  kkm (closes issue #18338) Reported by: GeorgeKonopacki Patches:
	  18338.diff uploaded by mmichelson (license 60) Tested by:
	  GeorgeKonopacki ........

2010-12-20 18:18 +0000 [r299142]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, sample.call: Merged revisions 299138 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r299138 | tilghman | 2010-12-20 12:17:28 -0600
	  (Mon, 20 Dec 2010) | 9 lines Merged revisions 299136 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r299136 | tilghman | 2010-12-20 12:16:37 -0600 (Mon, 20
	  Dec 2010) | 2 lines Documentation fix ........ ................

2010-12-20 18:03 +0000 [r299135]  David Vossel <dvossel@digium.com>

	* include/asterisk/astobj2.h, main/astobj2.c: New astobj2 flag for
	  issuing a callback without locking the container.

2010-12-20 17:59 +0000 [r299133-299134]  Russell Bryant <russell@digium.com>

	* channels/chan_misdn.c: Fix chan_misdn build after sched API
	  changes.

	* addons/chan_ooh323.c, addons/chan_mobile.c: Fix some build errors
	  in addons due to sched API changes.

2010-12-20 17:48 +0000 [r299132]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, cdr/cdr_pgsql.c: Merged revisions 299131 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r299131 | tilghman | 2010-12-20 11:47:10 -0600
	  (Mon, 20 Dec 2010) | 18 lines Merged revisions 299130 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r299130 | tilghman | 2010-12-20 11:41:24 -0600 (Mon, 20 Dec 2010)
	  | 11 lines If a call was not answered, then the billsec was
	  calculated unusually large. Also, due to a copy and paste error,
	  a request for the answer field would have given the start value,
	  instead. (closes issue #18460) Reported by: joscas Patches:
	  20101215__issue18460.diff.txt uploaded by tilghman (license 14)
	  Tested by: joscas ........ ................

2010-12-20 17:15 +0000 [r299091]  Russell Bryant <russell@digium.com>

	* channels/chan_unistim.c, main/udptl.c, res/res_rtp_asterisk.c,
	  include/asterisk.h, main/rtp_engine.c, main/dnsmgr.c,
	  channels/chan_sip.c, main/ccss.c, include/asterisk/channel.h,
	  channels/chan_gtalk.c, tests/test_sched.c, channels/chan_iax2.c,
	  res/res_rtp_multicast.c, main/channel.c, main/cdr.c,
	  channels/chan_jingle.c, channels/chan_skinny.c,
	  channels/sip/include/globals.h, res/res_stun_monitor.c,
	  channels/sip/dialplan_functions.c, channels/chan_h323.c,
	  include/asterisk/sched.h, pbx/pbx_dundi.c,
	  include/asterisk/udptl.h, include/asterisk/rtp_engine.h,
	  main/sched.c, channels/chan_mgcp.c, res/res_calendar.c: Some
	  scheduler API cleanup and improvements. Previously, I had added
	  the ast_sched_thread stuff that was a generic scheduler thread
	  implementation. However, if you used it, it required using
	  different functions for modifying scheduler contents. This patch
	  reworks how this is done and just allows you to optionally start
	  a thread on the original scheduler context structure that has
	  always been there. This makes it trivial to switch to the generic
	  scheduler thread implementation without having to touch any of
	  the other code that adds or removes scheduler entries. In
	  passing, I made some naming tweaks to add ast_ prefixes where
	  they were not there before. Review:
	  https://reviewboard.asterisk.org/r/1007/

2010-12-20 16:19 +0000 [r299089]  Leif Madsen <lmadsen@digium.com>

	* /, main/features.c: Merged revisions 299088 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r299088 | lmadsen | 2010-12-20 10:18:26 -0600
	  (Mon, 20 Dec 2010) | 13 lines Merged revisions 299087 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r299087 | lmadsen | 2010-12-20 10:18:03 -0600 (Mon, 20 Dec 2010)
	  | 5 lines Note that Park() timeout is milliseconds. (closes issue
	  #15758) Reported by: mmurdock Tested by: mmurdock, seanbright
	  ........ ................

2010-12-20 09:14 +0000 [r299005]  Tzafrir Cohen <tzafrir.cohen@xorcom.com>

	* channels/sig_pri.h, channels/chan_sip.c, main/aoc.c: Typos:
	  recieved => received

2010-12-18 00:08 +0000 [r298819-298961]  Tilghman Lesher <tilghman@meg.abyt.es>

	* utils/refcounter.c, include/asterisk/utils.h,
	  build_tools/cflags-devmode.xml, /, main/Makefile,
	  include/asterisk/autoconfig.h.in, configure.ac, utils/hashtest.c,
	  main/utils.c, main/astobj2.c, utils/conf2ael.c,
	  include/asterisk/logger.h, configure,
	  build_tools/menuselect-deps.in, main/logger.c, utils/hashtest2.c,
	  utils/ael_main.c, makeopts.in, utils/check_expr.c: Merged
	  revisions 298960 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r298960 | tilghman | 2010-12-17 17:52:04 -0600
	  (Fri, 17 Dec 2010) | 20 lines Merged revisions 298957 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r298957 | tilghman | 2010-12-17 17:30:55 -0600
	  (Fri, 17 Dec 2010) | 13 lines Merged revisions 298905 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r298905 | tilghman | 2010-12-17 15:40:56 -0600 (Fri, 17 Dec 2010)
	  | 6 lines Let Asterisk find better backtrace information with
	  libbfd. The menuselect option BETTER_BACKTRACES, if enabled, will
	  use libbfd to search for better symbol information within both
	  the Asterisk binary, as well as loaded modules, to assist when
	  using inline backtraces to track down problems. Review:
	  https://reviewboard.asterisk.org/r/1055/ ........
	  ................ ................

	* contrib/init.d/rc.debian.asterisk, /: Merged revisions 298827 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r298827 | tilghman | 2010-12-17 15:18:18 -0600 (Fri, 17 Dec 2010)
	  | 8 lines -v implies -f, so override with -F. (closes issue
	  #18446) Reported by: lathama Patches: rc.debian.asterisk.diff
	  uploaded by lathama (license 1028) Tested by: lathama ........

	* /, configure, configure.ac: Merged revisions 298818 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r298818 | tilghman | 2010-12-17 15:04:21 -0600
	  (Fri, 17 Dec 2010) | 15 lines Merged revisions 298817 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r298817 | tilghman | 2010-12-17 15:03:06 -0600 (Fri, 17 Dec 2010)
	  | 8 lines Also include PTHREAD_LIBS and PTHREAD_CFLAGS for SQLite
	  3, as it's needed on some platforms. (closes issue #18493)
	  Reported by: pprindeville Patches: asterisk-1.8-sqlite3.patch
	  uploaded by pprindeville (license 347) Tested by: pprindeville
	  ........ ................

2010-12-17 17:29 +0000 [r298774]  Brad Watkins <Marquis42@gmail.com>

	* /, channels/chan_sip.c, configs/sip.conf.sample: Merged revisions
	  298773 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r298773 | marquis | 2010-12-17 12:26:31 -0500 (Fri, 17 Dec 2010)
	  | 10 lines Fix parsing of mwi => lines in sip.conf Reworking
	  parsing of mwi => lines to resolve a segfault. Also add a set of
	  unit tests for the function that does the parsing. (closes issue
	  #18350) Reported by: gbour Tested by: Marquis, gbour Review:
	  https://reviewboard.asterisk.org/r/1053/ ........

2010-12-16 23:33 +0000 [r298599-298686]  Jeff Peeler <jpeeler@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 298685 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r298685 | jpeeler | 2010-12-16 17:31:50 -0600
	  (Thu, 16 Dec 2010) | 16 lines Merged revisions 298684 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r298684 | jpeeler | 2010-12-16 17:30:59 -0600
	  (Thu, 16 Dec 2010) | 9 lines Merged revisions 298683 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r298683 | jpeeler | 2010-12-16 17:29:30 -0600 (Thu, 16
	  Dec 2010) | 2 lines After recording only silence for a voicemail
	  prepending, restore backup files. ........ ................
	  ................

	* /, apps/app_queue.c: Merged revisions 298598 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r298598 | jpeeler | 2010-12-16 14:51:44 -0600
	  (Thu, 16 Dec 2010) | 21 lines Merged revisions 298597 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r298597 | jpeeler | 2010-12-16 14:49:33 -0600
	  (Thu, 16 Dec 2010) | 14 lines Merged revisions 298596 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r298596 | jpeeler | 2010-12-16 14:46:52 -0600 (Thu, 16 Dec 2010)
	  | 7 lines Fix improper hangup when doing an attended transfer to
	  queue. Had to indicate ringing in wait_for_answer so the attended
	  transfer code would not try and hang up the local channel it
	  created, which would kill the call. ABE-2624 ........
	  ................ ................

2010-12-16 09:29 +0000 [r298441-298545]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, channels/chan_sip.c: Merged revisions 298539 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r298539 | tilghman | 2010-12-16 03:28:17 -0600 (Thu, 16 Dec 2010)
	  | 8 lines Ensure the ipaddr field in realtime is large enough to
	  handle IPv6 addresses. (closes issue #18464) Reported by: IgorG
	  Patches: realtime_ipv6store.diff uploaded by IgorG (license 20)
	  (plus a few additional lines by tilghman) ........

	* res/res_config_odbc.c, /: Merged revisions 298482 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r298482 | tilghman | 2010-12-16 03:05:28 -0600
	  (Thu, 16 Dec 2010) | 28 lines Merged revisions 298481 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r298481 | tilghman | 2010-12-16 03:04:38 -0600
	  (Thu, 16 Dec 2010) | 21 lines Merged revisions 298480 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r298480 | tilghman | 2010-12-16 03:03:40 -0600 (Thu, 16 Dec 2010)
	  | 14 lines Only increment the pointer once per loop, otherwise we
	  corrupt the value. (closes issue #18251) Reported by: bcnit
	  Patches: 20101110__issue18251.diff.txt uploaded by tilghman
	  (license 14) Tested by: trev, jthurman, elguero (closes issue
	  #18279) Reported by: zerohalo Patches:
	  20101109__issue18279.diff.txt uploaded by tilghman (license 14)
	  Tested by: zerohalo ........ ................ ................

	* /, funcs/func_dialgroup.c: Merged revisions 298478 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r298478 | tilghman | 2010-12-16 02:56:13 -0600
	  (Thu, 16 Dec 2010) | 15 lines Merged revisions 298477 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r298477 | tilghman | 2010-12-16 02:54:23 -0600 (Thu, 16 Dec 2010)
	  | 8 lines Eliminate duplicates from container. (closes issue
	  #18091) Reported by: bunny Patches: 20101006__issue18091.diff.txt
	  uploaded by tilghman (license 14) Tested by: bunny ........
	  ................

	* /, cdr/cdr_sqlite.c: Merged revisions 298394 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r298394 | tilghman | 2010-12-15 18:30:04 -0600
	  (Wed, 15 Dec 2010) | 22 lines Merged revisions 298393 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r298393 | tilghman | 2010-12-15 18:29:10 -0600
	  (Wed, 15 Dec 2010) | 15 lines Merged revisions 298392 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r298392 | tilghman | 2010-12-15 18:28:04 -0600 (Wed, 15 Dec 2010)
	  | 8 lines Unregister before shutting down the connection, to
	  avoid a race. (closes issue #18481) Reported by: pabelanger
	  Patches: 20101215__issue18481.diff.txt uploaded by tilghman
	  (license 14) Tested by: pabelanger ........ ................
	  ................

2010-12-13 22:10 +0000 [r298201-298288]  Richard Mudgett <rmudgett@digium.com>

	* channels/sig_pri.c: Post AMI hold events on PRI spans when the
	  remote party HOLD/RETRIEVEs the call. Part of JIRA
	  SWP-2687/ABE-2691.

	* channels/chan_dahdi.c, /, channels/sig_pri.c: Merged revisions
	  298195 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r298195 | rmudgett | 2010-12-13 11:11:43 -0600
	  (Mon, 13 Dec 2010) | 33 lines Merged revisions 298194 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r298194 | rmudgett | 2010-12-13 11:04:41 -0600
	  (Mon, 13 Dec 2010) | 26 lines Merged revisions 298193 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r298193 | rmudgett | 2010-12-13 10:56:07 -0600 (Mon, 13 Dec 2010)
	  | 19 lines Outgoing PRI/BRI calls cannot do DTMF triggered
	  transfers. Outgoing PRI/BRI calls cannot do DTMF triggered
	  transfers if a PROCEEDING message is not received. The debug
	  output shows that the DTMF begin event is seen, but the DTMF end
	  event is missing. When the DTMF begin happens, the call is muted
	  so we now have one way audio (until a DTMF end event is somehow
	  seen). * Made set the proceeding flag when the PRI_EVENT_ANSWER
	  event is received. * Made absorb the DTMF begin and DTMF end
	  events if we are overlap dialing and have not seen a PROCEEDING
	  message. * Added a debug message when absorbing a DTMF event.
	  JIRA SWP-2690 JIRA ABE-2697 ........ ................
	  ................

2010-12-12 03:58 +0000 [r298137]  Jeff Peeler <jpeeler@digium.com>

	* include/asterisk/utils.h, configure,
	  include/asterisk/autoconfig.h.in, configure.ac, main/logger.c,
	  main/utils.c, main/asterisk.c: Add support for several platforms
	  to obtain the real thread ID. Already had the pthread ID which is
	  not the same. The most obvious enhancement is in the "core show
	  threads" output. As stated in the utils header, if the platform
	  isn't supported -1 is reported (instead of the process ID
	  previously).

2010-12-11 21:47 +0000 [r298100]  Alexandr Anikin <may@telecom-service.ru>

	* addons/ooh323c/src/ooGkClient.c: Correction to work with
	  gatekeeper which don't send GK ID Don't use GK ID if it's not
	  presented in GK replies Extract GK ID not only in GK confirm but
	  in GK register confirm also (closes issue #18401) Reported by:
	  MrHanMan Patches: no-gkid-2.patch uploaded by may213 (license
	  454) Tested by: may213, MrHanMan

2010-12-10 16:53 +0000 [r298055]  Matthew Nicholson <mnicholson@digium.com>

	* /, res/res_fax.c: Merged revisions 298054 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r298054 | mnicholson | 2010-12-10 10:52:11 -0600 (Fri, 10 Dec
	  2010) | 2 lines Prevent a memcpy overlap in
	  GENERIC_FAX_EXEC_SET_VARS ........

2010-12-10 16:28 +0000 [r298052]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac,
	  main/netsock.c: Merged revisions 298051 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r298051 | tilghman | 2010-12-10 10:26:46 -0600
	  (Fri, 10 Dec 2010) | 18 lines Merged revisions 298050 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r298050 | tilghman | 2010-12-10 10:24:13 -0600 (Fri, 10 Dec 2010)
	  | 11 lines Portability issue on OpenSolaris. Also detect the
	  required structure element, because OpenSolaris defines
	  SIOCGIFHWADDR, but without support for IP sockets. (closes issue
	  #18442) Reported by: ranjtech Patches:
	  20101209__issue18442.diff.txt uploaded by tilghman (license 14)
	  Tested by: ranjtech ........ ................

2010-12-09 22:19 +0000 [r297972]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 297965 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r297965 | twilson | 2010-12-09 16:18:19 -0600
	  (Thu, 09 Dec 2010) | 28 lines Merged revisions 297960 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r297960 | twilson | 2010-12-09 16:10:31 -0600
	  (Thu, 09 Dec 2010) | 21 lines Merged revisions 297959 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r297959 | twilson | 2010-12-09 16:00:30 -0600 (Thu, 09 Dec 2010)
	  | 14 lines Ignore spurious REGISTER requests If a REGISTER
	  request with a Call-ID matching an existing transaction is
	  received it was possible that the REGISTER request would
	  overwrite the initreq of the private structure. This info is used
	  to generate messages for other responses in the transaction. This
	  patch ignores REGISTER requests that match non-REGISTER
	  transactions. (closes issue #18051) Reported by: eeman Tested by:
	  twilson Review: https://reviewboard.asterisk.org/r/1050/ ........
	  ................ ................

2010-12-09 21:33 +0000 [r297958]  David Vossel <dvossel@digium.com>

	* /, channels/chan_gtalk.c: Merged revisions 297957 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r297957 | dvossel | 2010-12-09 15:32:20 -0600 (Thu, 09
	  Dec 2010) | 11 lines Fixes issue with outbound google voice calls
	  not working. Thanks to az1234 and nevermind_quack for their input
	  in helping debug the issue. (closes issue #18412) Reported by:
	  nevermind_quack Patches: fix uploaded by dvossel (license 671)
	  ........

2010-12-09 21:26 +0000 [r297956]  Terry Wilson <twilson@digium.com>

	* /, main/features.c: Merged revisions 297952 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r297952 | twilson | 2010-12-09 14:48:44 -0600 (Thu, 09 Dec 2010)
	  | 10 lines Don't crash after Set(CDR(userfield)=...) in
	  ast_bridge_call Instead of setting peer->cdr = NULL, set it to
	  not post. (closes issue #18415) Reported by: macbrody Patches:
	  patch-18415 uploaded by jsolares (license 1167) Tested by:
	  jsolares, twilson ........

2010-12-08 18:08 +0000 [r297910]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, configs/extensions.conf.sample: Merged revisions 297909 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r297909 | tilghman | 2010-12-08 12:06:04 -0600
	  (Wed, 08 Dec 2010) | 11 lines Merged revisions 297908 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r297908 | tilghman | 2010-12-08 12:04:38 -0600 (Wed, 08 Dec 2010)
	  | 4 lines Use inheritance to get correct results for
	  SIPFROMDOMAIN. (from an internal Digium discussion) ........
	  ................

2010-12-07 23:00 +0000 [r297826]  Jeff Peeler <jpeeler@digium.com>

	* main/channel.c, /: Merged revisions 297825 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r297825 | jpeeler | 2010-12-07 16:59:30 -0600
	  (Tue, 07 Dec 2010) | 26 lines Merged revisions 297824 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r297824 | jpeeler | 2010-12-07 16:58:54 -0600
	  (Tue, 07 Dec 2010) | 19 lines Merged revisions 297823 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r297823 | jpeeler | 2010-12-07 16:57:48 -0600 (Tue, 07 Dec 2010)
	  | 12 lines Revert code that changed SSRC for DTMF. Some previous
	  behavior was attempted to be restored, but mistakingly I did not
	  realize that the previous behavior was incorrect. This fixes DTMF
	  not being detected since DTMF shouldn't cause the SSRC to change.
	  (related to issue #17404) (closes issue #18189) (closes issue
	  #18352) Reported by: marcbou Tested by: cmbaker82 ........
	  ................ ................

2010-12-07 22:54 +0000 [r297734-297822]  Tilghman Lesher <tilghman@meg.abyt.es>

	* Makefile, contrib/init.d/org.asterisk.asterisk.plist,
	  utils/muted.c, /, contrib/init.d/org.asterisk.muted.plist
	  (added): Merged revisions 297821 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r297821 | tilghman | 2010-12-07 16:51:05 -0600
	  (Tue, 07 Dec 2010) | 18 lines Merged revisions 297819 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r297819 | tilghman | 2010-12-07 16:40:45 -0600
	  (Tue, 07 Dec 2010) | 11 lines Merged revisions 297818 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r297818 | tilghman | 2010-12-07 16:35:50 -0600 (Tue, 07 Dec 2010)
	  | 4 lines Use non-deprecated APIs for CoreAudio Review:
	  https://reviewboard.asterisk.org/r/1040/ ........
	  ................ ................

	* /, apps/app_followme.c: Merged revisions 297733 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r297733 | tilghman | 2010-12-06 18:29:26 -0600
	  (Mon, 06 Dec 2010) | 22 lines Merged revisions 297713 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r297713 | tilghman | 2010-12-06 18:21:50 -0600
	  (Mon, 06 Dec 2010) | 15 lines Merged revisions 297689 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r297689 | tilghman | 2010-12-06 18:07:37 -0600 (Mon, 06 Dec 2010)
	  | 8 lines Don't create a Local channel if the target extension
	  does not exist. (closes issue #18126) Reported by: junky Patches:
	  followme.diff uploaded by junky (license 177) (partially
	  restructured by me to avoid a possible memory leak) ........
	  ................ ................

2010-12-06 22:10 +0000 [r297608]  Jeff Peeler <jpeeler@digium.com>

	* /, channels/chan_sip.c: Merged revisions 297607 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r297607 | jpeeler | 2010-12-06 16:06:37 -0600
	  (Mon, 06 Dec 2010) | 25 lines Merged revisions 297605 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r297605 | jpeeler | 2010-12-06 16:03:04 -0600
	  (Mon, 06 Dec 2010) | 18 lines Merged revisions 297603 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r297603 | jpeeler | 2010-12-06 15:57:15 -0600 (Mon, 06 Dec 2010)
	  | 12 lines Improve handling of REGISTER requests with multiple
	  contact headers. The changes here attempt to more strictly follow
	  RFC 3261 section 10.3. Basically the following will now cause a
	  400 Bad Response to be returned, if: - multiple Contact headers
	  are present with one set to expire all bindings ("*") - wildcard
	  parameter is specified for Contact without Expires header or
	  Expires header is not set to zero. ABE-2442 ABE-2443 ........
	  ................ ................

2010-12-03 17:42 +0000 [r297536]  Sean Bright <sean@malleable.com>

	* /, channels/chan_console.c: Merged revisions 297535 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r297535 | seanbright | 2010-12-03 12:41:30 -0500
	  (Fri, 03 Dec 2010) | 9 lines Merged revisions 297534 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r297534 | seanbright | 2010-12-03 12:40:52 -0500 (Fri,
	  03 Dec 2010) | 3 lines The CLI command should not contain
	  <placeholder>s, these are for descriptions. ........
	  ................

2010-12-03 15:32 +0000 [r297496]  Matthew Nicholson <mnicholson@digium.com>

	* /, res/res_fax.c, include/asterisk/res_fax.h: Merged revisions
	  297157,297486,297495 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r297157 | mnicholson | 2010-12-01 13:47:33 -0600 (Wed, 01 Dec
	  2010) | 2 lines Changed some NOTICE and WARNING messages to DEBUG
	  messages. ........ r297486 | mnicholson | 2010-12-02 15:30:47
	  -0600 (Thu, 02 Dec 2010) | 6 lines Add support for reserving a
	  fax session before answering the channel. Note: this change
	  breaks ABI compatibility. FAX-217 ........ r297495 | mnicholson |
	  2010-12-03 09:21:52 -0600 (Fri, 03 Dec 2010) | 4 lines Print a
	  DEBUG message instead of a WARNING message when the selected fax
	  tech does not support reserving sessions. Answer the channel
	  before quering it for t.38 support. This is necessary for the
	  query to work properly over local channels. ........

2010-12-02 20:11 +0000 [r297407]  Paul Belanger <pabelanger@digium.com>

	* Makefile, /: Merged revisions 297406 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r297406 | pabelanger | 2010-12-02 15:09:29 -0500
	  (Thu, 02 Dec 2010) | 21 lines Merged revisions 297405 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r297405 | pabelanger | 2010-12-02 15:06:43 -0500
	  (Thu, 02 Dec 2010) | 14 lines Merged revisions 297404 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r297404 | pabelanger | 2010-12-02 15:01:08 -0500 (Thu, 02 Dec
	  2010) | 7 lines Resolve compile error under FreeBSD We now set
	  _ASTCFLAGS+=-march=i686 for i386 processors, still allowing
	  ASTCFLAGS to override the setting. Review:
	  https://reviewboard.asterisk.org/r/1043/ ........
	  ................ ................

2010-12-02 18:28 +0000 [r297356]  Terry Wilson <twilson@digium.com>

	* /, main/abstract_jb.c: Merged revisions 297312 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r297312 | twilson | 2010-12-02 12:13:49 -0600
	  (Thu, 02 Dec 2010) | 28 lines Merged revisions 297311 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r297311 | twilson | 2010-12-02 12:07:39 -0600
	  (Thu, 02 Dec 2010) | 21 lines Merged revisions 297310 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r297310 | twilson | 2010-12-02 12:00:27 -0600 (Thu, 02 Dec 2010)
	  | 12 lines Initialize offset for adaptive jitter buffer When the
	  adaptive jitter buffer is enabled in sip.conf, the first frame
	  placed in the jitter buffer fails with something like:
	  jb_warning_output: Resyncing the jb. last_delay 0, this delay
	  -215886466, threshold 1000, new offset 215886466 This happens
	  because the offset is not initialized before calling jb_put().
	  This patch modifies jb_put_first_adaptive() to set the offset to
	  the frame's timestamp. Review:
	  https://reviewboard.asterisk.org/r/1041/ ........
	  ................ ................

2010-12-02 13:20 +0000 [r297248]  Russell Bryant <russell@digium.com>

	* /, apps/app_meetme.c: Merged revisions 297245 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r297245 | russell | 2010-12-02 07:20:19 -0600
	  (Thu, 02 Dec 2010) | 20 lines Merged revisions 297229 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r297229 | russell | 2010-12-02 07:16:47 -0600
	  (Thu, 02 Dec 2010) | 13 lines Merged revisions 297228 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r297228 | russell | 2010-12-02 07:16:15 -0600 (Thu, 02 Dec 2010)
	  | 6 lines Add "DAHDI" to a couple of app_meetme error messages.
	  This is in response to some questions on IRC. To the user, there
	  was nothing that made it obvious that this error had anything to
	  do with DAHDI not being loaded. ........ ................
	  ................

2010-12-01 17:53 +0000 [r297076]  Jeff Peeler <jpeeler@digium.com>

	* /, channels/chan_sip.c: Merged revisions 297075 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r297075 | jpeeler | 2010-12-01 11:53:13 -0600
	  (Wed, 01 Dec 2010) | 37 lines Merged revisions 297073 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r297073 | jpeeler | 2010-12-01 11:52:46 -0600
	  (Wed, 01 Dec 2010) | 30 lines Merged revisions 297072 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r297072 | jpeeler | 2010-12-01 11:50:09 -0600 (Wed, 01 Dec 2010)
	  | 23 lines Fix not stopping MOH when transfered local channel
	  queue member is answered. The problem here is only present when
	  local channels are used with the MOH passthru option as well as
	  no optimization (/nm). I will describe the slightly bizarre
	  scenario that was used to test, where phones B and C are queue
	  members: Phone A dials into a queue with two members using local
	  channels and the above options. Phone B answers. Phone A blind
	  transfers phone B into the same queue. Phone A hangs up. Phone C
	  answers, but phone B didn't stop playing MOH. In this scenario,
	  the unhold frame that should have gotten to phone B never arrived
	  due to the masquerade from the blind transfer. This is usually
	  fine since app_queue manages the starting and stopping of MOH.
	  However, with the passthrough option enabled when app_queue
	  attempts to stop MOH it tries to do so on the local channel
	  rather than the real channel. The easiest solution was to just
	  make sure to send an unhold frame during the transfer since it
	  wouldn't make sense to have MOH playing after a transfer anyway.
	  This only modifies SIP transfers, but the other transfers did not
	  seem to be a problem. If DTMF based transfers were a problem it
	  might be okay to add ast_moh_stop to finishup, but I didn't want
	  to have to add that unless required. ABE-2624 ........
	  ................ ................

2010-12-01 17:03 +0000 [r296952-296993]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, include/asterisk/frame.h: Merged revisions 296992 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r296992 | tilghman | 2010-12-01 11:01:56 -0600
	  (Wed, 01 Dec 2010) | 19 lines Merged revisions 296991 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r296991 | tilghman | 2010-12-01 11:01:00 -0600
	  (Wed, 01 Dec 2010) | 12 lines Merged revisions 296990 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r296990 | tilghman | 2010-12-01 10:59:26 -0600 (Wed, 01 Dec 2010)
	  | 5 lines Clarify documentation on how we store codec preference
	  lists. (closes issue #18397) Reported by: birgita ........
	  ................ ................

	* /, channels/chan_iax2.c: Merged revisions 296951 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r296951 | tilghman | 2010-11-30 19:46:32 -0600
	  (Tue, 30 Nov 2010) | 9 lines Merged revisions 296950 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r296950 | tilghman | 2010-11-30 19:38:19 -0600 (Tue, 30
	  Nov 2010) | 2 lines Missed initializations caused startup errors
	  on Mac OS X (and possibly others, too). ........ ................

2010-12-01 00:28 +0000 [r296871]  Jeff Peeler <jpeeler@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 296870 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r296870 | jpeeler | 2010-11-30 18:28:16 -0600
	  (Tue, 30 Nov 2010) | 18 lines Merged revisions 296869 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r296869 | jpeeler | 2010-11-30 18:24:58 -0600
	  (Tue, 30 Nov 2010) | 11 lines Merged revisions 296868 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r296868 | jpeeler | 2010-11-30 18:23:19 -0600 (Tue, 30 Nov 2010)
	  | 4 lines Properly restore backup information file when hanging
	  up during message prepending. ABE-2654 ........ ................
	  ................

2010-11-30 22:32 +0000 [r296788-296826]  Tilghman Lesher <tilghman@meg.abyt.es>

	* include/asterisk/frame.h: Add a comment on why the reserved bit
	  is reserved. Came up when reviewing discussion on the CODEC PREFS
	  IE in IAX2.

	* /, apps/app_meetme.c: Merged revisions 296787 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r296787 | tilghman | 2010-11-30 13:12:48 -0600 (Tue, 30 Nov 2010)
	  | 2 lines DOC: Conference number can be omitted; if omitted, all
	  users in a meetme are listed. ........

2010-11-30 09:49 +0000 [r296752]  Stefan Schmidt <sst@sil.at>

	* include/asterisk.h, main/pbx.c, main/asterisk.c: move devices
	  from hints into an ao2_container by splitting up devices from
	  hints into an own ao2_container the callback to get these devices
	  for statechange handling is faster. with this changes the length
	  of a device used in a hint isnt longer restricted to 80
	  characters. Tests showed that calling handle_statechange is 40
	  times faster if no hints are used and 25 times faster if there
	  are any hints. (closes issue #17928) Reported by: mdu113 Tested
	  by: schmidts Review: https://reviewboard.asterisk.org/r/1003/

2010-11-29 23:07 +0000 [r296674]  Paul Belanger <pabelanger@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 296673 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r296673 | pabelanger | 2010-11-29 18:05:45 -0500
	  (Mon, 29 Nov 2010) | 19 lines Merged revisions 296671 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r296671 | pabelanger | 2010-11-29 17:54:14 -0500
	  (Mon, 29 Nov 2010) | 12 lines Merged revisions 296670 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r296670 | pabelanger | 2010-11-29 17:49:39 -0500 (Mon, 29 Nov
	  2010) | 5 lines Make sure nothing else is needed before
	  destroying the scheduler. (closes issue #18398) Reported by:
	  pabelanger ........ ................ ................

2010-11-29 21:31 +0000 [r296630]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 296628 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r296628 | russell | 2010-11-29 15:26:44 -0600 (Mon, 29 Nov 2010)
	  | 6 lines Complete some error handling in transmit_publish() in
	  chan_sip.c. This error handling block caught my eye. It was
	  missing a couple of things, but it should be safe now. Thanks to
	  mmichelson for the quick peer review on IRC. ........

2010-11-29 20:54 +0000 [r296585]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_misdn.c, /, channels/misdn/isdn_msg_parser.c:
	  Merged revisions 296582 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r296582 | rmudgett | 2010-11-29 14:46:03 -0600
	  (Mon, 29 Nov 2010) | 24 lines Merged revision 296575 from
	  https://origsvn.digium.com/svn/asterisk/be/branches/C.3-bier
	  .......... r296575 | rmudgett | 2010-11-29 14:27:37 -0600 (Mon,
	  29 Nov 2010) | 13 lines Invalid mISDN PTMP redirecting signaling
	  as TE towards NT. The mISDN PTMP redirection signaling (NOTIFY
	  redirecting number and notification code, SETUP redirecting
	  number) is also sent in PTMP/TE mode. It should only apply in
	  PTMP/NT mode. The call setup proceeds but the network (Deutsche
	  Telekom) reacts with ugly ISDN STATUS messages. Also don't send
	  the redirecting number ie when PTP is also sending the
	  DivertingLegInformation2 facility. The redirecting number ie is
	  redundant and the network (Deutsche Telekom) complains about it.
	  Patches: abe_2651_v4.patch uploaded by rmudgett (license 664)
	  JIRA ABE-2651 JIRA SWP-2537 .......... ................

2010-11-29 07:30 +0000 [r296535]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac,
	  main/asterisk.c: Merged revisions 296534 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r296534 | tilghman | 2010-11-29 01:28:44 -0600
	  (Mon, 29 Nov 2010) | 20 lines Merged revisions 296533 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r296533 | tilghman | 2010-11-29 01:27:09 -0600 (Mon, 29 Nov 2010)
	  | 13 lines I love standards. There are so many to choose from.
	  Except when there isn't one. Linux and *BSD disagree on the
	  elements within the ucred structure. Detect which one is in use
	  on the system. (closes issue #18384) Reported by: bjm Patches:
	  cred-diffs uploaded by bjm (license 473)
	  20101127__issue18384__1.6.2.diff.txt uploaded by tilghman
	  (license 14) 20101127__issue18384__1.8.diff.txt uploaded by
	  tilghman (license 14) Tested by: tilghman, bjm ........
	  ................

2010-11-27 10:41 +0000 [r296430-296468]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, apps/app_meetme.c: Merged revisions 296467 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r296467 | tilghman | 2010-11-27 04:40:22 -0600
	  (Sat, 27 Nov 2010) | 12 lines Merged revisions 296466 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r296466 | tilghman | 2010-11-27 04:39:01 -0600 (Sat, 27 Nov 2010)
	  | 5 lines 18 characters is too short for most date/times (20 is
	  the usual, but we add more in case of greater precision). (closes
	  issue #18369) Reported by: tnakonz ........ ................

	* include/asterisk.h, /: Merged revisions 296429 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r296429 | tilghman | 2010-11-27 03:58:57 -0600 (Sat, 27 Nov 2010)
	  | 5 lines Also don't build DEBUG_FD_LEAKS when STANDALONE2 is
	  defined. (closes issue #18385) Reported by: cmaj ........

2010-11-26 22:02 +0000 [r296393]  Olle Johansson <oej@edvina.net>

	* /, main/say.c: Merged revisions 296391 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r296391 | oej | 2010-11-26 22:37:21 +0100 (Fre,
	  26 Nov 2010) | 24 lines Merged revisions 296351 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r296351 | oej | 2010-11-26 13:23:03 +0100 (Fre,
	  26 Nov 2010) | 17 lines Merged revisions 296309 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r296309 | oej | 2010-11-26 10:53:31 +0100 (Fre, 26 Nov 2010) | 11
	  lines Fix bugs in saying numbers using the Swedish language
	  syntax (closes issue #18355) Reported by: oej Patch by: oej Much
	  help from Peter Lindahl. Testing by the ClearIT team during a
	  coffee break. Review: https://reviewboard.asterisk.org/r/1033/
	  ........ ................ ................

2010-11-26 18:31 +0000 [r296353-296355]  Brad Watkins <Marquis42@gmail.com>

	* /, res/res_jabber.c: Merged revisions 296354 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r296354 | marquis | 2010-11-26 13:31:17 -0500 (Fri, 26 Nov 2010)
	  | 12 lines Fix XMPP PubSub-based distributed device state.
	  Initialize pubsubflags to 0 so res_jabber doesn't think there is
	  already an XMPP connection sending device state. Also clean up
	  CLI commands a bit. (closes issue #18272) Reported by: klaus3000
	  Patches: res_jabber_fix_pubsubflags_and_CLI-patch.txt uploaded by
	  klaus3000 (license 65) Tested by: klaus3000, Marquis Review:
	  https://reviewboard.asterisk.org/r/1030/ ........

	* /, channels/chan_sip.c: Merged revisions 296352 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r296352 | marquis | 2010-11-26 13:19:02 -0500 (Fri, 26 Nov 2010)
	  | 12 lines Fix reloading of peer when a user is requested.
	  Prevent peer reloading from causing multiple MWI subscriptions to
	  be created when using realtime. This had the effect of sending
	  one NOTIFY for every time a sip peer made a call, in one case
	  eventually overwhelming the phone and causing it to reboot.
	  (closes issue #18342) Reported by: nivek Patches:
	  issue0018342p1.patch uploaded by nivek (license 636) Tested by:
	  nivek Review: https://reviewboard.asterisk.org/r/1029/ ........

2010-11-24 23:46 +0000 [r296249]  Andrew Parisio <parisioa@gmail.com>

	* apps/app_meetme.c, CHANGES: Meetme use voicemail greet for
	  join/leave announce Added option v(mailbox@[context]) which tells
	  MeetMe where to look for a users greet file. If one does not
	  exist it clears the v option and defers to the functionality of
	  i/I as/if set by the MeetMe() command. Review:
	  https://reviewboard.asterisk.org/r/1009/ (closes issue #18297)
	  Reported by: parisioa Patches: meetme_final_patch_v.diff uploaded
	  by parisioa (license 1153)

2010-11-24 23:30 +0000 [r296235]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 296230 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r296230 | russell | 2010-11-24 17:29:44 -0600
	  (Wed, 24 Nov 2010) | 20 lines Merged revisions 296221 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r296221 | russell | 2010-11-24 17:28:19 -0600
	  (Wed, 24 Nov 2010) | 13 lines Merged revisions 296213 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r296213 | russell | 2010-11-24 17:26:43 -0600 (Wed, 24 Nov 2010)
	  | 6 lines Make Asterisk less crashy. Since we might not put a new
	  translation path on the channel, go ahead and set it to NULL
	  right after destroying the old one to ensure we don't try to free
	  an invalid translation path later on. ........ ................
	  ................

2010-11-24 22:52 +0000 [r296168]  Richard Mudgett <rmudgett@digium.com>

	* channels/sig_pri.h, channels/chan_dahdi.c, channels/sig_analog.c,
	  /, channels/sig_analog.h: Merged revisions 296167 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r296167 | rmudgett | 2010-11-24 16:49:48 -0600
	  (Wed, 24 Nov 2010) | 57 lines Merged revisions 296166 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r296166 | rmudgett | 2010-11-24 16:42:45 -0600
	  (Wed, 24 Nov 2010) | 50 lines Merged revisions 296165 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r296165 | rmudgett | 2010-11-24 16:41:07 -0600 (Wed, 24 Nov 2010)
	  | 43 lines Oneway audio to SIP phone from FXS port after FXS port
	  gets a CallWaiting pip. The FXS connected phone has to have
	  CW/CID support to fail, as it will send back a DTMF 'A' or 'D'
	  when it's ready to receive CallerID. A normal phone with no CID
	  never fails. Also the SIP phone does not hear MOH when the CW
	  call is answered. The DTMF end frame is suppressed when the phone
	  acknowledges the CW signal for CID. The problem is the DTMF begin
	  frame needs to be suppressed as well. The DTMF begin frame is
	  causing SIP to start sending the DTMF RTP frames. Since the DTMF
	  end frame is suppressed, SIP will not stop sending those DTMF RTP
	  packets. * Suppress the DTMF begin and end frames when the
	  channel driver is looking for DTMF digits. * Fixed a couple
	  issues caused by not cleaning up the CID spill if you answer the
	  CW call while it is sending the CID spill. * Fixed not sending
	  CW/CID spill to the phone when the call is natively bridged.
	  (Fixed by not using native bridge if CW/CID is possible.) *
	  Suppress received audio when sending CW/CID spills. The other
	  parties involved do not need to hear the CW/CID spills and may be
	  confused if the CW call is for them. (closes issue #18129)
	  Reported by: alecdavis Patches: issue_18129_v1.8_v3.patch
	  uploaded by rmudgett (license 664) Tested by: alecdavis, rmudgett
	  NOTE: * v1.4 does not have the main problem fixed by suppressing
	  the DTMF start frames. The other three items fixed are relevant.
	  * If you really must restore native bridging between analog
	  ports, you need to disable CW/CID either by configuring
	  chan_dahdi.conf callwaitingcallerid=no or dialing *70 before
	  dialing the number to temporarily disable CW. ........
	  ................ ................

2010-11-24 20:24 +0000 [r296034-296085]  Russell Bryant <russell@digium.com>

	* main/channel.c, /: Merged revisions 296084 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r296084 | russell | 2010-11-24 14:23:46 -0600
	  (Wed, 24 Nov 2010) | 26 lines Merged revisions 296083 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r296083 | russell | 2010-11-24 14:23:11 -0600
	  (Wed, 24 Nov 2010) | 19 lines Merged revisions 296082 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r296082 | russell | 2010-11-24 14:22:32 -0600 (Wed, 24 Nov 2010)
	  | 12 lines Fix false reporting of an error by set_format(). In
	  the case that the native format was able to be changed to match
	  the new requested format, the code proceeded to attempt to build
	  a translation path, anyway. The result would be NULL, since no
	  translation path is necessary and resulted in this function
	  thinking an error has occurred. This case is now specifically
	  caught and no attempt to build a translation path is attempted.
	  Thanks to our automated tests and bamboo.asterisk.org for
	  catching this problem and making a whole lot of noise when things
	  started failing. :-) ........ ................ ................

	* apps/app_dial.c, main/channel.c, /: Merged revisions 296002 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r296002 | russell | 2010-11-24 11:13:08 -0600
	  (Wed, 24 Nov 2010) | 52 lines Merged revisions 296001 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r296001 | russell | 2010-11-24 11:03:16 -0600
	  (Wed, 24 Nov 2010) | 45 lines Merged revisions 296000 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r296000 | russell | 2010-11-24 10:48:39 -0600 (Wed, 24 Nov 2010)
	  | 38 lines Handle failures building translation paths more
	  effectively. The problem scenario occurred on a heavily loaded
	  system that was using the codec_dahdi module and exceeded the
	  hardware transcoding capacity. The failure mode at that point was
	  not good. The report came in to us as an Asterisk lock-up. The
	  "core show locks" shows a ton of threads locked up (but no
	  obvious deadlock). Upon deeper investigation, when the system is
	  in this state, the CPU was maxed out. The CPU was being consumed
	  by the Asterisk logger spewing messages on every audio frame for
	  calls set up after transcoder capacity was reached. The purpose
	  of this patch is to make Asterisk handle failures to create a
	  translation path in a more graceful manner. If we can't
	  translate, then the call just needs to be dropped, as it's not
	  going to work. These are the changes: 1) In set_format() of
	  channel.c (which is called by set_read_format() and
	  set_write_format()), it was ignoring if
	  ast_translator_build_path() failed and returned NULL. It now pays
	  attention to that case and returns a result reflecting failure.
	  With this change in place, the bridging code will immediately
	  detect a failure and end the bridge instead of proceeding to try
	  to bridge frames that can't be translated and making channel
	  drivers freak out by sending them frames in a format they weren't
	  expecting. 2) In ast_indicate_data() of channel.c, failure of
	  ast_playtones_start() was ignored. It is now reflected in the
	  return value of the function. This didn't turn out to have any
	  affect on the bug, but seemed like a good change to leave in. 3)
	  In app_dial(), when only sending a call to a single endpoint, it
	  will attempt to do some bridging of its own of early audio. It
	  uses make_compatible() when it's going to do this. However, it
	  ignored failure from make compatible. So, even with the fix from
	  #1, if there was early audio going through app_dial, there would
	  still be a period of invalid frames passing through. After
	  detecting failure here, Dial() exits. ABE-2658 ........
	  ................ ................

2010-11-23 10:34 +0000 [r295950]  Olle Johansson <oej@edvina.net>

	* /, main/say.c: Merged revisions 295949 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r295949 | oej | 2010-11-23 11:30:05 +0100 (Tis,
	  23 Nov 2010) | 21 lines Merged revisions 295907 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r295907 | oej | 2010-11-23 10:36:38 +0100 (Tis,
	  23 Nov 2010) | 14 lines Merged revisions 295906 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r295906 | oej | 2010-11-23 10:28:14 +0100 (Tis, 23 Nov 2010) | 8
	  lines Fix support of saynumber(1,n) in the Swedish language
	  (closes issue #18353) Reported by: oej Review:
	  https://reviewboard.asterisk.org/r/1031/ ........
	  ................ ................

2010-11-22 20:05 +0000 [r295870]  Sean Bright <sean@malleable.com>

	* configs/chan_dahdi.conf.sample, /: Merged revisions 295869 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r295869 | seanbright | 2010-11-22 15:03:49 -0500
	  (Mon, 22 Nov 2010) | 9 lines Merged revisions 295868 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r295868 | seanbright | 2010-11-22 15:02:37 -0500 (Mon,
	  22 Nov 2010) | 2 lines Change some documentation to suggest
	  dahdi_monitor instead of ztmonitor. ........ ................

2010-11-22 19:42 +0000 [r295867]  Richard Mudgett <rmudgett@digium.com>

	* main/channel.c, main/pbx.c, /, apps/app_macro.c,
	  include/asterisk/channel.h, include/asterisk/frame.h: Merged
	  revisions 295866 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r295866 | rmudgett | 2010-11-22 13:36:10 -0600
	  (Mon, 22 Nov 2010) | 60 lines Merged revisions 295843 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r295843 | rmudgett | 2010-11-22 13:28:23 -0600
	  (Mon, 22 Nov 2010) | 53 lines Merged revisions 295790 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r295790 | rmudgett | 2010-11-22 12:46:26 -0600 (Mon, 22 Nov 2010)
	  | 46 lines The channel redirect function (CLI or AMI) hangs up
	  the call instead of redirecting the call. To recreate the
	  problem: 1) Party A calls Party B 2) Invoke CLI "channel
	  redirect" command to redirect channel call leg associated with A.
	  3) All associated channels are hung up. Note that if the CLI
	  command were done on the channel call leg associated with B it
	  works. This regression was a result of the fix for issue #16946
	  (https://reviewboard.asterisk.org/r/740/). The regression affects
	  all features that use an async goto to execute the dialplan
	  because of an external event: Channel redirect, AMI redirect, SIP
	  REFER, and FAX detection. The struct ast_channel._softhangup code
	  is a mess. The variable is used for several purposes that do not
	  necessarily result in the call being hung up. I have added
	  doxygen comments to describe how the various _softhangup bits are
	  used. I have corrected all the places where the variable was
	  tested in a non-bit oriented manner. The primary fix is the new
	  AST_CONTROL_END_OF_Q frame. It acts as a weak hangup request so
	  the soft hangup requests that do not normally result in a hangup
	  do not hangup. JIRA SWP-2470 JIRA SWP-2489 (closes issue #18171)
	  Reported by: SantaFox (closes issue #18185) Reported by:
	  kwemheuer (closes issue #18211) Reported by: zahir_koradia
	  (closes issue #18230) Reported by: vmarrone (closes issue #18299)
	  Reported by: mbrevda (closes issue #18322) Reported by: nerbos
	  Review: https://reviewboard.asterisk.org/r/1013/ ........
	  ................ ................

2010-11-22 18:43 +0000 [r295789]  Erin Spiceland <erin@thespicelands.com>

	* res/res_agi.c: Revert to the previous behavior of AGI command
	  WAIT FOR DIGIT, since the behavior of the command with this patch
	  is almost exactly like that of GET DATA.

2010-11-20 03:13 +0000 [r295748]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, channels/sig_analog.c, /,
	  channels/sig_analog.h: Merged revisions 295747 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r295747 | rmudgett | 2010-11-19 21:11:15 -0600 (Fri, 19 Nov 2010)
	  | 13 lines One way audio before answering call waiting call on
	  analog port. * Analog call waiting Caller ID spills could get
	  stuck resulting in one way audio until the waiting call is
	  answered. This only happens on the second (and later) call
	  waiting call if the active call is not the first call. * The
	  CLI/AMI "dahdi show channel" command could report the wrong
	  channel information. Must keep the struct analog_pvt.owner and
	  struct dahdi_pvt.owner pointer in sync. ........

2010-11-20 00:52 +0000 [r295712]  Russell Bryant <russell@digium.com>

	* include/asterisk/event.h, /, main/event.c: Merged revisions
	  295711 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r295711 | russell | 2010-11-19 18:50:00 -0600
	  (Fri, 19 Nov 2010) | 36 lines Merged revisions 295710 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r295710 | russell | 2010-11-19 18:45:51 -0600 (Fri, 19 Nov 2010)
	  | 29 lines Fix cache of device state changes for multiple
	  servers. This patch addresses a regression where device states
	  across multiple servers were not being processing completely
	  correctly. The code works to determine the overall state by
	  looking at the last known state of a device on each server.
	  However, there was a regression due to some invasive rewrites of
	  how the cache works that led to the cache only storing the last
	  device state change for a device, regardless of which server it
	  was on. The code is set up to cache device state change events by
	  ensuring that each event in the cache has a unique device name +
	  entity ID (server ID). The code that was responsible for
	  comparing raw information elements (which EID is) always returned
	  a match due to a memcmp() with a length of 0. There isn't much
	  code to fix the actual bug. This patch also introduces a new CLI
	  command that was very useful for debugging this problem. The
	  command allows you to dump the contents of the event cache.
	  (closes issue #18284) Reported by: klaus3000 Patches:
	  issue18284.rev1.txt uploaded by russell (license 2) Tested by:
	  russell, klaus3000 (closes issue #18280) Reported by: klaus3000
	  Review: https://reviewboard.asterisk.org/r/1012/ ........
	  ................

2010-11-19 22:15 +0000 [r295674]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 295673 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r295673 | twilson | 2010-11-19 14:06:10 -0800
	  (Fri, 19 Nov 2010) | 22 lines Merged revisions 295672 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r295672 | twilson | 2010-11-19 13:55:48 -0800
	  (Fri, 19 Nov 2010) | 15 lines Merged revisions 295628 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r295628 | twilson | 2010-11-19 12:53:36 -0800 (Fri, 19 Nov 2010)
	  | 8 lines Discard responses with more than one Via This is not a
	  perfect solution as headers that are joined via commas are not
	  detected. This is a parsing issue that to fix "correctly" would
	  necessitate a new SIP parser. Review:
	  https://reviewboard.asterisk.org/r/1019/ ........
	  ................ ................

2010-11-19 21:42 +0000 [r295671]  Brett Bryant <bbryant@digium.com>

	* /, apps/app_queue.c: Merged revisions 295670 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r295670 | bbryant | 2010-11-19 16:40:21 -0500 (Fri, 19 Nov 2010)
	  | 8 lines Patch for deadlock from ordering issue between
	  channel/queue locks in app_queue (set_queue_variables). (closes
	  issue #18031) Reported by: rain Review:
	  https://reviewboard.asterisk.org/r/1018/ ........

2010-11-19 19:32 +0000 [r295554]  Erin Spiceland <erin@thespicelands.com>

	* res/res_agi.c: Add extra functionality to AGI command WAIT FOR
	  DIGIT. Add the ability to play a sound file, listen for more than
	  just one digit, specify escape characters. Backwards compatible
	  (to work with only timeout specified). (closes issue #15531)
	  Reported by: diLLec Patches:
	  asterisk-res_agi-203638-patched.patch uploaded by diLLec (license
	  839) Tested by: diLLec, espiceland

2010-11-19 16:49 +0000 [r295517]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, channels/sig_analog.c, /,
	  channels/sig_analog.h: Merged revisions 295516 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r295516 | rmudgett | 2010-11-19 10:47:11 -0600 (Fri, 19 Nov 2010)
	  | 13 lines Bring sig_analog extraction more into alignment with
	  orig-trunk/v1.6.2 chan_dahdi. * Restore SMDI support. * Fixed
	  initial value of struct analog_pvt.use_callerid. It may get
	  forced on depending upon other config options. * Call
	  analog_dnd() instead of manual inlined code. * Removed unused
	  struct analog_pvt.usedistinctiveringdetection. * Removed the
	  struct analog_pvt.unknown_alarm flag. It was really the struct
	  analog_pvt.inalarm flag. * Use ast_debug() instead of
	  ast_log(LOG_DEBUG). * Rename several function's index variable to
	  idx. * Some formatting tweaks. ........

2010-11-18 20:31 +0000 [r295478]  Leif Madsen <lmadsen@digium.com>

	* configs/sip_notify.conf.sample, /: Merged revisions 295477 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r295477 | lmadsen | 2010-11-18 14:30:35 -0600 (Thu, 18 Nov 2010)
	  | 6 lines 'sip notify clear-mwi' needs terminating CRLF. (closes
	  issue #18275) Reported by: klaus3000 Patches:
	  fix_body_CRLF_patch.txt uploaded by klaus3000 (license 65)
	  ........

2010-11-18 18:08 +0000 [r295364-295442]  Paul Belanger <pabelanger@digium.com>

	* /, include/asterisk/jabber.h, res/res_jabber.c: Merged revisions
	  295441 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r295441 | pabelanger | 2010-11-18 13:02:12 -0500
	  (Thu, 18 Nov 2010) | 11 lines Merged revisions 295440 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r295440 | pabelanger | 2010-11-18 12:51:34 -0500 (Thu, 18 Nov
	  2010) | 4 lines Fix compiler warnings when using openssl-dev
	  1.0.0+ Review: https://reviewboard.asterisk.org/r/1016/ ........
	  ................

	* /, contrib/scripts/install_prereq: Merged revisions 295404 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r295404 | pabelanger | 2010-11-18 00:12:05 -0500 (Thu, 18 Nov
	  2010) | 2 lines Add RedHat specific dependencies ........

	* /, configs/res_curl.conf.sample: Merged revisions 295361 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r295361 | pabelanger | 2010-11-17 09:09:38 -0500 (Wed, 17 Nov
	  2010) | 2 lines Uncomment settings under [global], to surpress
	  warning when loading Asterisk. ........

2010-11-16 23:04 +0000 [r295283]  Richard Mudgett <rmudgett@digium.com>

	* main/channel.c, /: Merged revisions 295282 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r295282 | rmudgett | 2010-11-16 17:02:36 -0600
	  (Tue, 16 Nov 2010) | 16 lines Merged revisions 295281 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r295281 | rmudgett | 2010-11-16 16:57:07 -0600
	  (Tue, 16 Nov 2010) | 9 lines Merged revisions 295280 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r295280 | rmudgett | 2010-11-16 16:52:06 -0600 (Tue, 16
	  Nov 2010) | 1 line Dead code elimination in
	  channel.c:ast_channel_bridge() variable who. ........
	  ................ ................

2010-11-16 22:41 +0000 [r295125-295279]  Russell Bryant <russell@digium.com>

	* /, build_tools/prep_tarball: Merged revisions 295278 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r295278 | russell | 2010-11-16 16:41:11 -0600 (Tue, 16
	  Nov 2010) | 2 lines Check for pdftotext and give a useful error
	  if not found. ........

	* /, build_tools/prep_tarball: Merged revisions 295201 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r295201 | russell | 2010-11-16 15:46:18 -0600 (Tue, 16
	  Nov 2010) | 2 lines Remove intentional typo I had added when
	  testing the check. oops. ........

	* /, build_tools/prep_tarball: Merged revisions 295164 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r295164 | russell | 2010-11-16 14:50:03 -0600 (Tue, 16
	  Nov 2010) | 2 lines Check for wikiexport.py in PATH and give a
	  useful error message if not found. ........

	* main/app.c: Remove a trailing space. (testing something with
	  bamboo ...)

2010-11-15 19:11 +0000 [r294990-295079]  Tilghman Lesher <tilghman@meg.abyt.es>

	* tests/test_expr.c (added), /: Merged revisions 295078 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r295078 | tilghman | 2010-11-15 12:30:13 -0600
	  (Mon, 15 Nov 2010) | 16 lines Merged revisions 295062 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r295062 | tilghman | 2010-11-15 12:24:02 -0600
	  (Mon, 15 Nov 2010) | 9 lines Merged revisions 295026 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r295026 | tilghman | 2010-11-15 11:58:37 -0600 (Mon, 15
	  Nov 2010) | 2 lines Create test verifying results of expression
	  parser ........ ................ ................

	* funcs/func_curl.c, /: Merged revisions 294989 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r294989 | tilghman | 2010-11-15 01:44:38 -0600
	  (Mon, 15 Nov 2010) | 15 lines Merged revisions 294988 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r294988 | tilghman | 2010-11-15 01:42:39 -0600 (Mon, 15 Nov 2010)
	  | 8 lines It is possible to crash Asterisk by feeding the curl
	  engine invalid data. (closes issue #18161) Reported by: wdoekes
	  Patches: 20101029__issue18161.diff.txt uploaded by tilghman
	  (license 14) Tested by: tilghman ........ ................

2010-11-12 21:15 +0000 [r294907-294912]  Jeff Peeler <jpeeler@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 294911 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r294911 | jpeeler | 2010-11-12 15:14:43 -0600
	  (Fri, 12 Nov 2010) | 11 lines Merged revisions 294910 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r294910 | jpeeler | 2010-11-12 15:14:23 -0600 (Fri, 12 Nov 2010)
	  | 4 lines Return correct error code if lock path fails. The
	  recent changes to open_mailbox actually caused it to be fixed,
	  but let's be consistent. Reported by alecdavis in asterisk-dev.
	  ........ ................

	* /, apps/app_voicemail.c: Merged revisions 294905 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r294905 | jpeeler | 2010-11-12 14:52:06 -0600
	  (Fri, 12 Nov 2010) | 30 lines Merged revisions 294904 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r294904 | jpeeler | 2010-11-12 14:51:15 -0600
	  (Fri, 12 Nov 2010) | 23 lines Merged revisions 294903 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r294903 | jpeeler | 2010-11-12 14:49:09 -0600 (Fri, 12 Nov 2010)
	  | 16 lines Fix regression causing abort in voicemail after
	  opening a mailbox with no mesgs. In order to be more safe, some
	  error handling code was changed to respect more error conditions
	  including the potential memory allocation failure for deleted and
	  heard message tracking introduced in 293004. However,
	  last_message_index returns -1 for zero messages (perhaps as
	  expected) and was triggering the stricter error checking. Because
	  last_message_index is only called directly in one place, just
	  return 0 from open_mailbox (for file based storage) when no
	  messages are detected unless a real error has occurred. (closes
	  issue #18240) Reported by: leobrown Patches:
	  bug18240.1-6-2.diff.txt uploaded by alecdavis (license 585)
	  Tested by: pabelanger ........ ................ ................

2010-11-12 02:46 +0000 [r294824]  Richard Mudgett <rmudgett@digium.com>

	* channels/sig_pri.h, /, channels/sig_pri.c: Merged revisions
	  294823 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r294823 | rmudgett | 2010-11-11 20:45:22 -0600
	  (Thu, 11 Nov 2010) | 25 lines Merged revisions 294822 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r294822 | rmudgett | 2010-11-11 20:44:12 -0600
	  (Thu, 11 Nov 2010) | 18 lines Merged revisions 294821 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r294821 | rmudgett | 2010-11-11 20:41:13 -0600 (Thu, 11 Nov 2010)
	  | 11 lines Asterisk is getting a "No D-channels available!"
	  warning message every 4 seconds. Asterisk is just whining too
	  much with this message: "No D-channels available! Using Primary
	  channel XXX as D-channel anyway!". Filtered the message so it
	  only comes out once if there is no D channel available without an
	  intervening D channel available period. (closes issue #17270)
	  Reported by: jmls ........ ................ ................

2010-11-11 22:18 +0000 [r294741-294749]  Russell Bryant <russell@digium.com>

	* /, doc/CCSS_architecture.pdf (removed): Merged revisions 294745
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r294745 | russell | 2010-11-11 16:17:57 -0600 (Thu, 11 Nov 2010)
	  | 6 lines Remove CCSS architecture PDF. It has been moved to:
	  https://wiki.asterisk.org/wiki/display/AST/CCSS+Architecture
	  ........

	* doc/CODING-GUIDELINES (removed), doc/ss7.txt (removed), /,
	  doc/backtrace.txt (removed), doc/India-CID.txt (removed),
	  doc/digium-mib.txt (removed), doc/followme.txt (removed),
	  doc/building_queues.txt (removed), doc/timing.txt (removed),
	  doc/advice_of_charge.txt (removed), doc/unistim.txt (removed),
	  doc/video_console.txt (removed), doc/macroexclusive.txt
	  (removed), doc/google-soc2009-ideas.txt (removed), doc/README.txt
	  (added), doc/callfiles.txt (removed), build_tools/prep_tarball,
	  doc/codec-64bit.txt (removed), doc/externalivr.txt (removed),
	  doc/video.txt (removed), doc/jingle.txt (removed),
	  doc/modules.txt (removed), doc/manager_1_1.txt (removed),
	  doc/PEERING (removed), doc/snmp.txt (removed), doc/siptls.txt
	  (removed), doc/HOWTO_collect_debug_information.txt (removed),
	  doc/ldap.txt (removed), doc/sip-retransmit.txt (removed),
	  doc/distributed_devstate.txt (removed),
	  doc/voicemail_odbc_postgresql.txt (removed), doc/tex (removed),
	  doc/queue.txt (removed), doc/jabber.txt (removed),
	  doc/chan_sip-perf-testing.txt (removed), doc/asterisk-mib.txt
	  (removed), Makefile, doc/database_transactions.txt (removed),
	  doc/smdi.txt (removed), doc/janitor-projects.txt (removed),
	  doc/hoard.txt (removed), doc/res_config_sqlite.txt (removed),
	  doc/osp.txt (removed), doc/speechrec.txt (removed), doc/sms.txt
	  (removed), doc/distributed_devstate-XMPP.txt (removed),
	  doc/valgrind.txt (removed), doc/realtimetext.txt (removed),
	  doc/cli.txt (removed), doc/rtp-packetization.txt (removed),
	  doc/datastores.txt (removed): Merged revisions 294740 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r294740 | russell | 2010-11-11 16:13:38 -0600 (Thu, 11 Nov 2010)
	  | 11 lines Remove most of the contents of the doc dir in favor of
	  the wiki content. This merge does the following things: * Removes
	  most of the contents from the doc/ directory in favor of the wiki
	  - http://wiki.asterisk.org/ * Updates the
	  build_tools/prep_tarball script to know how to export the
	  contents of the wiki in both PDF and plain text formats so that
	  the documentation is still included in Asterisk release tarballs.
	  ........

2010-11-11 22:01 +0000 [r294735]  Jeff Peeler <jpeeler@digium.com>

	* /, channels/chan_sip.c: Merged revisions 294734 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r294734 | jpeeler | 2010-11-11 15:58:25 -0600
	  (Thu, 11 Nov 2010) | 32 lines Merged revisions 294733 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r294733 | jpeeler | 2010-11-11 15:57:22 -0600
	  (Thu, 11 Nov 2010) | 25 lines Merged revisions 294688 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r294688 | jpeeler | 2010-11-11 15:12:27 -0600 (Thu, 11 Nov 2010)
	  | 18 lines Fix problem with qualify option packets for realtime
	  peers never stopping. The option packets not only never stopped,
	  but if a realtime peer was not in the peer list multiple options
	  dialogs could accumulate over time. This scenario has the
	  potential to progress to the point of saturating a link just from
	  options packets. The fix was to ensure that the poke scheduler
	  checks to see if a peer is in the peer list before continuing to
	  poke. The reason a peer must be in the peer list to be able to
	  properly manage an options dialog is because otherwise the call
	  pointer is lost when the peer is regenerated from the database,
	  which is how existing qualify dialogs are detected. (closes issue
	  #16382) (closes issue #17779) Reported by: lftsy Patches:
	  bug16382-3.patch uploaded by jpeeler (license 325) Tested by:
	  zerohalo ........ ................ ................

2010-11-10 23:27 +0000 [r294570-294606]  Tilghman Lesher <tilghman@meg.abyt.es>

	* pbx/pbx_spool.c, /: Merged revisions 294605 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r294605 | tilghman | 2010-11-10 17:26:39 -0600 (Wed, 10 Nov 2010)
	  | 2 lines Fixing the Mac OS X build (bamboo warning) ........

	* pbx/pbx_spool.c, /: Merged revisions 294569 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r294569 | tilghman | 2010-11-10 17:13:37 -0600 (Wed, 10 Nov 2010)
	  | 8 lines Properly queue files with inotify(7). (closes issue
	  #18089) Reported by: abelbeck Patches:
	  20101021__issue18089.diff.txt uploaded by tilghman (license 14)
	  Tested by: tilghman ........

2010-11-10 14:15 +0000 [r294502-294536]  Russell Bryant <russell@digium.com>

	* /, res/ais/clm.c, res/ais/evt.c, UPGRADE-1.8.txt: Merged
	  revisions 294535 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r294535 | russell | 2010-11-10 08:14:51 -0600 (Wed, 10 Nov 2010)
	  | 5 lines Tweak a couple of CLI commands back to their original
	  form. The "module" in this case is two parts, so there are two
	  words before the verb of the CLI command. ........

	* /, main/devicestate.c: Merged revisions 294501 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r294501 | russell | 2010-11-10 06:46:27 -0600
	  (Wed, 10 Nov 2010) | 14 lines Merged revisions 294500 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r294500 | russell | 2010-11-10 06:41:41 -0600 (Wed, 10 Nov 2010)
	  | 7 lines Improve a debug message to be more readable and
	  consistent. (closes issue #18282) Reported by: klaus3000 Patches:
	  ast_devstate2str-patch.txt uploaded by klaus3000 (license 65)
	  ........ ................

2010-11-09 22:52 +0000 [r294467]  Richard Mudgett <rmudgett@digium.com>

	* main/channel.c, /: Merged revisions 294466 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r294466 | rmudgett | 2010-11-09 16:46:45 -0600 (Tue, 09 Nov 2010)
	  | 1 line Allow ast_do_masquerade() failure to be reported again.
	  ........

2010-11-09 20:35 +0000 [r294431]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac:
	  Merged revisions 294430 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r294430 | tilghman | 2010-11-09 14:33:05 -0600
	  (Tue, 09 Nov 2010) | 15 lines Merged revisions 294429 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r294429 | tilghman | 2010-11-09 14:27:23 -0600 (Tue, 09 Nov 2010)
	  | 8 lines Detect GMime properly on systems where gmime flags and
	  libs are configured with pkg-config. (closes issue #16155)
	  Reported by: jcollie Patches: 20100917__issue16155.diff.txt
	  uploaded by tilghman (license 14) Tested by: tilghman ........
	  ................

2010-11-09 17:00 +0000 [r294351]  Richard Mudgett <rmudgett@digium.com>

	* main/channel.c, channels/chan_misdn.c, channels/sig_analog.c, /,
	  include/asterisk/channel.h, channels/sig_pri.c: Merged revisions
	  294349 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r294349 | rmudgett | 2010-11-09 10:55:32 -0600 (Tue, 09 Nov 2010)
	  | 17 lines Analog lines do not transfer CONNECTED LINE or execute
	  the interception macros. Add connected line update for sig_analog
	  transfers and simplify the corresponding sig_pri and chan_misdn
	  transfer code. Note that if you create a three-way call in
	  sig_analog before transferring the call, the distinction of the
	  caller/callee interception macros make little sense. The
	  interception macro writer needs to be prepared for either
	  caller/callee macro to be executed. The current implementation
	  swaps which caller/callee interception macro is executed after a
	  three-way call is created. Review:
	  https://reviewboard.asterisk.org/r/996/ JIRA ABE-2589 JIRA
	  SWP-2372 ........

2010-11-08 22:33 +0000 [r294279-294314]  Jeff Peeler <jpeeler@digium.com>

	* /, res/res_timing_timerfd.c: Merged revisions 294313 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r294313 | jpeeler | 2010-11-08 16:32:13 -0600
	  (Mon, 08 Nov 2010) | 9 lines Merged revisions 294312 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r294312 | jpeeler | 2010-11-08 16:30:49 -0600 (Mon, 08
	  Nov 2010) | 1 line add missing unlock not present in 294277
	  ........ ................

	* main/channel.c, /, res/res_timing_timerfd.c,
	  include/asterisk/timing.h, main/timing.c: Merged revisions 294278
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r294278 | jpeeler | 2010-11-08 15:59:45 -0600
	  (Mon, 08 Nov 2010) | 23 lines Merged revisions 294277 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r294277 | jpeeler | 2010-11-08 15:58:13 -0600 (Mon, 08 Nov 2010)
	  | 16 lines Fix playback failure when using IAX with the timerfd
	  module. To fix this issue the alert pipe will now be used when
	  the timerfd module is in use. There appeared to be a race that
	  was not solved by adding locking in the timerfd module, but
	  needed to be there anyway. The race was between the timer being
	  put in non-continuous mode in ast_read on the channel thread and
	  the IAX frame scheduler queuing a frame which would enable
	  continuous mode before the non-continuous mode event was read.
	  This race for now is simply avoided. (closes issue #18110)
	  Reported by: tpanton Tested by: tpanton I put tested by tpanton
	  because it was tested on his hardware. Thanks for the remote
	  access to debug this issue! ........ ................

2010-11-08 21:04 +0000 [r294244]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 294243 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r294243 | mnicholson | 2010-11-08 14:56:30 -0600
	  (Mon, 08 Nov 2010) | 15 lines Merged revisions 294242 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r294242 | mnicholson | 2010-11-08 14:50:21 -0600 (Mon, 08 Nov
	  2010) | 8 lines Go off hold when we get an empty reinvite telling
	  us to. (closes issue 0014448) Reported by: frawd (closes issue
	  #17878) Reported by: frawd ........ ................

2010-11-08 19:59 +0000 [r294208]  Terry Wilson <twilson@digium.com>

	* /, configs/calendar.conf.sample, res/res_calendar.c: Merged
	  revisions 294207 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r294207 | twilson | 2010-11-08 13:56:10 -0600 (Mon, 08 Nov 2010)
	  | 2 lines Set a default waittime, and make sure to convert it to
	  milliseconds ........

2010-11-08 17:19 +0000 [r294127]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_misdn.c, /: Merged revisions 294125 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r294125 | rmudgett | 2010-11-08 11:16:01 -0600 (Mon, 08
	  Nov 2010) | 33 lines valgrind reported references to freed memory
	  during a mISDN hangup collision. Bad things have been happening
	  in chan_misdn because the chan_misdn channel private struct
	  chan_list is not protected from reentrancy. Hangup collisions
	  have be causing read and write accesses to freed memory.
	  Converted chan_misdn struct chan_list to an ao2 object for its
	  reference counting feature. ********** Removed an impediment to
	  converting chan_list to an ao2 object. The use of the other_ch
	  member in chan_list is shaky at best. It is set if the incoming
	  and outgoing call legs are mISDN. The use of the other_ch member
	  goes against the Asterisk architecture and can even cause
	  problems. 1) It is used to disable echo cancellation. This could
	  be bad if the call is forked and the winning call leg is not
	  mISDN or the winning call leg is not the last mISDN channel
	  called by the fork. The other_ch would become a dangling pointer.
	  2) It is used when the far end is alerting to hear the far end's
	  inband audio instead of Asterisk's generated ringback tone. This
	  is bad if the call is forked. You would only hear the last forked
	  mISDN channel and it may not be ringing yet. The other_ch would
	  become a dangling pointer if the call is later transferred.
	  ********** JIRA SWP-2423 JIRA ABE-2614 ........

2010-11-05 22:17 +0000 [r294086]  Brett Bryant <bbryant@digium.com>

	* /, channels/chan_sip.c: Merged revisions 294084 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r294084 | bbryant | 2010-11-05 18:03:11 -0400 (Fri, 05 Nov 2010)
	  | 9 lines Fixed deadlock avoidance issues while locking channel
	  when adding the Max-Forwards header to a request. (closes issue
	  #17949) (closes issue #18200) Reported by: bwg Review:
	  https://reviewboard.asterisk.org/r/997/ ........

2010-11-05 21:56 +0000 [r294083]  David Vossel <dvossel@digium.com>

	* channels/chan_sip.c: Perform proper handling of forked outbound
	  INVITE requests. RFC3261 section 12 about dialog creation says an
	  INVITE transaction results in an established dialog once it
	  receives the 200 OK response. It is possible to receive multiple
	  differing 200 OK responses for a single outbound INVITE Request,
	  and this should result in establishing multiple dialogs. This
	  patch allows for all differing 200 OK responses to an INVITE
	  request to establish a separate dialog, but only the first dialog
	  is kept. All other resulting dialogs from the initial request are
	  immediately ACKed and then immediately terminated with a BYE
	  request. Review: https://reviewboard.asterisk.org/r/946/

2010-11-05 16:07 +0000 [r294048-294050]  Terry Wilson <twilson@digium.com>

	* contrib/scripts/ast_tls_cert, /: Merged revisions 294049 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r294049 | twilson | 2010-11-05 09:05:50 -0700 (Fri, 05 Nov 2010)
	  | 2 lines Corret spelling and example ........

	* contrib/scripts/ast_tls_cert, /: Merged revisions 294047 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r294047 | twilson | 2010-11-05 08:36:20 -0700 (Fri, 05 Nov 2010)
	  | 2 lines Tell people to use the correct common name for clients
	  as well ........

2010-11-05 15:26 +0000 [r294046]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 293924 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r293924 | dvossel | 2010-11-04 16:39:51 -0500 (Thu, 04 Nov 2010)
	  | 4 lines Fixes ringback tone on sip semi-attended transfer.
	  ABE-2168 ........

2010-11-05 00:08 +0000 [r293971]  Shaun Ruffell <sruffell@digium.com>

	* /, codecs/codec_dahdi.c: Merged revisions 293970 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r293970 | sruffell | 2010-11-04 19:07:11 -0500
	  (Thu, 04 Nov 2010) | 32 lines Merged revisions 293969 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r293969 | sruffell | 2010-11-04 19:06:02 -0500
	  (Thu, 04 Nov 2010) | 25 lines Merged revisions 293968 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r293968 | sruffell | 2010-11-04 19:02:53 -0500 (Thu, 04 Nov 2010)
	  | 17 lines codecs/codec_dahdi: Prevent "choppy" audio when
	  receiving unexpected frame sizes. dahdi-linux 2.4.0 (specifically
	  commit 9034) added the capability for the wctc4xxp to return more
	  than a single packet of data in response to a read. However, when
	  decoding packets, codec_dahdi was still assuming that the default
	  number of samples was in each read. In other words, each packet
	  your provider sent you, regardless of size, would result in 20 ms
	  of decoded data (30 ms if decoding G723). If your provider was
	  sending 60 ms packets then codec_dahdi would end up stripping 40
	  ms of data from each transcoded frame resulting in "choppy"
	  audio. This would only affect systems where G729 packets are
	  arriving in sizes greater than 20ms or G723 packets arriving in
	  sizes greater than 30ms. DAHDI-744. ........ ................
	  ................

2010-11-04 13:29 +0000 [r293888]  Paul Belanger <pabelanger@digium.com>

	* /, channels/chan_sip.c: Merged revisions 293887 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r293887 | pabelanger | 2010-11-04 09:27:54 -0400 (Thu, 04 Nov
	  2010) | 8 lines Do not output port in IPaddress for AMI sippeers.
	  (closes issue #18248) Reported by: orn Patches:
	  ami_sippeers.patch uploaded by pabelanger (license 224) Tested
	  by: orn ........

2010-11-03 18:43 +0000 [r293809]  Terry Wilson <twilson@digium.com>

	* main/rtp_engine.c, /, channels/chan_sip.c,
	  include/asterisk/rtp_engine.h: Merged revisions 293803 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r293803 | twilson | 2010-11-03 11:05:14 -0700 (Wed, 03 Nov 2010)
	  | 25 lines Avoid valgrind warnings for
	  ast_rtp_instance_get_xxx_address The documentation for
	  ast_rtp_instance_get_(local/remote)_address stated that they
	  returned 0 for success and -1 on failure. Instead, they returned
	  0 if the address structure passed in was already equivalent to
	  the address instance local/remote address or 1 otherwise. 90% of
	  the calls to these functions completely ignored the return
	  address and passed in an uninitialized struct, which would make
	  valgrind complain even though the operation was technically safe.
	  This patch fixes the documentation and converts the
	  get_xxx_address functions to void since all they really do is
	  copy the address and cannot fail. Additionally two new functions
	  (ast_rtp_instance_get_and_cmp_(local/remote)_address) are created
	  for the 3 times where the return value was actually checked. The
	  get_and_cmp_local_address function is currently unused, but
	  exists for the sake of symmetry. The only functional change as a
	  result of this change is that we will not do an
	  ast_sockaddr_cmp() on (mostly uninitialized) addresses before
	  doing the ast_sockaddr_copy() in the get_*_address functions. So,
	  even though it is an API change, it shouldn't have a noticeable
	  change in behavior. Review:
	  https://reviewboard.asterisk.org/r/995/ ........

2010-11-03 18:38 +0000 [r293808]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, channels/sig_analog.c, /: Merged revisions
	  293807 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r293807 | rmudgett | 2010-11-03 13:35:19 -0500
	  (Wed, 03 Nov 2010) | 34 lines Merged revisions 293806 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r293806 | rmudgett | 2010-11-03 13:31:57 -0500
	  (Wed, 03 Nov 2010) | 27 lines Merged revisions 293805 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r293805 | rmudgett | 2010-11-03 13:23:04 -0500 (Wed, 03 Nov 2010)
	  | 20 lines Party A in an analog 3-way call would continue to hear
	  ringback after party C answers. All parties are analog FXS ports.
	  1) A calls B. 2) A flash hooks to call C. 3) A flash hooks to
	  bring C into 3-way call before C answers. (A and B hear ringback)
	  4) C answers 5) A continues to hear ringback during the 3-way
	  call. (All parties can hear each other.) * Fixed use of wrong
	  variable in dahdi_bridge() that stopped ringback on the wrong
	  subchannel. * Made several debug messages have more information.
	  A similar issue happens if B and C are SIP channels. B continues
	  to hear ringback. For some reason this only affects v1.8 and
	  trunk. * Don't start ringback on the real and 3-way subchannels
	  when creating the 3-way conference. Removing this code is benign
	  on v1.6.2 and earlier. ........ ................ ................

2010-11-02 23:10 +0000 [r293725]  Jeff Peeler <jpeeler@digium.com>

	* /, channels/chan_sip.c: Merged revisions 293724 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r293724 | jpeeler | 2010-11-02 18:09:06 -0500
	  (Tue, 02 Nov 2010) | 22 lines Merged revisions 293723 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r293723 | jpeeler | 2010-11-02 18:07:13 -0500
	  (Tue, 02 Nov 2010) | 15 lines Merged revisions 293722 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r293722 | jpeeler | 2010-11-02 18:02:51 -0500 (Tue, 02 Nov 2010)
	  | 8 lines Add enabled/disabled information for rtautoclear sip
	  show settings output. When setting to zero/"no", the numeric
	  default was shown making it not obvious the disabled setting was
	  respected. (closes issue #18123) Reported by: zerohalo ........
	  ................ ................

2010-11-02 21:31 +0000 [r293649]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, channels/sig_analog.c, /: Merged revisions
	  293648 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r293648 | rmudgett | 2010-11-02 16:29:25 -0500
	  (Tue, 02 Nov 2010) | 20 lines Merged revisions 293647 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r293647 | rmudgett | 2010-11-02 16:26:30 -0500
	  (Tue, 02 Nov 2010) | 13 lines Merged revisions 293639 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r293639 | rmudgett | 2010-11-02 16:24:13 -0500 (Tue, 02 Nov 2010)
	  | 6 lines Make warning message have more useful information in
	  it. Change "Unable to get index, and nullok is not asserted" to
	  "Unable to get index for '<channel-name>' on channel <number>
	  (<function>(), line <number>)". ........ ................
	  ................

2010-11-02 20:47 +0000 [r293578-293612]  Paul Belanger <pabelanger@digium.com>

	* main/manager.c, /: Merged revisions 293611 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r293611 | pabelanger | 2010-11-02 16:45:09 -0400 (Tue, 02 Nov
	  2010) | 2 lines If manager and tls are disabled, do not display
	  TCP/TLS Bindaddress. ........

	* configs/gtalk.conf.sample, UPGRADE.txt, channels/chan_gtalk.c,
	  CHANGES: New CLI command 'gtalk show settings'. Review:
	  https://reviewboard.asterisk.org/r/984/

2010-11-02 14:43 +0000 [r293577]  Mark Michelson <mmichelson@digium.com>

	* CHANGES: Add to the CHANGES file that the HTTP server supports
	  IPv6 addressing.

2010-11-01 17:32 +0000 [r293531]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, channels/sig_analog.c, /,
	  channels/sig_analog.h: Merged revisions 293530 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r293530 | rmudgett | 2010-11-01 12:29:30 -0500 (Mon, 01 Nov 2010)
	  | 10 lines Analog 3-way call would not connect all parties if one
	  was using sig_pri. Also the "dahdi show channel" would not show
	  the correct 3-way call status. * Synchronized the inthreeway flag
	  between chan_dahdi and sig_analog. * Fixed a my_set_linear_mode()
	  sign error and made take an analog sub channel enum. ........

2010-11-01 16:11 +0000 [r293497]  Paul Belanger <pabelanger@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 293496 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r293496 | pabelanger | 2010-11-01 12:09:05 -0400 (Mon,
	  01 Nov 2010) | 13 lines Use ast_sockaddr_from_sin function not
	  memcpy This resolves some IAX2 registration issue report on the
	  asterisk-users mailing list. (closes issue #18202) Reported by:
	  pabelanger Patches: update_registry.patch.v2 uploaded by
	  pabelanger (license 224) Tested by: pabelanger, Nic Colledge
	  (mailing list) Review: https://reviewboard.asterisk.org/r/993
	  ........

2010-10-30 01:55 +0000 [r293342-293419]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, channels/sig_analog.c, /: Merged revisions
	  293418 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r293418 | rmudgett | 2010-10-29 20:53:29 -0500
	  (Fri, 29 Oct 2010) | 16 lines Merged revisions 293417 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r293417 | rmudgett | 2010-10-29 20:49:15 -0500
	  (Fri, 29 Oct 2010) | 9 lines Merged revisions 293416 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r293416 | rmudgett | 2010-10-29 20:45:49 -0500 (Fri, 29
	  Oct 2010) | 1 line Remove some more code that serves no purpose.
	  ........ ................ ................

	* channels/chan_dahdi.c, channels/sig_analog.c, /: Merged revisions
	  293341 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r293341 | rmudgett | 2010-10-29 19:46:41 -0500
	  (Fri, 29 Oct 2010) | 16 lines Merged revisions 293340 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r293340 | rmudgett | 2010-10-29 19:40:10 -0500
	  (Fri, 29 Oct 2010) | 9 lines Merged revisions 293339 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r293339 | rmudgett | 2010-10-29 19:34:12 -0500 (Fri, 29
	  Oct 2010) | 1 line Remove some code that serves no purpose.
	  ........ ................ ................

2010-10-29 21:50 +0000 [r293306]  Jeff Peeler <jpeeler@digium.com>

	* /, channels/chan_sip.c: Merged revisions 293305 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r293305 | jpeeler | 2010-10-29 16:48:38 -0500 (Fri, 29 Oct 2010)
	  | 9 lines Modify sip_setoption to not complain about unknown
	  options. This now behaves just like the other setoption
	  callbacks. For the curious the offending option for the reporter
	  was AST_OPTION_CHANNEL_WRITE which was getting passed due to a
	  fix for chan_local in 286189. (closes issue #17985) Reported by:
	  globalnetinc ........

2010-10-29 20:46 +0000 [r293273]  Mark Michelson <mmichelson@digium.com>

	* main/http.c, UPGRADE.txt, configs/http.conf.sample: Enable IPv6
	  for the built-in HTTP server. Review:
	  https://reviewboard.asterisk.org/r/986

2010-10-28 20:01 +0000 [r293198]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, main/ast_expr2.h, res/ael/ael.tab.c, main/ast_expr2.y,
	  res/ael/ael_lex.c, res/ael/ael.tab.h, main/ast_expr2.c: Merged
	  revisions 293197 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r293197 | tilghman | 2010-10-28 15:00:06 -0500
	  (Thu, 28 Oct 2010) | 33 lines Merged revisions 293195-293196 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r293195 | tilghman | 2010-10-28 14:52:52 -0500
	  (Thu, 28 Oct 2010) | 12 lines Merged revisions 293194 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r293194 | tilghman | 2010-10-28 14:44:37 -0500 (Thu, 28 Oct 2010)
	  | 5 lines "!00" evaluated as false, which is incorrect. Fixing.
	  Reported (though the reporter did not understand he was reporting
	  a bug) on the asterisk-users list:
	  http://lists.digium.com/pipermail/asterisk-users/2010-October/255505.html
	  ........ ................ r293196 | tilghman | 2010-10-28
	  14:54:34 -0500 (Thu, 28 Oct 2010) | 12 lines Merged revisions
	  293194 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r293194 | tilghman | 2010-10-28 14:44:37 -0500 (Thu, 28 Oct 2010)
	  | 5 lines "!00" evaluated as false, which is incorrect. Fixing.
	  Reported (though the reporter did not understand he was reporting
	  a bug) on the asterisk-users list:
	  http://lists.digium.com/pipermail/asterisk-users/2010-October/255505.html
	  ........ ................ ................

2010-10-28 16:11 +0000 [r293160]  Jeff Peeler <jpeeler@digium.com>

	* /, funcs/func_strings.c: Merged revisions 293159 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r293159 | jpeeler | 2010-10-28 11:11:08 -0500
	  (Thu, 28 Oct 2010) | 18 lines Merged revisions 293158 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r293158 | jpeeler | 2010-10-28 11:09:40 -0500 (Thu, 28 Oct 2010)
	  | 11 lines Fix infinite loop in FILTER(). Specifically when
	  you're using characters above \x7f or invalid character escapes
	  (e.g. \xgg). (closes issue #18060) Reported by: wdoekes Patches:
	  issue18060_func_strings_filter_infinite_loop.patch uploaded by
	  wdoekes (license 717) Tested by: wdoekes ........
	  ................

2010-10-26 18:54 +0000 [r293120]  Jeff Peeler <jpeeler@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 293119 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r293119 | jpeeler | 2010-10-26 13:49:08 -0500
	  (Tue, 26 Oct 2010) | 43 lines Merged revisions 293118 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r293118 | jpeeler | 2010-10-26 13:33:24 -0500
	  (Tue, 26 Oct 2010) | 36 lines Merged revisions 293004 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r293004 | jpeeler | 2010-10-25 17:55:28 -0500 (Mon, 25 Oct 2010)
	  | 29 lines Fix inprocess_container in voicemail to correctly
	  restrict max messages. The comparison function logic was off, so
	  the number of sessions for a given mailbox were not being
	  incremented properly. This problem caused the maximum number of
	  messages per folder to not be respected when simultaneously
	  leaving multiple voicemails just below the threshold. These
	  problems should be fixed by the above, but just in case: Fixed
	  resequence_mailbox to rely on the actual number of detected
	  number of files in a directory rather than just assuming only 10
	  messages more than the maximum had been left. Also if more
	  messages than the maximum are deleted they are actually removed
	  now. The second purpose of this commit should have been separated
	  out probably, but is related to the above. Again, if the number
	  of messages in a given voicemail folder exceeds the maximum set
	  limit make sure to allocate enough space for the deleted and
	  heard index tracking array. A few random fixes: There was a
	  forgotten decrement of the inprocess count in imap_store_file.
	  When using IMAP storage, do not look in the directory where file
	  based storage messages may still reside and influence the message
	  count. Ensure to use only the first format in sendmail. ABE-2516
	  ........ ................ ................

2010-10-26 16:33 +0000 [r293047-293082]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/sig_pri.c: Merged revisions 293081 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r293081 | rmudgett | 2010-10-26 11:32:59 -0500 (Tue, 26 Oct 2010)
	  | 1 line No need to define the struct if there are no users.
	  ........

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac,
	  channels/sig_pri.c: Merged revisions 293046 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r293046 | rmudgett | 2010-10-26 10:53:58 -0500 (Tue, 26 Oct 2010)
	  | 4 lines Allow the DAHDI driver to compile, even with a
	  sufficiently older version of libpri. Fixes our Bamboo builds.
	  ........

2010-10-25 21:16 +0000 [r292915-292970]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, channels/sig_pri.c: Merged revisions 292969 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r292969 | tilghman | 2010-10-25 16:15:19 -0500 (Mon, 25 Oct 2010)
	  | 2 lines Several more defines that need to be altered for
	  compiling against an older version of libpri ........

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac,
	  channels/sig_pri.c: Merged revisions 292906 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r292906 | tilghman | 2010-10-25 14:28:35 -0500 (Mon, 25 Oct 2010)
	  | 4 lines Allow the DAHDI driver to compile, even with a
	  sufficiently older version of libpri. Fixes our Bamboo builds.
	  ........

2010-10-25 19:11 +0000 [r292869]  David Vossel <dvossel@digium.com>

	* channels/chan_local.c, /: Merged revisions 292868 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r292868 | dvossel | 2010-10-25 14:07:50 -0500
	  (Mon, 25 Oct 2010) | 39 lines Merged revisions 292867 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r292867 | dvossel | 2010-10-25 14:06:21 -0500
	  (Mon, 25 Oct 2010) | 32 lines Merged revisions 292866 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r292866 | dvossel | 2010-10-25 14:05:07 -0500 (Mon, 25 Oct 2010)
	  | 27 lines This patch turns chan_local pvts into astobj2 objects.
	  chan_local does some dangerous things involving deadlock
	  avoidance. tech_pvt functions like hangup and queue_frame are
	  provided with a locked channel upon entry. Those functions are
	  completely safe as long as you don't attempt to give up that
	  channel lock, but that is impossible to guarantee due to the
	  required deadlock avoidance necessary to lock both the tech_pvt
	  and both channels involved. In the past, we have tried to account
	  for this by doing things like setting a "glare" flag that
	  indicates what function should destroy the pvt. This was used in
	  local_hangup and local_queue_frame to decided who should destroy
	  the pvt if they collided in separate threads. I have removed the
	  need to do this by converting all chan_local tech_pvts to
	  astobj2. This means we can ref a pvt before deadlock avoidance
	  and not have to worry about that pvt possibly getting destroyed
	  under us. It also cleans up where we destroy the tech_pvt. The
	  only unlink from the tech_pvt container occurs in local_hangup
	  now, which is where it should occur. Since there still may be
	  thread collisions on some functions like local_hangup after
	  deadlock avoidance, I have added some checks to detect those
	  collisions and exit appropriately. I think this patch is going to
	  solve quite a bit of weirdness we have had with local channels in
	  the past. ........ ................ ................

2010-10-22 22:40 +0000 [r292808-292826]  Terry Wilson <twilson@digium.com>

	* contrib/scripts/ast_tls_cert, /: Merged revisions 292825 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r292825 | twilson | 2010-10-22 15:35:29 -0700 (Fri, 22 Oct 2010)
	  | 4 lines Don't create directories without at least o+x Also,
	  making files that you are going to modify read-only is dumb.
	  ........

	* contrib/scripts/ast_tls_cert, /: Merged revisions 292794 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r292794 | twilson | 2010-10-22 15:18:36 -0700 (Fri, 22 Oct 2010)
	  | 2 lines Make files readable only by the owner ........

2010-10-22 21:29 +0000 [r292788]  Leif Madsen <lmadsen@digium.com>

	* /, channels/chan_sip.c, configs/res_ldap.conf.sample,
	  contrib/scripts/asterisk.ldif: Merged revisions 292787 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r292787 | lmadsen | 2010-10-22 16:28:43 -0500
	  (Fri, 22 Oct 2010) | 21 lines Merged revisions 292786 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r292786 | lmadsen | 2010-10-22 16:16:12 -0500 (Fri, 22 Oct 2010)
	  | 13 lines Update the LDIF file for LDAP. The LDIF file
	  asterisk.ldif was quite a bit out of date from the
	  asterisk.ldap-schema file, so I've now updated that to be in
	  sync. The asterisk.ldif file being out of sync was a problem on
	  my systems where I was doing an ldapadd to import the schema into
	  the LDAP database, and the existing file would cause problems and
	  ERROR messages when registering. Additional documention has been
	  added based on feedback in the issue I'm closing. (closes issue
	  #13861) Reported by: scramatte Patches: ldap-update.txt uploaded
	  by lmadsen (license 10) Tested by: lmadsen, jcovert, suretec,
	  rgenthner ........ ................

2010-10-22 17:16 +0000 [r292743]  Terry Wilson <twilson@digium.com>

	* contrib/scripts/ast_tls_cert (added), /: Merged revisions 292740
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r292740 | twilson | 2010-10-22 09:49:34 -0700 (Fri, 22 Oct 2010)
	  | 45 lines Add TLS cert helper script This script is useful for
	  quickly generating self-signed CA, server, and client
	  certificates for use with Asterisk. It is still recommended to
	  obtain certificates from a recognized Certificate Authority and
	  to develop an understanding how SSL certificates work. Real
	  security is hard work. OPTIONS: -h Show this message -m Type of
	  cert "client" or "server". Defaults to server. -f Config filename
	  (openssl config file format) -c CA cert filename (creates new CA
	  cert/key as ca.crt/ca.key if not passed) -k CA key filename -C
	  Common name (cert field) For a server cert, this should be the
	  same address that clients attempt to connect to. Usually this
	  will be the Fully Qualified Domain Name, but might be the IP of
	  the server. For a CA or client cert, it is merely informational.
	  Make sure your certs have unique common names. -O Org name (cert
	  field) An informational string (company name) -o Output filename
	  base (defaults to asterisk) -d Output directory (defaults to the
	  current directory) Example: To create a CA and a server
	  (pbx.mycompany.com) cert with output in /tmp: ast_tls_cert -C
	  pbx.mycompany.com -O "My Company" -d /tmp This will create a CA
	  cert and key as well as asterisk.pem and the the two files that
	  it is made from: asterisk.crt and asterisk.key. Copy asterisk.pem
	  and ca.crt somewhere (like /etc/asterisk) and set
	  tlscertfile=/etc/asterisk.pem and tlscafile=/etc/ca.crt. Since
	  this is a self-signed key, many devices will require you to
	  import the ca.crt file as a trusted cert. To create a client cert
	  using the CA cert created by the example above: ast_tls_cert -m
	  client -c /tmp/ca.crt -k /tmp/ca.key -C "Joe User" -O \ "My
	  Company" -d /tmp -o joe_user This will create client.crt/key/pem
	  in /tmp. Use this if your device supports a client certificate.
	  Make sure that you have the ca.crt file set up as a tlscafile in
	  the necessary Asterisk configs. Make backups of all .key files in
	  case you need them later. ........

2010-10-22 17:10 +0000 [r292742]  Mark Michelson <mmichelson@digium.com>

	* /, tests/test_event.c: Merged revisions 292741 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r292741 | mmichelson | 2010-10-22 12:09:52 -0500 (Fri, 22 Oct
	  2010) | 12 lines Prevent multiple runs of event_sub_test from
	  producing false failure results. The array of test subscriptions
	  was declared "static," meaning that the data.count field would
	  retain its value between runs of the test. After the first test
	  run, this would result in false reports of test failures. I chose
	  to just remove the "static" keyword from the structure since it's
	  not a huge deal to construct this structure during each run of
	  the test. Another alternative would have been to zero out the
	  data.count fields of each test subscription instead. ........

2010-10-22 15:47 +0000 [r292705]  Richard Mudgett <rmudgett@digium.com>

	* main/channel.c, channels/chan_misdn.c, /, channels/sig_pri.c:
	  Merged revisions 292704 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r292704 | rmudgett | 2010-10-22 10:47:08 -0500 (Fri, 22 Oct 2010)
	  | 19 lines Connected line is not updated when chan_dahdi/sig_pri
	  or chan_misdn transfers a call. When a call is transfered by ECT
	  or implicitly by disconnect in sig_pri or implicitly by
	  disconnect in chan_misdn, the connected line information is not
	  exchanged. The connected line interception macros also need to be
	  executed if defined. The CALLER interception macro is executed
	  for the held call. The CALLEE interception macro is executed for
	  the active/ringing call. JIRA ABE-2589 JIRA SWP-2296 Patches:
	  abe_2589_c3bier.patch uploaded by rmudgett (license 664)
	  abe_2589_v1.8_v2.patch uploaded by rmudgett (license 664) Review:
	  https://reviewboard.asterisk.org/r/958/ ........

2010-10-21 22:11 +0000 [r292668]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, channels/misdn/ie.c: Merged revisions 292667 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r292667 | tilghman | 2010-10-21 17:09:25 -0500 (Thu, 21 Oct 2010)
	  | 2 lines Compile correctly on Linux (asterisk/localtime.h
	  depends upon asterisk/autoconfig.h loading first). ........

2010-10-21 18:23 +0000 [r292630]  Paul Belanger <pabelanger@digium.com>

	* /, contrib/init.d/rc.suse.asterisk: Merged revisions 292628 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r292628 | pabelanger | 2010-10-21 14:13:18 -0400 (Thu, 21 Oct
	  2010) | 5 lines Fix typo in SUSE init script. Reported by: Dave
	  Cotton on asterisk-users list. ........

2010-10-21 16:46 +0000 [r292597]  David Vossel <dvossel@digium.com>

	* main/manager.c, /: Merged revisions 292595 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r292595 | dvossel | 2010-10-21 11:14:33 -0500 (Thu, 21 Oct 2010)
	  | 14 lines Fixes recursive lock problem in manager.c It is
	  possible for a AMI session to freeze because of invalid use of
	  recursive locks during the EVENT processing. This patch removes
	  the unnecessary locks. (closes issue #18167) Reported by: sustav
	  Patches: manager_locking_v1.diff uploaded by dvossel (license
	  671) Tested by: sustav ........

2010-10-21 13:17 +0000 [r292559]  Leif Madsen <lmadsen@digium.com>

	* /, configs/res_ldap.conf.sample: Merged revisions 292557 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r292557 | lmadsen | 2010-10-21 08:12:19 -0500
	  (Thu, 21 Oct 2010) | 14 lines Merged revisions 292556 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r292556 | lmadsen | 2010-10-21 08:11:52 -0500 (Thu, 21 Oct 2010)
	  | 6 lines Change res_ldap.sample.conf to match the schema.
	  (closes issue #17376) Reported by: jcovert Patches:
	  res_ldap.conf.sample.patch uploaded by jcovert (license 551)
	  ........ ................

2010-10-21 11:38 +0000 [r292524]  Russell Bryant <russell@digium.com>

	* /, res/res_config_ldap.c: Merged revisions 292523 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r292523 | russell | 2010-10-21 06:36:47 -0500 (Thu, 21
	  Oct 2010) | 4 lines Add var=value to log message on update
	  failure, and add newline. ... just for you, Leif. ........

2010-10-21 01:03 +0000 [r292490]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/sig_pri.c: Merged revisions 292489 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r292489 | rmudgett | 2010-10-20 20:02:50 -0500 (Wed, 20 Oct 2010)
	  | 7 lines Send CONNECT_ACKNOWLEDGE for CIS calls too. The
	  originator of the Q.SIG call completion signaling link was not
	  changed to the active state when the CONNECT message came in. The
	  T309 processing would immediately kill the signaling link because
	  it was not in the active state. ........

2010-10-21 00:23 +0000 [r292414-292443]  Paul Belanger <pabelanger@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 292436 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r292436 | pabelanger | 2010-10-20 20:21:59 -0400 (Wed,
	  20 Oct 2010) | 8 lines Application not properly unregister in
	  voicemail (closes issue #18128) Reported by: junky Patches:
	  vm_unregister.diff uploaded by junky (license 177) Tested by:
	  pabelanger, lmadsen ........

	* apps/app_dial.c, /: Merged revisions 292413 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r292413 | pabelanger | 2010-10-20 20:07:17 -0400
	  (Wed, 20 Oct 2010) | 24 lines Merged revisions 292412 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r292412 | pabelanger | 2010-10-20 20:05:45 -0400
	  (Wed, 20 Oct 2010) | 17 lines Merged revisions 292411 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r292411 | pabelanger | 2010-10-20 20:00:51 -0400 (Wed, 20 Oct
	  2010) | 10 lines Record priv-recordintro as sln, not gsm This
	  removes the gsm->sln step when transcoding priv-recordintro.
	  (closes issue #18176) Reported by: pabelanger Patches:
	  chan_sip.diff uploaded by pabelanger (license 224) ........
	  ................ ................

2010-10-20 00:41 +0000 [r292377]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, res/res_musiconhold.c: Merged revisions 292376 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r292376 | tilghman | 2010-10-19 19:40:29 -0500 (Tue, 19
	  Oct 2010) | 5 lines Oops. This module uses the generic timer and
	  no longer uses DAHDI. This causes a problem with the Solaris and
	  other system builds that have gcc 4.1 (where optional_api is
	  non-optional). ........

2010-10-19 22:19 +0000 [r292345]  Paul Belanger <pabelanger@digium.com>

	* /, contrib/scripts/install_prereq: Merged revisions 292343 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r292343 | pabelanger | 2010-10-19 18:14:23 -0400 (Tue, 19 Oct
	  2010) | 2 lines Add resample and imap_tk dependencies. ........

2010-10-19 19:35 +0000 [r292310]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c, res/res_srtp.c: Merged revisions 292309
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r292309 | twilson | 2010-10-19 12:27:32 -0700 (Tue, 19 Oct 2010)
	  | 10 lines Add sip show peer info about crypto and remove dated
	  comment This patch adds information about the encryption setting
	  to 'sip show peers' and removes an out-of-date comment from
	  res_srtp.c and instead directs users to the proper documentation.
	  (closes issue #18140) Reported by: chodorenko ........

2010-10-18 22:14 +0000 [r292231]  Leif Madsen <lmadsen@digium.com>

	* /, sounds/sounds.xml, sounds/Makefile: Merged revisions 292225
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r292225 | lmadsen | 2010-10-18 16:51:23 -0500
	  (Mon, 18 Oct 2010) | 24 lines Merged revisions 292224 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r292224 | lmadsen | 2010-10-18 16:50:47 -0500
	  (Mon, 18 Oct 2010) | 17 lines Merged revisions 292222 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r292222 | lmadsen | 2010-10-18 16:47:25 -0500 (Mon, 18 Oct 2010)
	  | 9 lines Add support for the new English (Australian Accent)
	  sound files. (closes issue #17426) Reported by: camsown Patches:
	  core-sounds-en_AU.txt uploaded by camsown (license 1050)
	  add_AU_sounds.patch.txt uploaded by lmadsen (license 10) Tested
	  by: camsown, lmadsen, jtodd, qwell ........ ................
	  ................

2010-10-18 21:56 +0000 [r292228]  Jeff Peeler <jpeeler@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 292227 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r292227 | jpeeler | 2010-10-18 16:55:46 -0500
	  (Mon, 18 Oct 2010) | 25 lines Merged revisions 292226 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r292226 | jpeeler | 2010-10-18 16:54:38 -0500
	  (Mon, 18 Oct 2010) | 18 lines Merged revisions 292223 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r292223 | jpeeler | 2010-10-18 16:50:30 -0500 (Mon, 18 Oct 2010)
	  | 11 lines Fix improper operator key acceptance and clean up temp
	  recording files. This is a fix for when pressing the operator key
	  after recording an unavailable, busy, name, or temporary message
	  in mailbox options. The operator key should not be accepted here,
	  but should be allowed during the message recording. If the
	  operator key is pressed during ensure the file is saved or
	  deleted as apporopriate. Also, ensure removal of temporary
	  recorded files after an early hang up or when message acceptance
	  confirmation times out. ABE-2518 ........ ................
	  ................

2010-10-18 19:52 +0000 [r292189]  Russell Bryant <russell@digium.com>

	* main/netsock2.c, /: Merged revisions 292188 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r292188 | russell | 2010-10-18 14:50:04 -0500 (Mon, 18 Oct 2010)
	  | 9 lines Resolve some compiler errors in ast_sockaddr_is_any().
	  These errors came up once this function was used from within
	  netsock2.c. The errors were like the following: netsock2.c:393:
	  error: dereferencing pointer ‚Äò({anonymous})‚Äô does break
	  strict-aliasing rules The usage of a union here avoids this
	  problem. ........

2010-10-18 19:16 +0000 [r292156]  David Vossel <dvossel@digium.com>

	* main/netsock2.c, /: Merged revisions 292155 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r292155 | dvossel | 2010-10-18 14:16:00 -0500 (Mon, 18 Oct 2010)
	  | 2 lines Fixes build error for systems not supporting
	  IPV6_TCLASS. ........

2010-10-18 17:18 +0000 [r292124]  Matthew Nicholson <mnicholson@digium.com>

	* /, addons/chan_mobile.c: Merged revisions 292122 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r292122 | mnicholson | 2010-10-18 12:15:24 -0500 (Mon,
	  18 Oct 2010) | 5 lines Fix the cmgr parser. (closes issue
	  0018152) Reported by: menschentier ........

2010-10-18 16:03 +0000 [r292086]  David Vossel <dvossel@digium.com>

	* main/netsock2.c, /: Merged revisions 292085 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r292085 | dvossel | 2010-10-18 11:02:17 -0500 (Mon, 18 Oct 2010)
	  | 7 lines Fixes qos settings for sockets bound to any IPv6 or
	  IPv4 address. (closes issue #18099) Reported by: jamesnet
	  Patches: issues_18099_v3.diff uploaded by dvossel (license 671
	  ........

2010-10-18 15:33 +0000 [r292084]  Jeff Peeler <jpeeler@digium.com>

	* pbx/pbx_spool.c, /: Merged revisions 292083 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r292083 | jpeeler | 2010-10-18 10:32:40 -0500 (Mon, 18 Oct 2010)
	  | 4 lines Disable use of inotify for call file handling as it is
	  not working properly. (related to #18089) ........

2010-10-16 11:51 +0000 [r292052]  Tzafrir Cohen <tzafrir.cohen@xorcom.com>

	* /, configs/musiconhold.conf.sample, res/res_musiconhold.c: Merged
	  revisions 292050 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r292050 | tzafrir | 2010-10-16 12:47:00 +0200
	  (◊©', 16 ◊ê◊ï◊ß 2010) | 22 lines Merged revisions 292049 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r292049 | tzafrir | 2010-10-16 12:03:04 +0200 (◊©', 16
	  ◊ê◊ï◊ß 2010) | 15 lines Base directory for MOH should be ASTDATADIR
	  If the directive 'directory' is relative, make it relative to the
	  datadir, rather than to the varlibdir. In the sample
	  configuration it is relative ('moh'). This has no effect unless
	  you have actively set the datadir explicitly (at build time or at
	  run time). (closes issue #16906) Patches: moh_datadir uploaded by
	  tzafrir (license 46) Review:
	  https://reviewboard.asterisk.org/r/974/ ........ ................

2010-10-15 21:49 +0000 [r292017]  Terry Wilson <twilson@digium.com>

	* /, res/res_srtp.c: Merged revisions 292016 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r292016 | twilson | 2010-10-15 16:40:56 -0500 (Fri, 15 Oct 2010)
	  | 5 lines Ref/unref res_srtp when we create/destroy a session
	  This avoids unhappy crashing when we try to 'core stop
	  gracefully' and res_srtp tries to unload before chan_sip does.
	  Thanks, Russell! ........

2010-10-15 20:12 +0000 [r291943]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 291942 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r291942 | dvossel | 2010-10-15 15:12:04 -0500 (Fri, 15 Oct 2010)
	  | 8 lines Fixes peer's host port information being lost on sip
	  reload. (closes issue #18135) Reported by: lmadsen Patches:
	  crazy_ports_v2.diff uploaded by dvossel (license 671) Tested by:
	  lmadsen ........

2010-10-15 19:53 +0000 [r291941]  Paul Belanger <pabelanger@digium.com>

	* configs/gtalk.conf.sample, /: Merged revisions 291940 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r291940 | pabelanger | 2010-10-15 15:50:22 -0400
	  (Fri, 15 Oct 2010) | 16 lines Merged revisions 291939 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r291939 | pabelanger | 2010-10-15 15:35:20 -0400
	  (Fri, 15 Oct 2010) | 9 lines Merged revisions 291938 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r291938 | pabelanger | 2010-10-15 15:30:41 -0400 (Fri,
	  15 Oct 2010) | 2 lines Clean up formatting. ........
	  ................ ................

2010-10-15 16:54 +0000 [r291906]  Terry Wilson <twilson@digium.com>

	* /, res/res_jabber.c: Merged revisions 291905 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r291905 | twilson | 2010-10-15 09:39:58 -0700
	  (Fri, 15 Oct 2010) | 14 lines Merged revisions 291904 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r291904 | twilson | 2010-10-15 09:16:57 -0700 (Fri, 15 Oct 2010)
	  | 7 lines Don't crash or deadlock on module unload We can't hold
	  the lock while pthread_join is called since aji_log_hook will
	  attempt to lock from the other therad. We reorder the
	  pthread_join and ast_aji_disconnect so that we don't do an
	  SSL_read() while SSL_shutdown is running, causing a crash.
	  ........ ................

2010-10-14 22:10 +0000 [r291828-291830]  David Vossel <dvossel@digium.com>

	* main/netsock2.c, /: Merged revisions 291829 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r291829 | dvossel | 2010-10-14 17:09:32 -0500 (Thu, 14 Oct 2010)
	  | 8 lines Set TCLASS field of IPv6 header when sip qos options
	  are set. (closes issue #18099) Reported by: jamesnet Patches:
	  issues_18099_v2.diff uploaded by dvossel (license 671) Tested by:
	  dvossel, jamesnet ........

	* /, channels/chan_gtalk.c: Merged revisions 291827 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r291827 | dvossel | 2010-10-14 16:27:42 -0500 (Thu, 14
	  Oct 2010) | 18 lines Safer xml parsing, treat all clients the
	  same, and better local candidate selection. The gtalk channel
	  driver was doing several unsafe operations in regards to how it
	  parsed incoming XML messages. I have cleaned that code up so it
	  should be much safer now. We now treat all clients types the
	  same. We have no reason to distinguish between GMAIL and GOOGLE
	  VOICE clients anymore because they all work the same way. I also
	  modified how the local ip is found. If no bindaddress is provided
	  in the config file, we attempt to determine the local ip we would
	  use to connect to google.com. If that fails, then we fall back to
	  the ast_find_ourip() function as a last resort. Using the new
	  method makes it much less likely that we would ever advertise a
	  local RTP candidate as a loopback address. ........

2010-10-14 18:46 +0000 [r291792]  Jeff Peeler <jpeeler@digium.com>

	* /, main/stdtime/localtime.c: Merged revisions 291791 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r291791 | jpeeler | 2010-10-14 13:45:02 -0500 (Thu, 14
	  Oct 2010) | 10 lines Add missing ifdefs for test framework and
	  new locale code. (closes issue #18137) Reported by: ovi Patches:
	  18137_test_framework_ifdef.patch uploaded by wdoekes (license
	  717) 18137_localelist_warning.patch uploaded by wdoekes (license
	  717) Tested by: ovi ........

2010-10-14 15:21 +0000 [r291760]  Paul Belanger <pabelanger@digium.com>

	* channels/chan_jingle.c, include/asterisk/acl.h, /,
	  channels/chan_sip.c, channels/chan_h323.c, main/acl.c,
	  channels/chan_gtalk.c: Merged revisions 291758 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r291758 | pabelanger | 2010-10-14 11:15:12 -0400 (Thu, 14 Oct
	  2010) | 11 lines Add the ability for ast_find_ourip to return
	  IPv4, IPv6 or both. While testing chan_gtalk I noticed jabber was
	  using my IPv6 address and not IPv4. When using bindaddr=0.0.0.0
	  it is possible for ast_find_ourip() to return both IPv6 and IPv4
	  results. Adding a family parameter gives you the ablility to
	  choose. Since jabber/gtalk/h323 do not support IPv6, we should
	  only return IPv4 results. Review:
	  https://reviewboard.asterisk.org/r/973/ ........

2010-10-14 12:10 +0000 [r291726]  Russell Bryant <russell@digium.com>

	* /, doc/tex/secure-calls.tex: Merged revisions 291725 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r291725 | russell | 2010-10-14 07:08:43 -0500 (Thu, 14
	  Oct 2010) | 2 lines Fix a typo - s/seucre/secure/ ........

2010-10-13 23:52 +0000 [r291658]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, channels/sig_analog.c, /,
	  channels/sig_analog.h: Merged revisions 291656 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r291656 | rmudgett | 2010-10-13 18:45:11 -0500
	  (Wed, 13 Oct 2010) | 34 lines Merged revisions 291655 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r291655 | rmudgett | 2010-10-13 18:36:50 -0500
	  (Wed, 13 Oct 2010) | 27 lines Merged revisions 291643 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r291643 | rmudgett | 2010-10-13 18:29:58 -0500 (Wed, 13 Oct 2010)
	  | 20 lines Deadlock between dahdi_exception() and
	  dahdi_indicate(). There is a deadlock between dahdi_exception()
	  and dahdi_indicate() for analog ports. The call-waiting and
	  three-way-calling feature can experience deadlock if these
	  features are trying to do something and an event from the bridged
	  channel happens at the same time. Deadlock avoidance code added
	  to obtain necessary channel locks before attemting an operation
	  with call-waiting and three-way-calling. (closes issue #16847)
	  Reported by: shin-shoryuken Patches: issue_16847_v1.4.patch
	  uploaded by rmudgett (license 664) issue_16847_v1.6.2.patch
	  uploaded by rmudgett (license 664) issue_16847_v1.8_v2.patch
	  uploaded by rmudgett (license 664) Tested by: alecdavis, rmudgett
	  Review: https://reviewboard.asterisk.org/r/971/ ........
	  ................ ................

2010-10-13 23:47 +0000 [r291657]  Terry Wilson <twilson@digium.com>

	* main/channel.c, /: Merged revisions 291581 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r291581 | twilson | 2010-10-13 16:01:56 -0700
	  (Wed, 13 Oct 2010) | 35 lines Merged revisions 291580 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r291580 | twilson | 2010-10-13 15:58:43 -0700
	  (Wed, 13 Oct 2010) | 28 lines Merged revisions 291577 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r291577 | twilson | 2010-10-13 15:45:15 -0700 (Wed, 13 Oct 2010)
	  | 21 lines Don't ignore frames that have been queued when
	  softhangup'd When an outgoing call is answered and hung up by the
	  far end *very* quickly, we may not read any frames and therefor
	  end up with a call that displays the wrong
	  disposition/DIALSTATUS. The reason is because ast_queue_hangup()
	  immediately sets the _softhangup flag on the channel and then
	  queues the HANGUP control frame, but __ast_read refuses to read
	  any frames if ast_check_hangup() indicates that a hangup request
	  has been made (which it will if _softhangup is set). So, we end
	  up losing control frames. This change makes __ast_read continue
	  to read frames even if a soft hangup has been requested. It
	  queues a hangup frame to make sure that __ast_read() will still
	  eventually return NULL. Much thanks to David Vossel for all of
	  the reviews, discussion, and help! (closes issue #16946) Reported
	  by: davidw Review: https://reviewboard.asterisk.org/r/740/
	  ........ ................ ................

2010-10-13 22:47 +0000 [r291579]  David Vossel <dvossel@digium.com>

	* /, channels/chan_gtalk.c: Merged revisions 291578 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r291578 | dvossel | 2010-10-13 17:46:34 -0500 (Wed, 13
	  Oct 2010) | 4 lines More fixup for chan_gtalk. This patch makes
	  the xml parsing safer. ........

2010-10-13 22:34 +0000 [r291576]  Terry Wilson <twilson@digium.com>

	* Makefile, /, static-http/mantest.html (added): Merged revisions
	  291575 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r291575 | twilson | 2010-10-13 15:24:44 -0700 (Wed, 13 Oct 2010)
	  | 8 lines Add a simple AMI client web page This patch uses the
	  XML docs to parse all of the available AMI commands and allows
	  you to enter the command name and be presented with a form with
	  the available fields. You can then rapidly tab through the fields
	  and submit the command and view the response. It is much
	  faster/easier than having to use telnet for testing purposes.
	  ........

2010-10-13 20:24 +0000 [r291470-291542]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 291541 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r291541 | rmudgett | 2010-10-13 15:21:02 -0500 (Wed, 13
	  Oct 2010) | 26 lines The chan_dahdi faxdetect option only works
	  for the first FAX call. The chan_dahdi faxdetect option only
	  works for the first call. After that the option no longer works.
	  The struct dahdi_pvt.callprogress member is the encoded user
	  config setting for the callprogress and faxdetect config options.
	  Changing this value alters the configuration for all following
	  calls until the chan_dahdi.conf file is reloaded. * Fixed the
	  chan_dahdi ast_channel_setoption callback to not change the users
	  faxdetect config setting except for the current call. * Fixed the
	  chan_dahdi ast_channel_queryoption callback to read the active
	  DSP setting of the faxdetect option. * Made actually disable the
	  active faxdetect DSP setting for the current call on the analog
	  port. my_handle_dtmfup() is used for normal analog ports.
	  dahdi_handle_dtmfup() is the legacy code and is no longer used
	  unless in a radio mode. (closes issue #18116) Reported by:
	  seandarcy Patches: issue18116_v1.8.patch uploaded by rmudgett
	  (license 664) Review: https://reviewboard.asterisk.org/r/972/
	  ........

	* channels/chan_misdn.c, /: Merged revisions 291507 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r291507 | rmudgett | 2010-10-13 14:01:48 -0500
	  (Wed, 13 Oct 2010) | 18 lines Merged revision 291504 from
	  https://origsvn.digium.com/svn/asterisk/be/branches/C.3-bier
	  .......... r291504 | rmudgett | 2010-10-13 13:30:21 -0500 (Wed,
	  13 Oct 2010) | 11 lines Hold off ast_hangup() from destroying the
	  ast_channel. Must get the ast_channel lock before proceeding with
	  release_chan() and release_chan_early() to hold off ast_hangup()
	  from destroying the ast_channel. Missed this change for -r291468.
	  JIRA ABE-2598 JIRA SWP-2317 .......... ................

	* channels/chan_misdn.c, /: Merged revisions 291469 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r291469 | rmudgett | 2010-10-13 13:10:21 -0500
	  (Wed, 13 Oct 2010) | 23 lines Merge revision 291468 from
	  https://origsvn.digium.com/svn/asterisk/be/branches/C.3-bier
	  .......... r291468 | rmudgett | 2010-10-13 12:39:02 -0500 (Wed,
	  13 Oct 2010) | 16 lines Memory overwrites when releasing mISDN
	  call. Phone <--> Asterisk <-- ALERTING --> DISCONNECT <-- RELEASE
	  --> RELEASE_COMPLETE * Add lock protection around channel list
	  for find/add/delete operations. * Protect misdn_hangup() from
	  release_chan() and vise versa using the release_lock. JIRA
	  ABE-2598 JIRA SWP-2317 .......... ................

2010-10-13 15:51 +0000 [r291395]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 291394 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r291394 | russell | 2010-10-13 10:46:39 -0500
	  (Wed, 13 Oct 2010) | 20 lines Merged revisions 291393 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r291393 | russell | 2010-10-13 10:29:21 -0500
	  (Wed, 13 Oct 2010) | 13 lines Merged revisions 291392 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r291392 | russell | 2010-10-13 10:23:19 -0500 (Wed, 13 Oct 2010)
	  | 6 lines Lock pvt so pvt->owner can't disappear when queueing up
	  a frame. This fixes a crash due to a hangup race condition.
	  ABE-2601 ........ ................ ................

2010-10-13 08:58 +0000 [r291361]  Stefan Schmidt <sst@sil.at>

	* apps/app_macro.c: Report what extension called a failed macro Add
	  the extension and context of the calling channel to the log
	  output if a macro could not be found. (closes issue #18112)
	  Reported by: prado Patches: app_macro-info.diff uploaded by prado
	  (license 510) Tested by: schmidts

2010-10-12 17:21 +0000 [r291287]  Leif Madsen <lmadsen@digium.com>

	* /, configs/phoneprov.conf.sample: Merged revisions 291284 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r291284 | lmadsen | 2010-10-12 12:20:43 -0500
	  (Tue, 12 Oct 2010) | 15 lines Merged revisions 291280 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r291280 | lmadsen | 2010-10-12 12:20:02 -0500 (Tue, 12 Oct 2010)
	  | 7 lines Add undocumented variables to phoneprov.conf.sample
	  (closes issue #18107) Reported by: lathama Patches:
	  phoneprov.conf.sample.diff uploaded by lathama (license 1028)
	  ........ ................

2010-10-12 17:07 +0000 [r291266]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, main/acl.c: Merged revisions 291265 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r291265 | tilghman | 2010-10-12 12:06:23 -0500
	  (Tue, 12 Oct 2010) | 16 lines Merged revisions 291264 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r291264 | tilghman | 2010-10-12 12:05:31 -0500
	  (Tue, 12 Oct 2010) | 9 lines Merged revisions 291263 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r291263 | tilghman | 2010-10-12 11:55:30 -0500 (Tue, 12
	  Oct 2010) | 2 lines Oops, incorrect range (although unallocated
	  at ARIN) ........ ................ ................

2010-10-12 16:08 +0000 [r291231]  Leif Madsen <lmadsen@digium.com>

	* /, configs/manager.conf.sample: Merged revisions 291230 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r291230 | lmadsen | 2010-10-12 11:08:04 -0500
	  (Tue, 12 Oct 2010) | 10 lines Merged revisions 291229 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r291229 | lmadsen | 2010-10-12 11:07:28 -0500 (Tue, 12 Oct 2010)
	  | 2 lines Add documention that mentions options are defined but
	  not used. (Issue #18101) ........ ................

2010-10-12 16:00 +0000 [r291193-291228]  David Vossel <dvossel@digium.com>

	* main/manager.c, /: Merged revisions 291227 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r291227 | dvossel | 2010-10-12 10:58:56 -0500 (Tue, 12 Oct 2010)
	  | 16 lines Fixes manager.c crash. This issue was caused by
	  improper use of the mansession lock and manession_session lock.
	  These two structures are confusing to begin with so I'm not
	  surprised this occurred. I fixed this by consistently making sure
	  we use each of these locks only to protect the data in the
	  corresponding structure. We had mismatched usage of these locks
	  which resulted in no mutual exclusivity occurring at all. (closes
	  issue #17994) Reported by: vrban Patches:
	  mansession_locking_fix.diff uploaded by dvossel (license 671)
	  Tested by: vrban ........

	* /, CHANGES: Merged revisions 291194 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r291194 | dvossel | 2010-10-11 16:44:04 -0500 (Mon, 11 Oct 2010)
	  | 2 lines Update CHANGES to reflect new gtalk.conf options.
	  ........

	* configs/gtalk.conf.sample, /, res/res_stun_monitor.c,
	  channels/chan_gtalk.c, include/asterisk/stun.h: Merged revisions
	  291192 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r291192 | dvossel | 2010-10-11 16:38:39 -0500 (Mon, 11 Oct 2010)
	  | 19 lines Gtalk enhancements and general code cleanup. This
	  patch includes several chan_gtalk enhancements. Two new
	  gtalk.conf options have been added, externip and stunadd. Setting
	  externip allows us to manually specify what the external IP
	  address is outside of a NAT environment. Setting the stunaddr
	  option to a valid stun server allows for that external ip to be
	  retrieved via a STUN server automatically. This external IP is
	  then advertised during call setup as a possible candidate. I have
	  also attempted to clean up chan_gtalk's code so it meets our
	  coding guidelines. During this cleanup I noticed several things
	  that need to be done in the code and made a TODO section at the
	  top of the file. ........

2010-10-11 19:07 +0000 [r291076-291115]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_sip.c: Add todo comment about handle_incoming()
	  calling assumption.

	* /, channels/chan_sip.c: Merged revisions 291112-291113 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r291112 | rmudgett | 2010-10-11 13:48:15 -0500
	  (Mon, 11 Oct 2010) | 20 lines Merged revisions 291110-291111 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r291110 | rmudgett | 2010-10-11 13:34:22 -0500
	  (Mon, 11 Oct 2010) | 9 lines Merged revisions 291109 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r291109 | rmudgett | 2010-10-11 13:29:43 -0500 (Mon, 11
	  Oct 2010) | 1 line Add missing unlock to an exception condition
	  in reload_config(). ........ ................ r291111 | rmudgett
	  | 2010-10-11 13:39:06 -0500 (Mon, 11 Oct 2010) | 1 line Make exit
	  from handle_request_do() consistent. ................
	  ................ r291113 | rmudgett | 2010-10-11 13:51:13 -0500
	  (Mon, 11 Oct 2010) | 1 line Move declaration closer to where now
	  used. ................

	* /, main/cli.c: Merged revisions 291075 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r291075 | rmudgett | 2010-10-11 11:42:54 -0500
	  (Mon, 11 Oct 2010) | 22 lines Merged revisions 291073 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r291073 | rmudgett | 2010-10-11 11:39:17 -0500 (Mon, 11 Oct 2010)
	  | 15 lines Fixed infinite loop in verbose/debug message output.
	  Setting the module/filename specific message level and then
	  changing it resulted in the linked list being looped on itself.
	  Traversing this linked list is an infinite loop if what you are
	  looking for is not in the list. Also plugged some CLI parsing
	  holes in the associated CLI command: * Removing a nonexistent
	  module from the list actually added it with a level of zero. *
	  Setting the non-module specific level to zero is now equivalent
	  to setting it to "off" as documented. ........ ................

2010-10-11 03:20 +0000 [r291039]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, cdr/cdr_pgsql.c, configs/cdr_pgsql.conf.sample: Merged
	  revisions 291038 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r291038 | tilghman | 2010-10-09 18:25:37 -0500 (Sat, 09 Oct 2010)
	  | 2 lines Add missing option to set calls to be logged in
	  GMT/UTC. ........

2010-10-09 14:04 +0000 [r291006]  Alexandr Anikin <may@telecom-service.ru>

	* addons/ooh323c/src/ooh323.c, addons/chan_ooh323.c,
	  addons/ooh323c/src/ooh245.c: Added fast start and h.245 tunneling
	  options per user and peer. Added options for faststart/h.245
	  tunneling per user/peer, properly handle these and global
	  options, correction of handling fs/tunneling fields in signalling
	  responses (closes issue #17972) Reported by: salecha Patches:
	  fs-tunnel-per-point-3.patch uploaded by may213 (license 454)
	  Tested by: may213, salecha

2010-10-08 20:45 +0000 [r290974]  David Vossel <dvossel@digium.com>

	* /, channels/chan_gtalk.c: Merged revisions 290973 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r290973 | dvossel | 2010-10-08 15:44:59 -0500 (Fri, 08
	  Oct 2010) | 12 lines Make outbound Google Voice calls. This patch
	  allows for outbound Google Voice calls to be dialed from Asterisk
	  using chan_gtalk. Below is an example dialstring. exten ->
	  blah,1,Dial(Gtalk/asterisk/+15552225555@voice.google.com,,) In
	  this example, 'asterisk' is the jabber.conf profile configured to
	  connect to your gmail account. In order to receive Google Voice
	  calls make sure to enable 'allowguest=yes' in gtalk.conf.
	  ........

2010-10-08 16:27 +0000 [r290939]  Erin Spiceland <erin@thespicelands.com>

	* addons/app_mysql.c, configs/res_config_mysql.conf.sample, /,
	  addons/res_config_mysql.c: Add option to res_config_mysql and
	  app_mysql to specify a character set that MySQL should use.
	  (closes issue 17948) Reported by qmax.

2010-10-08 03:00 +0000 [r290865]  Jeff Peeler <jpeeler@digium.com>

	* /, main/asterisk.c: Merged revisions 290864 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r290864 | jpeeler | 2010-10-07 21:56:24 -0500
	  (Thu, 07 Oct 2010) | 23 lines Merged revisions 290863 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r290863 | jpeeler | 2010-10-07 21:45:44 -0500
	  (Thu, 07 Oct 2010) | 16 lines Merged revisions 290862 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r290862 | jpeeler | 2010-10-07 21:35:29 -0500 (Thu, 07 Oct 2010)
	  | 9 lines Ensure editline cleanup occurs when Ctrl-C is pressed
	  at control console. A recent change was made to avoid a race
	  condition on shutdown which only called the end functions from
	  the console thread. However, when pressing Ctrl-C the quit
	  handler is called from the signal handler thread. (closes issue
	  #17698) Reported by: jmls ........ ................
	  ................

2010-10-07 22:39 +0000 [r290830-290831]  David Vossel <dvossel@digium.com>

	* /, channels/chan_gtalk.c: Merged revisions 290829 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r290829 | dvossel | 2010-10-07 17:38:05 -0500 (Thu, 07
	  Oct 2010) | 6 lines Add Philippe Sultan to chan_gtalk author
	  list. Philippe has made some notable contributions to the gtalk
	  channel driver. His name deserves to be listed amoung the authors
	  of that file. Thanks Philippe! ........

	* /, channels/chan_gtalk.c: Merged revisions 290828 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r290828 | dvossel | 2010-10-07 16:44:58 -0500 (Thu, 07
	  Oct 2010) | 5 lines Outbound gtalk calls now work correctly.
	  There was a problem with how the candidates were being built on
	  an outbound call. This patch fixes that. ........

2010-10-07 20:59 +0000 [r290753]  Jason Parker <jparker@digium.com>

	* /, configure, include/asterisk/autoconfig.h.in,
	  autoconf/ast_ext_lib.m4: Merged revisions 290752 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r290752 | qwell | 2010-10-07 15:58:47 -0500
	  (Thu, 07 Oct 2010) | 23 lines Merged revisions 290751 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r290751 | qwell | 2010-10-07 15:57:14 -0500
	  (Thu, 07 Oct 2010) | 16 lines Merged revisions 290750 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r290750 | qwell | 2010-10-07 15:56:04 -0500 (Thu, 07 Oct 2010) |
	  9 lines Allow PRI to build properly when using --with-pri. Use
	  the directories found for the parent when using lib dependencies.
	  (closes issue #17314) Reported by: tzafrir Patches:
	  17314-withdeps.diff uploaded by qwell (license 4) ........
	  ................ ................

2010-10-07 11:12 +0000 [r290714]  Russell Bryant <russell@digium.com>

	* main/pbx.c, /: Merged revisions 290713 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r290713 | russell | 2010-10-07 13:00:52 +0200
	  (Thu, 07 Oct 2010) | 11 lines Merged revisions 290712 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r290712 | russell | 2010-10-07 12:53:56 +0200 (Thu, 07 Oct 2010)
	  | 4 lines Don't crash when Set() is called without a value.
	  Review: https://reviewboard.asterisk.org/r/949/ ........
	  ................

2010-10-06 21:23 +0000 [r290649-290677]  David Vossel <dvossel@digium.com>

	* /, channels/chan_gtalk.c: Merged revisions 290674 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r290674 | dvossel | 2010-10-06 16:22:51 -0500 (Wed, 06
	  Oct 2010) | 4 lines Fixes commented out code to use #if 0
	  instead. Thanks to rmudgett for catching this! ........

	* /, channels/chan_gtalk.c: Merged revisions 290648 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r290648 | dvossel | 2010-10-06 16:08:19 -0500 (Wed, 06
	  Oct 2010) | 12 lines Fixes gtalk outbound DTMF to work properly.
	  Outbound DTMF with gtalk needs to be done within the RTP stream.
	  I discovered this after investigating a packet capture from the
	  gmail client. Instead of performing jingle signaling DTMF, the
	  gtalk servers expect all DTMF to arrive on the RTP stream using
	  RFC2833 way of doing things. Chan_gtalk also had an issue with
	  negotiating RTP payload type 106 for the telephony-event and then
	  sending DTMF as payload 101. This has been resolved by always
	  negotiating 101 as the payload type like we do everywhere else.
	  With this patch, incoming google voice calls forwarded to
	  Asterisk via gtalk work. ........

2010-10-06 18:56 +0000 [r290615]  Richard Mudgett <rmudgett@digium.com>

	* apps/app_dial.c, /: Merged revisions 290614 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r290614 | rmudgett | 2010-10-06 13:50:37 -0500
	  (Wed, 06 Oct 2010) | 12 lines Merged revision 290613 from
	  https://origsvn.digium.com/svn/asterisk/be/branches/C.3-bier
	  .......... r290613 | rmudgett | 2010-10-06 13:42:41 -0500 (Wed,
	  06 Oct 2010) | 5 lines Eliminate a redundant test for
	  AST_CONTROL_REDIRECTING. Eliminate redundant test for
	  AST_CONTROL_REDIRECTING that prevents running the redirecting
	  interception macro if it is defined. .......... ................

2010-10-06 13:50 +0000 [r290577]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, main/file.c: Merged revisions 290576 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r290576 | tilghman | 2010-10-06 08:49:19 -0500
	  (Wed, 06 Oct 2010) | 15 lines Merged revisions 290575 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r290575 | tilghman | 2010-10-06 08:48:27 -0500 (Wed, 06 Oct 2010)
	  | 8 lines Allow streaming audio from a pipe. (closes issue
	  #18001) Reported by: jamicque Patches:
	  20100926__issue18001.diff.txt uploaded by tilghman (license 14)
	  Tested by: jamicque ........ ................

2010-10-06 04:47 +0000 [r290543]  Terry Wilson <twilson@digium.com>

	* res/res_rtp_asterisk.c, /: Merged revisions 290542 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r290542 | twilson | 2010-10-05 21:35:51 -0700 (Tue, 05
	  Oct 2010) | 6 lines Don't try to send RTP when remote_address is
	  null It is possible for ast_rtp_stop() to be called which will
	  clear the remote address and cause the sendto to fail and spam
	  warnings. Don't send in this case. ........

2010-10-05 22:23 +0000 [r290480-290509]  David Vossel <dvossel@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 290506 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r290506 | dvossel | 2010-10-05 17:23:00 -0500 (Tue, 05
	  Oct 2010) | 2 lines Fixes uninitialized memory problem in 'iax2
	  set debug peer' option. ........

	* /, include/asterisk/jabber.h, include/asterisk/jingle.h,
	  channels/chan_gtalk.c, res/res_jabber.c: Merged revisions 290479
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r290479 | dvossel | 2010-10-05 17:00:43 -0500 (Tue, 05 Oct 2010)
	  | 6 lines Fixes chan_gtalk to work with gmail client This patch
	  was written by Philippe Sultan (phsultan). Thanks for keeping
	  this up to date! ........

2010-10-05 20:24 +0000 [r290414]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, res/res_jabber.c: Merged revisions 290408 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r290408 | tilghman | 2010-10-05 15:23:33 -0500
	  (Tue, 05 Oct 2010) | 22 lines Merged revisions 290396 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r290396 | tilghman | 2010-10-05 15:21:02 -0500
	  (Tue, 05 Oct 2010) | 15 lines Merged revisions 290392 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r290392 | tilghman | 2010-10-05 15:20:07 -0500 (Tue, 05 Oct 2010)
	  | 8 lines Fix a crash by ensuring that we don't alter memory
	  after it's freed. (closes issue #17387) Reported by: jmls
	  Patches: 20100726__issue17387.diff.txt uploaded by tilghman
	  (license 14) Tested by: jmls ........ ................
	  ................

2010-10-05 20:10 +0000 [r290377-290379]  David Vossel <dvossel@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 290378 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r290378 | dvossel | 2010-10-05 15:09:06 -0500 (Tue, 05
	  Oct 2010) | 11 lines Resolves dnsmgr memory corruption in
	  chan_iax2. (closes issue #17902) Reported by: afried Patches:
	  issue_17902.rev1.txt uploaded by russell (license 2) Tested by:
	  afried, russell, dvossel Review:
	  https://reviewboard.asterisk.org/r/965/ ........

	* /, apps/app_directed_pickup.c: Merged revisions 290376 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r290376 | dvossel | 2010-10-05 14:56:29 -0500
	  (Tue, 05 Oct 2010) | 16 lines Merged revisions 290375 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r290375 | dvossel | 2010-10-05 14:54:50 -0500 (Tue, 05 Oct 2010)
	  | 10 lines Fixes PickupChan() not working with full channel name.
	  (closes issue #18011) Reported by: schern Patches:
	  app_directed_pickup.c.2.patch uploaded by schern (license 995)
	  app_directed_pickup.c.trunk.patch uploaded by schern (license
	  995) Tested by: schern, dvossel ........ ................

2010-10-05 14:17 +0000 [r290067-290291]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, configure, configure.ac: Merged revisions 290289 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r290289 | tilghman | 2010-10-05 09:15:46 -0500 (Tue, 05
	  Oct 2010) | 2 lines Restore run directory for OS X, as well as
	  standardizing some other paths to Mac OS X. ........

	* res/ael/pval.c, main/pbx.c, pbx/ael/ael-test/ref.ael-vtest17, /,
	  pbx/ael/ael-test/ref.ael-ntest10, pbx/ael/ael-test/ref.ael-test1,
	  pbx/ael/ael-test/ref.ael-test2, pbx/ael/ael-test/ref.ael-test3,
	  pbx/ael/ael-test/ref.ael-test4, pbx/ael/ael-test/ref.ael-test5,
	  pbx/ael/ael-test/ref.ael-test19,
	  pbx/ael/ael-test/ref.ael-vtest13: Merged revisions 290255 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r290255 | tilghman | 2010-10-04 18:23:11 -0500
	  (Mon, 04 Oct 2010) | 18 lines Merged revisions 290254 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r290254 | tilghman | 2010-10-04 18:14:59 -0500 (Mon, 04 Oct 2010)
	  | 11 lines Change new pattern matcher to regard dashes the same
	  as the old pattern matcher -- as visual candy to be ignored. Also
	  change the AEL parser to not generate dashes within extensions,
	  as those dashes would be ignored. Update the AEL tests to match
	  this behavior. (closes issue #17366) Reported by: murf Patches:
	  20100727__issue17366.diff.txt uploaded by tilghman (license 14)
	  Tested by: tilghman ........ ................

	* /, configure, configure.ac: Merged revisions 290209 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r290209 | tilghman | 2010-10-04 15:23:13 -0500
	  (Mon, 04 Oct 2010) | 16 lines Merged revisions 290201 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r290201 | tilghman | 2010-10-04 15:22:03 -0500
	  (Mon, 04 Oct 2010) | 9 lines Merged revisions 290177 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r290177 | tilghman | 2010-10-04 15:15:26 -0500 (Mon, 04
	  Oct 2010) | 2 lines Fixing Mac OS X auto-builder. ........
	  ................ ................

	* /, configure, configure.ac: Merged revisions 290102 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r290102 | tilghman | 2010-10-03 16:08:45 -0500
	  (Sun, 03 Oct 2010) | 16 lines Merged revisions 290101 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r290101 | tilghman | 2010-10-03 16:06:58 -0500
	  (Sun, 03 Oct 2010) | 9 lines Merged revisions 290100 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r290100 | tilghman | 2010-10-03 16:04:29 -0500 (Sun, 03
	  Oct 2010) | 2 lines Automatically re-run configure test for
	  menuselect, when the relevant makeopts settings change. ........
	  ................ ................

	* pbx/pbx_spool.c, /: Merged revisions 290066 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r290066 | tilghman | 2010-10-03 15:02:29 -0500 (Sun, 03 Oct 2010)
	  | 8 lines Get notification only when file is closed, not when
	  created. (closes issue #17924) Reported by: mkeuter Patches:
	  asterisk-1.8-bugid17924.patch uploaded by abelbeck (license 946)
	  Tested by: abelbeck ........

2010-10-02 18:06 +0000 [r290027]  Kevin P. Fleming <kpfleming@digium.com>

	* contrib/scripts/get_mp3_source.sh, /: Merged revisions 290026 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r290026 | kpfleming | 2010-10-02 12:57:13 -0500 (Sat, 02 Oct
	  2010) | 6 lines Allow users to pass additional arguments to the
	  Subversion command that obtains the MP-3 source code. (reported
	  on IRC by jmls) ........

2010-10-02 08:58 +0000 [r289952]  Olle Johansson <oej@edvina.net>

	* main/manager.c, /: Merged revisions 289951 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r289951 | oej | 2010-10-02 10:56:08 +0200 (L√∂r,
	  02 Okt 2010) | 16 lines Merged revisions 289950 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r289950 | oej | 2010-10-02 10:52:03 +0200 (L√∂r,
	  02 Okt 2010) | 9 lines Merged revisions 289949 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r289949 | oej | 2010-10-02 10:50:05 +0200 (L√∂r, 02 Okt 2010) | 2
	  lines Add documentation for undocumented option to AMI action
	  originate ........ ................ ................

2010-10-02 04:54 +0000 [r289876]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, apps/app_voicemail.c: Merged revisions 289875 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r289875 | tilghman | 2010-10-01 23:46:43 -0500
	  (Fri, 01 Oct 2010) | 22 lines Merged revisions 289874 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r289874 | tilghman | 2010-10-01 23:45:49 -0500
	  (Fri, 01 Oct 2010) | 15 lines Merged revisions 289873 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r289873 | tilghman | 2010-10-01 23:42:08 -0500 (Fri, 01 Oct 2010)
	  | 8 lines When forwarding a message, a prepend means that the
	  filesystem will always have a better copy. (closes issue #17803)
	  Reported by: dpetersen Patches: 20100923__issue17803.diff.txt
	  uploaded by tilghman (license 14) Tested by: dpetersen ........
	  ................ ................

2010-10-02 02:46 +0000 [r289841]  Jeff Peeler <jpeeler@digium.com>

	* res/res_rtp_asterisk.c, main/rtp_engine.c, /,
	  channels/chan_sip.c, include/asterisk/rtp_engine.h: Merged
	  revisions 289840 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r289840 | jpeeler | 2010-10-01 21:43:45 -0500
	  (Fri, 01 Oct 2010) | 29 lines Merged revisions 289798 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r289798 | jpeeler | 2010-10-01 18:01:31 -0500
	  (Fri, 01 Oct 2010) | 22 lines Merged revisions 289797 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r289797 | jpeeler | 2010-10-01 17:58:38 -0500 (Fri, 01 Oct 2010)
	  | 15 lines Change RFC2833 DTMF event duration on end to report
	  actual elapsed time. The scenario here is with a non P2P early
	  media session. The reported time length of DTMF presses are
	  coming up short when sending to the remote side. Currently the
	  event duration is a running total that is incremented when
	  sending continuation packets. These continuation packets are only
	  triggered upon incoming media from the remote side, which means
	  that the running total probably is not going to end up matching
	  the actual length of time Asterisk received DTMF. This patch
	  changes the end event duration to be lengthened if it is detected
	  that the end event is going to come up short. Review:
	  https://reviewboard.asterisk.org/r/957/ ABE-2476 ........
	  ................ ................

2010-10-01 17:22 +0000 [r289732]  Paul Belanger <pabelanger@digium.com>

	* /, configs/jabber.conf.sample, res/res_jabber.c: Merged revisions
	  289718 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r289718 | pabelanger | 2010-10-01 13:19:49 -0400
	  (Fri, 01 Oct 2010) | 20 lines Merged revisions 289704 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r289704 | pabelanger | 2010-10-01 13:09:03 -0400
	  (Fri, 01 Oct 2010) | 13 lines Merged revisions 289703 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r289703 | pabelanger | 2010-10-01 13:03:11 -0400 (Fri, 01 Oct
	  2010) | 6 lines Disable debugging by default and reformat .config
	  file. Review: https://reviewboard.asterisk.org/r/929/ ........
	  ................ ................

2010-10-01 16:23 +0000 [r289702]  Jeff Peeler <jpeeler@digium.com>

	* /, channels/chan_sip.c: Merged revisions 289701 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r289701 | jpeeler | 2010-10-01 11:22:19 -0500
	  (Fri, 01 Oct 2010) | 28 lines Merged revisions 289700 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r289700 | jpeeler | 2010-10-01 11:21:04 -0500
	  (Fri, 01 Oct 2010) | 21 lines Merged revisions 289699 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r289699 | jpeeler | 2010-10-01 11:20:00 -0500 (Fri, 01 Oct 2010)
	  | 14 lines Ensure user portion of SIP URI matches dialplan when
	  using encoded characters. This commit takes a simliar approach to
	  288112 and checks the dialplan to determine the proper action for
	  an incoming contact header as to whether or not it should be
	  decoded or not. sip_new was blindly always decoding the
	  extension, which also caused the outgoing contact header to be
	  incorrect as well as failing to match the encoded extension in
	  the dialplan. (closes issue #17892) Reported by: wdoekes Patches:
	  bug17892-1.patch uploaded by jpeeler (license 325) Tested by:
	  wdoekes ........ ................ ................

2010-10-01 10:04 +0000 [r289623]  Stefan Schmidt <sst@sil.at>

	* channels/chan_sip.c: don't iterate through all dialogs to find
	  and delete old subscribes On every incoming subscribe there is a
	  iteration through all dialogs to find old subscribes and delete
	  them. This is slow and not RFC conform. This was only needed in
	  1.2 cause a subscribe was not deleted when a dialog was
	  destroyed, after 1.4 a subscribe get removed when its dialog is
	  destroyed. Review: https://reviewboard.asterisk.org/r/901/

2010-09-30 20:40 +0000 [r289588]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, tests/test_time.c, funcs/func_env.c, tests/test_utils.c,
	  res/res_agi.c, include/asterisk/localtime.h,
	  main/stdtime/localtime.c: Merged revisions 289543,289581 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r289543 | tilghman | 2010-09-30 12:50:52 -0500 (Thu, 30 Sep 2010)
	  | 2 lines More Solaris compatibility fixes ........ r289581 |
	  tilghman | 2010-09-30 15:23:10 -0500 (Thu, 30 Sep 2010) | 2 lines
	  Solaris fixes. ........

2010-09-30 19:54 +0000 [r289555]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 289554 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r289554 | mnicholson | 2010-09-30 14:53:10 -0500
	  (Thu, 30 Sep 2010) | 11 lines Merged revisions 289553 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r289553 | mnicholson | 2010-09-30 14:51:27 -0500 (Thu, 30 Sep
	  2010) | 4 lines Properly handle channel allocation failures duing
	  invites with replaces. ABE-2588 ........ ................

2010-09-30 19:35 +0000 [r289552]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_misdn.c, /: Merged revisions 289549 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r289549 | rmudgett | 2010-09-30 14:28:36 -0500
	  (Thu, 30 Sep 2010) | 17 lines Merged revision 289547 from
	  https://origsvn.digium.com/svn/asterisk/be/branches/C.3-bier
	  .......... r289547 | rmudgett | 2010-09-30 14:16:36 -0500 (Thu,
	  30 Sep 2010) | 10 lines In chan_misdn, the
	  DivertingLegInformation2 DivertingNr is garbage when the number
	  is restricted. The same thing happens with
	  DivertingLegInformation1 DivertedTo number. The
	  misdn_PresentedNumberUnscreened_extract() extracted the
	  Unscreened PartyNumber field unconditionally. It now checks the
	  presented number unscreened type to see if the PartyNumber was
	  even present. JIRA ABE-2595 .......... ................

2010-09-30 15:40 +0000 [r289427]  Russell Bryant <russell@digium.com>

	* /, apps/app_sms.c: Merged revisions 289426 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r289426 | russell | 2010-09-30 10:39:45 -0500
	  (Thu, 30 Sep 2010) | 22 lines Merged revisions 289425 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r289425 | russell | 2010-09-30 10:37:29 -0500
	  (Thu, 30 Sep 2010) | 15 lines Merged revisions 289424 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r289424 | russell | 2010-09-30 10:34:29 -0500 (Thu, 30 Sep 2010)
	  | 8 lines Fix a crash in app_sms. Since the data being passed to
	  the generator callback is on the stack of the SMS() application,
	  we must ensure that the generator is stopped before the
	  application exits. ABE-2587 ........ ................
	  ................

2010-09-29 21:19 +0000 [r289354]  Jason Parker <jparker@digium.com>

	* main/channel.c, /, main/features.c: Merged revisions 289340 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r289340 | qwell | 2010-09-29 16:12:43 -0500
	  (Wed, 29 Sep 2010) | 22 lines Merged revisions 289339 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r289339 | qwell | 2010-09-29 16:03:47 -0500
	  (Wed, 29 Sep 2010) | 15 lines Merged revisions 289338 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r289338 | qwell | 2010-09-29 15:56:26 -0500 (Wed, 29 Sep 2010) |
	  8 lines Allow a manager originate to succeed on forwarded
	  devices. The timeout to wait for an answer was being set to 0
	  when a device forwarded to another extension. We don't always
	  need the timeout set like this, so make it an optional parameter,
	  and don't use it in this case. ABE-2544 ........ ................
	  ................

2010-09-29 20:29 +0000 [r289337]  Leif Madsen <lmadsen@digium.com>

	* /, configs/res_ldap.conf.sample: Merged revisions 289336 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r289336 | lmadsen | 2010-09-29 15:27:25 -0500
	  (Wed, 29 Sep 2010) | 9 lines Merged revisions 289334 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r289334 | lmadsen | 2010-09-29 15:24:47 -0500 (Wed, 29
	  Sep 2010) | 1 line Update sample documentation to note md5secret
	  requirements. ........ ................

2010-09-29 20:24 +0000 [r289335]  Russell Bryant <russell@digium.com>

	* /, res/res_config_ldap.c: Merged revisions 289333 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r289333 | russell | 2010-09-29 15:20:23 -0500
	  (Wed, 29 Sep 2010) | 11 lines Merged revisions 289332 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r289332 | russell | 2010-09-29 15:15:57 -0500 (Wed, 29 Sep 2010)
	  | 4 lines Don't completely ignore md5secret from LDAP if the
	  value does not begin with {md5}. This fixes a problem that
	  lmadsen ran in to where md5secret was not working for him.
	  ........ ................

2010-09-29 17:54 +0000 [r289269-289301]  Matthew Nicholson <mnicholson@digium.com>

	* /, configs/res_fax.conf.sample: Merged revisions 289300 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r289300 | mnicholson | 2010-09-29 12:53:54 -0500 (Wed, 29 Sep
	  2010) | 2 lines Add 'ecm' to the sample fax config file ........

	* main/channel.c, /: Merged revisions 289268 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r289268 | mnicholson | 2010-09-29 12:08:20 -0500 (Wed, 29 Sep
	  2010) | 5 lines Update the CDR record when
	  ast_channel_set_caller_event() is called (related to issue
	  #17569) Reported by: tbelder ........

2010-09-29 16:17 +0000 [r289254]  Richard Mudgett <rmudgett@digium.com>

	* main/channel.c, /: Merged revisions 289253 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r289253 | rmudgett | 2010-09-29 11:16:47 -0500 (Wed, 29 Sep 2010)
	  | 1 line Make development error message indicate which channel.
	  ........

2010-09-29 15:07 +0000 [r289180]  Matthew Nicholson <mnicholson@digium.com>

	* main/channel.c, /: Merged revisions 289179 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r289179 | mnicholson | 2010-09-29 10:04:56 -0500
	  (Wed, 29 Sep 2010) | 22 lines Merged revisions 289178 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r289178 | mnicholson | 2010-09-29 10:04:11 -0500
	  (Wed, 29 Sep 2010) | 15 lines Merged revisions 289177 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r289177 | mnicholson | 2010-09-29 10:03:27 -0500 (Wed, 29 Sep
	  2010) | 8 lines Set the caller id on CDRs when it is set on the
	  parent channel. (closes issue #17569) Reported by: tbelder
	  Patches: 17569.diff uploaded by tbelder (license 618) Tested by:
	  tbelder ........ ................ ................

2010-09-28 18:24 +0000 [r289131]  Brett Bryant <bbryant@digium.com>

	* main/channel.c, /: Merged revisions 289099 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r289099 | bbryant | 2010-09-28 14:18:02 -0400
	  (Tue, 28 Sep 2010) | 28 lines Merged revisions 289095 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r289095 | bbryant | 2010-09-28 14:14:19 -0400
	  (Tue, 28 Sep 2010) | 21 lines Merged revisions 289094 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r289094 | bbryant | 2010-09-28 14:10:19 -0400 (Tue, 28 Sep 2010)
	  | 14 lines Fixes an issue with the Newchannel AMI event during
	  the Masquerading process. Fixes an issue with the Newchannel AMI
	  event during the Masquerading process, where no Newchannel AMI
	  event was generated for the psuedo channel used during the
	  masquerading process. (closes issue #17987) Reported by:
	  RadicAlish Patches: newchannel.patch.txt uploaded by RadicAlish
	  (license 1122) Tested by: RadicAlish Review:
	  https://reviewboard.asterisk.org/r/937/ ........ ................
	  ................

2010-09-28 18:20 +0000 [r289112]  Tilghman Lesher <tilghman@meg.abyt.es>

	* Makefile, /, tests/test_time.c, configure,
	  include/asterisk/autoconfig.h.in, include/asterisk/compat.h,
	  main/strcompat.c, tests/test_utils.c, configure.ac, makeopts.in,
	  apps/app_voicemail.c: Merged revisions 289104 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r289104 | tilghman | 2010-09-28 13:18:43 -0500 (Tue, 28 Sep 2010)
	  | 4 lines Solaris compatibility fixes Review:
	  https://reviewboard.asterisk.org/r/942/ ........

2010-09-28 01:10 +0000 [r289056-289058]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/sig_pri.c: Merged revisions 289057 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r289057 | rmudgett | 2010-09-27 20:04:37 -0500 (Mon, 27 Sep 2010)
	  | 5 lines Avoid deadlock processing incoming AOC-E messages.
	  Deadlock avoidance for the owner channel was not done when
	  processing incoming AOC-E messages. ........

	* /, channels/chan_sip.c: Merged revisions 289054-289055 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r289054 | rmudgett | 2010-09-27 19:32:18 -0500 (Mon, 27 Sep 2010)
	  | 1 line Break up long ast_manager_event_multichan() event lines.
	  ........ r289055 | rmudgett | 2010-09-27 19:35:25 -0500 (Mon, 27
	  Sep 2010) | 1 line Revert stuff not ready for commit in -r289054.
	  ........

2010-09-27 22:03 +0000 [r289023]  David Vossel <dvossel@digium.com>

	* channels/chan_sip.c: For an INVITE transaction, treat all 2XX
	  responses the same as a 200. ABE-2305

2010-09-27 19:45 +0000 [r288992-288993]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Formatting fixes

	* cdr/cdr_pgsql.c: Formating changes

2010-09-27 18:39 +0000 [r288962]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, channels/chan_sip.c: Merged revisions 288961 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r288961 | tilghman | 2010-09-27 13:37:41 -0500 (Mon, 27 Sep 2010)
	  | 5 lines Still build SIP, even if res_crypto cannot be built
	  (use, not depend). (closes issue #18062) Reported by: a user on
	  the mailing list ........

2010-09-27 13:04 +0000 [r288926-288928]  Russell Bryant <russell@digium.com>

	* /, res/res_agi.c: Merged revisions 288927 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r288927 | russell | 2010-09-27 08:03:43 -0500 (Mon, 27 Sep 2010)
	  | 2 lines Fix some documentation typos and spelling errors.
	  ........

	* /, res/res_agi.c: Merged revisions 288925 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r288925 | russell | 2010-09-27 07:42:10 -0500 (Mon, 27 Sep 2010)
	  | 2 lines Fix a documentation spelling error. ........

2010-09-25 07:58 +0000 [r288893]  Alexandr Anikin <may@telecom-service.ru>

	* addons/ooh323c/src/oochannels.c: small correction for verbose
	  print h.323 packets

2010-09-24 17:59 +0000 [r288822-288853]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 288852 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r288852 | dvossel | 2010-09-24 12:58:57 -0500 (Fri, 24 Sep 2010)
	  | 5 lines Append Retry-After header on 500 error response to
	  Re-INVITE according to RFC3261 section 14.2. ABE-2301 ........

	* /, channels/chan_sip.c: Merged revisions 288821 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r288821 | dvossel | 2010-09-24 12:05:12 -0500 (Fri, 24 Sep 2010)
	  | 4 lines Inspect Require header on BYE transaction according to
	  RFC3261 section 8.2.2.3. ABE-2293 ........

2010-09-24 16:11 +0000 [r288749]  Terry Wilson <twilson@digium.com>

	* channels/chan_local.c, /: Merged revisions 288748 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r288748 | twilson | 2010-09-24 09:02:27 -0700
	  (Fri, 24 Sep 2010) | 19 lines Merged revisions 288747 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r288747 | twilson | 2010-09-24 08:37:39 -0700
	  (Fri, 24 Sep 2010) | 12 lines Merged revisions 288746 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r288746 | twilson | 2010-09-24 08:26:09 -0700 (Fri, 24 Sep 2010)
	  | 5 lines Don't fail a masquerade if it is already being hung up
	  This avoids noise on some Local channel situations where we don't
	  use /n. Thanks to Alec Davis for the suggestion. ........
	  ................ ................

2010-09-24 13:55 +0000 [r288607-288714]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, funcs/func_strings.c: Merged revisions 288713 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r288713 | tilghman | 2010-09-24 08:54:17 -0500
	  (Fri, 24 Sep 2010) | 12 lines Merged revisions 288712 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r288712 | tilghman | 2010-09-24 08:53:30 -0500 (Fri, 24 Sep 2010)
	  | 5 lines Solaris won't printf a NULL. (closes issue #18041)
	  Reported by: asgaroth ........ ................

	* /, main/asterisk.exports.in: Merged revisions 288640 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r288640 | tilghman | 2010-09-23 22:42:37 -0500 (Thu, 23
	  Sep 2010) | 2 lines Export timersub for platforms which do not
	  have it ........

	* /, configure, include/asterisk/autoconfig.h.in,
	  include/asterisk/compat.h, main/strcompat.c, configure.ac,
	  include/asterisk/channel.h, cdr/cdr_pgsql.c: Merged revisions
	  288638 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r288638 | tilghman | 2010-09-23 22:39:29 -0500
	  (Thu, 23 Sep 2010) | 16 lines Merged revisions 288637 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r288637 | tilghman | 2010-09-23 22:36:01 -0500
	  (Thu, 23 Sep 2010) | 9 lines Merged revisions 288636 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r288636 | tilghman | 2010-09-23 22:20:24 -0500 (Thu, 23
	  Sep 2010) | 2 lines Solaris compatibility fixes ........
	  ................ ................

	* /, CHANGES: Merged revisions 288606 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r288606 | tilghman | 2010-09-23 13:44:44 -0500 (Thu, 23 Sep 2010)
	  | 2 lines Add note about the checkhangup option of ${CHANNEL()}
	  ........

2010-09-23 18:08 +0000 [r288519-288573]  Terry Wilson <twilson@digium.com>

	* main/manager.c, /: Merged revisions 288572 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r288572 | twilson | 2010-09-23 13:05:16 -0500 (Thu, 23 Sep 2010)
	  | 2 lines Make AMI honor enabled=no ........

	* channels/chan_local.c, /: Merged revisions 288507 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r288507 | twilson | 2010-09-22 16:18:27 -0700
	  (Wed, 22 Sep 2010) | 22 lines Merged revisions 288500 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r288500 | twilson | 2010-09-22 16:10:09 -0700
	  (Wed, 22 Sep 2010) | 15 lines Merged revisions 288499 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r288499 | twilson | 2010-09-22 16:00:30 -0700 (Wed, 22 Sep 2010)
	  | 8 lines Don't let a Local channel get bridged to itself If a
	  local channel gets bridged to itself, it becomes orphaned with no
	  devices left to actually tell it to hang up. This patch modifies
	  local_fixup() to detect this case and deny it. Review:
	  https://reviewboard.asterisk.org/r/934 ........ ................
	  ................

2010-09-22 17:50 +0000 [r288346-288419]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 288418 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r288418 | dvossel | 2010-09-22 12:49:56 -0500
	  (Wed, 22 Sep 2010) | 18 lines Merged revisions 288417 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r288417 | dvossel | 2010-09-22 12:49:05 -0500
	  (Wed, 22 Sep 2010) | 11 lines Merged revisions 288416 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r288416 | dvossel | 2010-09-22 12:48:15 -0500 (Wed, 22 Sep 2010)
	  | 5 lines RFC3261 section 12.2 explicitly says out of order
	  requests are responded with a 500 Server Internal Error response.
	  ABE-2458 ........ ................ ................

	* /, channels/chan_sip.c: Merged revisions 288345 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r288345 | dvossel | 2010-09-22 11:59:14 -0500
	  (Wed, 22 Sep 2010) | 16 lines Merged revisions 288344 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r288344 | dvossel | 2010-09-22 11:53:28 -0500
	  (Wed, 22 Sep 2010) | 9 lines Merged revisions 288343 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r288343 | dvossel | 2010-09-22 11:49:56 -0500 (Wed, 22
	  Sep 2010) | 2 lines During check_pendings, if the dialog is
	  terminated with a CANCEL, change the invitestate to INV_CANCEL
	  like in sip_hangup. ........ ................ ................

2010-09-22 16:46 +0000 [r288342]  Russell Bryant <russell@digium.com>

	* /, main/asterisk.c: Merged revisions 288341 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r288341 | russell | 2010-09-22 11:45:18 -0500
	  (Wed, 22 Sep 2010) | 25 lines Merged revisions 288340 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r288340 | russell | 2010-09-22 11:44:13 -0500
	  (Wed, 22 Sep 2010) | 18 lines Merged revisions 288339 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r288339 | russell | 2010-09-22 11:39:16 -0500 (Wed, 22 Sep 2010)
	  | 11 lines Fix a 100% CPU consumption problem when setting
	  console=yes in asterisk.conf. The handling of -c and console=yes
	  should be the same, but they were not. When you specify -c, it
	  sets both a flag for console module and for asterisk not to
	  fork() off into the background. The handling of console=yes only
	  set console mode, so you would end up with a background process()
	  trying to run the Asterisk console and freaking out since it
	  didn't have anything to read input from. Thanks to beagles for
	  reporting and helping debug the problem! ........
	  ................ ................

2010-09-22 15:18 +0000 [r288278]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, cdr/cdr_pgsql.c, configs/cdr_pgsql.conf.sample: Merged
	  revisions 288268 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r288268 | tilghman | 2010-09-22 10:14:02 -0500
	  (Wed, 22 Sep 2010) | 30 lines Merged revisions 288267 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r288267 | tilghman | 2010-09-22 10:11:09 -0500
	  (Wed, 22 Sep 2010) | 23 lines Merged revisions 288265-288266 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r288265 | tilghman | 2010-09-22 09:48:04 -0500 (Wed, 22 Sep 2010)
	  | 9 lines Allow the encoding to be set, in case local charset
	  does not agree with database. (closes issue #16940) Reported by:
	  jamicque Patches: 20100827__issue16940.diff.txt uploaded by
	  tilghman (license 14) 20100921__issue16940__1.6.2.diff.txt
	  uploaded by tilghman (license 14) Tested by: jamicque ........
	  r288266 | tilghman | 2010-09-22 10:04:52 -0500 (Wed, 22 Sep 2010)
	  | 5 lines Document addition of encoding parameter. (issue #16940)
	  Reported by: jamicque ........ ................ ................

2010-09-22 00:08 +0000 [r288195]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 288194 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r288194 | rmudgett | 2010-09-21 19:06:21 -0500
	  (Tue, 21 Sep 2010) | 40 lines Merged revisions 288193 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r288193 | rmudgett | 2010-09-21 19:03:37 -0500
	  (Tue, 21 Sep 2010) | 33 lines Merged revisions 288192 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r288192 | rmudgett | 2010-09-21 18:55:58 -0500 (Tue, 21 Sep 2010)
	  | 26 lines In chan_iax2.c:schedule_delivery() calls
	  ast_bridged_channel() on an unlocked channel. Near the beginning
	  of schedule_delivery(), ast_bridged_channel() is called on
	  iaxs[fr->callno]->owner. However, the channel is not locked,
	  which can result in ast_bridged_channel() crashing should
	  owner->tech change to a technology that doesn't implement
	  bridged_channel. I also fixed the other calls to
	  ast_bridged_channel() in chan_iax2.c since the owner lock was not
	  held there either. Converted the existing channel deadlock
	  avoidance to use iax2_lock_owner(). Using the new function
	  simplified some awkward code. In the process of fixing the
	  locking on ast_bridged_channel(), I also found a memory leak in
	  socket_process() for v1.6.2 and v1.8. The local struct variable
	  ies.vars is not freed on early/abnormal function exits. (closes
	  issue #17919) Reported by: rain Patches: issue17919_v1.4.patch
	  uploaded by rmudgett (license 664) issue17919_w_leak_v1.6.2.patch
	  uploaded by rmudgett (license 664) issue17919_w_leak_v1.8.patch
	  uploaded by rmudgett (license 664) Review:
	  https://reviewboard.asterisk.org/r/926/ ........ ................
	  ................

2010-09-21 22:58 +0000 [r288160]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, channels/chan_sip.c: Merged revisions 288159 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r288159 | tilghman | 2010-09-21 17:57:22 -0500
	  (Tue, 21 Sep 2010) | 29 lines Merged revisions 288113 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r288113 | tilghman | 2010-09-21 16:59:46 -0500
	  (Tue, 21 Sep 2010) | 22 lines Merged revisions 288112 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r288112 | tilghman | 2010-09-21 16:58:13 -0500 (Tue, 21 Sep 2010)
	  | 15 lines Try both the encoded and unencoded subscription URI
	  for a match in hints. When a phone sends an encoded URI for a
	  subscription, the URI is not matched with the actual hint that is
	  in decoded format. For example, if we have an extension with a
	  hint that is named: "#5601" or "*5601", the subscription will
	  work fine if the phone subscribes with an already decoded URI,
	  but when it's decoded like "%255601" or "%2A5601", Asterisk is
	  unable to match it with the correct hint. (closes issue #17785)
	  Reported by: ramonpeek Patches: 20100831__issue17785.diff.txt
	  uploaded by tilghman (license 14) Tested by: ramonpeek ........
	  ................ ................

2010-09-21 22:28 +0000 [r288158]  Paul Belanger <pabelanger@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 288157 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r288157 | pabelanger | 2010-09-21 18:26:15 -0400
	  (Tue, 21 Sep 2010) | 15 lines Merged revisions 288147 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r288147 | pabelanger | 2010-09-21 18:22:43 -0400 (Tue, 21 Sep
	  2010) | 9 lines Setup timer before set_config(). (closes issue
	  #18019) Reported by: Netview Patches: issue_0018019.patch
	  uploaded by pabelanger (license 224) Tested by: Netview ........
	  ................

2010-09-21 21:04 +0000 [r288081-288083]  Richard Mudgett <rmudgett@digium.com>

	* /, doc/tex/partymanip.tex: Merged revisions 288082 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r288082 | rmudgett | 2010-09-21 16:03:28 -0500 (Tue, 21
	  Sep 2010) | 1 line Add note in party manipulation chapter on
	  interception macros. ........

	* apps/app_dial.c, main/channel.c, /, apps/app_queue.c: Merged
	  revisions 288079-288080 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r288079 | rmudgett | 2010-09-21 15:29:51 -0500 (Tue, 21 Sep 2010)
	  | 2 lines Protect channel access in CONNECTED_LINE and
	  REDIRECTING interception macro launch code. ........ r288080 |
	  rmudgett | 2010-09-21 15:29:59 -0500 (Tue, 21 Sep 2010) | 8 lines
	  Simplify locking code for REDIRECTING interception macro when
	  forwarding a call. Simplified the locking code by using a local
	  copy of the redirecting party information in
	  app_dial.c:do_forward() and app_queue.c:wait_for_answer() for
	  launching the REDIRECTING interception macro when a call is
	  forwarded. Reduced the lock time of the 'o->chan' and 'in'
	  channels. ........

2010-09-21 20:27 +0000 [r288063]  Stefan Schmidt <sst@sil.at>

	* channels/chan_sip.c: Instead of iterate through all dialogs, add
	  two separte container for needdestroy and rtptimeout adding two
	  dialog container, one for dialogs which need destroy, another for
	  rtptimeout checks. both container will be checked on every loop
	  of do_monitor instead of iterate through all dialogs. (closes
	  issue #17912) Reported by: schmidts Tested by: schmidts Review:
	  https://reviewboard.asterisk.org/r/917/

2010-09-21 19:50 +0000 [r288008]  Brett Bryant <bbryant@digium.com>

	* main/channel.c, /: Merged revisions 288007 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r288007 | bbryant | 2010-09-21 15:48:53 -0400
	  (Tue, 21 Sep 2010) | 21 lines Merged revisions 288006 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r288006 | bbryant | 2010-09-21 15:46:20 -0400
	  (Tue, 21 Sep 2010) | 14 lines Merged revisions 288005 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r288005 | bbryant | 2010-09-21 15:43:46 -0400 (Tue, 21 Sep 2010)
	  | 8 lines Add a check to fix a rare segmentation fault you'd get
	  if ast_frdup couldn't allocate memory on the first frame being
	  queued in ast_queue_frame. (closes issue #17882) Reported by:
	  seanbright Tested by: seanbright ........ ................
	  ................

2010-09-21 19:09 +0000 [r287936]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, main/asterisk.c: Merged revisions 287935 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r287935 | tilghman | 2010-09-21 14:08:36 -0500
	  (Tue, 21 Sep 2010) | 16 lines Merged revisions 287934 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r287934 | tilghman | 2010-09-21 14:07:53 -0500
	  (Tue, 21 Sep 2010) | 9 lines Merged revisions 287933 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r287933 | tilghman | 2010-09-21 14:07:07 -0500 (Tue, 21
	  Sep 2010) | 2 lines Less than zero is an error, not any non-zero
	  value. ........ ................ ................

2010-09-21 19:04 +0000 [r287932]  Terry Wilson <twilson@digium.com>

	* main/channel.c, /: Merged revisions 287931 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r287931 | twilson | 2010-09-21 14:02:40 -0500 (Tue, 21 Sep 2010)
	  | 2 lines Revert change in favor of a more targeted fix ........

2010-09-21 18:33 +0000 [r287930]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 287929 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r287929 | dvossel | 2010-09-21 13:32:12 -0500 (Tue, 21 Sep 2010)
	  | 4 lines Send a "415 Unsupported Media Type" after failure to
	  process sdp due to unknown Content-Encoding header. ABE-2258
	  ........

2010-09-21 15:54 +0000 [r287898]  Richard Mudgett <rmudgett@digium.com>

	* /, main/features.c: Merged revisions 287897 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r287897 | rmudgett | 2010-09-21 10:53:19 -0500 (Tue, 21 Sep 2010)
	  | 1 line Cut-n-paste error in builtin_blindtransfer(). ........

2010-09-21 15:45 +0000 [r287896]  Russell Bryant <russell@digium.com>

	* res/res_rtp_asterisk.c, main/dnsmgr.c, /, channels/chan_sip.c,
	  main/acl.c: Merged revisions 287895 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r287895 | russell | 2010-09-21 10:43:33 -0500 (Tue, 21 Sep 2010)
	  | 10 lines Don't use ast_strdupa() from within the arguments to a
	  function. (closes issue #17902) Reported by: afried Patches:
	  issue_17902.rev1.txt uploaded by russell (license 2) Tested by:
	  russell Review: https://reviewboard.asterisk.org/r/927/ ........

2010-09-21 15:27 +0000 [r287894]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, channels/chan_sip.c: Merged revisions 287893 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r287893 | tilghman | 2010-09-21 10:24:47 -0500 (Tue, 21 Sep 2010)
	  | 9 lines Anonymous callerid needs a "sip:" uri prefix. (closes
	  issue #17981) Reported by: avalentin Patches:
	  sip-anonymous-aastra.patch uploaded by avalentin (license 1107)
	  (plus an additional fix by me) Tested by: avalentin ........

2010-09-21 13:45 +0000 [r287864]  Russell Bryant <russell@digium.com>

	* /, main/logger.c: Merged revisions 287863 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r287863 | russell | 2010-09-21 08:41:41 -0500 (Tue, 21 Sep 2010)
	  | 2 lines Fix a regression in verbose logger processing. ........

2010-09-21 04:39 +0000 [r287764-287834]  Terry Wilson <twilson@digium.com>

	* main/channel.c, /: Merged revisions 287833 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r287833 | twilson | 2010-09-20 23:37:44 -0500 (Mon, 20 Sep 2010)
	  | 3 lines Don't generate connected line buffer twice for
	  comparison ........

	* main/channel.c, /: Merged revisions 287757 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r287757 | twilson | 2010-09-20 18:51:38 -0500 (Mon, 20 Sep 2010)
	  | 7 lines Avoid infinite loop with certain local channel
	  connected line updates Compare connected line data before sending
	  a connected line indication to avoid possible loops. Review:
	  https://reviewboard.asterisk.org/r/932/ ........

2010-09-21 00:04 +0000 [r287763]  Brett Bryant <bbryant@digium.com>

	* /, apps/app_meetme.c: Merged revisions 287760 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r287760 | bbryant | 2010-09-20 20:00:23 -0400
	  (Mon, 20 Sep 2010) | 30 lines Merged revisions 287759 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r287759 | bbryant | 2010-09-20 19:58:26 -0400
	  (Mon, 20 Sep 2010) | 23 lines Merged revisions 287758 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r287758 | bbryant | 2010-09-20 19:57:08 -0400 (Mon, 20 Sep 2010)
	  | 16 lines Fix misvalidation of meetme pins in conjunction with
	  the 'a' MeetMe flag. When using the 'a' MeetMe flag and having a
	  user and admin pin setup for your conference, using the user pin
	  would gain you admin priviledges. Also, when no user pin was set,
	  an admin pin was, the 'a' MeetMe flag wasn't used, and the user
	  tried to enter a conference then they were still prompted for a
	  pin and forced to hit #. (closes issue #17908) Reported by: kuj
	  Patches: pins_2.patch uploaded by kuj (license 1111) Tested by:
	  kuj Review: [full review board URL with trailing slash] ........
	  ................ ................

2010-09-21 00:01 +0000 [r287761-287762]  Terry Wilson <twilson@digium.com>

	* /: Add alecdavis' commit to merged props

	* /: Add merge properties back.

2010-09-20 23:42 +0000 [r287756]  Alec L Davis <sivad.a@paradise.net.nz>

	* main/channel.c, /: Merged revisions 287685 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r287685 | alecdavis | 2010-09-21 11:16:45 +1200 (Tue, 21 Sep
	  2010) | 18 lines ast_channel_masquerade: Avoid recursive
	  masquerades. Check all 4 combinations of (original/clonechan) *
	  (masq/masqr). Initially original->masq and clonechan->masqr were
	  only checked. It's possible with multiple masq's planned - and
	  not yet executed, that the 'original' chan could already have
	  another masq'd into it - thus original->masqr would be set, that
	  masqr would lost. Likewise for the clonechan->masq. (closes issue
	  #16057;#17363) Reported by: amorsen;davidw,alecdavis Patches:
	  based on bug16057.diff4.txt uploaded by alecdavis (license 585)
	  Tested by: ramonpeek, davidw, alecdavis ........

2010-09-20 23:18 +0000 [r287693]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 287683 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r287683 | rmudgett | 2010-09-20 18:14:42 -0500 (Mon, 20
	  Sep 2010) | 9 lines The inalarm flag was not set in sig_analog
	  struct if the port is initially in alarm. Fixed initial inalarm
	  value for sig_analog ports. Along with -r261007, this gets the
	  inalarm flag in sync with chan_dahdi for sig_analog ports.
	  (closes issue #16983) ........

2010-09-20 22:24 +0000 [r287671]  Alec L Davis <sivad.a@paradise.net.nz>

	* main/channel.c, /: Merged revisions 287661 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r287661 | alecdavis | 2010-09-21 10:21:50 +1200 (Tue, 21 Sep
	  2010) | 14 lines ast_do_masquerade. Keep channels ao2_container
	  locked while unlink and linking channels. Previously, Masquerade
	  would unlock 'original' and 'clonechan' and allow another masq
	  thread to run. End result would be corrupted memory, and the
	  frequent report 'Bad Magic Number'. (closes issue #17801,#17710)
	  Reported by: notthematrix Patches: Based on bug17801.diff1.txt
	  uploaded by alecdavis (license 585) Tested by: alecdavis Review:
	  https://reviewboard.asterisk.org/r/928 ........

2010-09-20 22:16 +0000 [r287646-287648]  David Vossel <dvossel@digium.com>

	* main/channel.c, main/framehook.c (added), /,
	  funcs/func_frame_trace.c (added), include/asterisk/channel.h,
	  CHANGES, include/asterisk/framehook.h (added): Merged revisions
	  287647 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r287647 | dvossel | 2010-09-20 17:09:16 -0500 (Mon, 20 Sep 2010)
	  | 21 lines Addition of the FrameHook API (AKA AwesomeHooks) So
	  far all our tools for viewing and manipulating media streams
	  within Asterisk have been entirely focused on audio. That made
	  sense then, but is not scalable now. The FrameHook API lets us
	  tap into and manipulate _ANY_ type of media or signaling passed
	  on a channel present today or in the future. This tool is a step
	  in the direction of expanding Asterisk's boundaries and will help
	  generate some rather interesting applications in the future. In
	  addition to the FrameHook API, a simple dialplan function
	  exercising the api has been included as well. This function is
	  called FRAME_TRACE(). FRAME_TRACE() allows for the internal
	  ast_frames read and written to a channel to be output. Filters
	  can be placed on this function to debug only certain types of
	  frames. This function could be thought of as an internal way of
	  doing ast_frame packet captures. Review:
	  https://reviewboard.asterisk.org/r/925/ ........

	* /, channels/chan_sip.c: Merged revisions 287645 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r287645 | dvossel | 2010-09-20 16:34:15 -0500 (Mon, 20 Sep 2010)
	  | 9 lines Fixes issue with registrations not working properly
	  with pedantic=yes. (closes issue #18017) Reported by: schmidts
	  Patches: issues_18017_v1.diff uploaded by dvossel (license 671)
	  Tested by: schmidts ........

2010-09-20 21:30 +0000 [r287644]  Jason Parker <jparker@digium.com>

	* /, channels/chan_skinny.c: Merged revisions 287643 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r287643 | qwell | 2010-09-20 16:29:46 -0500
	  (Mon, 20 Sep 2010) | 15 lines Merged revisions 287642 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r287642 | qwell | 2010-09-20 16:28:32 -0500 (Mon, 20 Sep 2010) |
	  8 lines Don't crash when parking a non-bridged call. (closes
	  issue #17680) Reported by: jmhunter Patches:
	  chan_skinny-park-v1.txt uploaded by DEA (license 3) Tested by:
	  jmhunter, DEA ........ ................

2010-09-20 21:25 +0000 [r287640]  Brett Bryant <bbryant@digium.com>

	* /, main/logger.c: Merged revisions 287639 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r287639 | bbryant | 2010-09-20 17:19:12 -0400 (Mon, 20 Sep 2010)
	  | 8 lines Fixes an error with the logger that caused verbose
	  messages to be spammed to the screen if syslog was configured in
	  logger.conf (closes issue #17974) Reported by: lmadsen Review:
	  https://reviewboard.asterisk.org/r/915/ ........

2010-09-20 15:57 +0000 [r287560]  Matthew Nicholson <mnicholson@digium.com>

	* main/pbx.c, /: Merged revisions 287559 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r287559 | mnicholson | 2010-09-20 10:57:14 -0500
	  (Mon, 20 Sep 2010) | 21 lines Merged revisions 287558 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r287558 | mnicholson | 2010-09-20 10:56:21 -0500
	  (Mon, 20 Sep 2010) | 14 lines Use ast_str when processing hint
	  state changes Merged revisions 287555 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r287555 | mnicholson | 2010-09-20 10:48:14 -0500 (Mon, 20 Sep
	  2010) | 5 lines Use ast_dynamic_str when processing hint state
	  changes (related to issue #17928) Reported by: mdu113 ........
	  ................ ................

2010-09-19 16:12 +0000 [r287472]  Olle Johansson <oej@edvina.net>

	* main/manager.c, /: Merged revisions 287471 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r287471 | oej | 2010-09-19 18:09:28 +0200 (S√∂n,
	  19 Sep 2010) | 21 lines Merged revisions 287470 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r287470 | oej | 2010-09-19 18:06:10 +0200 (S√∂n,
	  19 Sep 2010) | 14 lines Merged revisions 287469 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r287469 | oej | 2010-09-19 17:56:50 +0200 (S√∂n, 19 Sep 2010) | 7
	  lines Make sure we always free variables properly in manager
	  originate. (closes issue #17891) reported, solved and tested by
	  oej Review: https://reviewboard.asterisk.org/r/869/ ........
	  ................ ................

2010-09-17 21:10 +0000 [r287389]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, apps/app_queue.c: Merged revisions 287388 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r287388 | tilghman | 2010-09-17 16:08:54 -0500
	  (Fri, 17 Sep 2010) | 21 lines Merged revisions 287387 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r287387 | tilghman | 2010-09-17 16:08:00 -0500
	  (Fri, 17 Sep 2010) | 14 lines Merged revisions 287386 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r287386 | tilghman | 2010-09-17 16:06:03 -0500 (Fri, 17 Sep 2010)
	  | 7 lines Blank columns should get set on reload, not ignored.
	  (closes issue #16893) Reported by: haakon Patches:
	  20100818__issue16893.diff.txt uploaded by tilghman (license 14)
	  ........ ................ ................

2010-09-17 13:38 +0000 [r287310]  Matthew Nicholson <mnicholson@digium.com>

	* main/pbx.c, /: Merged revisions 287309 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r287309 | mnicholson | 2010-09-17 08:37:10 -0500
	  (Fri, 17 Sep 2010) | 19 lines Merged revisions 287308 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r287308 | mnicholson | 2010-09-17 08:36:07 -0500
	  (Fri, 17 Sep 2010) | 12 lines Merged revisions 287307 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r287307 | mnicholson | 2010-09-17 08:34:34 -0500 (Fri, 17 Sep
	  2010) | 5 lines Use ast_strdup() instead of ast_strdupa() while
	  processing in ast_hint_state_changed(). (related to issue #17928)
	  Reported by: mdu113 ........ ................ ................

2010-09-17 08:46 +0000 [r287272]  Jan Kalab <pitlicek@gmail.com>

	* res/res_calendar_exchange.c, res/res_calendar_icalendar.c, /,
	  res/res_calendar_caldav.c, res/res_calendar_ews.c: Merged
	  revisions 287269-287271 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r287269 | pitel | 2010-09-17 10:37:49 +0200 (P√°, 17 z√°≈ô 2010) | 8
	  lines Support for HTTP redirects in calendar's URL libneon does
	  not support HTTP redirects (3xx responses) by default. You must
	  tell it to follow them. Also, another little unsigned int fix.
	  (closes issue #17776) Review:
	  https://reviewboard.asterisk.org/r/921/ ........ r287270 | pitel
	  | 2010-09-17 10:42:37 +0200 (P√°, 17 z√°≈ô 2010) | 6 lines Asterisk
	  crashing because of double free when EWS request fails The free
	  is done later in code. I think ast_free() should have built in
	  checks for double free. (closes issue #17782) ........ r287271 |
	  pitel | 2010-09-17 10:44:28 +0200 (P√°, 17 z√°≈ô 2010) | 6 lines
	  Events are visible after they were removed from EWS calendar
	  Because we must merge calendar even when it's empty. (closes
	  issue #17786) ........

2010-09-16 22:05 +0000 [r287196]  Jason Parker <jparker@digium.com>

	* contrib/init.d/rc.debian.asterisk, /: Merged revisions 287195 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r287195 | qwell | 2010-09-16 17:04:38 -0500 (Thu, 16 Sep 2010) |
	  7 lines Don't fail when running the Debian init script directly
	  (as one would normally do). readlink apparently returns 1 when
	  the arg isn't a symlink, which caused the script to exit. (closes
	  issue #17910) Reported by: wurstsalat ........

2010-09-16 22:00 +0000 [r287194]  Russell Bryant <russell@digium.com>

	* /, configs/queues.conf.sample, apps/app_queue.c, UPGRADE-1.8.txt:
	  Merged revisions 287193 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r287193 | russell | 2010-09-16 16:57:51 -0500 (Thu, 16 Sep 2010)
	  | 4 lines Set the default for "autofill" and "shared_lastcall" to
	  "yes" in queues.conf. Review:
	  https://reviewboard.asterisk.org/r/922/ ........

2010-09-16 20:08 +0000 [r287117-287121]  Matthew Nicholson <mnicholson@digium.com>

	* main/pbx.c, /: Merged revisions 287120 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r287120 | mnicholson | 2010-09-16 15:07:38 -0500
	  (Thu, 16 Sep 2010) | 22 lines Merged revisions 287119 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r287119 | mnicholson | 2010-09-16 15:06:16 -0500
	  (Thu, 16 Sep 2010) | 15 lines Merged revisions 287118 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r287118 | mnicholson | 2010-09-16 15:04:46 -0500 (Thu, 16 Sep
	  2010) | 8 lines Don't limit hint processing in
	  ast_hint_state_changed() to AST_MAX_EXTENSION length strings.
	  (closes issue #17928) Reported by: mdu113 Patches:
	  20100831__issue17928.diff.txt uploaded by tilghman (license 14)
	  Tested by: mdu113 ........ ................ ................

	* main/cdr.c, /: Merged revisions 287116 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r287116 | mnicholson | 2010-09-16 14:54:48 -0500
	  (Thu, 16 Sep 2010) | 22 lines Merged revisions 287115 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r287115 | mnicholson | 2010-09-16 14:53:41 -0500
	  (Thu, 16 Sep 2010) | 15 lines Merged revisions 287114 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r287114 | mnicholson | 2010-09-16 14:52:39 -0500 (Thu, 16 Sep
	  2010) | 8 lines Don't stop printing cdr variables if we encounter
	  one with a blank name or value. (closes issue #17900) Reported
	  by: under Patches: core-show-channel-cdr-fix1.diff uploaded by
	  mnicholson (license 96) Tested by: mnicholson ........
	  ................ ................

2010-09-16 16:49 +0000 [r287086-287087]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: We do not handle AST_CAUSE_INTERWORKING
	  which we set on a lot of incoming SIP messages. Adding error
	  based on RFC 3398 recommendations.

	* main/indications.c: Add doxygen docs for indications.c

2010-09-15 22:28 +0000 [r287057]  Terry Wilson <twilson@digium.com>

	* /, res/res_srtp.c: Merged revisions 287056 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r287056 | twilson | 2010-09-15 17:17:17 -0500 (Wed, 15 Sep 2010)
	  | 10 lines Don't hang up a call on an SRTP unprotect failure Also
	  make it more obvious when there is an issue en/decrypting.
	  (closes issue #17563) Reported by: Alexcr Patches:
	  res_srtp.c.patch uploaded by sfritsch (license 1089) Tested by:
	  twilson ........

2010-09-15 21:00 +0000 [r287021]  Jeff Peeler <jpeeler@digium.com>

	* /, main/features.c: Merged revisions 287020 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r287020 | jpeeler | 2010-09-15 15:58:39 -0500 (Wed, 15 Sep 2010)
	  | 1 line fix uninintialized variable ........

2010-09-15 20:56 +0000 [r287018]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_misdn.c, /, channels/misdn/isdn_msg_parser.c:
	  Merged revisions 287017 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r287017 | rmudgett | 2010-09-15 15:53:38 -0500
	  (Wed, 15 Sep 2010) | 65 lines Merged revision 287014 from
	  https://origsvn.digium.com/svn/asterisk/be/branches/C.3-bier
	  .......... r287014 | rmudgett | 2010-09-15 15:32:24 -0500 (Wed,
	  15 Sep 2010) | 58 lines The handling of call transfer signaling
	  for mISDN PTMP is not fully implemented. The handling of call
	  transfer signaling for mISDN PTMP is not fully implemented. The
	  signaling of number updates with ISDN/DSS1 ECT supplementary
	  services (ETS 300 369-1) comes along with a notification
	  indicator IE and redirection number IE for PTMP. The
	  implementation in the current Asterisk mISDN channel
	  unfortunately can handle these information elements only in a
	  NOTIFY message. These information elements are also signaled in a
	  FACILTY message with a RequestSubaddress facility, when the
	  subscriber is already in the active state (see 9.2.4 and 9.2.5 of
	  ETS 300 369-1). ********** abe_2526_ast.patch * Added support to
	  handle the notification indicator IE and redirection number IE
	  with the RequestSubaddress facility. * Made
	  misdn_update_connected_line() send a NOTIFY message if Asterisk
	  originated the call and it is not connected yet. * Made
	  misdn_update_connected_line() send a FACILITY message if the call
	  is already connected. This patch requires the presence of the
	  associated mISDN patches to compile. I had to enhance mISDN to
	  allow the notification indicator IE and the redirection number IE
	  to be used with a FACILITY message. Earlier versions of the
	  Digium enhanced mISDN are no longer going to work. **********
	  abe_2526_misdn.patch * Made an incoming FACILITY message allow
	  the presence of the notification indicator IE and the redirection
	  number IE. ********** abe_2526_misdnuser_v3.patch * Added support
	  to send and receive a FACILITY message with the notification
	  indicator IE and the redirection number IE. * Added the ability
	  to send a NOTIFY message in PTMP/NT mode to all responding
	  subcalls in Q.931 states 6, 7, 8, 9, and 25. ********** Patches:
	  abe_2526_ast.patch uploaded by rmudgett (license 664)
	  abe_2526_misdn.patch uploaded by rmudgett (license 664)
	  abe_2526_misdnuser_v3.patch uploaded by rmudgett (license 664)
	  Tested by: rmudgett and reporter JIRA SWP-2146 JIRA ABE-2526
	  .......... ................

2010-09-15 20:36 +0000 [r286939-287016]  Jeff Peeler <jpeeler@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 287015 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r287015 | jpeeler | 2010-09-15 15:32:52 -0500
	  (Wed, 15 Sep 2010) | 21 lines Merged revisions 286998 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r286998 | jpeeler | 2010-09-15 15:28:02 -0500
	  (Wed, 15 Sep 2010) | 14 lines Merged revisions 286941 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r286941 | jpeeler | 2010-09-15 15:08:52 -0500 (Wed, 15 Sep 2010)
	  | 7 lines Ensure mailbox is not filled to capacity before doing
	  message forwarding. Specifically, before prompting to record a
	  prepended message the capacity is checked first. If the mailbox
	  is full the extension will be reprompted. ABE-2517 ........
	  ................ ................

	* channels/chan_dahdi.c, channels/sig_analog.c, /,
	  channels/chan_sip.c, main/features.c, CHANGES,
	  channels/chan_iax2.c, channels/sip/include/sip.h,
	  configs/features.conf.sample, channels/chan_mgcp.c,
	  include/asterisk/features.h: Merged revisions 286931 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r286931 | jpeeler | 2010-09-15 14:22:15 -0500 (Wed, 15
	  Sep 2010) | 16 lines Add parking extension for non-default
	  parking lots. This is a new feature that allows for parking to
	  custom parking lots to be accessed directly, rather than with
	  channel variables or by changing the default parking lot. The
	  extension is set with the parkext option just as the default
	  parking lot is done. Also, the manager action has been updated to
	  optionally allow a specified parking lot. (closes issue #14882)
	  Reported by: vmikhnevych Patches: patch_14882.txt uploaded by
	  mnick (license 874) modified by me Review:
	  https://reviewboard.asterisk.org/r/884/ ........

2010-09-15 18:30 +0000 [r286906]  Richard Mudgett <rmudgett@digium.com>

	* channels/sig_analog.c, /: Merged revisions 286904-286905 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r286904 | rmudgett | 2010-09-15 13:28:05 -0500 (Wed, 15 Sep 2010)
	  | 12 lines Unable to originate calls using E&M over T1. When
	  originating a call from Unit Under Test to Reference Unit using
	  E&M RBS signaling mode, I get the following warning message:
	  "Ring/Off-hook in strange state 3 on channel 1". Fixed the
	  sig_analog outgoing flag. It was never set when sig_analog was
	  extracted from chan_dahdi. JIRA SWP-2191 JIRA AST-408 ........
	  r286905 | rmudgett | 2010-09-15 13:29:21 -0500 (Wed, 15 Sep 2010)
	  | 1 line Simplify some code in sig_analog. ........

2010-09-15 13:10 +0000 [r286869]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 286868 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r286868 | mnicholson | 2010-09-15 08:05:52 -0500 (Wed, 15 Sep
	  2010) | 16 lines Set tohost to the domain specified in the
	  configuration file instead of the IP address of the host we are
	  calling. This fixes a regression introduced in r274783. (closes
	  issue #17960) Reported by: adriavidal Patches:
	  sip-tohost-fix1.diff uploaded by mnicholson (license 96) Tested
	  by: mich, mnicholson, adriavidal (closes issue #17676) Reported
	  by: outcast Patches: sip-tohost-fix1.diff uploaded by mnicholson
	  (license 96) Tested by: mnicholson ........

2010-09-14 22:02 +0000 [r286835]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 286834 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r286834 | dvossel | 2010-09-14 16:57:35 -0500 (Tue, 14 Sep 2010)
	  | 2 lines Sets subscribed type for outgoing MWI subscriptions so
	  correct Event header is used. ........

2010-09-14 19:29 +0000 [r286683-286759]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 286758 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r286758 | mnicholson | 2010-09-14 14:28:38 -0500
	  (Tue, 14 Sep 2010) | 27 lines Merged revisions 286757 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r286757 | mnicholson | 2010-09-14 14:27:28 -0500
	  (Tue, 14 Sep 2010) | 20 lines Merged revisions 286756 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r286756 | mnicholson | 2010-09-14 14:26:18 -0500 (Tue, 14 Sep
	  2010) | 13 lines Don't clear the username from a realtime
	  database when a registration expires. Non-realtime chan_sip does
	  not clear the username from memory when a registration expiries
	  so realtime probably shouldn't either. (closes issue #17551)
	  Reported by: ricardolandim Patches:
	  reg-expiry-username-1.4-fix1.diff uploaded by mnicholson (license
	  96) reg-expiry-username-1.6.2-fix1.diff uploaded by mnicholson
	  (license 96) reg-expiry-username-1.8-fix1.diff uploaded by
	  mnicholson (license 96) reg-expiry-username-trunk-fix1.diff
	  uploaded by mnicholson (license 96) Tested by: ricardolandim,
	  mnicholson ........ ................ ................

	* main/channel.c, /: Merged revisions 286682 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r286682 | mnicholson | 2010-09-14 13:04:21 -0500
	  (Tue, 14 Sep 2010) | 21 lines Merged revisions 286681 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r286681 | mnicholson | 2010-09-14 13:02:24 -0500
	  (Tue, 14 Sep 2010) | 14 lines Merged revisions 286679 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r286679 | mnicholson | 2010-09-14 13:00:01 -0500 (Tue, 14 Sep
	  2010) | 7 lines Only drop duplicate answer frames if the channel
	  is bridged. Back in r3710 ast_read() was modified to drop answer
	  frames on channels that were in the UP state. This modification
	  prevented bridges that were up before the answer from being
	  broken and reestablished by an ANSWER control frame. That change
	  also prevents pickup of channels called from the ast_dial
	  framework from working properly. The ast_dial framework expects
	  to see an ANSWER frame after dialing and the pickup code queues
	  one but ast_read() drops it. This new change only drops ANSWER
	  frames when the channel is bridged, allowing the answer queued by
	  the pickup code to properly pass through ast_read() on to the
	  ast_dial framework. ABE-2473 (related to issue #2342) ........
	  ................ ................

2010-09-14 15:31 +0000 [r286648]  Richard Mudgett <rmudgett@digium.com>

	* /, doc/tex/channelvariables.tex, doc/tex/partymanip.tex: Merged
	  revisions 286647 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r286647 | rmudgett | 2010-09-14 10:30:49 -0500 (Tue, 14 Sep 2010)
	  | 1 line Corrected documented CONNECTED_LINE and REDIRECTING
	  party manipulation macro names. ........

2010-09-14 06:58 +0000 [r286618]  Jan Kalab <pitlicek@gmail.com>

	* /, res/res_calendar_ews.c: Merged revisions 286617 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r286617 | pitel | 2010-09-14 08:55:44 +0200 (√öt, 14 z√°≈ô
	  2010) | 7 lines Merging events for Exchange web service doesn't
	  work as expected, resulting in only one event in calendar The
	  solution is to use "global" counter of events, since we do new
	  requests for every event and calendar sync after every request.
	  So now we do sync only after last request. (closes issue #17877)
	  Review: https://reviewboard.asterisk.org/r/916/ ........

2010-09-14 05:08 +0000 [r286529-286589]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, contrib/realtime/mysql/voicemail_messages.sql (added),
	  contrib/realtime/mysql/voicemail_data.sql (added): Merged
	  revisions 286588 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r286588 | tilghman | 2010-09-14 00:07:16 -0500
	  (Tue, 14 Sep 2010) | 9 lines Merged revisions 286587 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r286587 | tilghman | 2010-09-14 00:06:05 -0500 (Tue, 14
	  Sep 2010) | 2 lines Add documentation on missing backend tables
	  for Voicemail ........ ................

	* /, main/features.c: Merged revisions 286558 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r286558 | tilghman | 2010-09-13 18:50:34 -0500
	  (Mon, 13 Sep 2010) | 9 lines Merged revisions 286557 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r286557 | tilghman | 2010-09-13 18:48:51 -0500 (Mon, 13
	  Sep 2010) | 2 lines C precedence got me ........ ................

	* /, main/features.c: Merged revisions 286528 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r286528 | tilghman | 2010-09-13 18:12:21 -0500
	  (Mon, 13 Sep 2010) | 9 lines Merged revisions 286527 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r286527 | tilghman | 2010-09-13 18:03:26 -0500 (Mon, 13
	  Sep 2010) | 2 lines Refactor conversion to ast_poll() to fix
	  callparking regression. ........ ................

2010-09-13 22:13 +0000 [r286498]  Russell Bryant <russell@digium.com>

	* /, main/db.c: Merged revisions 286112 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r286112 | russell | 2010-09-10 15:31:58 -0500 (Fri, 10 Sep 2010)
	  | 9 lines Rate limit calls to fsync() to 1 per second after astdb
	  updates. Astdb was determined to be one of the most significant
	  bottlenecks in SIP registration processing. This patch improved
	  the speed of an astdb load test by 50000% (yes, Fifty-Thousand
	  Percent). On this particular load test setup, this doubled the
	  number of SIP registrations the server could handle. Review:
	  https://reviewboard.asterisk.org/r/825/ ........

2010-09-13 19:40 +0000 [r286458]  Jason Parker <jparker@digium.com>

	* /, channels/chan_sip.c: Merged revisions 286457 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r286457 | qwell | 2010-09-13 14:40:05 -0500
	  (Mon, 13 Sep 2010) | 12 lines Merged revisions 286456 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r286456 | qwell | 2010-09-13 14:38:35 -0500 (Mon, 13 Sep 2010) |
	  5 lines Remove "Internal IP" from sip show settings, as it's not
	  at all useful to display. (closes issue #17840) Reported by: oej
	  ........ ................

2010-09-13 15:53 +0000 [r286427]  Richard Mudgett <rmudgett@digium.com>

	* configs/chan_dahdi.conf.sample, /: Merged revisions 286426 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r286426 | rmudgett | 2010-09-13 10:52:14 -0500 (Mon, 13 Sep 2010)
	  | 1 line Update chan_dahdi.conf.sample to reflect new libpri T309
	  default value. ........

2010-09-11 17:35 +0000 [r286271-286342]  Olle Johansson <oej@edvina.net>

	* main/say.c, main/app.c: Whitespace cleanup

	* main/features.c: Whitespace cleanup and reformatting with { and }

	* /, main/file.c: Merged revisions 286270 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r286270 | oej | 2010-09-11 19:09:22 +0200 (L√∂r,
	  11 Sep 2010) | 18 lines Merged revisions 286268 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r286268 | oej | 2010-09-11 19:05:16 +0200 (L√∂r,
	  11 Sep 2010) | 11 lines Merged revisions 286267 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r286267 | oej | 2010-09-11 18:59:20 +0200 (L√∂r, 11 Sep 2010) | 4
	  lines Handle error response when we can't make file compatible
	  Review: https://reviewboard.asterisk.org/r/911/ ........
	  ................ ................

	* channels/chan_sip.c: Formatting changes.

2010-09-10 22:15 +0000 [r286190]  Terry Wilson <twilson@digium.com>

	* channels/chan_local.c, /, funcs/func_channel.c,
	  include/asterisk/channel.h, include/asterisk/pbx.h,
	  include/asterisk/frame.h: Merged revisions 286189 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r286189 | twilson | 2010-09-10 17:04:53 -0500
	  (Fri, 10 Sep 2010) | 30 lines Merged revisions 286115 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r286115 | twilson | 2010-09-10 15:35:25 -0500
	  (Fri, 10 Sep 2010) | 23 lines Merged revisions 286059 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r286059 | twilson | 2010-09-10 14:25:08 -0500 (Fri, 10 Sep 2010)
	  | 16 lines Inherit CHANNEL() writes to both sides of a Local
	  channel Having Local (/n) channels as queue members and setting
	  the language in the extension with Set(CHANNEL(language)=fr) sets
	  the language on the Local/...,2 channel. Hold time report
	  playbacks happen on the Local/...,1 channel and therefor do not
	  play in the specified language. This patch modifies
	  func_channel_write to call the setoption callback and pass the
	  CHANNEL() write info to the callback. chan_local uses this
	  information to look up the other side of the channel and apply
	  the same changes to it. (closes issue #17673) Reported by:
	  Guggemand Review: https://reviewboard.asterisk.org/r/903/
	  ........ ................ ................

2010-09-10 21:13 +0000 [r286121]  Paul Belanger <pabelanger@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 286120 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r286120 | pabelanger | 2010-09-10 17:11:08 -0400
	  (Fri, 10 Sep 2010) | 18 lines Merged revisions 286117 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r286117 | pabelanger | 2010-09-10 16:55:06 -0400
	  (Fri, 10 Sep 2010) | 11 lines Merged revisions 286114 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r286114 | pabelanger | 2010-09-10 16:35:08 -0400 (Fri, 10 Sep
	  2010) | 4 lines Load iax.conf before registering any
	  functions/applications/actions. Review:
	  https://reviewboard.asterisk.org/r/914/ ........ ................
	  ................

2010-09-10 21:03 +0000 [r286119]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/sig_pri.c: Merged revisions 286118 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r286118 | rmudgett | 2010-09-10 15:55:37 -0500
	  (Fri, 10 Sep 2010) | 25 lines Merged revisions 286116 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r286116 | rmudgett | 2010-09-10 15:42:44 -0500
	  (Fri, 10 Sep 2010) | 18 lines Merged revisions 286113 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r286113 | rmudgett | 2010-09-10 15:33:16 -0500 (Fri, 10 Sep 2010)
	  | 11 lines An outgoing call may not get hung up if a pre-connect
	  incoming ISDN call is disconnected. If the ISDN link a
	  pre-connect incoming call is using fails or is reset, the
	  outgoing leg may not hang up or be delayed in hanging up.
	  (Causes: PRI_CAUSE_NETWORK_OUT_OF_ORDER,
	  PRI_CAUSE_DESTINATION_OUT_OF_ORDER, and
	  PRI_CAUSE_NORMAL_TEMPORARY_FAILURE.) Just hang up the call if the
	  incoming call leg hangs up before connecting for any reason. It
	  makes no sense to send a BUSY or CONGESTION control frame to the
	  outgoing call leg under these circumstances. ........
	  ................ ................

2010-09-10 13:20 +0000 [r285993]  David Ruggles <thedavidfactor@gmail.com>

	* doc/externalivr.txt, CHANGES: Merged revisions 285992 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r285992 | diruggles | 2010-09-10 09:13:16 -0400 (Fri, 10 Sep
	  2010) | 1 line Added missing documentation for ExternalIVR
	  feature added in January 2010 ........

2010-09-10 05:33 +0000 [r285932-285963]  Tilghman Lesher <tilghman@meg.abyt.es>

	* include/asterisk/select.h, /: Merged revisions 285962 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r285962 | tilghman | 2010-09-10 00:32:18 -0500
	  (Fri, 10 Sep 2010) | 13 lines Merged revisions 285961 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r285961 | tilghman | 2010-09-10 00:31:31 -0500 (Fri, 10 Sep 2010)
	  | 6 lines Another fix for Mac OS X. While trying to fix this the
	  "right" way, I wandered into dependency hell. Two hours later, I
	  backed out, and just removed the offending code. ast_inline_api
	  only goes one level deep and then it breaks. Ouch. ........
	  ................

	* include/asterisk/select.h, /, configure,
	  include/asterisk/autoconfig.h.in, configure.ac,
	  tests/test_poll.c: Merged revisions 285931 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r285931 | tilghman | 2010-09-09 20:25:50 -0500
	  (Thu, 09 Sep 2010) | 21 lines Merged revisions 285930 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r285930 | tilghman | 2010-09-09 20:16:32 -0500
	  (Thu, 09 Sep 2010) | 14 lines Merged revisions 285889 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r285889 | tilghman | 2010-09-09 19:13:45 -0500 (Thu, 09 Sep 2010)
	  | 7 lines Fix Mac OS X build. This also fixes a rather grievous
	  calculation error for the offset of ast_fdset, which was masked
	  on Linux and FreeBSD, because these platforms check the first 256
	  FDs regardless of the bitmask setting (due to backwards
	  compatibility). ........ ................ ................

2010-09-09 22:53 +0000 [r285820]  Paul Belanger <pabelanger@digium.com>

	* /, codecs/gsm/Makefile: Merged revisions 285819 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r285819 | pabelanger | 2010-09-09 18:52:31 -0400
	  (Thu, 09 Sep 2010) | 22 lines Merged revisions 285818 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r285818 | pabelanger | 2010-09-09 18:49:19 -0400
	  (Thu, 09 Sep 2010) | 15 lines Merged revisions 285817 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r285817 | pabelanger | 2010-09-09 18:34:35 -0400 (Thu, 09 Sep
	  2010) | 8 lines GCC 4.2.x optimizations result in improper
	  behavior of GSM codec (closes issue #17688) Reported by:
	  pprindeville Patches: asterisk-trunk-bugid11243.patch uploaded by
	  pprindeville (license 347) Tested by: mkeuter, pprindeville
	  ........ ................ ................

2010-09-09 20:13 +0000 [r285746]  Jason Parker <jparker@digium.com>

	* main/channel.c, /: Merged revisions 285745 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r285745 | qwell | 2010-09-09 15:11:06 -0500
	  (Thu, 09 Sep 2010) | 23 lines Merged revisions 285744 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r285744 | qwell | 2010-09-09 15:09:23 -0500
	  (Thu, 09 Sep 2010) | 16 lines Merged revisions 285742 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r285742 | qwell | 2010-09-09 15:06:31 -0500 (Thu, 09 Sep 2010) |
	  9 lines Transmit silence when reading DTMF in ast_readstring.
	  Otherwise, you could get issues with DTMF timeouts causing
	  hangups. (closes issue #17370) Reported by: makoto Patches:
	  channel-readstring-silence-generator.patch uploaded by makoto
	  (license 38) ........ ................ ................

2010-09-09 18:53 +0000 [r285641-285712]  Brett Bryant <bbryant@digium.com>

	* main/pbx.c, /: Merged revisions 285711 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r285711 | bbryant | 2010-09-09 14:51:52 -0400
	  (Thu, 09 Sep 2010) | 15 lines Merged revisions 285710 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r285710 | bbryant | 2010-09-09 14:50:13 -0400 (Thu, 09 Sep 2010)
	  | 8 lines Fixes an issue with dialplan pattern matching where the
	  specificity for pattern ranges and pattern special characters was
	  inconsistent. (closes issue #16903) Reported by: Nick_Lewis
	  Patches: pbx.c-specificity.patch uploaded by Nick Lewis (license
	  657) Tested by: Nick_Lewis ........ ................

	* /, res/res_musiconhold.c: Merged revisions 285640 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r285640 | bbryant | 2010-09-09 13:23:28 -0400
	  (Thu, 09 Sep 2010) | 21 lines Merged revisions 285639 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r285639 | bbryant | 2010-09-09 13:22:25 -0400
	  (Thu, 09 Sep 2010) | 14 lines Merged revisions 285638 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r285638 | bbryant | 2010-09-09 13:20:17 -0400 (Thu, 09 Sep 2010)
	  | 7 lines Fixes an issue with MOH where it doesn't recover
	  cleanly when it can't play a file and would just stop, instead of
	  continuing to find the next playable file in the MOH class.
	  (closes issue #17807) Reported by: kshumard Review:
	  https://reviewboard.asterisk.org/r/910/ ........ ................
	  ................

2010-09-08 22:15 +0000 [r285565-285569]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 285568 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r285568 | dvossel | 2010-09-08 17:14:19 -0500
	  (Wed, 08 Sep 2010) | 16 lines Merged revisions 285567 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r285567 | dvossel | 2010-09-08 17:11:28 -0500
	  (Wed, 08 Sep 2010) | 9 lines Merged revisions 285566 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r285566 | dvossel | 2010-09-08 17:07:31 -0500 (Wed, 08
	  Sep 2010) | 2 lines In retrans_pkt, do not unlock pvt until the
	  end of the function on a transmit failure. ........
	  ................ ................

	* /, channels/chan_sip.c: Merged revisions 285564 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r285564 | dvossel | 2010-09-08 16:48:37 -0500
	  (Wed, 08 Sep 2010) | 60 lines Merged revisions 285563 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r285563 | dvossel | 2010-09-08 16:47:29 -0500 (Wed, 08 Sep 2010)
	  | 54 lines Fixes interoperability problems with session timer
	  behavior in Asterisk. CHANGES: 1. Never put "timer" in "Require"
	  header. This is not to our benefit and RFC 4028 section 7.1 even
	  warns against it. It is possible for one endpoint to perform
	  session-timer refreshes while the other endpoint does not support
	  them. If in this case the end point performing the refreshing
	  puts "timer" in the Require field during a refresh, the dialog
	  will likely get terminated by the other end. 2. Change the
	  behavior of 'session-timer=accept' in sip.conf (which is the
	  default behavior of Asterisk with no session timer configuration
	  specified) to only run session-timers as result of an incoming
	  INVITE request if the INVITE contains an "Session-Expires"
	  header... Asterisk is currently treating having the "timer"
	  option in the "Supported" header as a request for session timers
	  by the UAC. I do not agree with this. Session timers should only
	  be negotiated in "accept" mode when the incoming INVITE supplies
	  a "Session-Expires" header, otherwise RFC 4028 says we should
	  treat a request containing no "Session-Expires" header as a
	  session with no expiration. Below I have outlined some situations
	  and what Asterisk's behavior is. The table reflects the behavior
	  changes implemented by this patch. SITUATIONS: -Asterisk as UAS
	  1. Incoming INVITE: NO "Session-Expires" 2. Incoming INVITE: HAS
	  "Session-Expires" -Asterisk as UAC 3. Outgoing INVITE: NO
	  "Session-Expires". 200 Ok Response HAS "Session-Expires" header
	  4. Outgoing INVITE: NO "Session-Expires". 200 Ok Response NO
	  "Session-Expires" header 5. Outgoing INVITE: HAS
	  "Session-Expires". Active - Asterisk will have an active refresh
	  timer regardless if the other endpoint does. Inactive - Asterisk
	  does not have an active refresh timer regardless if the other
	  endpoint does. XXXXXXX - Not possible for mode.
	  ______________________________________ |SITUATIONS |
	  'session-timer' MODES | |___________|________________________| |
	  | originate | accept | |-----------|------------|-----------| |1.
	  | Active | Inactive | |2. | Active | Active | |3. | XXXXXXXX |
	  Active | |4. | XXXXXXXX | Inactive | |5. | Active | XXXXXXXX |
	  -------------------------------------- (closes issue #17005)
	  Reported by: alexrecarey ........ ................

2010-09-08 21:00 +0000 [r285534]  Brett Bryant <bbryant@digium.com>

	* /, apps/app_meetme.c: Merged revisions 285533 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r285533 | bbryant | 2010-09-08 16:58:43 -0400
	  (Wed, 08 Sep 2010) | 15 lines Merged revisions 285532 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r285532 | bbryant | 2010-09-08 16:56:12 -0400 (Wed, 08 Sep 2010)
	  | 8 lines Fixes a bug with MeetMe where after announcing the
	  amount of time left in a conference, if music on hold was
	  playing, it doesn't restart. (closes issue #17408) Reported by:
	  sysreq Patches: asterisk-issue-17408_fixed.patch uploaded by
	  sysreq (license 1009) Tested by: sysreq ........ ................

2010-09-08 20:43 +0000 [r285528-285531]  Jason Parker <jparker@digium.com>

	* /, include/asterisk/astobj2.h, res/res_musiconhold.c: Merged
	  revisions 285530 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r285530 | qwell | 2010-09-08 15:43:10 -0500
	  (Wed, 08 Sep 2010) | 9 lines Merged revisions 285529 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r285529 | qwell | 2010-09-08 15:42:44 -0500 (Wed, 08 Sep
	  2010) | 1 line Follow coding guidelines in moh rescan fix. Also
	  fix the documentation that got me in trouble. ........
	  ................

	* /, res/res_musiconhold.c: Merged revisions 285527 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r285527 | qwell | 2010-09-08 15:32:13 -0500
	  (Wed, 08 Sep 2010) | 15 lines Merged revisions 285526 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r285526 | qwell | 2010-09-08 15:31:43 -0500 (Wed, 08 Sep 2010) |
	  8 lines Fixes issue where moh files were no longer rescanned
	  during a reload. (closes issue #16744) Reported by: pj Patches:
	  16744-reload.diff uploaded by qwell (license 4) Tested by: qwell
	  ........ ................

2010-09-08 07:15 +0000 [r285485]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, funcs/func_channel.c: Merged revisions 285484 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r285484 | tilghman | 2010-09-08 02:14:17 -0500 (Wed, 08
	  Sep 2010) | 2 lines Documentation only ........

2010-09-07 22:23 +0000 [r285394-285456]  Jason Parker <jparker@digium.com>

	* /, channels/chan_sip.c: Merged revisions 285455 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r285455 | qwell | 2010-09-07 17:22:14 -0500 (Tue, 07 Sep 2010) |
	  8 lines Don't automatically add domains for wildcard bindaddrs.
	  (closes issue #17832) Reported by: oej Patches:
	  17832-wildcard.diff uploaded by qwell (license 4) Tested by:
	  qwell ........

	* /, channels/chan_sip.c: Merged revisions 285369 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r285369 | qwell | 2010-09-07 15:58:34 -0500 (Tue, 07 Sep 2010) |
	  7 lines Add note to 'sip show settings' regarding dual-stack
	  support, and a :: bindaddress. (closes issue #17831) Reported by:
	  oej Patches: 17831-v6wildcardbind.diff uploaded by qwell (license
	  4) ........

2010-09-07 21:21 +0000 [r285374-285390]  Tilghman Lesher <tilghman@meg.abyt.es>

	* pbx/pbx_spool.c, /: Merged revisions 285386 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r285386 | tilghman | 2010-09-07 16:20:16 -0500 (Tue, 07 Sep 2010)
	  | 13 lines Don't notify on attribute changes, and change how the
	  queuing mechanism works. Fixes call spools in 1.8. (closes issue
	  #17337) Reported by: loloski Patches:
	  20100827__issue17337.diff.txt uploaded by tilghman (license 14)
	  (closes issue #17924) Reported by: mkeuter Tested by: mkeuter
	  ........

	* /, funcs/func_channel.c: Merged revisions 285373 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r285373 | tilghman | 2010-09-07 16:14:03 -0500 (Tue, 07
	  Sep 2010) | 7 lines Add CHANNEL(checkhangup) to check whether a
	  channel is in the process of being hanged up. (closes issue
	  #17652) Reported by: kobaz Patches: func_channel.patch uploaded
	  by kobaz (license 834) ........

2010-09-07 21:12 +0000 [r285372]  Richard Mudgett <rmudgett@digium.com>

	* /, main/features.c: Merged revisions 285371 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r285371 | rmudgett | 2010-09-07 16:08:35 -0500 (Tue, 07 Sep 2010)
	  | 1 line Fix cut-n-paste error. ........

2010-09-07 20:56 +0000 [r285269-285368]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, pbx/pbx_config.c: Merged revisions 285367 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r285367 | tilghman | 2010-09-07 15:56:07 -0500
	  (Tue, 07 Sep 2010) | 23 lines Merged revisions 285366 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r285366 | tilghman | 2010-09-07 15:31:41 -0500
	  (Tue, 07 Sep 2010) | 16 lines Merged revisions 285365 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r285365 | tilghman | 2010-09-07 15:30:22 -0500 (Tue, 07 Sep 2010)
	  | 9 lines Catch invalid extensions at the parser, instead of
	  making the core deal with them. (closes issue #17794) Reported
	  by: PavelL Patches: 20100820__issue17794__1.6.2.diff.txt uploaded
	  by tilghman (license 14) 20100820__issue17794__1.4.diff.txt
	  uploaded by tilghman (license 14) Tested by: PavelL ........
	  ................ ................

	* /, include/asterisk/compiler.h, addons/ooh323c/src/ooSocket.h:
	  Merged revisions 285336 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r285336 | tilghman | 2010-09-07 14:38:12 -0500 (Tue, 07 Sep 2010)
	  | 2 lines Fix build on FreeBSD 8.0, take 2. ........

	* /, main/poll.c: Merged revisions 285268 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r285268 | tilghman | 2010-09-07 14:08:09 -0500
	  (Tue, 07 Sep 2010) | 18 lines Merged revisions 285267 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r285267 | tilghman | 2010-09-07 14:07:17 -0500
	  (Tue, 07 Sep 2010) | 11 lines Merged revisions 285266 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r285266 | tilghman | 2010-09-07 14:04:50 -0500 (Tue, 07 Sep 2010)
	  | 4 lines Use poll, if indicated to do so, in the ast_poll2
	  implementation. This fixes the unit tests on FreeBSD 8.0.
	  ........ ................ ................

2010-09-07 17:57 +0000 [r285199]  Brett Bryant <bbryant@digium.com>

	* /, apps/app_voicemail.c: Merged revisions 285197 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r285197 | bbryant | 2010-09-07 13:54:21 -0400
	  (Tue, 07 Sep 2010) | 24 lines Merged revisions 285196 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r285196 | bbryant | 2010-09-07 13:49:07 -0400
	  (Tue, 07 Sep 2010) | 17 lines Merged revisions 285194 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r285194 | bbryant | 2010-09-07 13:45:41 -0400 (Tue, 07 Sep 2010)
	  | 10 lines Fixes voicemail.conf issues where mailboxes with
	  passwords that don't precede a comma would throw unnecessary
	  error messages. (closes issue #15726) Reported by: 298 Patches:
	  M15726.diff uploaded by junky (license 177) Tested by: junky
	  Review: [full review board URL with trailing slash] ........
	  ................ ................

2010-09-07 17:55 +0000 [r285198]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_misdn.c, /: Merged revisions 285195 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r285195 | rmudgett | 2010-09-07 12:47:34 -0500
	  (Tue, 07 Sep 2010) | 20 lines Merged revisions 285193 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/be/branches/C.3-bier
	  ........ Merged revisions 285192 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/be/branches/C.3 ........
	  r285192 | rmudgett | 2010-09-07 11:58:57 -0500 (Tue, 07 Sep 2010)
	  | 8 lines COLP/CONP and chan_misdn missing update chan_misdn does
	  not update the caller id of the channel if a new connected number
	  or ECT-INFORM (w/ new peer number on call transfer) is received.
	  JIRA ABE-2502 JIRA SWP-2058 ........ ........ ................

2010-09-06 20:10 +0000 [r285163]  Russell Bryant <russell@digium.com>

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac:
	  Merged revisions 285161-285162 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r285161 | russell | 2010-09-06 15:10:03 -0500 (Mon, 06 Sep 2010)
	  | 4 lines Fix libsrtp -fPIC check for when non-standard prefix is
	  used. Thanks to loompek in #asterisk for reporting the issue and
	  testing this patch. ........ r285162 | russell | 2010-09-06
	  15:10:24 -0500 (Mon, 06 Sep 2010) | 1 line regenerate configure
	  script. ........

2010-09-06 06:57 +0000 [r285091]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, BSDmakefile (added), makeopts.in: Merged revisions 285090 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r285090 | tilghman | 2010-09-06 01:56:07 -0500
	  (Mon, 06 Sep 2010) | 16 lines Merged revisions 285089 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r285089 | tilghman | 2010-09-06 01:55:17 -0500
	  (Mon, 06 Sep 2010) | 9 lines Merged revisions 285088 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r285088 | tilghman | 2010-09-06 01:54:18 -0500 (Mon, 06
	  Sep 2010) | 2 lines Silly convenience script for BSD platforms.
	  ........ ................ ................

2010-09-04 18:10 +0000 [r285058]  Russell Bryant <russell@digium.com>

	* /, include/asterisk/cli.h: Merged revisions 285057 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r285057 | russell | 2010-09-04 13:08:19 -0500 (Sat, 04
	  Sep 2010) | 2 lines Add a C++ compatible version of
	  AST_CLI_DEFINE(). ........

2010-09-03 23:23 +0000 [r285029]  Terry Wilson <twilson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 285017 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r285017 | twilson | 2010-09-03 18:19:54 -0500 (Fri, 03 Sep 2010)
	  | 4 lines Call correct lock function as transferer is a sip_pvt
	  not a channel Both functions are #defined to ao2_lock, but
	  still... ........

2010-09-03 22:23 +0000 [r285007]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c, configs/sip.conf.sample,
	  channels/sip/include/sip.h: Merged revisions 285006 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r285006 | dvossel | 2010-09-03 17:21:50 -0500 (Fri, 03
	  Sep 2010) | 9 lines Disables auth_options_request option by
	  default. The auth_options_request option was created to do
	  authentication on OPTIONS request just like INVITES are done.
	  Since it has been noted that some endpoints use OPTIONS requests
	  as a way of qualifying a peer and that a 401 authentication
	  response could result in interoperability issues, this option has
	  been disabled by default. ........

2010-09-03 18:21 +0000 [r284973]  Brett Bryant <bbryant@digium.com>

	* /, channels/chan_iax2.c: Merged revisions 284967 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r284967 | bbryant | 2010-09-03 14:19:53 -0400
	  (Fri, 03 Sep 2010) | 15 lines Merged revisions 284958 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r284958 | bbryant | 2010-09-03 14:15:49 -0400 (Fri, 03 Sep 2010)
	  | 8 lines This is a patch provided for issue #17935 to add the
	  ActionID to the IAXregistry AMI response. (closes issue #17935)
	  Reported by: alexkuklin Patches: iaxshowreg uploaded by
	  alexkuklin (license 1115) Tested by: alexkuklin ........
	  ................

2010-09-03 18:04 +0000 [r284951-284953]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 284952 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r284952 | dvossel | 2010-09-03 13:03:23 -0500 (Fri, 03 Sep 2010)
	  | 2 lines During OPTIONS authentication, the authpeer does not
	  need to be returned for any reason. ........

	* /, channels/chan_sip.c, configs/sip.conf.sample, CHANGES,
	  channels/sip/include/sip.h: Merged revisions 284950 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r284950 | dvossel | 2010-09-03 12:29:02 -0500 (Fri, 03
	  Sep 2010) | 14 lines authenticate OPTIONS requests just like we
	  would an INVITE OPTIONS requests should be treated the same as an
	  INVITE This includes authentication. This patch adds the ability
	  for incoming out of dialog OPTION requests to be authenticated
	  before providing a response indicating whether an extension is
	  available or not. The authentication routine works the exact same
	  way as it does for incoming INVITEs. This means that if a peer
	  has 'insecure=invite' in their peer definition, the same will be
	  true for the processing of the OPTIONS request. Review:
	  https://reviewboard.asterisk.org/r/881/ ........

2010-09-03 16:42 +0000 [r284922]  Terry Wilson <twilson@digium.com>

	* /, apps/app_chanspy.c: Merged revisions 284921 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r284921 | twilson | 2010-09-03 11:28:18 -0500
	  (Fri, 03 Sep 2010) | 19 lines Merged revisions 284897 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r284897 | twilson | 2010-09-03 11:20:45 -0500
	  (Fri, 03 Sep 2010) | 12 lines Merged revisions 284881 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r284881 | twilson | 2010-09-03 11:10:23 -0500 (Fri, 03 Sep 2010)
	  | 5 lines Properly detect when a sound file doesn't exist
	  ast_fileexists returns -1 for error and 0 for a non-existant
	  file. The existing code treated missing files as though they
	  existed. ........ ................ ................

2010-09-03 13:09 +0000 [r284851-284853]  Jan Kalab <pitlicek@gmail.com>

	* /, res/res_calendar_ews.c: Merge of strdupa() fix for calendars
	  categories priorities

	* res/res_calendar_icalendar.c, /, res/res_calendar_caldav.c,
	  include/asterisk/calendar.h, res/res_calendar_ews.c,
	  res/res_calendar.c: Support for calendar events priorities and
	  categories (with ISO C90 fix) See RFC 5545 ch. 3.8.1.2 and 9.
	  (closes issue #17837) Review:
	  https://reviewboard.asterisk.org/r/880/

2010-09-02 21:08 +0000 [r284782]  Richard Mudgett <rmudgett@digium.com>

	* channels/sig_pri.h, channels/chan_dahdi.c, /, channels/sig_pri.c:
	  Merged revisions 284779-284780 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r284779 | rmudgett | 2010-09-02 15:59:12 -0500 (Thu, 02 Sep 2010)
	  | 8 lines Made output libpri event names if pri debugging is
	  enabled when sig_pri processes them. * Simplified CLI "pri debug
	  xx span xx" command code and removed redundant debugging enabled
	  messages. * Made CLI "pri debug xx span xx" command only close
	  the debugging log file if it was opened. ........ r284780 |
	  rmudgett | 2010-09-02 16:02:54 -0500 (Thu, 02 Sep 2010) | 2 lines
	  Simplified pri_dchannel() poll timeout duration code. ........

2010-09-02 16:57 +0000 [r284706]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 284705 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r284705 | dvossel | 2010-09-02 11:56:43 -0500
	  (Thu, 02 Sep 2010) | 20 lines Merged revisions 284704 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r284704 | dvossel | 2010-09-02 11:48:51 -0500
	  (Thu, 02 Sep 2010) | 13 lines Merged revisions 284703 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r284703 | dvossel | 2010-09-02 11:47:15 -0500 (Thu, 02 Sep 2010)
	  | 7 lines Removed relatedpeer code from sip_autodestruct Handling
	  of the relatedpeer structure associated with a sip_pvt should be
	  done during the final sip_destruction function, not in
	  sip_autodestruct. ........ ................ ................

2010-09-02 16:44 +0000 [r284702]  Jason Parker <jparker@digium.com>

	* /, formats/format_wav.c: Merged revisions 284701 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r284701 | qwell | 2010-09-02 11:43:09 -0500 (Thu, 02 Sep
	  2010) | 8 lines Add slin16 support for format_wav (new wav16 file
	  extension) (closes issue #15029) Reported by: andrew Patches:
	  wav16.patch uploaded by andrew (license 240) Tested by: qwell,
	  andrew ........

2010-09-02 16:36 +0000 [r284700]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, addons/ooh323c/src/oochannels.c: Merged revisions 284696 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r284696 | tilghman | 2010-09-02 11:27:52 -0500 (Thu, 02 Sep 2010)
	  | 2 lines Fixing build ........

2010-09-02 16:35 +0000 [r284699]  Richard Mudgett <rmudgett@digium.com>

	* /, doc/tex/channelvariables.tex, doc/tex/partymanip.tex (added),
	  doc/tex/asterisk.tex: Merged revisions 284698 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r284698 | rmudgett | 2010-09-02 11:34:32 -0500 (Thu, 02 Sep 2010)
	  | 5 lines Added documentation for CONNECTEDLINE and REDIRECTING
	  functions. (closes issue #17808) Reported by: jtodd Review:
	  https://reviewboard.asterisk.org/r/875/ ........

2010-09-02 16:12 +0000 [r284598-284667]  Tilghman Lesher <tilghman@meg.abyt.es>

	* channels/chan_usbradio.c, /: Merged revisions 284666 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r284666 | tilghman | 2010-09-02 11:11:15 -0500
	  (Thu, 02 Sep 2010) | 9 lines Merged revisions 284665 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r284665 | tilghman | 2010-09-02 11:07:19 -0500 (Thu, 02
	  Sep 2010) | 2 lines Fixing build. ........ ................

	* /, apps/app_queue.c: Merged revisions 284632 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r284632 | tilghman | 2010-09-02 00:31:02 -0500
	  (Thu, 02 Sep 2010) | 14 lines Merged revisions 284631 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r284631 | tilghman | 2010-09-02 00:30:16 -0500 (Thu, 02 Sep 2010)
	  | 7 lines Don't reset queue stats on a module reload. (closes
	  issue #17535) Reported by: raarts Patches:
	  20100819__issue17535.diff.txt uploaded by tilghman (license 14)
	  ........ ................

	* /, channels/chan_sip.c, channels/chan_agent.c,
	  channels/chan_iax2.c, apps/app_queue.c, apps/app_getcpeid.c,
	  apps/app_followme.c, apps/app_speech_utils.c, main/loader.c,
	  pbx/pbx_loopback.c, channels/chan_dahdi.c, funcs/func_aes.c,
	  include/asterisk/module.h, pbx/pbx_realtime.c, pbx/pbx_dundi.c,
	  apps/app_stack.c, channels/chan_mgcp.c, apps/app_adsiprog.c,
	  apps/app_voicemail.c: Merged revisions 284610 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r284610 | tilghman | 2010-09-02 00:20:59 -0500 (Thu, 02 Sep 2010)
	  | 10 lines When optional_api is non-optional, force dependent
	  modules to be loaded. (closes issue #17707) Reported by: ira
	  Patches: 20100819__issue17707__asterisk1.8.diff.txt uploaded by
	  tilghman (license 14) Tested by: tilghman Review:
	  https://reviewboard.asterisk.org/r/876/ ........

	* main/stun.c, res/res_ais.c, /, include/asterisk/autoconfig.h.in,
	  configure.ac, channels/console_video.c,
	  include/asterisk/channel.h, res/res_jabber.c, res/res_pktccops.c,
	  main/poll.c, channels/chan_usbradio.c, include/asterisk/select.h
	  (added), channels/chan_phone.c, channels/chan_misdn.c, configure,
	  main/features.c, include/asterisk/poll-compat.h,
	  tests/test_poll.c (added), addons/ooh323c/src/oochannels.c,
	  main/asterisk.c, addons/ooh323c/src/ooSocket.h: Merged revisions
	  284597 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r284597 | tilghman | 2010-09-02 00:00:34 -0500
	  (Thu, 02 Sep 2010) | 29 lines Merged revisions 284593,284595 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r284593 | tilghman | 2010-09-01 17:59:50 -0500
	  (Wed, 01 Sep 2010) | 18 lines Merged revisions 284478 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r284478 | tilghman | 2010-09-01 13:49:11 -0500 (Wed, 01 Sep 2010)
	  | 11 lines Ensure that all areas that previously used select(2)
	  now use poll(2), with implementations that need poll(2)
	  implemented with select(2) safe against 1024-bit overflows. This
	  is a followup to the fix for the pthread timer in 1.6.2 and
	  beyond, fixing a potential crash bug in all supported releases.
	  (closes issue #17678) Reported by: russell Branch:
	  https://origsvn.digium.com/svn/asterisk/team/tilghman/ast_select
	  Review: https://reviewboard.asterisk.org/r/824/ ........
	  ................ r284595 | tilghman | 2010-09-01 22:57:43 -0500
	  (Wed, 01 Sep 2010) | 2 lines Failed to rerun bootstrap.sh after
	  last commit ................ ................

2010-09-01 21:48 +0000 [r284562]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 284561 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r284561 | dvossel | 2010-09-01 16:47:01 -0500 (Wed, 01 Sep 2010)
	  | 9 lines During request to dialog matching, verify init_ruri is
	  present before comparing. During request to dialog matching, we
	  attempt a best effort routine for fork detection which requires
	  several elements to be in place. The dialog's initial request uri
	  is one of those elements. Since it is best effort, if the
	  init_ruri is not present for some reason we can not proceed with
	  that routine. ........

2010-09-01 18:52 +0000 [r284479]  Terry Wilson <twilson@digium.com>

	* res/res_rtp_asterisk.c, include/asterisk/res_srtp.h,
	  main/rtp_engine.c, /, channels/chan_sip.c, res/res_srtp.c: Merged
	  revisions 284477 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r284477 | twilson | 2010-09-01 13:44:36 -0500 (Wed, 01 Sep 2010)
	  | 17 lines Fix SRTP for changing SSRC and multiple a=crypto SDP
	  lines Adding code to Asterisk that changed the SSRC during
	  bridges and masquerades broke SRTP functionality. Also broken was
	  handling the situation where an incoming INVITE had more than one
	  crypto offer. This patch caches the SRTP policies the we use so
	  that we can change the ssrc and inform libsrtp of the new
	  streams. It also uses the first acceptable a=crypto line from the
	  incoming INVITE. (closes issue #17563) Reported by: Alexcr
	  Patches: srtp.diff uploaded by twilson (license 396) Tested by:
	  twilson Review: https://reviewboard.asterisk.org/r/878/ ........

2010-09-01 18:19 +0000 [r284440-284474]  Tilghman Lesher <tilghman@meg.abyt.es>

	* res/res_config_pgsql.c, /: Merged revisions 284473 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r284473 | tilghman | 2010-09-01 13:16:37 -0500
	  (Wed, 01 Sep 2010) | 12 lines Merged revisions 284472 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r284472 | tilghman | 2010-09-01 13:13:35 -0500 (Wed, 01 Sep 2010)
	  | 5 lines Don't warn on floats and timestamps (closes issue
	  #17082) Reported by: coolmig ........ ................

	* /, channels/chan_sip.c: Merged revisions 284415 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r284415 | tilghman | 2010-08-31 15:22:10 -0500
	  (Tue, 31 Aug 2010) | 21 lines Merged revisions 284399 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r284399 | tilghman | 2010-08-31 15:18:32 -0500
	  (Tue, 31 Aug 2010) | 14 lines Merged revisions 284393 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r284393 | tilghman | 2010-08-31 15:13:21 -0500 (Tue, 31 Aug 2010)
	  | 7 lines Don't send a devstate change on poke_noanswer if the
	  state did not change. (closes issue #17741) Reported by: schmidts
	  Patches: chan_sip.c.patch uploaded by schmidts (license 1077)
	  ........ ................ ................

2010-08-31 19:01 +0000 [r284315-284319]  Leif Madsen <lmadsen@digium.com>

	* /, configs/say.conf.sample: Merged revisions 284318 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r284318 | lmadsen | 2010-08-31 14:00:15 -0500
	  (Tue, 31 Aug 2010) | 22 lines Merged revisions 284317 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r284317 | lmadsen | 2010-08-31 13:59:31 -0500
	  (Tue, 31 Aug 2010) | 15 lines Merged revisions 284316 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r284316 | lmadsen | 2010-08-31 13:57:59 -0500 (Tue, 31 Aug 2010)
	  | 7 lines Update say.conf.sample to match the rules in say.c
	  (closes issue #17835) Reported by: RoadKill Patches:
	  say.conf.sample.patch.rules uploaded by RoadKill (license 933)
	  Tested by: RoadKill ........ ................ ................

	* channels/chan_sip.c: Add trustrpid and sendrpid global values to
	  'sip show settings' (closes issue #17860) Reported by: jtodd
	  Patches: __20100816-chan_sip-sip-show-settings.txt uploaded by
	  lmadsen (license 10) Tested by: lmadsen, russell

2010-08-30 22:30 +0000 [r284282]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, apps/app_festival.c: Merged revisions 284281 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r284281 | tilghman | 2010-08-30 17:28:47 -0500
	  (Mon, 30 Aug 2010) | 18 lines Merged revisions 284280 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r284280 | tilghman | 2010-08-30 17:27:06 -0500 (Mon, 30 Aug 2010)
	  | 11 lines Fix 3 coding errors: 1) After we close FD, we should
	  not be trying to write to it. 2) Call _exit(0), not exit(0), to
	  avoid running shutdown routines in a child. 3) Use endian, not
	  processor, detection to ensure bytes are written in the correct
	  order. (closes issue #15706) Reported by: modelnine Patches:
	  asterisk-1.6.1.1-festival-debug.patch uploaded by modelnine
	  (license 865) Tested by: gmartinez ........ ................

2010-08-30 09:32 +0000 [r284189-284248]  Olle Johansson <oej@edvina.net>

	* main/file.c: Small doxygen fix and doc addition

	* main/say.c: Clean upp doxygen documentation

	* include/asterisk/say.h: Doxygen formatting You can't write "same
	  as above" in hypertext documentation. Above doesn't make sense in
	  hyperspace.

	* apps/app_playback.c: Add doxygen documentation

2010-08-29 07:06 +0000 [r284097-284159]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, configs/res_curl.conf.sample (added): Merged revisions 284158
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r284158 | tilghman | 2010-08-29 02:05:27 -0500 (Sun, 29 Aug 2010)
	  | 2 lines Missed adding this file ........

	* /, sounds: Merged revisions 284127 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r284127 | tilghman | 2010-08-29 00:17:37 -0500 (Sun, 29 Aug 2010)
	  | 2 lines Also ignore the checksums ........

	* cel/cel_odbc.c (added), /, configs/cel_adaptive_odbc.conf.sample
	  (removed), configs/cel_odbc.conf.sample (added),
	  cel/cel_adaptive_odbc.c (removed): Merged revisions 284096 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r284096 | tilghman | 2010-08-28 21:51:14 -0500 (Sat, 28 Aug 2010)
	  | 3 lines Rename CEL adaptive driver to plain driver, since there
	  isn't another ODBC driver (and the other CEL drivers have
	  adaptive capabilities, anyway). ........

2010-08-28 21:30 +0000 [r284066]  Russell Bryant <russell@digium.com>

	* main/manager.c, /: Merged revisions 284065 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r284065 | russell | 2010-08-28 16:29:45 -0500 (Sat, 28 Aug 2010)
	  | 13 lines Be more flexible with whitespace on AMI action
	  headers. Previously, this code required exactly one space to be
	  after the ':' in headers for an AMI action. This now makes
	  whitespace optional, and allows whitespace that is there to vary
	  in amount. (closes issue #17862) Reported by: cmoye Patches:
	  manager.c.patch_trunk uploaded by cmoye (license 858)
	  manager.c.patch_1.8 uploaded by cmoye (license 858) Tested by:
	  cmoye ........

2010-08-27 22:39 +0000 [r284033]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 284032 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r284032 | dvossel | 2010-08-27 17:37:11 -0500
	  (Fri, 27 Aug 2010) | 21 lines Merged revisions 284002 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r284002 | dvossel | 2010-08-27 17:27:50 -0500
	  (Fri, 27 Aug 2010) | 14 lines Merged revisions 283960 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r283960 | dvossel | 2010-08-27 17:17:26 -0500 (Fri, 27 Aug 2010)
	  | 8 lines Parse all "Accept" headers for SIP SUBSCRIBE requests.
	  (closes issue #17758) Reported by: ibc Patches:
	  multiple_accept_headers_1.4.diff uploaded by dvossel (license
	  671) ........ ................ ................

2010-08-27 21:50 +0000 [r283958]  Russell Bryant <russell@digium.com>

	* /, pbx/pbx_realtime.c: Merged revisions 283951 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r283951 | russell | 2010-08-27 16:33:55 -0500 (Fri, 27 Aug 2010)
	  | 2 lines Print exten@context:priority in verbose messages from
	  pbx_realtime. ........

2010-08-27 20:32 +0000 [r283883]  Jason Parker <jparker@digium.com>

	* res/res_config_odbc.c, /, main/config.c,
	  addons/res_config_mysql.c: Merged revisions 283882 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r283882 | qwell | 2010-08-27 15:31:55 -0500
	  (Fri, 27 Aug 2010) | 22 lines Merged revisions 283881 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r283881 | qwell | 2010-08-27 15:30:27 -0500
	  (Fri, 27 Aug 2010) | 15 lines Merged revisions 283880 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r283880 | qwell | 2010-08-27 15:29:11 -0500 (Fri, 27 Aug 2010) |
	  8 lines Fix issue with decoding ^-escaped characters in realtime.
	  (closes issue #17790) Reported by: denzs Patches:
	  17790-chunky.diff uploaded by qwell (license 4) Tested by: qwell,
	  denzs ........ ................ ................

2010-08-27 14:01 +0000 [r283803]  Olle Johansson <oej@edvina.net>

	* main/manager.c: Doxygen formatting changes

2010-08-26 23:51 +0000 [r283771]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, res/res_musiconhold.c: Merged revisions 283770 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r283770 | tilghman | 2010-08-26 18:47:02 -0500 (Thu, 26
	  Aug 2010) | 8 lines Convert MOH to use generic timers. (closes
	  issue #17726) Reported by: lmadsen Patches:
	  20100825__issue17726__2.diff.txt uploaded by tilghman (license
	  14) Tested by: tilghman ........

2010-08-26 15:28 +0000 [r283693]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 283692 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r283692 | dvossel | 2010-08-26 10:26:37 -0500
	  (Thu, 26 Aug 2010) | 32 lines Merged revisions 283691 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r283691 | dvossel | 2010-08-26 10:24:40 -0500
	  (Thu, 26 Aug 2010) | 25 lines Merged revisions 283690 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r283690 | dvossel | 2010-08-26 10:22:28 -0500 (Thu, 26 Aug 2010)
	  | 19 lines Fixed how Asterisk destroys a dialog on channel hangup
	  before invite receives a response. If an ast_channel with a SIP
	  tech pvt hangs up before the sip dialog gets a response to its
	  outgoing INVITE, Asterisk used to pretend_ack the INVITE. This is
	  not rfc compliant and results in confusion at the other endpoint.
	  sip_pretend_ack will ack and remove all the packets in the
	  retransmit queue. This means that the INVITE will stop
	  retransmitting, and that any response to that INVITE that comes
	  after the pretend_ack occurs will be ignored. Instead of faking
	  any sort of acknowledgement for an outgoing INVITE during an
	  internal hangup, we should let the protocol stack process the
	  INVITE transaction and terminate the dialog properly. This is
	  achieved by setting the PENDING_BYE flag. When this flag is used,
	  once the dialog proceeds to an escapable state the transaction
	  will either be canceled with a SIP_CANCEL or completed followed
	  immediately by a BYE. Attempting to do this any other way is
	  incorrect. If the endpoint is not responding to the INVITE
	  request, the INVITE must continue to be retransmitted until it
	  times out which will result in the dialog being destroyed.
	  ........ ................ ................

2010-08-26 13:28 +0000 [r283628-283660]  Russell Bryant <russell@digium.com>

	* /, res/res_odbc.c: Merged revisions 283659 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r283659 | russell | 2010-08-26 08:26:14 -0500 (Thu, 26 Aug 2010)
	  | 2 lines Slight improvement to a debug message. ........

	* Makefile, /, keys/iaxtel.pub (removed), keys/freeworlddialup.pub
	  (removed): Merged revisions 283629 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r283629 | russell | 2010-08-26 07:48:45 -0500 (Thu, 26 Aug 2010)
	  | 2 lines Remove public keys that are no longer useful. ........

	* /, configs/manager.conf.sample: Merged revisions 283627 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r283627 | russell | 2010-08-26 07:26:22 -0500 (Thu, 26 Aug 2010)
	  | 2 lines Move httptimeout out from in between port and bindaddr.
	  ........

2010-08-25 22:59 +0000 [r283596]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 283595 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r283595 | dvossel | 2010-08-25 17:57:56 -0500
	  (Wed, 25 Aug 2010) | 14 lines Merged revisions 283594 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r283594 | dvossel | 2010-08-25 17:56:42 -0500 (Wed, 25 Aug 2010)
	  | 7 lines Add to and from tags to NOTIFY dialog-info xml body so
	  pickup can occur. When pedantic mode is used, the dialog-info xml
	  generated during a ringing event must contain the to and from tag
	  values. Otherwise if a pickup occurs using INVITE with replaces,
	  Astrisk will not be able to locate the subscription. ........
	  ................

2010-08-25 16:14 +0000 [r283562]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, res/res_odbc.c: Merged revisions 283561 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r283561 | tilghman | 2010-08-25 11:12:43 -0500 (Wed, 25 Aug 2010)
	  | 5 lines Initialize connect timeout on each time through the
	  loop. (closes issue #17911) Reported by: wurstsalat ........

2010-08-25 15:56 +0000 [r283560]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c, channels/sip/include/sip.h: Merged
	  revisions 283559 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r283559 | dvossel | 2010-08-25 10:54:11 -0500
	  (Wed, 25 Aug 2010) | 16 lines Merged revisions 283558 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r283558 | dvossel | 2010-08-25 10:52:54 -0500 (Wed, 25 Aug 2010)
	  | 10 lines Asterisk will not advertise session timers are
	  supported when 'session-timers=refuse' is used. Asterisk now
	  dynamically builds the "Supported" header depending on what is
	  enabled/disabled in sip.conf. Session timers used to always be
	  advertised as being supported even when they were disabled in the
	  configuration. This caused problems with some end points. (issue
	  #17005) ........ ................

2010-08-25 14:55 +0000 [r283528]  Russell Bryant <russell@digium.com>

	* /, channels/chan_sip.c: Merged revisions 283527 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r283527 | russell | 2010-08-25 09:55:00 -0500 (Wed, 25 Aug 2010)
	  | 2 lines Convert ast_log(LOG_DEBUG, ...) to ast_debug(...)
	  ........

2010-08-24 20:42 +0000 [r283495]  Damien Wedhorn <voip@facts.com.au>

	* channels/chan_skinny.c: Ignore redial hard button when no
	  previous number. (closes issue #17887) Reported by: salecha
	  Patches: skinny.redial.diff uploaded by wedhorn (license 30)
	  Tested by: wedhorn, salecha

2010-08-24 20:36 +0000 [r283494]  David Vossel <dvossel@digium.com>

	* /, configs/sip.conf.sample, UPGRADE-1.8.txt,
	  channels/sip/include/sip.h: Merged revisions 283493 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r283493 | dvossel | 2010-08-24 15:34:03 -0500 (Tue, 24
	  Aug 2010) | 2 lines Changes the default behavior for sip.conf's
	  pedantic option from "no" to "yes". ........

2010-08-24 18:58 +0000 [r283458]  Leif Madsen <lmadsen@digium.com>

	* res/res_rtp_asterisk.c, /, channels/chan_sip.c: Merged revisions
	  283457 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r283457 | lmadsen | 2010-08-24 13:56:29 -0500 (Tue, 24 Aug 2010)
	  | 9 lines Fix issue where TOS is no longer set on RTP packets.
	  Fix issue where the tos is no longer being set on RTP packets
	  through res_rtp_asterisk. (closes issue #17890) Reported by:
	  elguero Patches: qos_18.diff uploaded by elguero (license 37)
	  Review: https://reviewboard.asterisk.org/r/868 ........

2010-08-24 18:45 +0000 [r283383-283456]  David Vossel <dvossel@digium.com>

	* res/res_stun_monitor.c: This fix downgrades the ERROR message
	  indicating no res_stun_monitor.conf to a WARNING message.

	* /, channels/chan_sip.c: Merged revisions 283382 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r283382 | dvossel | 2010-08-24 11:11:18 -0500
	  (Tue, 24 Aug 2010) | 25 lines Merged revisions 283381 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r283381 | dvossel | 2010-08-24 11:07:37 -0500
	  (Tue, 24 Aug 2010) | 18 lines Merged revisions 283380 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r283380 | dvossel | 2010-08-24 11:01:51 -0500 (Tue, 24 Aug 2010)
	  | 11 lines This fix makes sure the ast_channel hangs up correctly
	  when the dialog's PENDING_BYE flag is set. When the pending bye
	  flag is used, it is possible that the dialog will terminate and
	  leave the sip_pvt->owner channel up. This is because we never
	  hangup the ast_channel after sending the SIP_BYE request. When we
	  receive the response for the SIP_BYE we set need_destroy which we
	  would expect to destroy the dialog on the next do_monitor loop,
	  but this is not the case. The dialog will only be destroyed once
	  the owner is hungup even with the need_destroy flag set. This
	  patch sets the softhangup flag on the ast_channel when a SIP_BYE
	  request is sent as a result of the pending bye flag. ........
	  ................ ................

2010-08-24 12:51 +0000 [r283351]  Russell Bryant <russell@digium.com>

	* /, funcs/func_odbc.c: Merged revisions 283350 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r283350 | russell | 2010-08-24 07:49:41 -0500 (Tue, 24 Aug 2010)
	  | 2 lines Don't attempt to release a NULL ODBC handle. ........

2010-08-23 21:35 +0000 [r283320]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, cdr/cdr_adaptive_odbc.c, cdr/cdr_odbc.c,
	  cel/cel_adaptive_odbc.c: Merged revisions 283319 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r283319 | tilghman | 2010-08-23 16:33:47 -0500
	  (Mon, 23 Aug 2010) | 9 lines Merged revisions 283318 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r283318 | tilghman | 2010-08-23 16:32:14 -0500 (Mon, 23
	  Aug 2010) | 2 lines CDR drivers depend upon res_odbc, not
	  directly on the ODBC libraries ........ ................

2010-08-23 20:50 +0000 [r283287-283289]  Damien Wedhorn <voip@facts.com.au>

	* channels/chan_skinny.c: Hack to allow easy debugging of skinny in
	  trunk.

	* channels/chan_skinny.c: Add additional AST_CONTROL_ states to
	  control2str.

	* channels/chan_skinny.c: Fixes display issues on 7910 and older
	  phones. Also correct the callinfo provided in skinny_answer.
	  (closes issue #17876) Reported by: salecha Patches:
	  skinny_cnd3.diff uploaded by wedhorn (license 30) Tested by:
	  salecha, wedhorn Review: NA

2010-08-23 13:35 +0000 [r283178-283242]  Russell Bryant <russell@digium.com>

	* configs/cel.conf.sample, /: Merged revisions 283241 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r283241 | russell | 2010-08-23 08:35:35 -0500 (Mon, 23
	  Aug 2010) | 2 lines Add sample configuration for cel_radius.
	  ........

	* /, include/asterisk/cel.h, main/cel.c: Merged revisions 283230
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r283230 | russell | 2010-08-23 08:23:12 -0500 (Mon, 23 Aug 2010)
	  | 7 lines Make the AST_CEL_AMA enum match up with the AST_CDR_
	  ama flag values. Really, having 2 enums for this is silly and
	  error prone, demonstrated by the crash that I hit because there
	  was an assumption in the code that the values in each matched up.
	  However, this is a quick fix to get them to match up so it will
	  work. ........

	* /, main/cel.c: Merged revisions 283209 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r283209 | russell | 2010-08-23 08:06:57 -0500 (Mon, 23 Aug 2010)
	  | 2 lines Don't blow up on an invalid AMA flag. ........

	* /, configs/cel_custom.conf.sample: Merged revisions 283207 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r283207 | russell | 2010-08-23 07:31:20 -0500 (Mon, 23 Aug 2010)
	  | 2 lines Tack on ${eventextra} to the sample cel_custom.conf.
	  ........

	* /, configs/cel_custom.conf.sample: Merged revisions 283177 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r283177 | russell | 2010-08-23 07:12:53 -0500 (Mon, 23 Aug 2010)
	  | 2 lines Cut down on excessive quotation. ........

2010-08-23 12:09 +0000 [r283176]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, res/res_stun_monitor.c: Merged revisions 283175 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r283175 | tilghman | 2010-08-23 07:06:26 -0500 (Mon, 23
	  Aug 2010) | 2 lines Don't fail to start if the config file is
	  missing. ........

2010-08-23 11:59 +0000 [r283174]  Russell Bryant <russell@digium.com>

	* /, configs/cel_custom.conf.sample: Merged revisions 283173 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r283173 | russell | 2010-08-23 06:58:34 -0500 (Mon, 23 Aug 2010)
	  | 5 lines Expand cel_custom.conf.sample. Include the usage of
	  CSV_QUOTE() to ensure data has valid CSV formatting. Also list
	  the special CEL variables that are available for use in the
	  mapping. ........

2010-08-20 15:39 +0000 [r283051]  Richard Mudgett <rmudgett@digium.com>

	* /, channels/sig_pri.c: Merged revisions 283050 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r283050 | rmudgett | 2010-08-20 10:35:38 -0500
	  (Fri, 20 Aug 2010) | 36 lines Merged revisions 283049 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r283049 | rmudgett | 2010-08-20 10:31:03 -0500
	  (Fri, 20 Aug 2010) | 29 lines Merged revisions 283048 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r283048 | rmudgett | 2010-08-20 10:24:36 -0500 (Fri, 20 Aug 2010)
	  | 22 lines Q931 - Sending PROGRESS after sending ALERTING is a
	  protocol error The PRI layer in chan_dadhi will check if a
	  PROGRESS message has already been sent, and not allow sending
	  another (although that is technically allowed by the Q931 spec),
	  however it does not protect against sending an ALERTING and then
	  sending a PROGRESS message, which is a violation of the
	  specification. Most switches don't seem to care too deeply about
	  this, but some do, and will disconnect the call when receiving
	  this invalid sequence. Protocol specification reference:
	  T-REC-Q.931-199805-I page 223, "Figure A.5/Q.931 -- Overview
	  protocol control (network side) point-point (sheet 3 of 8)"
	  (closes issue #17874) Reported by: nic_bellamy Patches:
	  asterisk-1.4-r282537_no-progress-after-alerting.patch uploaded by
	  nic bellamy (license 299)
	  asterisk-1.6.2-r282537_no-progress-after-alerting.patch uploaded
	  by nic bellamy (license 299)
	  asterisk-trunk-r282537_no-progress-after-alerting.patch uploaded
	  by nic bellamy (license 299) ........ ................
	  ................

2010-08-20 12:45 +0000 [r282980-283015]  Russell Bryant <russell@digium.com>

	* /, configs/cel_adaptive_odbc.conf.sample: Merged revisions 283013
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r283013 | russell | 2010-08-20 07:45:12 -0500 (Fri, 20 Aug 2010)
	  | 2 lines Fix a typo in a column name. ........

	* /, apps/app_celgenuserevent.c: Merged revisions 282979 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r282979 | russell | 2010-08-20 06:52:37 -0500 (Fri, 20 Aug 2010)
	  | 2 lines Add an argument missing from the CELGenUserEvent
	  documentation. ........

	* channels/chan_multicast_rtp.c, /: Merged revisions 282638 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r282638 | russell | 2010-08-18 07:30:40 -0500 (Wed, 18 Aug 2010)
	  | 4 lines Split _all_ arguments before parsing them. This fixes
	  multicast RTP paging using linksys mode. ........

2010-08-19 21:08 +0000 [r282892-282896]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 282895 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r282895 | dvossel | 2010-08-19 16:07:20 -0500
	  (Thu, 19 Aug 2010) | 25 lines Merged revisions 282894 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r282894 | dvossel | 2010-08-19 16:05:54 -0500
	  (Thu, 19 Aug 2010) | 18 lines Merged revisions 282893 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r282893 | dvossel | 2010-08-19 16:03:24 -0500 (Thu, 19 Aug 2010)
	  | 11 lines tos_sip option was not being set correctly When
	  tos_sip is used, the tos of the sip socket is only set correctly
	  if the socket binding changes on a reload. If the binding stays
	  the same but the TOS changes, the new tos value would not take
	  into effect. This patch fixes that. (closes issue #17712)
	  Reported by: nickb ........ ................ ................

	* /, channels/chan_sip.c: Merged revisions 282891 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r282891 | dvossel | 2010-08-19 15:34:41 -0500
	  (Thu, 19 Aug 2010) | 11 lines Merged revisions 282890 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r282890 | dvossel | 2010-08-19 15:31:22 -0500 (Thu, 19 Aug 2010)
	  | 5 lines fixes sip peer memory leaks in the peer_by_ip table
	  (issue #17798) ........ ................

2010-08-19 20:02 +0000 [r282861]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 282860 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r282860 | mnicholson | 2010-08-19 15:01:11 -0500
	  (Thu, 19 Aug 2010) | 30 lines Merged revisions 282859 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r282859 | mnicholson | 2010-08-19 14:44:00 -0500
	  (Thu, 19 Aug 2010) | 23 lines Merged revisions 277944 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r277944 | pabelanger | 2010-07-19 15:56:07 -0500 (Mon, 19 Jul
	  2010) | 16 lines Regression with T.38 negotiation Prior to
	  1.4.26.3 T.38 negotiation worked properly, in the case of the
	  reporter. (issue #16852) Reported by: cfc (closes issue #16705)
	  Reported by: mpiazzatnetbug Patches: issue16705_2.diff uploaded
	  by ebroad (license 878) Tested by: vrban, ebroad, c0rnoTa,
	  samdell3 Review: https://reviewboard.asterisk.org/r/754/ ........
	  ................ ................

2010-08-19 14:46 +0000 [r282827]  Tilghman Lesher <tilghman@meg.abyt.es>

	* main/netsock2.c, /: Merged revisions 282826 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r282826 | tilghman | 2010-08-19 09:44:51 -0500 (Thu, 19 Aug 2010)
	  | 2 lines Only output debugging if the debug level is on.
	  ........

2010-08-19 12:13 +0000 [r282798]  Russell Bryant <russell@digium.com>

	* include/asterisk/cel.h: Add a todo item for CEL.

2010-08-19 02:20 +0000 [r282751]  Terry Wilson <twilson@digium.com>

	* /, configs/sip.conf.sample: Merged revisions 282740 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r282740 | twilson | 2010-08-18 21:18:50 -0500
	  (Wed, 18 Aug 2010) | 16 lines Merged revisions 282730 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r282730 | twilson | 2010-08-18 21:14:28 -0500
	  (Wed, 18 Aug 2010) | 9 lines Merged revisions 282729 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r282729 | twilson | 2010-08-18 21:12:55 -0500 (Wed, 18
	  Aug 2010) | 2 lines Add some documentation about codec
	  negotiation to sip.conf ........ ................
	  ................

2010-08-18 21:34 +0000 [r282701]  Damien Wedhorn <voip@facts.com.au>

	* channels/chan_skinny.c: Cleanup: consolidate offhook (new call).
	  Consolidates all offhook (new call with dialtone) to
	  setsubstate_offhook. This should be roughly equivalent to
	  existing code, although a couple of calls now run through the
	  full offhook sequence rather than an abbreviated one. (closes
	  issue #17812) Reported by: wedhorn Patches:
	  cleanup.stateoffhook.diff uploaded by wedhorn (license 30) Tested
	  by: salecha, wedhorn Review: NA

2010-08-18 15:35 +0000 [r282673]  Richard Mudgett <rmudgett@digium.com>

	* channels/sig_pri.h, channels/chan_dahdi.c, /: Merged revisions
	  282671-282672 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r282671 | rmudgett | 2010-08-18 10:27:51 -0500 (Wed, 18 Aug 2010)
	  | 1 line Use the correct operator when calculating the PRI span
	  devstate. ........ r282672 | rmudgett | 2010-08-18 10:28:27 -0500
	  (Wed, 18 Aug 2010) | 1 line Use the correct type for
	  aoce_delayhangup bit field. ........

2010-08-18 13:11 +0000 [r282640]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 282639 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r282639 | mnicholson | 2010-08-18 08:10:39 -0500 (Wed, 18 Aug
	  2010) | 13 lines Properly handle 200 and unknown responses
	  conatined in NOTIFY requests received in response to REFER
	  requests. This patch fixes the way asterisk handles NOTIFY
	  requests received in response to REFER requests. These changes to
	  NOTIFY handler were first introduced in r217482. This new change
	  properly handles the 200 response by queueing an
	  AST_TRANSFER_SUCCESS control frame and also prevents that control
	  frame from being queued when provisional and unknown responses
	  are received. (issue #17486) Reported by: davidw Tested by:
	  mnicholson (issue #12713) Reported by: davidw Review:
	  https://reviewboard.asterisk.org/r/860/ ........

2010-08-18 07:50 +0000 [r282609]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, channels/sig_pri.c: Merged revisions 282608 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r282608 | tilghman | 2010-08-18 02:49:04 -0500
	  (Wed, 18 Aug 2010) | 16 lines Merged revisions 282607 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r282607 | tilghman | 2010-08-18 02:43:14 -0500 (Wed, 18 Aug 2010)
	  | 9 lines Don't warn on callerid when completely text, instead of
	  numeric with localdialplan prefixes. (closes issue #16770)
	  Reported by: jamicque Patches: 20100413__issue16770.diff.txt
	  uploaded by tilghman (license 14) 20100811__issue16770.diff.txt
	  uploaded by tilghman (license 14) Tested by: jamicque ........
	  ................

2010-08-17 21:37 +0000 [r282544-282578]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 282577 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r282577 | dvossel | 2010-08-17 16:36:57 -0500
	  (Tue, 17 Aug 2010) | 16 lines Merged revisions 282576 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r282576 | dvossel | 2010-08-17 16:35:17 -0500 (Tue, 17 Aug 2010)
	  | 9 lines fixes no default transport for temp peer creation in
	  chan_sip (closes issue #17829) Reported by: falves11 Patches:
	  issue_17829.rev1.txt uploaded by russell (license 2)
	  issue_17829.diff uploaded by dvossel (license 671) Tested by:
	  falves11 ........ ................

	* /, channels/chan_iax2.c: Merged revisions 282545 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r282545 | dvossel | 2010-08-17 15:08:56 -0500 (Tue, 17
	  Aug 2010) | 6 lines ACCEPT message should respond with the new
	  FORMAT2 ie (closes issue #17804) Reported by: tpanton ........

	* /, include/asterisk/unaligned.h: Merged revisions 282543 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r282543 | dvossel | 2010-08-17 14:34:06 -0500 (Tue, 17 Aug 2010)
	  | 4 lines fixes truncated uint64_t value in
	  put_unaligned_uint64_t() function (issue #17804) ........

2010-08-16 20:40 +0000 [r282502]  Terry Wilson <twilson@digium.com>

	* main/channel.c, /: Merged revisions 282468 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r282468 | twilson | 2010-08-16 12:53:44 -0500
	  (Mon, 16 Aug 2010) | 30 lines Merged revisions 282467 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r282467 | twilson | 2010-08-16 12:32:01 -0500
	  (Mon, 16 Aug 2010) | 23 lines Merged revisions 282430 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r282430 | twilson | 2010-08-16 12:06:37 -0500 (Mon, 16 Aug 2010)
	  | 16 lines Send a SRCCHANGE indication when we masquerade
	  Masquerading a channel means that the src of the audio is
	  potentially changing, so send a SRCCHANGE so that RTP-based media
	  streams can get a new SSRC generated to reflect the change.
	  Original patch by addix (along with lots of testing--thanks!).
	  (closes issue #17007) Reported by: addix Patches:
	  1001-reset-SSRC-original-channel.diff uploaded by addix (license
	  1006) srcchange.diff uploaded by twilson (license 396) Tested by:
	  addix, twilson Review: https://reviewboard.asterisk.org/r/862/
	  ........ ................ ................

2010-08-16 18:02 +0000 [r282471]  Leif Madsen <lmadsen@digium.com>

	* doc/tex/sounds.tex (added), /, doc/tex/asterisk.tex: Merged
	  revisions 282470 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r282470 | lmadsen | 2010-08-16 13:01:00 -0500
	  (Mon, 16 Aug 2010) | 15 lines Merged revisions 282469 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r282469 | lmadsen | 2010-08-16 13:00:09 -0500 (Mon, 16 Aug 2010)
	  | 7 lines Add information about creating sounds files using the
	  sounds tools publically available so that others can create their
	  own sounds prompts using the same tools we use to generate sounds
	  releases. This allows people creating their own prompts to sound
	  consistent with the prompts available from the open source
	  project. SWP-595 ........ ................

2010-08-15 13:08 +0000 [r282397]  Tzafrir Cohen <tzafrir.cohen@xorcom.com>

	* utils/muted.c, configure, main/Makefile, configure.ac,
	  main/acl.c, channels/chan_oss.c, main/netsock.c: Support for
	  GNU/kFreeBSD kFreeBSD is GNU (with glibc) on to of a FreeBSD
	  kernel. See http://glibc-bsd.alioth.debian.org/porting/PORTING
	  This patch gets Asterisk close to building on Debian kFreeBSD
	  i386, mainly by adding an extra test for __GLIBC__ in one or two
	  (or more) places. OSARCH is set to 'kfreebsd-gnu' DAHDI support
	  (and support for chan_vpb) was not tested. Review:
	  https://reviewboard.asterisk.org/r/858/

2010-08-14 04:58 +0000 [r282367]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, include/asterisk/sched.h, channels/chan_iax2.c: Merged
	  revisions 282366 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r282366 | tilghman | 2010-08-13 23:53:58 -0500 (Fri, 13 Aug 2010)
	  | 4 lines Fix our FRACKing issue with chan_iax2 a different way.
	  Review: https://reviewboard.asterisk.org/r/861/ ........

2010-08-13 23:57 +0000 [r282335]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 282334 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r282334 | rmudgett | 2010-08-13 18:53:36 -0500 (Fri, 13
	  Aug 2010) | 6 lines PRI CCSS may use a stale dial string for the
	  recall dial string. If an outgoing call negotiates a different B
	  channel than initially requested, the saved original dial string
	  was not transferred to the new B channel. CCSS uses that dial
	  string to generate the recall dial string. ........

2010-08-13 22:27 +0000 [r282237-282304]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c, configs/sip.conf.sample, CHANGES,
	  UPGRADE-1.8.txt: Merged revisions 282302 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r282302 | dvossel | 2010-08-13 17:23:38 -0500 (Fri, 13 Aug 2010)
	  | 10 lines remove current STUN support from chan_sip.c This patch
	  removes the current broken/useless stun support from chan_sip.
	  (closes issue #17622) Reported by: philipp2 Review:
	  https://reviewboard.asterisk.org/r/855/ ........

	* /, CHANGES: Merged revisions 282271 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r282271 | dvossel | 2010-08-13 15:11:58 -0500 (Fri, 13 Aug 2010)
	  | 2 lines res_stun_monitor and corresponding options CHANGES
	  documentation ........

	* configs/iax.conf.sample, /, channels/chan_sip.c,
	  include/asterisk/event_defs.h, res/res_stun_monitor.c (added),
	  configs/res_stun_monitor.conf.sample (added),
	  configs/sip.conf.sample, channels/chan_iax2.c: Merged revisions
	  282269 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r282269 | dvossel | 2010-08-13 15:03:56 -0500 (Fri, 13 Aug 2010)
	  | 4 lines res_stun_monitor for monitoring network changes behind
	  a NAT device Review: https://reviewboard.asterisk.org/r/854
	  ........

	* /, channels/chan_sip.c: Merged revisions 282236 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r282236 | dvossel | 2010-08-13 13:58:10 -0500
	  (Fri, 13 Aug 2010) | 23 lines Merged revisions 282235 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r282235 | dvossel | 2010-08-13 13:54:53 -0500 (Fri, 13 Aug 2010)
	  | 16 lines only do magic pickup when notifycid is enabled A new
	  way of doing BLF pickup was introduced into 1.6.2. This feature
	  adds a call-id value into the XML of a SIP_NOTIFY message sent to
	  alert a subscriber that a device is ringing. This option should
	  only be enabled when the new 'notifycid' option is set... but
	  this was not the case. Instead the call-id value was included for
	  every RINGING Notify message, which caused a regression for
	  people who used other methods for call pickup. (closes issue
	  #17633) Reported by: urosh Patches: chan_sip.txt uploaded by
	  urosh (license ) blf_cid_issue.diff uploaded by dvossel (license
	  671) Tested by: dvossel, urosh, okrief, alecdavis ........
	  ................

2010-08-13 16:08 +0000 [r282202]  Terry Wilson <twilson@digium.com>

	* /, configure, configure.ac: Merged revisions 282200-282201 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r282200 | twilson | 2010-08-13 11:00:02 -0500 (Fri, 13 Aug 2010)
	  | 10 lines Detect when libsrtp cannot be linked in a shared
	  library The libsrtp build system currently does not produce a
	  shared library or a static library compiled with -fPIC, so on
	  64-bit systems it is possible that we will get a compile error if
	  libsrtp is installed and res_srtp is selected in menuselect. This
	  patch attempts to detect this situation and provide the user with
	  instructions to work around the problem. ........ r282201 |
	  twilson | 2010-08-13 11:02:20 -0500 (Fri, 13 Aug 2010) | 2 lines
	  Whitespace fix :-/ ........

2010-08-12 22:52 +0000 [r282132]  Jason Parker <jparker@digium.com>

	* /, pbx/pbx_config.c: Merged revisions 282131 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r282131 | qwell | 2010-08-12 17:51:44 -0500
	  (Thu, 12 Aug 2010) | 16 lines Merged revisions 282130 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r282130 | qwell | 2010-08-12 17:50:54 -0500
	  (Thu, 12 Aug 2010) | 9 lines Merged revisions 282129 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r282129 | qwell | 2010-08-12 17:49:28 -0500 (Thu, 12 Aug
	  2010) | 1 line Register CLI commands before parsing config, in
	  case there is a config error. ........ ................
	  ................

2010-08-12 22:10 +0000 [r282099]  Richard Mudgett <rmudgett@digium.com>

	* /, main/ccss.c, include/asterisk/ccss.h: Merged revisions 282098
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r282098 | rmudgett | 2010-08-12 17:06:06 -0500 (Thu, 12 Aug 2010)
	  | 7 lines Separate call completion config parameter allocation
	  and default initialization. If you ever have a need to reset the
	  call completion config parameters to defaults, now you can. And
	  no Virginia, C++ idioms do not always work in C. ........

2010-08-12 20:44 +0000 [r282067]  Russell Bryant <russell@digium.com>

	* /, CHANGES, main/cli.c: Merged revisions 282066 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r282066 | russell | 2010-08-12 15:41:17 -0500 (Thu, 12 Aug 2010)
	  | 4 lines Add a "core reload" CLI command. Review:
	  https://reviewboard.asterisk.org/r/859/ ........

2010-08-12 20:17 +0000 [r282048]  David Vossel <dvossel@digium.com>

	* /, main/translate.c, CHANGES, include/asterisk/translate.h,
	  main/cli.c: Merged revisions 282047 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r282047 | dvossel | 2010-08-12 15:15:41 -0500 (Thu, 12 Aug 2010)
	  | 35 lines improved translation paths for wideband codecs The
	  problem I'm addressing is that Asterisk's current method of
	  building the least cost translation paths between codecs does not
	  take into account sample rate. For instance, it was possible for
	  siren14 (a 32khz codec), to contain the a translation path to
	  siren7 (a 16khz audio codec) that goes through slin at 8khz. In
	  this case Asterisk takes a 32khz codec, down samples it to 8khz
	  and then up samples it to 16khz which is terrible regardless if
	  it is computationally less expensive. This patch now builds
	  translation paths that give priority to maintaining the best
	  possible sample rate before taking into consideration
	  computational cost. This patch also adds cli commands to expose
	  what translation paths are actually being used. Changes: 1.
	  Translation paths will never contain a step that changes the
	  sample rate unless absolutely necessary. 2. When choosing the
	  best codec to make two channels compatible. Shared codecs with
	  the highest sample rate are given priority. 3. A new cli command
	  to show all translation paths available for a specific codec
	  'core show translation paths [codec name]' has been added. 4.
	  'core show translation' which displays the translation matrix now
	  includes the new higher bit audio codecs in the table. 5. 'core
	  show channel [channel name]' now displays the translation paths
	  if translation is used. (closes issue #16841) Reported by:
	  dvossel Review: https://reviewboard.asterisk.org/r/842/ ........

2010-08-12 18:04 +0000 [r281983-282016]  Russell Bryant <russell@digium.com>

	* main/pbx.c, /: Merged revisions 282015 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r282015 | russell | 2010-08-12 13:03:56 -0500 (Thu, 12 Aug 2010)
	  | 2 lines Put back pointer value output for ast_debug(), such
	  that it is only removed for verbose output. ........

	* main/pbx.c, /: Merged revisions 281982 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r281982 | russell | 2010-08-12 11:33:30 -0500 (Thu, 12 Aug 2010)
	  | 5 lines Remove debugging output from verbose messages. Pointer
	  values to internal objects is not terribly useful to users in the
	  verbose messages about adding extensions and contexts. ........

2010-08-12 03:08 +0000 [r281914]  Jeff Peeler <jpeeler@digium.com>

	* main/channel.c, /: Merged revisions 281913 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r281913 | jpeeler | 2010-08-11 22:03:37 -0500
	  (Wed, 11 Aug 2010) | 34 lines Merged revisions 281912 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r281912 | jpeeler | 2010-08-11 22:01:38 -0500
	  (Wed, 11 Aug 2010) | 27 lines Merged revisions 281911 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r281911 | jpeeler | 2010-08-11 22:00:14 -0500 (Wed, 11 Aug 2010)
	  | 20 lines Ensure SSRC is changed when media source is changed to
	  resolve audio delay. This change causes the SSRC to change right
	  before the channels are bridged, which is what used to happen. It
	  seems that fixes were made to attempt limiting SSRC changes,
	  targeted mainly at sending DTMF. DTMF is not affecting the SSRC
	  with this change. There are two other control frames sent in
	  ast_channel_bridge that probably should also be changed to
	  AST_CONTROL_SRCCHANGE as well, but I'm going to leave this change
	  up to the discretion of resolving issue #17007. For reference -
	  old review implementing new control frame SRCCHANGE:
	  https://reviewboard.asterisk.org/r/540 (closes issue #17404)
	  Reported by: sdolloff Patches: bug17404.patch uploaded by jpeeler
	  (license 325) Tested by: sdolloff ........ ................
	  ................

2010-08-11 21:13 +0000 [r281877]  Leif Madsen <lmadsen@digium.com>

	* /, configs/say.conf.sample: Merged revisions 281875 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r281875 | lmadsen | 2010-08-11 16:12:13 -0500
	  (Wed, 11 Aug 2010) | 21 lines Merged revisions 281873 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r281873 | lmadsen | 2010-08-11 16:09:47 -0500
	  (Wed, 11 Aug 2010) | 14 lines Merged revisions 281819 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r281819 | lmadsen | 2010-08-11 13:28:10 -0500 (Wed, 11 Aug 2010)
	  | 6 lines Add Danish support to say.conf.sample (closes issue
	  #17836) Reported by: RoadKill Patches: say.conf.sample.patch.dk
	  uploaded by RoadKill (license 933) ........ ................
	  ................

2010-08-11 21:12 +0000 [r281876]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 281874 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r281874 | mnicholson | 2010-08-11 16:11:54 -0500 (Wed, 11 Aug
	  2010) | 10 lines handle all possible responses to REFER requests
	  (closes issue #17486) Reported by: davidw Patches:
	  Issue17486-counterbid.diff.txt uploaded by davidw (license 780)
	  Tested by: davidw Review: https://reviewboard.asterisk.org/r/837/
	  ........

2010-08-11 20:38 +0000 [r281871]  Richard Mudgett <rmudgett@digium.com>

	* channels/sig_analog.c, /, channels/sig_analog.h: Merged revisions
	  281870 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r281870 | rmudgett | 2010-08-11 15:30:29 -0500 (Wed, 11 Aug 2010)
	  | 4 lines Fix a call to analog_set_pulsedial() not setting 0 or 1
	  only. * Also a couple minor tweaks. ........

2010-08-11 17:55 +0000 [r281765]  Leif Madsen <lmadsen@digium.com>

	* /, configs/say.conf.sample: Merged revisions 281764 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r281764 | lmadsen | 2010-08-11 12:54:56 -0500
	  (Wed, 11 Aug 2010) | 21 lines Merged revisions 281763 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r281763 | lmadsen | 2010-08-11 12:54:09 -0500
	  (Wed, 11 Aug 2010) | 14 lines Merged revisions 281762 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r281762 | lmadsen | 2010-08-11 12:51:40 -0500 (Wed, 11 Aug 2010)
	  | 6 lines Allow say.conf to handle large numbers ending with
	  multiple zeros. (closes issue #17833) Reported by: RoadKill
	  Patches: say.conf.sample.patch.largenumbers uploaded by RoadKill
	  (license 933) ........ ................ ................

2010-08-11 17:29 +0000 [r281761]  Matthew Nicholson <mnicholson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 281760 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r281760 | mnicholson | 2010-08-11 12:27:59 -0500 (Wed, 11 Aug
	  2010) | 4 lines Avoid a deadlock in add_header_max_forwards().
	  Related to r276951 ........

2010-08-11 15:20 +0000 [r281726]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, apps/app_readexten.c: Merged revisions 281723 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r281723 | tilghman | 2010-08-11 10:18:40 -0500
	  (Wed, 11 Aug 2010) | 14 lines Merged revisions 281722 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r281722 | tilghman | 2010-08-11 10:17:20 -0500 (Wed, 11 Aug 2010)
	  | 7 lines Only set status TIMEOUT, if we have no digits. (closes
	  issue #15188) Reported by: jcovert Patches:
	  app_readexten.c.patch-1.6.2.8-rc1 uploaded by jcovert (license
	  551) ........ ................

2010-08-11 13:31 +0000 [r281688]  <simon.perreault@viagenie.ca>

	* main/netsock2.c, /, include/asterisk/netsock2.h,
	  configs/sip.conf.sample, channels/sip/config_parser.c: Merged
	  revisions 281687 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r281687 | simon.perreault | 2010-08-11 09:30:59 -0400 (Wed, 11
	  Aug 2010) | 9 lines Fix parsing of IPv6 address literals in
	  outboundproxy (closes issue #17757) Reported by: oej Patches:
	  17757.diff uploaded by sperreault (license 252) sip.conf.diff
	  uploaded by sperreault (license 252) Tested by: oej ........

2010-08-10 21:50 +0000 [r281530-281651]  Russell Bryant <russell@digium.com>

	* /, configs/sip.conf.sample, UPGRADE-1.8.txt,
	  channels/sip/include/sip.h: Merged revisions 281650 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r281650 | russell | 2010-08-10 16:47:31 -0500 (Tue, 10
	  Aug 2010) | 5 lines Change the default value for alwaysauthreject
	  in sip.conf to "yes". (closes issue #17756) Reported by: oej
	  ........

	* /, main/sched.c: Merged revisions 281575 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r281575 | russell | 2010-08-10 13:05:07 -0500
	  (Tue, 10 Aug 2010) | 16 lines Merged revisions 281574 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r281574 | russell | 2010-08-10 13:04:32 -0500 (Tue, 10 Aug 2010)
	  | 9 lines Don't move the time threshold for running scheduled
	  events on every iteration. Instead, only calculate the time
	  threshold each time ast_sched_runq() is called. (closes issue
	  #17742) Reported by: schmidts Patches: sched.c.patch uploaded by
	  schmidts (license 1077) ........ ................

	* apps/app_dial.c, /: Merged revisions 281568 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r281568 | russell | 2010-08-10 12:48:42 -0500
	  (Tue, 10 Aug 2010) | 22 lines Merged revisions 281567 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r281567 | russell | 2010-08-10 12:47:13 -0500
	  (Tue, 10 Aug 2010) | 15 lines Merged revisions 281566 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r281566 | russell | 2010-08-10 12:45:45 -0500 (Tue, 10 Aug 2010)
	  | 8 lines Reset visible indication after answer. (closes issue
	  #17641) Reported by: klaus3000 Patches:
	  ast1.6.2.9-app_dial-visible_indication.patch.txt uploaded by
	  klaus3000 (license 65) Tested by: schmidts ........
	  ................ ................

	* /, channels/chan_sip.c: Merged revisions 281532 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r281532 | russell | 2010-08-10 11:54:20 -0500 (Tue, 10 Aug 2010)
	  | 8 lines Ensure that the proper external address is used for the
	  RTP destination. (closes issue #17044) Reported by: ebroad Tested
	  by: ebroad Review: https://reviewboard.asterisk.org/r/566/
	  ........

	* /, main/cli.c: Merged revisions 281529 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r281529 | russell | 2010-08-10 11:21:58 -0500 (Tue, 10 Aug 2010)
	  | 8 lines Resolve a problem with channel name tab completion.
	  Hitting tab without typing any part of a channel name resulted in
	  no results. This now results in getting a full list of active
	  channels, just as it did in previous versions of Asterisk.
	  Review: https://reviewboard.asterisk.org/r/818/ ........

2010-08-10 07:26 +0000 [r281498]  TransNexus OSP Development <support@transnexus.com>

	* apps/app_osplookup.c: Fixed the issue caused by EXTEN including
	  user parameters.

2010-08-09 23:04 +0000 [r281467]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_local.c, /: Merged revisions 281466 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r281466 | jpeeler | 2010-08-09 18:04:02 -0500 (Mon, 09
	  Aug 2010) | 2 lines Add some more stuff to copy from 281429.
	  ........

2010-08-09 20:49 +0000 [r281433]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 281432 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r281432 | dvossel | 2010-08-09 15:47:53 -0500
	  (Mon, 09 Aug 2010) | 20 lines Merged revisions 281430 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r281430 | dvossel | 2010-08-09 15:46:50 -0500 (Mon, 09 Aug 2010)
	  | 13 lines fixes SIP peers memory leak We zeroed out the peer's
	  addr before it was removed from the peers_by_ip container. This
	  made it impossible to be removed from the container as the addr
	  is the key used by the container to find the peer. (closes issue
	  #17774) Reported by: kkm Patches:
	  017774-sip-peer-leak-1.6.2.10.diff uploaded by kkm (license 888)
	  017774-sip-peer-leak-1.8.diff uploaded by kkm (license 888)
	  ........ ................

2010-08-09 20:46 +0000 [r281431]  Jeff Peeler <jpeeler@digium.com>

	* channels/chan_local.c, /: Merged revisions 281429 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r281429 | jpeeler | 2010-08-09 15:43:54 -0500
	  (Mon, 09 Aug 2010) | 27 lines Merged revisions 281391 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r281391 | jpeeler | 2010-08-09 15:07:29 -0500
	  (Mon, 09 Aug 2010) | 20 lines Merged revisions 281390 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r281390 | jpeeler | 2010-08-09 15:04:30 -0500 (Mon, 09 Aug 2010)
	  | 13 lines Prevent loss of Caller ID information set on local
	  channel after masquerade. Caller ID set on the channel before a
	  masquerade occurs when using a local channel would cause the
	  information to be lost. The problem was that the information was
	  set on a channel destined to be hung up. The somewhat confusing
	  fix is to detect if any Caller ID has been set on the channel and
	  if so preswap the Caller ID data so that basically the masquerade
	  puts the data back. (closes issue #17138) Reported by: kobaz
	  Review: https://reviewboard.asterisk.org/r/847/ ........
	  ................ ................

2010-08-09 14:52 +0000 [r281359]  Matthew Nicholson <mnicholson@digium.com>

	* /, res/res_fax.c: Merged revisions 281358 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r281358 | mnicholson | 2010-08-09 09:49:38 -0500 (Mon, 09 Aug
	  2010) | 4 lines Validate minrate, maxrate, and modem settings
	  before attempting a fax session. FAX-224 ........

2010-08-09 14:32 +0000 [r281357]  <simon.perreault@viagenie.ca>

	* /, configs/sip.conf.sample: Merged revisions 281356 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r281356 | simon.perreault | 2010-08-09 10:31:40 -0400
	  (Mon, 09 Aug 2010) | 2 lines Added comment about IPv4-mapped IPv6
	  addresses and the output of netstat. ........

2010-08-09 12:52 +0000 [r281295-281326]  Russell Bryant <russell@digium.com>

	* /, configs/cdr.conf.sample: Merged revisions 281325 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r281325 | russell | 2010-08-09 07:51:43 -0500 (Mon, 09
	  Aug 2010) | 2 lines Add a couple of default values to the
	  documentation of cdr.conf. ........

	* /, configs/cdr.conf.sample: Merged revisions 281294 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r281294 | russell | 2010-08-09 07:14:34 -0500 (Mon, 09
	  Aug 2010) | 5 lines Reorder some options in cdr.conf.sample. Put
	  all of the options that affect the contents of CDRs together,
	  instead of having the batch mode options in the middle of them.
	  ........

2010-08-07 22:36 +0000 [r281226-281257]  Damien Wedhorn <voip@facts.com.au>

	* channels/chan_skinny.c: Fix up handling and indications during
	  transfer. Cleaned up handling of onhook indications and added
	  indications if more than one sub on device. Also fixes issue in
	  12324 so that the phone can call itself without locking up.
	  (closes issue #17692) Reported by: jmhunter Patches:
	  chan_skinny-transfer-v4.txt uploaded by DEA (license 3)
	  skinnytransfver.v8.diff uploaded by wedhorn (license 30) Tested
	  by: jmhunter, salecha, wedhorn Review: NA

	* channels/chan_skinny.c: Move call answering stuff into new
	  setsubstate_connected. Move call answering stuff into new
	  setsubstate_connected. Also add sub->substate var and set it to
	  SUBSTATE_CONNECTED in setsubstate_connected. (closes issue
	  #17772) Reported by: wedhorn Patches:
	  cleanup.stateconnected2.diff uploaded by wedhorn (license 30)
	  Tested by: wedhorn, salecha Review: NA

	* channels/chan_skinny.c: Start rtp on answer before the answer is
	  queued (closes issue #17770) Reported by: salecha Patches:
	  skinny.answercrash.diff uploaded by wedhorn (license 30) Tested
	  by: salecha Review: NA

2010-08-06 18:58 +0000 [r281086]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, main/utils.c: Merged revisions 281085 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r281085 | tilghman | 2010-08-06 13:57:10 -0500 (Fri, 06 Aug 2010)
	  | 8 lines Fix alignment of stringfields on the SPARC architecture
	  (closes issue #17789) Reported by: Ian Mason Patches:
	  20100806__issue17789__2.diff.txt uploaded by tilghman (license
	  14) Tested by: Ian_Mason ........

2010-08-05 13:19 +0000 [r281054]  Russell Bryant <russell@digium.com>

	* main/cdr.c, /: Merged revisions 281052 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r281052 | russell | 2010-08-05 08:16:11 -0500
	  (Thu, 05 Aug 2010) | 16 lines Merged revisions 281051 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r281051 | russell | 2010-08-05 08:11:32 -0500 (Thu, 05 Aug 2010)
	  | 9 lines Cleanup default option value handling for cdr.conf
	  [general]. The default values would differ depending on whether
	  or not cdr.conf exists. That is no longer the case. Apply a
	  default value to the unanswered option. Define all default values
	  as named constants. ........ ................

2010-08-05 07:47 +0000 [r280985]  Tilghman Lesher <tilghman@meg.abyt.es>

	* main/pbx.c, /, include/asterisk/pbx.h: Merged revisions 280984
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r280984 | tilghman | 2010-08-05 02:46:36 -0500
	  (Thu, 05 Aug 2010) | 22 lines Merged revisions 280983 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r280983 | tilghman | 2010-08-05 02:40:47 -0500
	  (Thu, 05 Aug 2010) | 15 lines Merged revisions 280982 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r280982 | tilghman | 2010-08-05 02:28:33 -0500 (Thu, 05 Aug 2010)
	  | 8 lines Change context lock back to a mutex, because
	  functionality depends upon the lock being recursive. (closes
	  issue #17643) Reported by: zerohalo Patches:
	  20100726__issue17643.diff.txt uploaded by tilghman (license 14)
	  Tested by: zerohalo ........ ................ ................

2010-08-04 15:22 +0000 [r280910]  Matthew Nicholson <mnicholson@digium.com>

	* /, res/res_fax.c: Merged revisions 280909 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r280909 | mnicholson | 2010-08-04 10:11:13 -0500 (Wed, 04 Aug
	  2010) | 2 lines Initialize FAXOPT() status variables in sendfax
	  and receivefax instead of when the details structure is created.
	  ........

2010-08-04 14:05 +0000 [r280810-280880]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, channels/chan_mgcp.c: Merged revisions 280879 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r280879 | tilghman | 2010-08-04 09:04:07 -0500 (Wed, 04
	  Aug 2010) | 14 lines Check cur value before attempting a deref.
	  (closes issue #17775) Reported by: svinson Patches:
	  20100804__issue17775.diff.txt uploaded by tilghman (license 14)
	  Tested by: svinson (closes issue #17743) Reported by: tgruenberg
	  Patches: 20100804__issue17775.diff.txt uploaded by tilghman
	  (license 14) Tested by: tgruenberg ........

	* /, funcs/func_strings.c, CHANGES: Merged revisions 280809 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r280809 | tilghman | 2010-08-03 15:25:10 -0500 (Tue, 03 Aug 2010)
	  | 12 lines Sneak FIELDNUM() into 1.8. Returns a 1-based index
	  into a list of a specified item. Matches up with FIELDQTY() and
	  CUT(). (closes issue #17713) Reported by: gareth Patches:
	  svn-279754.diff uploaded by gareth (license 208) Tested by:
	  gareth, tilghman Review: https://reviewboard.asterisk.org/r/810/
	  ........

2010-08-03 19:59 +0000 [r280745-280780]  <simon.perreault@viagenie.ca>

	* /, channels/chan_sip.c: Merged revisions 280778 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r280778 | simon.perreault | 2010-08-03 15:54:03 -0400 (Tue, 03
	  Aug 2010) | 9 lines Fixed IPv6-related SIP parsing bugs. (closes
	  issue #17663) Reported by: oej Patches: diff uploaded by
	  sperreault (license 252) diff2 uploaded by sperreault (license
	  252) get_domain.diff uploaded by sperreault (license 252)
	  ........

	* /, configs/sip.conf.sample: Merged revisions 280777 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r280777 | simon.perreault | 2010-08-03 15:53:07 -0400
	  (Tue, 03 Aug 2010) | 8 lines Better documentation related to
	  IPv6. (closes issue #17737) Reported by: oej Patches: doc.diff
	  uploaded by sperreault (license 252) Tested by: mmichelson
	  ........

	* contrib/realtime/mysql/voicemail.sql, channels/chan_sip.c,
	  contrib/realtime/mysql/iaxfriends.sql,
	  contrib/realtime/mysql/meetme.sql,
	  contrib/realtime/postgresql/realtime.sql,
	  configs/sip.conf.sample, contrib/realtime/mysql/sipfriends.sql:
	  Reverted r280706 and r280707. Will commit in branch 1.8 and merge
	  to trunk properly.

2010-08-03 18:50 +0000 [r280743]  Russell Bryant <russell@digium.com>

	* contrib/scripts/get_mp3_source.sh (added), /, addons/Makefile,
	  addons/mp3 (removed): Merged revisions 280742 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r280742 | russell | 2010-08-03 13:48:45 -0500 (Tue, 03 Aug 2010)
	  | 4 lines Remove the MP3 decoder source code and replace it with
	  a small shell script. Review:
	  https://reviewboard.asterisk.org/r/836/ ........

2010-08-03 18:43 +0000 [r280741]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, doc/asterisk.8, doc/Makefile (added), doc/asterisk.sgml:
	  Merged revisions 280740 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r280740 | tilghman | 2010-08-03 13:42:24 -0500
	  (Tue, 03 Aug 2010) | 9 lines Merged revisions 280739 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r280739 | tilghman | 2010-08-03 13:39:28 -0500 (Tue, 03
	  Aug 2010) | 2 lines Document -B and -W flags and regenerate
	  manpage from sgml ........ ................

2010-08-03 16:52 +0000 [r280706-280707]  <simon.perreault@viagenie.ca>

	* channels/chan_sip.c: Fixed IPv6-related SIP parsing bugs. (closes
	  issue #17663) Reported by: oej Patches: diff uploaded by
	  sperreault (license 252) diff2 uploaded by sperreault (license
	  252) get_domain.diff uploaded by sperreault (license 252)

	* configs/sip.conf.sample: Better documentation related to IPv6.

2010-08-02 21:28 +0000 [r280629-280673]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, apps/app_voicemail.c: Merged revisions 280672 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r280672 | tilghman | 2010-08-02 16:27:25 -0500
	  (Mon, 02 Aug 2010) | 9 lines Merged revisions 280671 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r280671 | tilghman | 2010-08-02 16:26:11 -0500 (Mon, 02
	  Aug 2010) | 2 lines Allow the pipe, but also allow the comma
	  ........ ................

	* /, main/Makefile: Merged revisions 280628 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r280628 | tilghman | 2010-08-02 09:41:46 -0500 (Mon, 02 Aug 2010)
	  | 2 lines Make this a little more deterministic... we want the
	  latest value, not just a 1 somewhere. ........

2010-08-02 14:30 +0000 [r280627]  David Vossel <dvossel@digium.com>

	* channels/chan_sip.c: if totag is not present for an ACK request,
	  do not send an error response

2010-08-02 14:28 +0000 [r280626]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, main/Makefile: Merged revisions 280624 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r280624 | tilghman | 2010-08-02 09:27:20 -0500 (Mon, 02 Aug 2010)
	  | 2 lines Apparently, the values in makeopts are sometimes 1:1
	  and sometimes 1. Compensate for this. ........

2010-07-30 09:12 +0000 [r280589]  Damien Wedhorn <voip@facts.com.au>

	* channels/chan_skinny.c: Cleanup transmit_ for handle_register and
	  keepalives Moved inline packet sending to transmit_ subs. Removed
	  handle_keep_alive and handle_register_message to inline in
	  handle_message. Also moved transmit_response(d) to
	  transmit_response_bysessions(s) and created a wrapper
	  transmit_response(d) that calls
	  transmit_response_bysession(d->session). (closes issue #16980)
	  Reported by: wedhorn Patches: skinny-clean06b.diff uploaded by
	  wedhorn (license 30) Tested by: wedhorn, DEA Review: NA

2010-07-29 21:08 +0000 [r280559]  Matthew Nicholson <mnicholson@digium.com>

	* /, res/res_fax.c: Merged revisions 280557 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r280557 | mnicholson | 2010-07-29 16:07:21 -0500 (Thu, 29 Jul
	  2010) | 4 lines Fix regression introduced in r1664. Give the fax
	  stack time to shutdown and populate the FAXOPT output variables.
	  FAX-222 ........

2010-07-29 21:06 +0000 [r280555]  Paul Belanger <pabelanger@digium.com>

	* CHANGES, channels/chan_iax2.c: PeerStatus now includes Address
	  and Port (closes issue #17730) Reported by: jkroon Patches:
	  iax2-peerstate-address.patch uploaded by jkroon (license 714)
	  Tested by: lmadsen

2010-07-29 20:44 +0000 [r280553]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c: Merged revisions 280552 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r280552 | dvossel | 2010-07-29 15:43:47 -0500
	  (Thu, 29 Jul 2010) | 17 lines Merged revisions 280551 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r280551 | dvossel | 2010-07-29 15:42:29 -0500 (Thu, 29 Jul 2010)
	  | 11 lines fixes wrong SRV query for TLS connection (closes issue
	  #17612) Reported by: marcelloceschia Patches:
	  chan-sip_srvQuery.patch uploaded by marcelloceschia (license
	  1079) chan-sip_Trunk_srvQuery.patch uploaded by st (license 907)
	  chan-sip_asterisk18b1_srvQuery.patch uploaded by marcelloceschia
	  (license 1079) Tested by: marcelloceschia, st, pabelanger
	  ........ ................

2010-07-29 20:36 +0000 [r280550]  Russell Bryant <russell@digium.com>

	* /, configs/ccss.conf.sample: Merged revisions 280549 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r280549 | russell | 2010-07-29 15:35:30 -0500 (Thu, 29
	  Jul 2010) | 5 lines Add header to ccss.conf to appease oej.
	  (closes issue #17755) Reported by: oej ........

2010-07-29 19:48 +0000 [r280520]  Sean Bright <sean@malleable.com>

	* /, channels/sig_pri.c: Merged revisions 280519 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r280519 | seanbright | 2010-07-29 15:47:16 -0400 (Thu, 29 Jul
	  2010) | 7 lines Fix compilation error in chan_dahdi (strdupa ->
	  ast_strdupa). (closes issue #17751) Reported by: b11d Patches:
	  strdupa_oops.diff uploaded by malcolmd (license 924) ........

2010-07-29 19:35 +0000 [r280459-280518]  David Vossel <dvossel@digium.com>

	* channels/chan_sip.c: respond with 481 when request requiring
	  totag has no totag to match against

	* main/channel.c, /: Merged revisions 280450 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r280450 | dvossel | 2010-07-29 14:13:27 -0500
	  (Thu, 29 Jul 2010) | 25 lines Merged revisions 280449 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r280449 | dvossel | 2010-07-29 14:05:25 -0500
	  (Thu, 29 Jul 2010) | 18 lines Merged revisions 280448 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r280448 | dvossel | 2010-07-29 14:04:23 -0500 (Thu, 29 Jul 2010)
	  | 12 lines fixes issue with translator frame not getting freed A
	  translator frame even if it local storage so the translation path
	  can be freed. This issue prevented g729 licenses from being freed
	  up. (closes issue #17630) Reported by: manvirr Patches:
	  encoder_fix.diff uploaded by dvossel (license 671) Tested by:
	  manvirr, dvossel ........ ................ ................

2010-07-29 18:51 +0000 [r280447]  Paul Belanger <pabelanger@digium.com>

	* /, tests/test_utils.c: Merged revisions 280446 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r280446 | pabelanger | 2010-07-29 14:37:32 -0400 (Thu, 29 Jul
	  2010) | 2 lines Remove res_crypto dependency. ........

2010-07-29 16:47 +0000 [r280416]  Jean Galarneau <jgalarneau@digium.com>

	* /, apps/app_meetme.c: Merged revisions 280346 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r280346 | jeang | 2010-07-29 11:07:16 -0500
	  (Thu, 29 Jul 2010) | 17 lines Merged revisions 280345 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r280345 | jeang | 2010-07-29 11:01:35 -0500
	  (Thu, 29 Jul 2010) | 10 lines Merged revisions 280341 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r280341 | jeang | 2010-07-29 10:52:31 -0500 (Thu, 29 Jul 2010) |
	  2 lines Fix a dsp structure leak occuring when a local channel is
	  put into a meetme conference, then masquaraded away. ABE-2422
	  ........ ................ ................

2010-07-29 16:45 +0000 [r280415]  Paul Belanger <pabelanger@digium.com>

	* /, tests/test_utils.c: Merged revisions 280414 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r280414 | pabelanger | 2010-07-29 12:44:22 -0400 (Thu, 29 Jul
	  2010) | 2 lines crypto_loaded_test depends on res_crypto, else
	  test will fail. ........

2010-07-29 16:26 +0000 [r280395]  Russell Bryant <russell@digium.com>

	* main/rtp_engine.c, /: Merged revisions 280391 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r280391 | russell | 2010-07-29 11:25:43 -0500 (Thu, 29 Jul 2010)
	  | 2 lines Don't blow up if get_codec() was not provided in the
	  RTP glue. ........

2010-07-29 15:58 +0000 [r280308-280344]  Matthew Nicholson <mnicholson@digium.com>

	* channels/chan_usbradio.c, /: Merged revisions 280343 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r280343 | mnicholson | 2010-07-29 10:57:57 -0500 (Thu,
	  29 Jul 2010) | 4 lines Use PRIx64 instead of PRId64 in format
	  string. related to r280302 ........

	* channels/chan_usbradio.c, /: Merged revisions 280302 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r280302 | pabelanger | 2010-07-28 19:45:34 -0500 (Wed,
	  28 Jul 2010) | 2 lines Use PRId64 with format_t ........

	* channels/chan_usbradio.c: Make chan_usbradio.c build on 64bit
	  platforms.

	* main/channel.c, channels/chan_local.c, /: Merged revisions 280307
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r280307 | mnicholson | 2010-07-29 08:56:35 -0500
	  (Thu, 29 Jul 2010) | 11 lines Merged revisions 280306 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r280306 | mnicholson | 2010-07-29 08:45:11 -0500 (Thu, 29 Jul
	  2010) | 2 lines Implement support for ast_channel_queryoption on
	  local channels. Currently only AST_OPTION_T38_STATE is supported.
	  ABE-2229 Review: https://reviewboard.asterisk.org/r/813/ ........
	  Additionally, pass AST_CONTROL_T38_PARAMETERS control frames
	  through generic bridges. This change appears to have been
	  unintentionally left out of rev 203699. ................

2010-07-28 20:50 +0000 [r280270]  Jeff Peeler <jpeeler@digium.com>

	* /, channels/sip/reqresp_parser.c: Merged revisions 280269 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r280269 | jpeeler | 2010-07-28 15:49:26 -0500 (Wed, 28 Jul 2010)
	  | 2 lines Give test category missing leading slash ........

2010-07-28 20:19 +0000 [r280247]  Richard Mudgett <rmudgett@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 280235 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r280235 | rmudgett | 2010-07-28 15:12:16 -0500
	  (Wed, 28 Jul 2010) | 9 lines Merged revisions 280229 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r280229 | rmudgett | 2010-07-28 14:57:49 -0500 (Wed, 28
	  Jul 2010) | 2 lines Add missing enum value "unknown" to the SS7
	  called_nai and calling_nai config options. ........
	  ................

2010-07-28 20:04 +0000 [r280234]  Jason Parker <jparker@digium.com>

	* /, sounds/Makefile: Merged revisions 280233 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r280233 | qwell | 2010-07-28 15:03:22 -0500
	  (Wed, 28 Jul 2010) | 13 lines Merged revisions 280231 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r280231 | qwell | 2010-07-28 15:02:27 -0500 (Wed, 28 Jul 2010) |
	  6 lines Work around some silly behavior on BSD. A non-zero exit
	  from a subshell should make the build fail. (closes issue #17621)
	  ........ ................

2010-07-28 19:37 +0000 [r280226]  Terry Wilson <twilson@digium.com>

	* res/res_rtp_asterisk.c, /: Merged revisions 280225 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r280225 | twilson | 2010-07-28 12:34:42 -0700 (Wed, 28
	  Jul 2010) | 3 lines Do rtp/rtcp debugging when it is turned on
	  w/o filtering ........

2010-07-28 18:25 +0000 [r280196]  Jason Parker <jparker@digium.com>

	* /, sounds/Makefile: Merged revisions 280195 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r280195 | qwell | 2010-07-28 13:24:29 -0500
	  (Wed, 28 Jul 2010) | 16 lines Merged revisions 280193 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r280193 | qwell | 2010-07-28 13:05:54 -0500 (Wed, 28 Jul 2010) |
	  9 lines Remove unnecessary subshells. Attempt to make
	  checksumming work. Also improves readability. (issue #17621)
	  Reported by: bjm Review: https://reviewboard.asterisk.org/r/808/
	  ........ ................

2010-07-28 16:53 +0000 [r280162]  Sean Bright <sean@malleable.com>

	* /, apps/app_queue.c: Merged revisions 280161 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r280161 | seanbright | 2010-07-28 12:52:12 -0400
	  (Wed, 28 Jul 2010) | 15 lines Merged revisions 280160 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r280160 | seanbright | 2010-07-28 12:51:11 -0400 (Wed, 28 Jul
	  2010) | 8 lines Plug a reference leak in app_queue when adding
	  members dynamically. (closes issue #17738) Reported by:
	  bobwienholt Patches: issue17738.patch uploaded by bobwienholt
	  (license 950) Tested by: bobwienholt, seanbright ........
	  ................

2010-07-28 14:14 +0000 [r280093]  Olle Johansson <oej@edvina.net>

	* channels/chan_sip.c: Formatting changes

2010-07-28 13:53 +0000 [r280091]  Leif Madsen <lmadsen@digium.com>

	* contrib/scripts/live_ast, /: Merged revisions 280090 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r280090 | lmadsen | 2010-07-28 08:52:50 -0500
	  (Wed, 28 Jul 2010) | 16 lines Merged revisions 280089 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r280089 | lmadsen | 2010-07-28 08:51:16 -0500
	  (Wed, 28 Jul 2010) | 9 lines Merged revisions 280088 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.4
	  ........ r280088 | lmadsen | 2010-07-28 08:50:38 -0500 (Wed, 28
	  Jul 2010) | 1 line Update help text to be less confusing.
	  ........ ................ ................

2010-07-28 13:02 +0000 [r280059]  Russell Bryant <russell@digium.com>

	* /, res/res_crypto.c: Merged revisions 280058 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r280058 | russell | 2010-07-28 08:01:15 -0500 (Wed, 28 Jul 2010)
	  | 2 lines s/init keys/keys init/ ........

2010-07-28 01:39 +0000 [r280024]  Paul Belanger <pabelanger@digium.com>

	* channels/chan_usbradio.c, /: Merged revisions 280023 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r280023 | pabelanger | 2010-07-27 21:37:10 -0400 (Tue,
	  27 Jul 2010) | 5 lines Resolve compiler warning about formatting
	  (closes issue #17732) Reported by: pabelanger ........

2010-07-27 21:16 +0000 [r279954]  Russell Bryant <russell@digium.com>

	* /, utils, codecs, main/db1-ast/mpool, Makefile.rules, cdr,
	  formats, codecs/gsm/src, bridges, codecs/lpc10, configure,
	  main/editline, channels/sip, pbx, res/ael, channels,
	  main/stdtime, main/editline/np, main/db1-ast/hash, cel, apps,
	  configure.ac, main/db1-ast/db, res/ais, res/snmp, funcs,
	  main/db1-ast/btree, codecs/g722, main, main/db1-ast/recno,
	  makeopts.in, res: Merged revisions 279953 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r279953 | russell | 2010-07-27 16:16:05 -0500 (Tue, 27 Jul 2010)
	  | 5 lines Add --enable-coverage option to configure script. This
	  option enables the proper compiler flags for tracking code
	  coverage, which is useful along side automated testing. ........

2010-07-27 20:59 +0000 [r279951]  David Vossel <dvossel@digium.com>

	* main/channel.c, /, include/asterisk/audiohook.h,
	  main/audiohook.c: Merged revisions 279949 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r279949 | dvossel | 2010-07-27 15:57:00 -0500
	  (Tue, 27 Jul 2010) | 31 lines Merged revisions 279946 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r279946 | dvossel | 2010-07-27 15:54:32 -0500
	  (Tue, 27 Jul 2010) | 24 lines Merged revisions 279945 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r279945 | dvossel | 2010-07-27 15:33:40 -0500 (Tue, 27 Jul 2010)
	  | 19 lines remove empty audiohook write list on channel If a
	  channel has an audiohook write list created on it, that list
	  stays on the channel until the channel is destroyed. There is no
	  reason to keep that list on the channel if it becomes empty. If
	  it is empty that just means we are doing needless translating for
	  every ast_read and ast_write. This patch removes the audiohook
	  list from the channel once it is detected to be empty on either a
	  read or write. If a audiohook is added back to the channel after
	  this list is destroyed, the list just gets recreated as if it
	  never existed to begin with. (closes issue #17630) Reported by:
	  manvirr Review: https://reviewboard.asterisk.org/r/799/ ........
	  ................ ................

2010-07-27 19:55 +0000 [r279917]  Russell Bryant <russell@digium.com>

	* channels/chan_dahdi.c, /, channels/sig_pri.c: Merged revisions
	  279916 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r279916 | russell | 2010-07-27 14:50:56 -0500 (Tue, 27 Jul 2010)
	  | 12 lines Fix inband DTMF detection on outgoing ISDN calls. This
	  is a regression from the sig_pri split from chan_dahdi. When a
	  call is first initiated, the inband DTMF detector is not enabled
	  if it's an outgoing ISDN call. However, it needs to be turned on
	  once the media path starts up. This handling was put back in the
	  open_media() callback of chan_dahdi. In sig_pri, open_media()
	  calls were added to a few places where it was needed, including
	  handling of PRI_EVENT_RINGING, PRI_EVENT_PROGRESS, and
	  PRI_EVENT_PROCEEDING. Thanks to rmudgett for helping me with the
	  patch! ........

2010-07-27 18:55 +0000 [r279888]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 279887 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r279887 | mmichelson | 2010-07-27 13:54:07 -0500 (Tue, 27 Jul
	  2010) | 16 lines Fix parsing error in sip_sipredirect(). The code
	  was written in a way that did a bad job of parsing the port out
	  of a URI. Specifically, it would do badly when dealing with an
	  IPv6 address. In this particular scenario, there was no value
	  from parsing the port out, so I just removed that logic. And
	  while I was messing around in the function, I changed some
	  variable names to be more descriptive. (closes issue #17661)
	  Reported by: oej Patches: 17661.diff uploaded by mmichelson
	  (license 60) ........

2010-07-27 16:41 +0000 [r279851]  Jason Parker <jparker@digium.com>

	* /, sounds/Makefile: Merged revisions 279850 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r279850 | qwell | 2010-07-27 11:40:05 -0500
	  (Tue, 27 Jul 2010) | 9 lines Merged revisions 279849 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r279849 | qwell | 2010-07-27 11:39:16 -0500 (Tue, 27 Jul
	  2010) | 1 line Simply sounds/Makefile some more. ........
	  ................

2010-07-27 16:11 +0000 [r279818]  David Vossel <dvossel@digium.com>

	* main/netsock2.c, /, channels/chan_sip.c: Merged revisions 279817
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r279817 | dvossel | 2010-07-27 11:09:15 -0500 (Tue, 27 Jul 2010)
	  | 2 lines fix sip transaction match with authentication, fix
	  confusing log message when using getaddrinfo ........

2010-07-27 16:08 +0000 [r279816]  Russell Bryant <russell@digium.com>

	* main/channel.c, channels/chan_dahdi.c, /: Merged revisions
	  279636,279815 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r279636 | russell | 2010-07-26 16:53:30 -0500 (Mon, 26 Jul 2010)
	  | 2 lines Ignore a control subclass of -1 in
	  ast_waitfordigit_full(). ........ r279815 | russell | 2010-07-27
	  11:06:58 -0500 (Tue, 27 Jul 2010) | 4 lines Support "channels" in
	  addition to "channel" in chan_dahdi.conf. Review:
	  https://reviewboard.asterisk.org/r/804 ........

2010-07-27 15:16 +0000 [r279786]  Mark Michelson <mmichelson@digium.com>

	* /, channels/chan_sip.c: Merged revisions 279785 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r279785 | mmichelson | 2010-07-27 10:15:22 -0500
	  (Tue, 27 Jul 2010) | 20 lines Merged revisions 279784 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r279784 | mmichelson | 2010-07-27 10:13:24 -0500 (Tue, 27 Jul
	  2010) | 14 lines Fix bad behavior of dynamic_exclude_static
	  option in sip.conf. We were attempting to create a contactdeny
	  rule based on the peer's IP address before the peer's IP address
	  had been set. By moving the processing further down in the
	  function, we can ensure stuff works as we expect for it to.
	  (closes issue #17717) Reported by: mmichelson Patches:
	  17717.patch uploaded by mmichelson (license 60) Tested by:
	  DennisD ........ ................

2010-07-27 03:02 +0000 [r279727-279756]  Paul Belanger <pabelanger@digium.com>

	* channels/chan_dahdi.c, /: Merged revisions 279755 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r279755 | pabelanger | 2010-07-26 22:57:33 -0400 (Mon,
	  26 Jul 2010) | 10 lines If dringXcontext is null, fallback to
	  default context value. (closes issue #17693) Reported by:
	  iasgoscouk Patches: issue17693.patch uploaded by pabelanger
	  (license 224) Tested by: iasgoscouk Review:
	  https://reviewboard.asterisk.org/r/803/ ........

	* /, main/http.c: Merged revisions 279726 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r279726 | pabelanger | 2010-07-26 21:53:38 -0400 (Mon, 26 Jul
	  2010) | 9 lines Use ast_sockaddr_setnull() when http is not
	  enabled. Otherwise, ast_tcptls_server_start() will still start
	  http. (closes issue #17708) Reported by: pabelanger Patches:
	  http.patch uploaded by pabelanger (license 224) ........

2010-07-27 01:39 +0000 [r279725]  Russell Bryant <russell@digium.com>

	* CHANGES: Make a formatting change. (Demonstrating the commit IRC
	  bot to pabelanger)

2010-07-26 23:35 +0000 [r279692]  Paul Belanger <pabelanger@digium.com>

	* /, CHANGES, UPGRADE-1.8.txt: Merged revisions 279689 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r279689 | pabelanger | 2010-07-26 19:29:34 -0400 (Mon,
	  26 Jul 2010) | 2 lines Updated documentation for FAX logger
	  level. ........

2010-07-26 23:06 +0000 [r279659]  Jason Parker <jparker@digium.com>

	* /, sounds/Makefile.380 (removed), configure,
	  include/asterisk/autoconfig.h.in, sounds/Makefile.381 (removed),
	  configure.ac, sounds/Makefile (added): Merged revisions 279658
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r279658 | qwell | 2010-07-26 18:03:38 -0500
	  (Mon, 26 Jul 2010) | 12 lines Merged revisions 279657 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r279657 | qwell | 2010-07-26 17:59:52 -0500 (Mon, 26 Jul 2010) |
	  5 lines Really fix sounds Makefile (and make it readableish).
	  There was a rather large syntax error that should have caused ALL
	  versions of GNU make to fail. I don't know how it worked.
	  ........ ................

2010-07-26 21:21 +0000 [r279602-279624]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, configure, configure.ac: Merged revisions 279619 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r279619 | tilghman | 2010-07-26 16:20:12 -0500
	  (Mon, 26 Jul 2010) | 9 lines Merged revisions 279609 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r279609 | tilghman | 2010-07-26 16:18:17 -0500 (Mon, 26
	  Jul 2010) | 2 lines Dunno why this worked on my machine, but it
	  works better this way. ........ ................

	* /, res/res_config_ldap.c: Merged revisions 279601 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r279601 | tilghman | 2010-07-26 16:07:45 -0500
	  (Mon, 26 Jul 2010) | 19 lines Merged revisions 279597 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r279597 | ghenry | 2010-07-26 15:25:54 -0500 (Mon, 26 Jul 2010) |
	  13 lines Apply all patches in:
	  https://issues.asterisk.org/view.php?id=13573 (closes issue
	  #13573) Reported by: navkumar Patches:
	  res_config_ldap-category.diff uploaded by navkumar (license 580)
	  res_config_ldap.patch uploaded by bencer (license 961)
	  res_config_ldap uploaded by bencer (license 961) Tested by:
	  suretec ........ ................

2010-07-26 21:07 +0000 [r279600]  Gavin Henry <ghenry@suretecsystems.com>

	* /: Merged revisions 279598 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r279598 | ghenry | 2010-07-26 21:58:12 +0100 (Mon, 26 Jul 2010) |
	  21 lines Merged revisions 279597 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/1.6.2
	  -----------------------------------------------------------------------
	  r279597 | ghenry | 2010-07-26 15:25:53 -0500 (Mon, 26 Jul 2010) |
	  13 lines Apply all patches in:
	  https://issues.asterisk.org/view.php?id=13573 [^] (closes issue
	  0013573) Reported by: navkumar Patches:
	  res_config_ldap-category.diff uploaded by navkumar (license 580)
	  res_config_ldap.patch uploaded by bencer (license 961)
	  res_config_ldap uploaded by bencer (license 961) Tested by:
	  suretec
	  ------------------------------------------------------------------------
	  ........

2010-07-26 20:00 +0000 [r279569]  David Vossel <dvossel@digium.com>

	* /, channels/chan_sip.c, channels/sip/reqresp_parser.c,
	  channels/sip/include/sip.h,
	  channels/sip/include/reqresp_parser.h: Merged revisions 279568
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r279568 | dvossel | 2010-07-26 14:59:03 -0500 (Mon, 26 Jul 2010)
	  | 21 lines transaction matching using top most Via header This
	  patch modifies the way chan_sip.c does transaction to dialog
	  matching. Asterisk now stores information in the top most Via
	  header of the initial incoming request and compares that against
	  other Requests that have the same call-id. This results in
	  Asterisk being able to detect a forked call in which it has
	  received multiple legs of the fork. I completely stripped out the
	  previous matching code and made the comparisons a little more
	  explicit and easier to understand. My comments in the code should
	  offer all the details involving this patch. This patch also fixes
	  a bug with the usage of the OBJ-MULTIPLE flag to find multiple
	  dialogs with the same call-id. Since the callback function was
	  returning (CMP_MATCH | CMP_STOP) only the first item found was
	  being returned. I fixed this by making a new callback function
	  for finding multiple dialogs that only returns (CMP_MATCH) on a
	  match allowing for multiple items to be returned. Review:
	  https://reviewboard.asterisk.org/r/776/ ........

2010-07-26 19:58 +0000 [r279567]  Paul Belanger <pabelanger@digium.com>

	* /, CHANGES, UPGRADE-1.8.txt, configs/logger.conf.sample: Merged
	  revisions 279566 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r279566 | pabelanger | 2010-07-26 15:51:39 -0400 (Mon, 26 Jul
	  2010) | 8 lines Add documentation for FAX logger level. (closes
	  issue #17715) Reported by: vrban Patches: 17715.patch uploaded by
	  pabelanger (license 224) Tested by: vrban ........

2010-07-26 19:20 +0000 [r279564]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, sounds/Makefile.380 (added), configure,
	  include/asterisk/autoconfig.h.in, sounds/Makefile.381 (added),
	  configure.ac, sounds/Makefile (removed): Merged revisions 279562
	  via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r279562 | tilghman | 2010-07-26 14:18:26 -0500
	  (Mon, 26 Jul 2010) | 9 lines Merged revisions 279561 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ........ r279561 | tilghman | 2010-07-26 14:15:59 -0500 (Mon, 26
	  Jul 2010) | 2 lines Use a special Makefile for noobs who still
	  have GNU Make 3.80. ........ ................

2010-07-26 16:44 +0000 [r279533]  Mark Michelson <mmichelson@digium.com>

	* /, configure, include/asterisk/autoconfig.h.in, configure.ac,
	  channels/sip/reqresp_parser.c: Merged revisions 279504 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r279504 | mmichelson | 2010-07-26 11:04:09 -0500 (Mon, 26 Jul
	  2010) | 14 lines Allow for systems without locale support to be
	  usable. A recent change to SIP URI comparison code added a
	  locale-specific string comparison to the mix, and certain systems
	  do not support such functions. This fix allows for those systems
	  to still use Asterisk 1.8 (closes issue #17697) Reported by:
	  pprindeville Patches: asterisk-trunk-bugid17697.patch uploaded by
	  pprindeville (license 347) Tested by: mmichelson ........

2010-07-26 15:44 +0000 [r279503]  Sean Bright <sean@malleable.com>

	* /, autoconf/ast_ext_lib.m4: Merged revisions 279502 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r279502 | seanbright | 2010-07-26 11:43:54 -0400
	  (Mon, 26 Jul 2010) | 12 lines Merged revisions 279501 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2 ........
	  r279501 | seanbright | 2010-07-26 11:41:13 -0400 (Mon, 26 Jul
	  2010) | 5 lines Expand the correct value within AST_OPTION_ONLY.
	  (closes issue #17703) Reported by: stuarth ........
	  ................

2010-07-26 03:28 +0000 [r279473]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, formats/format_sln.c, formats/format_wav.c,
	  formats/format_ogg_vorbis.c, formats/format_wav_gsm.c,
	  formats/format_sln16.c, formats/format_siren7.c,
	  formats/format_ilbc.c, formats/format_vox.c,
	  formats/format_pcm.c, formats/format_h263.c,
	  formats/format_g723.c, formats/format_h264.c,
	  formats/format_siren14.c, formats/format_jpeg.c,
	  formats/format_g726.c, formats/format_gsm.c,
	  formats/format_g719.c, formats/format_g729.c: Merged revisions
	  279472 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r279472 | tilghman | 2010-07-25 22:27:06 -0500 (Sun, 25 Jul 2010)
	  | 2 lines Formats need to load before apps, because some apps
	  call ast_format_str_reduce() at load time. ........

2010-07-25 21:28 +0000 [r279443]  Paul Belanger <pabelanger@digium.com>

	* /, tests/test_func_file.c: Merged revisions 279442 via svnmerge
	  from https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ........ r279442 | pabelanger | 2010-07-25 17:26:42 -0400 (Sun,
	  25 Jul 2010) | 2 lines Add trailing backslash to silence warning
	  message. ........

2010-07-25 18:22 +0000 [r279391-279413]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, cdr/cdr_odbc.c: Merged revisions 279410 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r279410 | tilghman | 2010-07-25 13:21:27 -0500 (Sun, 25 Jul 2010)
	  | 8 lines Don't re-register CDR module on reload. (closes issue
	  #17304) Reported by: jnemeth Patches:
	  20100507__issue17304.diff.txt uploaded by tilghman (license 14)
	  Tested by: jnemeth ........

	* /, main/logger.c: Merged revisions 279390 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r279390 | tilghman | 2010-07-25 12:32:21 -0500 (Sun, 25 Jul 2010)
	  | 8 lines Don't assume qlog is open. (closes issue #17704)
	  Reported by: vrban Patches: issue17704.patch uploaded by
	  pabelanger (license 224) Tested by: vrban ........

2010-07-24 20:49 +0000 [r279274-279315]  Paul Belanger <pabelanger@digium.com>

	* Makefile, /: Merged revisions 279314 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r279314 | pabelanger | 2010-07-24 16:47:52 -0400 (Sat, 24 Jul
	  2010) | 7 lines Remove duplicate -c flag when using $(INSTALL)
	  (closes issue #17695) Reported by: pabelanger Patches:
	  Makefile.diff uploaded by pabelanger (license 224) ........

	* /, include/asterisk/netsock2.h: Merged revisions 279280 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r279280 | pabelanger | 2010-07-24 14:18:43 -0400 (Sat, 24 Jul
	  2010) | 8 lines Check if ast_sockaddr is NULL then return.
	  (closes issue #17677) Reported by: outcast Patches:
	  issue0017677.patch uploaded by pabelanger (license 224) Tested
	  by: elguero ........

	* main/manager.c, /: Merged revisions 279273 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r279273 | pabelanger | 2010-07-24 13:36:42 -0400 (Sat, 24 Jul
	  2010) | 6 lines Default sin_family to AF_INET for TCP / TLS
	  Bindaddress. Otherwise, 'manager show settings' will generate
	  errors if manager is not enabled. ........

2010-07-23 22:24 +0000 [r279156-279245]  Richard Mudgett <rmudgett@digium.com>

	* apps/app_dial.c, /, apps/app_queue.c: Merged revisions 279227 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8
	  ................ r279227 | rmudgett | 2010-07-23 17:20:47 -0500
	  (Fri, 23 Jul 2010) | 21 lines Merged revisions 279207 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.6.2
	  ................ r279207 | rmudgett | 2010-07-23 17:11:23 -0500
	  (Fri, 23 Jul 2010) | 14 lines Merged revisions 279206 via
	  svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.4 ........
	  r279206 | rmudgett | 2010-07-23 16:56:44 -0500 (Fri, 23 Jul 2010)
	  | 7 lines SIP promiscuous redirect could fail to dial the
	  redirect. The ast_channel was created with one variable to
	  ast_request() but the call to ast_call() that initiates the
	  outgoing call was using a different variable. The two variables
	  are not equivalent if the call_forward string included a channel
	  technology specifier. e.g., SIP/200 ........ ................
	  ................

	* channels/chan_dahdi.c: Make "dahdi show channels" show an
	  outgoing called number. The "dahdi show channels" extension
	  column previously only showed the called number of an incoming
	  call. It now shows the called number for an outgoing call as
	  well. (closes issue #17653) Reported by: amazinzay Patches:
	  issue17653_trunk.txt uploaded by rmudgett (license 664)

2010-07-23 19:17 +0000 [r279116-279118]  Russell Bryant <russell@digium.com>

	* UPGRADE.txt, UPGRADE-1.8.txt (added): Shuffle UPGRADE.txt files
	  for 1.10.

	* CHANGES: Start a new section in CHANGES for 1.10.

2010-07-23 18:56 +0000 [r279115]  Tilghman Lesher <tilghman@meg.abyt.es>

	* /, res/res_odbc.c: Merged revisions 279113 via svnmerge from
	  https://origsvn.digium.com/svn/asterisk/branches/1.8 ........
	  r279113 | tilghman | 2010-07-23 13:56:04 -0500 (Fri, 23 Jul 2010)
	  | 2 lines Silly 64-bit compilers (who uses 64-bit anyway?)
	  ........

2010-07-23 18:22 +0000 [r279063-279084]  Russell Bryant <russell@digium.com>

	* /: Remove old properties.

	* /: Add branch-1.8-merged and branch-1.8-blocked properties to
	  trunk.

